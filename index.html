<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">

  <!-- PACE Progress Bar START -->
  
    <script src="https://raw.githubusercontent.com/HubSpot/pace/v1.0.2/pace.min.js"></script>
    <link rel="stylesheet" href="https://github.com/HubSpot/pace/raw/master/themes/orange/pace-theme-flash.css">
  
  

  <!-- PACE Progress Bar START -->

  
  <title>onmyway133</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  
  
  
  <meta name="description" content="What you don&apos;t know is what you haven&apos;t learned">
<meta name="keywords" content="ios, android,javascript, react">
<meta property="og:type" content="website">
<meta property="og:title" content="onmyway133">
<meta property="og:url" content="https://onmyway133.github.io/index.html">
<meta property="og:site_name" content="onmyway133">
<meta property="og:description" content="What you don&apos;t know is what you haven&apos;t learned">
<meta property="og:locale" content="en">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="onmyway133">
<meta name="twitter:description" content="What you don&apos;t know is what you haven&apos;t learned">
  
    <link rel="alternate" href="/atom.xml" title="onmyway133" type="application/atom+xml">
  
  <link rel="icon" href="/favicon.ico">
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link href="https://fonts.googleapis.com/css?family=Open+Sans|Montserrat:700" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Roboto:400,300,300italic,400italic" rel="stylesheet" type="text/css">
  <link href="https://cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">
  <style type="text/css">
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/9749f0/00000000000000000001008f/27/l?subset_id=2&fvd=n5) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/90cf9f/000000000000000000010091/27/l?subset_id=2&fvd=n7) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/8a5494/000000000000000000013365/27/l?subset_id=2&fvd=n4) format("woff2");font-weight:lighter;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/d337d8/000000000000000000010095/27/l?subset_id=2&fvd=i4) format("woff2");font-weight:400;font-style:italic;}</style>
    
  <link rel="stylesheet" id="athemes-headings-fonts-css" href="//fonts.googleapis.com/css?family=Yanone+Kaffeesatz%3A200%2C300%2C400%2C700&amp;ver=4.6.1" type="text/css" media="all">
  <link rel="stylesheet" href="/css/style.css">

  <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>

  <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.0.2/css/bootstrap.min.css">
  <link rel="stylesheet" href="/css/hiero.css">
  <link rel="stylesheet" href="/css/glyphs.css">
  

  <!-- Custom CSS -->
  <link rel="stylesheet" href="/css/my.css">
  <!-- Google Adsense -->
  
</head>
</html>
<script>
var themeMenus = {};

  themeMenus["/"] = "Home"; 

  themeMenus["/about/"] = "About"; 

  themeMenus["/writing/"] = "writing"; 

  themeMenus["/archives"] = "Archives"; 

  themeMenus["/speaking/"] = "speaking"; 

  themeMenus["/opensource/"] = "open source"; 

  themeMenus["/projects/"] = "projects"; 

  themeMenus["/news/"] = "news"; 

  themeMenus["/gumroad/"] = "gumroad"; 

  themeMenus["/atom.xml"] = "rss"; 

</script>


  <body>


  <header id="allheader" class="site-header" role="banner">
  <div class="clearfix container">
      <div class="site-branding">

          <h1 class="site-title">
            
              <a href="/" title="onmyway133" rel="home"> onmyway133 </a>
            
          </h1>

          
            <div class="site-description">What you don&#39;t know is what you haven&#39;t learned</div>
          
            
          <nav id="main-navigation" class="main-navigation" role="navigation">
            <a class="nav-open">Menu</a>
            <a class="nav-close">Close</a>
            <div class="clearfix sf-menu">

              <ul id="main-nav" class="nmenu sf-js-enabled">
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/">Home</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/about/">About</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/writing/">writing</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/archives">Archives</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/speaking/">speaking</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/opensource/">open source</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/projects/">projects</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/news/">news</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/gumroad/">gumroad</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/atom.xml">rss</a> </li>
                    
              </ul>
            </div>
          </nav>


      </div>
  </div>
</header>


  <div id="originBgDiv" style="background: #fff; width: 100%;">

      <div style="max-height:600px; overflow: hidden;  display: flex; display: -webkit-flex; align-items: center;">
        <img id="originBg" width="100%" alt="" src="">
      </div>

  </div>

  <script>
  function setAboutIMG(){
      var imgUrls = "css/images/pose.jpg,https://avatars1.githubusercontent.com/u/2284279?s=460&v=4".split(",");
      var random = Math.floor((Math.random() * imgUrls.length ));
      if (imgUrls[random].startsWith('http') || imgUrls[random].indexOf('://') >= 0) {
        document.getElementById("originBg").src=imgUrls[random];
      } else {
        document.getElementById("originBg").src='/' + imgUrls[random];
      }
  }
  bgDiv=document.getElementById("originBgDiv");
  if(location.pathname.match('about')){
    setAboutIMG();
    bgDiv.style.display='block';
  }else{
    bgDiv.style.display='none';
  }
  </script>



  <div id="container">
    <div id="wrap">
            
      <div id="content" class="outer">
        
          <section id="main">
  
    <article id="post-How-to-use-Firebase-RemoteConfig"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-use-Firebase-RemoteConfig/">How to use Firebase RemoteConfig</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-use-Firebase-RemoteConfig/" class="article-date">
	  <time datetime="2019-11-05T12:13:25.000Z" itemprop="datePublished">November 5, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/493" target="_blank" rel="noopener">#493</a></strong></p>
<p>Declare in Podfile</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pod <span class="string">'Firebase/Core'</span></span><br><span class="line">pod <span class="string">'Firebase/RemoteConfig'</span></span><br></pre></td></tr></table></figure>

<p>Use <code>RemoteConfigHandler</code> to encapsulate logic. We introduce <code>Key</code> with <code>CaseIterable</code> and <code>defaultValue</code> of type <code>NSNumber</code> to manage default values.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Firebase</span><br><span class="line"><span class="keyword">import</span> FirebaseRemoteConfig</span><br><span class="line"></span><br><span class="line"><span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">RemoteConfigHandler</span> </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> remoteConfig: <span class="type">RemoteConfig</span></span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">enum</span> <span class="title">Key</span>: <span class="title">String</span>, <span class="title">CaseIterable</span> </span>&#123;</span><br><span class="line">        <span class="keyword">case</span> interval = <span class="string">"fetch_interval"</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> defaultValue: <span class="type">NSNumber</span> &#123;</span><br><span class="line">            <span class="keyword">switch</span> <span class="keyword">self</span> &#123;</span><br><span class="line">            <span class="keyword">case</span> .periodicGetSalons: <span class="keyword">return</span> <span class="type">NSNumber</span>(value: <span class="number">300</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">init</span>() &#123;</span><br><span class="line">        <span class="keyword">self</span>.remoteConfig = <span class="type">RemoteConfig</span>.remoteConfig()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> settings = <span class="type">RemoteConfigSettings</span>()</span><br><span class="line">        settings.minimumFetchInterval = <span class="number">0</span></span><br><span class="line">        <span class="keyword">self</span>.remoteConfig.configSettings = settings</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> <span class="built_in">map</span> = <span class="type">Key</span>.allCases.<span class="built_in">reduce</span>([<span class="type">String</span>: <span class="type">NSObject</span>](), &#123; <span class="built_in">map</span>, key <span class="keyword">in</span></span><br><span class="line">            <span class="keyword">var</span> <span class="built_in">map</span> = <span class="built_in">map</span></span><br><span class="line">            <span class="built_in">map</span>[key.rawValue] = key.defaultValue</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">map</span></span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">self</span>.remoteConfig.setDefaults(<span class="built_in">map</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">update</span><span class="params">()</span></span>  &#123;</span><br><span class="line">        <span class="keyword">self</span>.remoteConfig.fetchAndActivate(completionHandler: &#123; status, error <span class="keyword">in</span></span><br><span class="line">            <span class="built_in">print</span>(status, error <span class="keyword">as</span> <span class="type">Any</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> fetchInterval: <span class="type">TimeInterval</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> getValue(key: .interval, transform: &#123; $<span class="number">0</span>.doubleValue &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">getValue</span>&lt;T&gt;<span class="params">(key: Key, transform: <span class="params">(NSNumber)</span></span></span> -&gt; <span class="type">T</span>) -&gt; <span class="type">T</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> number = remoteConfig.configValue(forKey: key.rawValue).numberValue ?? key.defaultValue</span><br><span class="line">        <span class="keyword">return</span> transform(number)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/firebase/">firebase</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swift/">swift</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-apply-translations-to-Localizable.strings"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-apply-translations-to-Localizable.strings/">How to apply translations to Localizable.strings</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-apply-translations-to-Localizable.strings/" class="article-date">
	  <time datetime="2019-11-05T08:35:11.000Z" itemprop="datePublished">November 5, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/492" target="_blank" rel="noopener">#492</a></strong></p>
<p>Suppose we have a base Localizable.strings</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&quot;open&quot; = &quot;Open&quot;;</span><br><span class="line">&quot;closed&quot; = &quot;Closed&quot;;</span><br></pre></td></tr></table></figure>

<p>After sending that file for translations, we get translated versions.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&quot;open&quot; = &quot;Åpen&quot;;</span><br><span class="line">&quot;closed&quot; = &quot;Stengt&quot;;</span><br></pre></td></tr></table></figure>

<p>Searching and copy pasting these to our Localizable.strings is tedious and time consuming. We can write a script to apply that.</p>
<p>Remember that we need to be aware of smart and dump quotes</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">.replace(<span class="regexp">/\"/g</span>, <span class="string">''</span>)</span><br><span class="line">.replace(<span class="regexp">/\"/g</span>, <span class="string">''</span>)</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> originalFile = <span class="string">'MyApp/Resources/nb.lproj/Localizable.strings'</span></span><br><span class="line"><span class="keyword">const</span> translationString = <span class="string">`</span></span><br><span class="line"><span class="string">"open" = "Åpen";</span></span><br><span class="line"><span class="string">"closed" = "Stengt";</span></span><br><span class="line"><span class="string">`</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Translation</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(key, value) &#123;</span><br><span class="line">        <span class="keyword">this</span>.key = key</span><br><span class="line">        <span class="keyword">this</span>.value = value</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Translation.make = <span class="function"><span class="keyword">function</span> <span class="title">make</span>(<span class="params">line</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!line.endsWith(<span class="string">';'</span>)) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Translation(<span class="string">''</span>, <span class="string">''</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> parts = line</span><br><span class="line">        .replace(<span class="string">';'</span>)</span><br><span class="line">        .split(<span class="string">" = "</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> key = parts[<span class="number">0</span>]</span><br><span class="line">        .replace(<span class="regexp">/\"/g</span>, <span class="string">''</span>)</span><br><span class="line">        .replace(<span class="regexp">/\”/g</span>, <span class="string">''</span>)</span><br><span class="line">    <span class="keyword">const</span> value = parts[<span class="number">1</span>]</span><br><span class="line">        .replace(<span class="regexp">/\"/g</span>, <span class="string">''</span>)</span><br><span class="line">        .replace(<span class="regexp">/\”/g</span>, <span class="string">''</span>)</span><br><span class="line">        .replace(<span class="string">'undefined'</span>, <span class="string">''</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Translation(key, value)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">main</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> translations = translationString</span><br><span class="line">        .split(<span class="regexp">/\r?\n/</span>)</span><br><span class="line">        .map(<span class="function">(<span class="params">line</span>) =&gt;</span> &#123; <span class="keyword">return</span> Translation.make(line) &#125;)</span><br><span class="line"></span><br><span class="line">    apply(translations, originalFile)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">apply</span>(<span class="params">translations, originalFile</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> originalData = fs.readFileSync(originalFile, <span class="string">'utf8'</span>)</span><br><span class="line">        <span class="keyword">const</span> originalLines = originalData.split(<span class="regexp">/\r?\n/</span>)</span><br><span class="line">        <span class="keyword">const</span> parsedLine = originalLines.map(<span class="function">(<span class="params">originalLine</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">const</span> originalTranslation = Translation.make(originalLine)</span><br><span class="line">            <span class="keyword">const</span> find = translations.find(<span class="function">(<span class="params">translation</span>) =&gt;</span> &#123; <span class="keyword">return</span> translation.key === originalTranslation.key &#125;)</span><br><span class="line">            <span class="keyword">if</span> (originalLine !== <span class="string">""</span> &amp;&amp; find !== <span class="literal">undefined</span> &amp;&amp;  find.key !== <span class="string">""</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="string">`"<span class="subst">$&#123;find.key&#125;</span>" = "<span class="subst">$&#123;find.value&#125;</span>";`</span></span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> originalLine</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">const</span> parsedData = parsedLine.join(<span class="string">'\n'</span>)</span><br><span class="line">        fs.writeFileSync(originalFile, parsedData, &#123; <span class="attr">overwrite</span>: <span class="literal">true</span> &#125;)</span><br><span class="line">    &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">        <span class="built_in">console</span>.error(err)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">main()</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/">javascript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/node/">node</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/script/">script</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-use-CreateML-to-classify-images"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-use-CreateML-to-classify-images/">How to use CreateML to classify images</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-use-CreateML-to-classify-images/" class="article-date">
	  <time datetime="2019-11-04T12:14:50.000Z" itemprop="datePublished">November 4, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/491" target="_blank" rel="noopener">#491</a></strong></p>
<img width="832" alt="createml" src="https://user-images.githubusercontent.com/2284279/68123467-4774b780-ff0d-11e9-9ac1-5ab2b21b5dc4.png">
<img width="1403" alt="createml data" src="https://user-images.githubusercontent.com/2284279/68123468-480d4e00-ff0d-11e9-80e5-6c3e8f8d92b3.png">
<img width="1403" alt="createml train" src="https://user-images.githubusercontent.com/2284279/68127306-e7364380-ff15-11e9-88e2-5f6d880df186.png">

<h2 id="CreateMLUI-Playground"><a href="#CreateMLUI-Playground" class="headerlink" title="CreateMLUI Playground"></a>CreateMLUI Playground</h2><img width="1680" alt="create ml ui" src="https://user-images.githubusercontent.com/2284279/68127301-e1d8f900-ff15-11e9-9b1e-3c8c3aeeb28b.png">

<h2 id="Read-more"><a href="#Read-more" class="headerlink" title="Read more"></a>Read more</h2><ul>
<li><a href="https://developer.apple.com/documentation/createml/creating_an_image_classifier_model" target="_blank" rel="noopener">https://developer.apple.com/documentation/createml/creating_an_image_classifier_model</a></li>
<li><a href="https://captechconsulting.com/blogs/hands-on-with-the-all-new-create-ml-app-machine-learning-for-the-masses" target="_blank" rel="noopener">https://captechconsulting.com/blogs/hands-on-with-the-all-new-create-ml-app-machine-learning-for-the-masses</a></li>
<li><a href="https://developer.apple.com/videos/play/wwdc2019/425/" target="_blank" rel="noopener">Training Sound Classification Models in Create ML - WWDC 2019</a></li>
<li><a href="https://developer.apple.com/videos/play/wwdc2019/426/" target="_blank" rel="noopener">Building Activity Classification Models in Create ML - WWDC 2019</a></li>
<li><a href="https://www.youtube.com/watch?v=a905KIBw1hs" target="_blank" rel="noopener">Create ML for Everyone</a></li>
</ul>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/machine-learning/">machine learning</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-use-Firebase-AutoML-Vision-Edge-to-classify-images"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-use-Firebase-AutoML-Vision-Edge-to-classify-images/">How to use Firebase AutoML Vision Edge to classify images</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-use-Firebase-AutoML-Vision-Edge-to-classify-images/" class="article-date">
	  <time datetime="2019-11-04T11:41:41.000Z" itemprop="datePublished">November 4, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/490" target="_blank" rel="noopener">#490</a></strong></p>
<h2 id="Create-project-on-Firebase-and-choose-Vision-Edge"><a href="#Create-project-on-Firebase-and-choose-Vision-Edge" class="headerlink" title="Create project on Firebase and choose Vision Edge"></a>Create project on Firebase and choose Vision Edge</h2><p>Vision Edge is part of MLKit, but for custom images training</p>
<p><a href="https://console.firebase.google.com/u/0/project/avengers-ad2ce/ml/" target="_blank" rel="noopener">https://console.firebase.google.com/u/0/project/avengers-ad2ce/ml/</a></p>
<img width="1527" alt="firebase vision edge" src="https://user-images.githubusercontent.com/2284279/68121743-cb787080-ff08-11e9-8fbf-bc3734e833e3.png">

<img width="1527" alt="firebase dataset" src="https://user-images.githubusercontent.com/2284279/68121742-cb787080-ff08-11e9-83a6-345d79126542.png">

<blockquote>
<p>Model Avengers_dataset_2019114133437 is training and may take several hours. You will receive an email once training is complete.</p>
</blockquote>
<img width="1403" alt="firebase evaluation" src="https://user-images.githubusercontent.com/2284279/68123651-e0a3ce00-ff0d-11e9-9264-33bb1a475e53.png">

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/cloud/">cloud</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/firebase/">firebase</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-use-Google-AutoML-to-classify-images"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-use-Google-AutoML-to-classify-images/">How to use Google AutoML to classify images</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-use-Google-AutoML-to-classify-images/" class="article-date">
	  <time datetime="2019-11-04T11:40:28.000Z" itemprop="datePublished">November 4, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/489" target="_blank" rel="noopener">#489</a></strong></p>
<h2 id="Create-bucket-on-Google-Cloud-Storage"><a href="#Create-bucket-on-Google-Cloud-Storage" class="headerlink" title="Create bucket on Google Cloud Storage"></a>Create bucket on Google Cloud Storage</h2><p><a href="https://console.cloud.google.com/storage" target="_blank" rel="noopener">https://console.cloud.google.com/storage</a></p>
<img width="1674" alt="cloud storage" src="https://user-images.githubusercontent.com/2284279/68121645-8d7b4c80-ff08-11e9-93f6-56c6b3f46f41.png">

<h2 id="Create-dataset-by-uploading-images-to-Google-AutoML-Vision"><a href="#Create-dataset-by-uploading-images-to-Google-AutoML-Vision" class="headerlink" title="Create dataset by uploading images to Google AutoML Vision"></a>Create dataset by uploading images to Google AutoML Vision</h2><p><a href="https://console.cloud.google.com/vision" target="_blank" rel="noopener">https://console.cloud.google.com/vision</a></p>
<img width="1239" alt="automl dataset" src="https://user-images.githubusercontent.com/2284279/68121669-9ff58600-ff08-11e9-95e0-20c6fa8e9cfa.png">

<img width="1675" alt="automl images" src="https://user-images.githubusercontent.com/2284279/68121894-404baa80-ff09-11e9-97ff-a2cd61167d38.png">

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/cloud/">cloud</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/machine-learning/">machine learning</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-get-Binding-via-dollar-prefix-in-SwiftUI"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-get-Binding-via-dollar-prefix-in-SwiftUI/">How to get Binding via dollar prefix in SwiftUI</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-get-Binding-via-dollar-prefix-in-SwiftUI/" class="article-date">
	  <time datetime="2019-11-02T22:46:18.000Z" itemprop="datePublished">November 2, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/488" target="_blank" rel="noopener">#488</a></strong></p>
<p>The dollar is not a prefix, it seems to be a generated code for property wrapper, and each kind of property wrapper can determine which value it return via this dollar sign</p>
<p><code>State</code> and <code>ObservedObject</code> are popular property wrappers in SwiftUI</p>
<h2 id="State"><a href="#State" class="headerlink" title="State"></a>State</h2><p>Read <a href="https://developer.apple.com/documentation/swiftui/state" target="_blank" rel="noopener">State</a></p>
<blockquote>
<p>A persistent value of a given type, through which a view reads and monitors the value.</p>
</blockquote>
<p>If we have a simple State, we can access its 3 forms</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@<span class="type">State</span> <span class="keyword">private</span> <span class="keyword">var</span> image: <span class="type">UIImage</span></span><br></pre></td></tr></table></figure>

<p>and here is what </p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">image <span class="comment">// UIImage</span></span><br><span class="line">_image <span class="comment">// State&lt;UIImage&gt;</span></span><br><span class="line">$image <span class="comment">// Binding&lt;UIImage&gt;</span></span><br></pre></td></tr></table></figure>

<p>Also, with State, we can access <code>Binding</code> via <code>projectedValue</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">_image.projectedValue // Binding&lt;UIImage&gt;</span><br></pre></td></tr></table></figure>

<h2 id="ObservableObject"><a href="#ObservableObject" class="headerlink" title="ObservableObject"></a>ObservableObject</h2><p>Read <a href="https://developer.apple.com/documentation/swiftui/observedobject" target="_blank" rel="noopener">ObservedObject</a></p>
<p>For a simple <code>ObservableObject</code>, we can see its 3 forms</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ViewModel</span>: <span class="title">ObservableObject</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> objectWillChange = <span class="type">ObservableObjectPublisher</span>()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> image: <span class="type">UIImage?</span> &#123;</span><br><span class="line">        <span class="keyword">didSet</span> &#123;</span><br><span class="line">            objectWillChange.send()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@<span class="type">ObservedObject</span> <span class="keyword">var</span> viewModel: <span class="type">ViewModel</span> = <span class="type">ViewModel</span>()</span><br></pre></td></tr></table></figure>

<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">viewModel <span class="comment">// ViewModel</span></span><br><span class="line">_viewModel <span class="comment">// ObservedObject&lt;ViewModel&gt;</span></span><br><span class="line">$viewModel <span class="comment">// ObservedObject&lt;ViewModel&gt;.Wrapper</span></span><br></pre></td></tr></table></figure>

<p>If we view the source code of <code>ObservableObject</code>, we can see its <code>Wrapper</code> which uses <code>dynamicMemberLookup</code> to provide <code>Binding</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">@propertyWrapper <span class="keyword">public</span> <span class="class"><span class="keyword">struct</span> <span class="title">ObservedObject</span>&lt;<span class="title">ObjectType</span>&gt; : <span class="title">DynamicProperty</span> <span class="title">where</span> <span class="title">ObjectType</span> : <span class="title">ObservableObject</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/// A wrapper of the underlying `ObservableObject` that can create</span></span><br><span class="line">    <span class="comment">/// `Binding`s to its properties using dynamic member lookup.</span></span><br><span class="line">    @dynamicMemberLookup <span class="keyword">public</span> <span class="class"><span class="keyword">struct</span> <span class="title">Wrapper</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/// Creates a `Binding` to a value semantic property of a</span></span><br><span class="line">        <span class="comment">/// reference type.</span></span><br><span class="line">        <span class="comment">///</span></span><br><span class="line">        <span class="comment">/// If `Value` is not value semantic, the updating behavior for</span></span><br><span class="line">        <span class="comment">/// any views that make use of the resulting `Binding` is</span></span><br><span class="line">        <span class="comment">/// unspecified.</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">subscript</span>&lt;<span class="type">Subject</span>&gt;(dynamicMember keyPath: <span class="type">ReferenceWritableKeyPath</span>&lt;<span class="type">ObjectType</span>, <span class="type">Subject</span>&gt;) -&gt; <span class="type">Binding</span>&lt;<span class="type">Subject</span>&gt; &#123; <span class="keyword">get</span> &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">init</span>(initialValue: <span class="type">ObjectType</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">init</span>(wrappedValue: <span class="type">ObjectType</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">var</span> wrappedValue: <span class="type">ObjectType</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">var</span> projectedValue: <span class="type">ObservedObject</span>&lt;<span class="type">ObjectType</span>&gt;.<span class="type">Wrapper</span> &#123; <span class="keyword">get</span> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p>So now we know how to get <code>Binding</code> from <code>State</code> and <code>ObservableObject</code>, and the mysterious dollar sign. These are both convenient but confusing at first, but if we use it more, it will make more sense and hopefully we can learn to do the same for our own property wrappers</p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swiftUI/">swiftUI</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-modify-state-from-state-in-SwiftUI"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-modify-state-from-state-in-SwiftUI/">How to modify state from state in SwiftUI</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-modify-state-from-state-in-SwiftUI/" class="article-date">
	  <time datetime="2019-11-02T22:09:43.000Z" itemprop="datePublished">November 2, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/487" target="_blank" rel="noopener">#487</a></strong></p>
<p>In case we have to modify state when another state is known, we can encapsulate all those states in <code>ObservableObject</code> and use <code>onReceive</code> to check the state we want to act on.</p>
<p>If we were to modify state from within <code>body</code> function call, we will get warnings</p>
<blockquote>
<p>Modifying state during view update, this will cause undefined behavior.</p>
</blockquote>
<p>This is similar to the warning when we change state inside <code>render</code> in React</p>
<p>For example, when we get an image, we want to do some logic based on that image and modify result state. Here we use <code>var objectWillChange = ObservableObjectPublisher()</code> to notify state change, and because <code>onReceive</code> requires <code>Publisher</code>, we use <code>let imagePublisher = PassthroughSubject&lt;UIImage, Never&gt;()</code></p>
<p>Note that we use <code>$</code> prefix from a variable to form <code>Binding</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> SwiftUI</span><br><span class="line"><span class="keyword">import</span> Combine</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ViewModel</span>: <span class="title">ObservableObject</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> objectWillChange = <span class="type">ObservableObjectPublisher</span>()</span><br><span class="line">    <span class="keyword">let</span> imagePublisher = <span class="type">PassthroughSubject</span>&lt;<span class="type">UIImage</span>, <span class="type">Never</span>&gt;()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> image: <span class="type">UIImage?</span> &#123;</span><br><span class="line">        <span class="keyword">didSet</span> &#123;</span><br><span class="line">            objectWillChange.send()</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">let</span> image = image &#123;</span><br><span class="line">                imagePublisher.send(image)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> isDetecting: <span class="type">Bool</span> = <span class="literal">false</span> &#123;</span><br><span class="line">        <span class="keyword">didSet</span> &#123;</span><br><span class="line">            objectWillChange.send()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> result: <span class="type">String?</span> &#123;</span><br><span class="line">        <span class="keyword">didSet</span> &#123;</span><br><span class="line">            objectWillChange.send()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">MainView</span>: <span class="title">View</span> </span>&#123;</span><br><span class="line">    @<span class="type">State</span> <span class="keyword">private</span> <span class="keyword">var</span> showImagePicker: <span class="type">Bool</span> = <span class="literal">false</span></span><br><span class="line">    @<span class="type">ObservedObject</span> <span class="keyword">var</span> viewModel: <span class="type">ViewModel</span> = <span class="type">ViewModel</span>()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">let</span> detector = <span class="type">Detector</span>()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> body: some <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">VStack</span> &#123;</span><br><span class="line">            makeImage()</span><br><span class="line">                .styleFit()</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> viewModel.isDetecting &#123;</span><br><span class="line">                <span class="type">ActivityIndicator</span>(</span><br><span class="line">                    isAnimating: $viewModel.isDetecting,</span><br><span class="line">                    style: .large</span><br><span class="line">                )</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            makeResult()</span><br><span class="line"></span><br><span class="line">            <span class="type">Button</span>(action: &#123;</span><br><span class="line">                <span class="keyword">self</span>.showImagePicker.toggle()</span><br><span class="line">            &#125;, label: &#123;</span><br><span class="line">                <span class="type">Text</span>(<span class="string">"Choose image"</span>)</span><br><span class="line">            &#125;)</span><br><span class="line">            .sheet(isPresented: $showImagePicker, content: &#123;</span><br><span class="line">                <span class="type">ImagePicker</span>(image: <span class="keyword">self</span>.$viewModel.image, isPresented: <span class="keyword">self</span>.$showImagePicker)</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">        .onReceive(viewModel.imagePublisher, perform: &#123; image <span class="keyword">in</span></span><br><span class="line">            <span class="keyword">self</span>.detect(image: image)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">makeImage</span><span class="params">()</span></span> -&gt; <span class="type">Image</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">let</span> image = <span class="keyword">self</span>.viewModel.image &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="type">Image</span>(uiImage: image)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="type">Image</span>(<span class="string">"placeholder"</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">makeResult</span><span class="params">()</span></span> -&gt; <span class="type">Text</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">let</span> result = viewModel.result &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="type">Text</span>(result)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="type">Text</span>(<span class="string">""</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">detect</span><span class="params">(image: UIImage)</span></span> &#123;</span><br><span class="line">        viewModel.isDetecting = <span class="literal">true</span></span><br><span class="line">        <span class="keyword">try</span>? detector.detect(image: image, completion: &#123; result <span class="keyword">in</span></span><br><span class="line">            <span class="keyword">switch</span> result &#123;</span><br><span class="line">            <span class="keyword">case</span> .success(<span class="keyword">let</span> string):</span><br><span class="line">                <span class="keyword">self</span>.viewModel.result = string</span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">                <span class="keyword">self</span>.viewModel.result = <span class="string">""</span></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">self</span>.viewModel.isDetecting = <span class="literal">false</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Read-more"><a href="#Read-more" class="headerlink" title="Read more"></a>Read more</h2><ul>
<li><a href="https://www.freecodecamp.org/news/get-pro-with-react-setstate-in-10-minutes-d38251d1c781/" target="_blank" rel="noopener">https://www.freecodecamp.org/news/get-pro-with-react-setstate-in-10-minutes-d38251d1c781/</a></li>
<li><a href="https://stackoverflow.com/questions/56551131/what-does-the-dollar-sign-do-in-this-example" target="_blank" rel="noopener">https://stackoverflow.com/questions/56551131/what-does-the-dollar-sign-do-in-this-example</a></li>
<li><a href="https://stackoverflow.com/questions/44037611/how-to-avoid-setstate-inside-render-when-state-depends-on-render?rq=1" target="_blank" rel="noopener">https://stackoverflow.com/questions/44037611/how-to-avoid-setstate-inside-render-when-state-depends-on-render?rq=1</a></li>
<li><a href="https://stackoverflow.com/questions/44037611/how-to-avoid-setstate-inside-render-when-state-depends-on-render?rq=1" target="_blank" rel="noopener">https://stackoverflow.com/questions/44037611/how-to-avoid-setstate-inside-render-when-state-depends-on-render?rq=1</a></li>
</ul>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swiftUI/">swiftUI</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-show-loading-indicator-in-SwiftUI"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-show-loading-indicator-in-SwiftUI/">How to show loading indicator in SwiftUI</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-show-loading-indicator-in-SwiftUI/" class="article-date">
	  <time datetime="2019-11-02T21:02:33.000Z" itemprop="datePublished">November 2, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/486" target="_blank" rel="noopener">#486</a></strong></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> SwiftUI</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">ActivityIndicator</span>: <span class="title">UIViewRepresentable</span> </span>&#123;</span><br><span class="line">    @<span class="type">Binding</span> <span class="keyword">var</span> isAnimating: <span class="type">Bool</span></span><br><span class="line">    <span class="keyword">let</span> style: <span class="type">UIActivityIndicatorView</span>.<span class="type">Style</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">makeUIView</span><span class="params">(context: UIViewRepresentableContext&lt;ActivityIndicator&gt;)</span></span> -&gt; <span class="type">UIActivityIndicatorView</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="type">UIActivityIndicatorView</span>(style: style)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">updateUIView</span><span class="params">(<span class="number">_</span> uiView: UIActivityIndicatorView, context: UIViewRepresentableContext&lt;ActivityIndicator&gt;)</span></span> &#123;</span><br><span class="line">        isAnimating ? uiView.startAnimating() : uiView.stopAnimating()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">ActivityIndicator_Previews</span>: <span class="title">PreviewProvider</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">var</span> previews: some <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">ActivityIndicator</span>(isAnimating: .constant(<span class="literal">true</span>), style: .large)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swiftUI/">swiftUI</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-show-image-picker-in-SwiftUI"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-show-image-picker-in-SwiftUI/">How to show image picker in SwiftUI</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-show-image-picker-in-SwiftUI/" class="article-date">
	  <time datetime="2019-11-02T20:41:52.000Z" itemprop="datePublished">November 2, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/485" target="_blank" rel="noopener">#485</a></strong></p>
<p>The easiest way to show image picker in iOS is to use <code>UIImagePickerController</code>, and we can bridge that to SwiftUI via <code>UIViewControllerRepresentable</code></p>
<h2 id="First-attempt-use-Environment"><a href="#First-attempt-use-Environment" class="headerlink" title="First attempt, use Environment"></a>First attempt, use Environment</h2><p>We conform to <code>UIViewControllerRepresentable</code> and make a Coordinator, which is the recommended way to manage the bridging with <code>UIViewController</code>.</p>
<p>There’s some built in environment property we can use, one of those is <code>presentationMode</code> where we can call <code>dismiss</code> to dismiss the modal.</p>
<p>My first attempt looks like below</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> SwiftUI</span><br><span class="line"><span class="keyword">import</span> UIKit</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">struct</span> <span class="title">ImagePicker</span>: <span class="title">UIViewControllerRepresentable</span> </span>&#123;</span><br><span class="line">    @<span class="type">Environment</span>(\.presentationMode) <span class="keyword">private</span> <span class="keyword">var</span> presentationMode</span><br><span class="line">    @<span class="type">Binding</span> <span class="keyword">var</span> image: <span class="type">UIImage?</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">makeCoordinator</span><span class="params">()</span></span> -&gt; <span class="type">ImagePicker</span>.<span class="type">Coordinator</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="type">ImagePicker</span>.<span class="type">Coordinator</span>(</span><br><span class="line">            presentationMode: presentationMode,</span><br><span class="line">            image: $image</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">makeUIViewController</span><span class="params">(context: UIViewControllerRepresentableContext&lt;ImagePicker&gt;)</span></span> -&gt; <span class="type">UIImagePickerController</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> controller = <span class="type">UIImagePickerController</span>()</span><br><span class="line">        controller.delegate = context.coordinator</span><br><span class="line">        <span class="keyword">return</span> controller</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">updateUIViewController</span><span class="params">(<span class="number">_</span> uiViewController: UIImagePickerController, context: UIViewControllerRepresentableContext&lt;ImagePicker&gt;)</span></span> &#123;</span><br><span class="line">        <span class="comment">// No op</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">extension</span> <span class="title">ImagePicker</span> </span>&#123;</span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Coordinator</span>: <span class="title">NSObject</span>, <span class="title">UINavigationControllerDelegate</span> </span>&#123;</span><br><span class="line">        @<span class="type">Binding</span> <span class="keyword">var</span> presentationMode: <span class="type">PresentationMode</span></span><br><span class="line">        @<span class="type">Binding</span> <span class="keyword">var</span> image: <span class="type">UIImage?</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">init</span>(presentationMode: <span class="type">Binding</span>&lt;<span class="type">PresentationMode</span>&gt;, image: <span class="type">Binding</span>&lt;<span class="type">UIImage?</span>&gt;) &#123;</span><br><span class="line">            <span class="keyword">self</span>._presentationMode = presentationMode</span><br><span class="line">            <span class="keyword">self</span>._image = image</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">ImagePicker</span>.<span class="title">Coordinator</span>: <span class="title">UIImagePickerControllerDelegate</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">imagePickerController</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">        <span class="number">_</span> picker: UIImagePickerController,</span></span></span><br><span class="line"><span class="function"><span class="params">        didFinishPickingMediaWithInfo info: [UIImagePickerController.InfoKey: <span class="keyword">Any</span>])</span></span> &#123;</span><br><span class="line">        <span class="keyword">self</span>.image = info[<span class="type">UIImagePickerController</span>.<span class="type">InfoKey</span>.originalImage] <span class="keyword">as</span>? <span class="type">UIImage</span></span><br><span class="line">        presentationMode.dismiss()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">imagePickerControllerDidCancel</span><span class="params">(<span class="number">_</span> picker: UIImagePickerController)</span></span> &#123;</span><br><span class="line">        presentationMode.dismiss()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Signatures"><a href="#Signatures" class="headerlink" title="Signatures"></a>Signatures</h3><p>We need to be aware of the types of these property wrappers</p>
<p>Where we declare environment, <code>presentationMode</code> is of type <code>Binding&lt;PresentationMode&gt;</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@<span class="type">Environment</span>(\.presentationMode) <span class="keyword">private</span> <span class="keyword">var</span> presentationMode</span><br></pre></td></tr></table></figure>

<p>Given a Binding declaration, for example <code>@Binding var image: UIImage?</code>, <code>image</code> is of type <code>UIImage?</code> but <code>$image</code> is <code>Binding&lt;UIImage?&gt;</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">makeCoordinator</span><span class="params">()</span></span> -&gt; <span class="type">ImagePicker</span>.<span class="type">Coordinator</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="type">ImagePicker</span>.<span class="type">Coordinator</span>(</span><br><span class="line">        image: $image,</span><br><span class="line">        isPresented: $isPresented</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>When we want to assign to variables in <code>init</code>, we use <code>_image</code> to use mutable <code>Binding&lt;UIImage?&gt;</code> because <code>self.$image</code> gives us immutable <code>Binding&lt;UIImage?&gt;</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Coordinator</span>: <span class="title">NSObject</span>, <span class="title">UINavigationControllerDelegate</span> </span>&#123;</span><br><span class="line">    @<span class="type">Binding</span> <span class="keyword">var</span> presentationMode: <span class="type">PresentationMode</span></span><br><span class="line">    @<span class="type">Binding</span> <span class="keyword">var</span> image: <span class="type">UIImage?</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">init</span>(presentationMode: <span class="type">Binding</span>&lt;<span class="type">PresentationMode</span>&gt;, image: <span class="type">Binding</span>&lt;<span class="type">UIImage?</span>&gt;) &#123;</span><br><span class="line">        <span class="keyword">self</span>._presentationMode = presentationMode</span><br><span class="line">        <span class="keyword">self</span>._image = image</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="How-to-use"><a href="#How-to-use" class="headerlink" title="How to use"></a>How to use</h3><p>To show modal, we use <code>sheet</code> and use a state <code>@State var showImagePicker: Bool = false</code> to control its  presentation</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Button</span>(action: &#123;</span><br><span class="line">    <span class="keyword">self</span>.showImagePicker.toggle()</span><br><span class="line">&#125;, label: &#123;</span><br><span class="line">    <span class="type">Text</span>(<span class="string">"Choose image"</span>)</span><br><span class="line">&#125;)</span><br><span class="line">.sheet(isPresented: $showImagePicker, content: &#123;</span><br><span class="line">    <span class="type">ImagePicker</span>(image: <span class="keyword">self</span>.$image)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="Environment-outside-body"><a href="#Environment-outside-body" class="headerlink" title="Environment outside body"></a>Environment outside body</h3><p>If we run the above code, it will crash because of we access environment value <code>presentationMode</code> in <code>makeCoordinator</code> and this is outside <code>body</code></p>
<blockquote>
<p>Fatal error: Reading Environment&lt;Binding<presentationmode>&gt; outside View.body</presentationmode></p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">makeCoordinator</span><span class="params">()</span></span> -&gt; <span class="type">ImagePicker</span>.<span class="type">Coordinator</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="type">ImagePicker</span>.<span class="type">Coordinator</span>(</span><br><span class="line">        presentationMode: presentationMode,</span><br><span class="line">        image: $image</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Second-attempt-pass-closure"><a href="#Second-attempt-pass-closure" class="headerlink" title="Second attempt, pass closure"></a>Second attempt, pass closure</h2><p>So instead of passing environment <code>presentationMode</code>, we can pass closure, just like in React where we pass functions to child component.</p>
<p>So <code>ImagePicker</code> can just accept a closure called <code>onDone</code>, and the component that uses it can do the dismissal.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Button</span>(action: &#123;</span><br><span class="line">    <span class="keyword">self</span>.showImagePicker.toggle()</span><br><span class="line">&#125;, label: &#123;</span><br><span class="line">    <span class="type">Text</span>(<span class="string">"Choose image"</span>)</span><br><span class="line">&#125;)</span><br><span class="line">.sheet(isPresented: $showImagePicker, content: &#123;</span><br><span class="line">    <span class="type">ImagePicker</span>(image: <span class="keyword">self</span>.$image, onDone: &#123;</span><br><span class="line">        <span class="keyword">self</span>.presentationMode.wrappedValue.dismiss()</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>Unfortunately, although the <code>onDone</code> gets called, the modal is not dismissed.</p>
<h2 id="Use-Binding-instead-of-Environment"><a href="#Use-Binding-instead-of-Environment" class="headerlink" title="Use Binding instead of Environment"></a>Use Binding instead of Environment</h2><p>Maybe there are betters way, but we can use Binding to replace usage of Environment.</p>
<p>We can do that by accepting <code>Binding</code> and change the <code>isPresented</code> state</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> SwiftUI</span><br><span class="line"><span class="keyword">import</span> UIKit</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">struct</span> <span class="title">ImagePicker</span>: <span class="title">UIViewControllerRepresentable</span> </span>&#123;</span><br><span class="line">    @<span class="type">Binding</span> <span class="keyword">var</span> image: <span class="type">UIImage?</span></span><br><span class="line">    @<span class="type">Binding</span> <span class="keyword">var</span> isPresented: <span class="type">Bool</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">makeCoordinator</span><span class="params">()</span></span> -&gt; <span class="type">ImagePicker</span>.<span class="type">Coordinator</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="type">ImagePicker</span>.<span class="type">Coordinator</span>(</span><br><span class="line">            image: $image,</span><br><span class="line">            isPresented: $isPresented</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">makeUIViewController</span><span class="params">(context: UIViewControllerRepresentableContext&lt;ImagePicker&gt;)</span></span> -&gt; <span class="type">UIImagePickerController</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> controller = <span class="type">UIImagePickerController</span>()</span><br><span class="line">        controller.delegate = context.coordinator</span><br><span class="line">        <span class="keyword">return</span> controller</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">updateUIViewController</span><span class="params">(<span class="number">_</span> uiViewController: UIImagePickerController, context: UIViewControllerRepresentableContext&lt;ImagePicker&gt;)</span></span> &#123;</span><br><span class="line">        <span class="comment">// No op</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">extension</span> <span class="title">ImagePicker</span> </span>&#123;</span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Coordinator</span>: <span class="title">NSObject</span>, <span class="title">UINavigationControllerDelegate</span> </span>&#123;</span><br><span class="line">        @<span class="type">Binding</span> <span class="keyword">var</span> isPresented: <span class="type">Bool</span></span><br><span class="line">        @<span class="type">Binding</span> <span class="keyword">var</span> image: <span class="type">UIImage?</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">init</span>(image: <span class="type">Binding</span>&lt;<span class="type">UIImage?</span>&gt;, isPresented: <span class="type">Binding</span>&lt;<span class="type">Bool</span>&gt;) &#123;</span><br><span class="line">            <span class="keyword">self</span>._image = image</span><br><span class="line">            <span class="keyword">self</span>._isPresented = isPresented</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">ImagePicker</span>.<span class="title">Coordinator</span>: <span class="title">UIImagePickerControllerDelegate</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">imagePickerController</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">        <span class="number">_</span> picker: UIImagePickerController,</span></span></span><br><span class="line"><span class="function"><span class="params">        didFinishPickingMediaWithInfo info: [UIImagePickerController.InfoKey: <span class="keyword">Any</span>])</span></span> &#123;</span><br><span class="line">        <span class="keyword">self</span>.image = info[<span class="type">UIImagePickerController</span>.<span class="type">InfoKey</span>.originalImage] <span class="keyword">as</span>? <span class="type">UIImage</span></span><br><span class="line">        isPresented = <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">imagePickerControllerDidCancel</span><span class="params">(<span class="number">_</span> picker: UIImagePickerController)</span></span> &#123;</span><br><span class="line">        isPresented = <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>How to use it</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Button</span>(action: &#123;</span><br><span class="line">    <span class="keyword">self</span>.showImagePicker.toggle()</span><br><span class="line">&#125;, label: &#123;</span><br><span class="line">    <span class="type">Text</span>(<span class="string">"Choose image"</span>)</span><br><span class="line">&#125;)</span><br><span class="line">.sheet(isPresented: $showImagePicker, content: &#123;</span><br><span class="line">    <span class="type">ImagePicker</span>(image: <span class="keyword">self</span>.$image, isPresented: <span class="keyword">self</span>.$showImagePicker)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swift/">swift</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swiftUI/">swiftUI</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-add-monkey-test-to-iOS-apps"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-add-monkey-test-to-iOS-apps/">How to add monkey test to iOS apps</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-add-monkey-test-to-iOS-apps/" class="article-date">
	  <time datetime="2019-11-01T08:48:43.000Z" itemprop="datePublished">November 1, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/484" target="_blank" rel="noopener">#484</a></strong></p>
<p>Use <a href="https://github.com/zalando/SwiftMonkey" target="_blank" rel="noopener">SwiftMonkey</a> which adds random UITests gestures</p>
<p>Add to UITests target</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">target <span class="string">'MyAppUITests'</span> <span class="keyword">do</span></span><br><span class="line">  pod <span class="string">'R.swift'</span>, <span class="string">'~&gt; 5.0'</span></span><br><span class="line">  pod <span class="string">'SwiftMonkey'</span>, <span class="string">'~&gt; 2.1.0'</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<h2 id="Troubleshooting"><a href="#Troubleshooting" class="headerlink" title="Troubleshooting"></a>Troubleshooting</h2><h3 id="Failed-to-determine-hittability-of-Button"><a href="#Failed-to-determine-hittability-of-Button" class="headerlink" title="Failed to determine hittability of Button"></a>Failed to determine hittability of Button</h3><blockquote>
<p>Failed to determine hittability of Button: Unable to fetch parameterized attribute XC_kAXXCParameterizedAttributeConvertHostedViewPositionFromContext, remote interface does not have this capability.</p>
</blockquote>
<p>This happens when using SwiftMonkey and somewhere in our code uses <code>isHittable</code>, so best to avoid that by having isolated monkey test only</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> XCTest</span><br><span class="line"><span class="keyword">import</span> SwiftMonkey</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MonkeyTests</span>: <span class="title">XCTestCase</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> app: <span class="type">XCUIApplication!</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">setUp</span><span class="params">()</span></span> &#123;</span><br><span class="line">        continueAfterFailure = <span class="literal">false</span></span><br><span class="line">        app = <span class="type">XCUIApplication</span>()</span><br><span class="line">        app.launch()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">testMonkey</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">let</span> monkey = <span class="type">Monkey</span>(frame: app.frame)</span><br><span class="line">        monkey.addDefaultUIAutomationActions()</span><br><span class="line">        monkey.addXCTestTapAlertAction(interval: <span class="number">100</span>, application: app)</span><br><span class="line">        monkey.monkeyAround()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Another workaround is possibly use <code>addDefaultXCTestPublicActions</code> other than <code>addDefaultUIAutomationActions</code></p>
<h3 id="UI-Test-Activity"><a href="#UI-Test-Activity" class="headerlink" title="UI Test Activity:"></a>UI Test Activity:</h3><blockquote>
<p>Assertion Failure: MonkeyXCTest.swift:33: Failed to get matching snapshots: Timed out while evaluating UI query.</p>
</blockquote>
<p>This seems related to SwiftMonkey trying to snapshot. Workaround is to remove</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">monkey.addXCTestTapAlertAction(interval: <span class="number">100</span>, application: app)</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/">iOS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/testing/">testing</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-use-array-of-strings-in-ForEach-in-SwiftUI"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-use-array-of-strings-in-ForEach-in-SwiftUI/">How to use array of strings in ForEach in SwiftUI</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-use-array-of-strings-in-ForEach-in-SwiftUI/" class="article-date">
	  <time datetime="2019-10-31T11:15:42.000Z" itemprop="datePublished">October 31, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/483" target="_blank" rel="noopener">#483</a></strong></p>
<p>Every item in list must be uniquely identifiable</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">List</span> &#123;</span><br><span class="line">    <span class="type">ForEach</span>(books, id: \.bookId) &#123; book <span class="keyword">in</span></span><br><span class="line">        <span class="type">NavigationLink</span>(destination:</span><br><span class="line">            <span class="type">BookView</span>(book: book)</span><br><span class="line">                .navigationBarTitle(book.name)</span><br><span class="line">        ) &#123;</span><br><span class="line">            <span class="type">VStack</span> &#123;</span><br><span class="line">                <span class="type">Text</span>(book.name)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>In case of primitive, we can just provide <code>id</code> to conform to <code>Identifiable</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">String</span>: <span class="title">Identifiable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">var</span> id: <span class="type">String</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">self</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swift/">swift</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swiftUI/">swiftUI</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-make-multiline-Text-in-SwiftUI-in-watchOS"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-make-multiline-Text-in-SwiftUI-in-watchOS/">How to make multiline Text in SwiftUI in watchOS</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-make-multiline-Text-in-SwiftUI-in-watchOS/" class="article-date">
	  <time datetime="2019-10-31T10:24:54.000Z" itemprop="datePublished">October 31, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/482" target="_blank" rel="noopener">#482</a></strong></p>
<p><code>lineLimit</code> does not seem to work, use <a href="https://developer.apple.com/documentation/swiftui/group/3284808-fixedsize" target="_blank" rel="noopener">fixedSize</a> instead</p>
<blockquote>
<p>Fixes this view at its ideal size.</p>
</blockquote>
<blockquote>
<p>A view that fixes this view at its ideal size in the dimensions given in fixedDimensions.</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Text</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">styleText</span><span class="params">()</span></span> -&gt; some <span class="type">View</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">self</span></span><br><span class="line">            .font(.footnote)</span><br><span class="line">            .foregroundColor(.gray)</span><br><span class="line">            .lineLimit(<span class="number">10</span>)</span><br><span class="line">            .fixedSize(horizontal: <span class="literal">false</span>, vertical: <span class="literal">true</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swiftUI/">swiftUI</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/watchOS/">watchOS</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-show-documentations-for-GitHub-projects"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-show-documentations-for-GitHub-projects/">How to show documentations for GitHub projects</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-show-documentations-for-GitHub-projects/" class="article-date">
	  <time datetime="2019-10-31T08:51:02.000Z" itemprop="datePublished">October 31, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/481" target="_blank" rel="noopener">#481</a></strong></p>
<ul>
<li>Use <a href="https://github.com/realm/jazzy" target="_blank" rel="noopener">jazzy</a> to generate documentation which the generated artifacts in <code>docs</code> folder</li>
<li>GitHub has a nifty feature to use docs as GitHub pages</li>
</ul>
<img width="796" alt="Screenshot 2019-10-31 at 10 49 35" src="https://user-images.githubusercontent.com/2284279/67936575-51747e80-fbcc-11e9-9cca-bd52298ced3c.png">

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/github/">github</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-use-CommonCrypto-in-iOS"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-use-CommonCrypto-in-iOS/">How to use CommonCrypto in iOS</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-use-CommonCrypto-in-iOS/" class="article-date">
	  <time datetime="2019-10-29T13:08:00.000Z" itemprop="datePublished">October 29, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/480" target="_blank" rel="noopener">#480</a></strong></p>
<h2 id="Use-modulemap"><a href="#Use-modulemap" class="headerlink" title="Use modulemap"></a>Use modulemap</h2><h3 id="modulemap-approach"><a href="#modulemap-approach" class="headerlink" title="modulemap approach"></a>modulemap approach</h3><p>I use <code>modulemap</code> in my wrapper around CommonCrypto <a href="https://github.com/onmyway133/arcane" target="_blank" rel="noopener">https://github.com/onmyway133/arcane</a>, <a href="https://github.com/onmyway133/Reindeer" target="_blank" rel="noopener">https://github.com/onmyway133/Reindeer</a></p>
<p>For those getting <code>header not found</code>, please take a look <a href="https://github.com/onmyway133/Arcane/issues/4" target="_blank" rel="noopener">https://github.com/onmyway133/Arcane/issues/4</a> or run <code>xcode-select --install</code></p>
<ul>
<li>Make a folder <code>CCommonCrypto</code> containing <code>module.modulemap</code></li>
</ul>
<pre><code>module CCommonCrypto {
  header &quot;/usr/include/CommonCrypto/CommonCrypto.h&quot;
  export *
}</code></pre><ul>
<li>Go to Built Settings -&gt; Import Paths</li>
</ul>
<pre><code>${SRCROOT}/Sources/CCommonCrypto</code></pre><h3 id="Cocoapods-with-modulemap-approach"><a href="#Cocoapods-with-modulemap-approach" class="headerlink" title="Cocoapods with modulemap approach"></a>Cocoapods with modulemap approach</h3><ul>
<li><p>Here is the podspec <a href="https://github.com/onmyway133/Arcane/blob/master/Arcane.podspec" target="_blank" rel="noopener">https://github.com/onmyway133/Arcane/blob/master/Arcane.podspec</a></p>
<pre><code>s.source_files = &apos;Sources/**/*.swift&apos;
s.xcconfig = { &apos;SWIFT_INCLUDE_PATHS&apos; =&gt;
&apos;$(PODS_ROOT)/CommonCryptoSwift/Sources/CCommonCrypto&apos; }
s.preserve_paths = &apos;Sources/CCommonCrypto/module.modulemap&apos;</code></pre></li>
<li><p>Using <code>module_map</code> does not work, see <a href="https://github.com/CocoaPods/CocoaPods/issues/5271" target="_blank" rel="noopener">https://github.com/CocoaPods/CocoaPods/issues/5271</a></p>
</li>
<li><p>Using Local Development Pod with <code>path</code> does not work, see <a href="https://github.com/CocoaPods/CocoaPods/issues/809" target="_blank" rel="noopener">https://github.com/CocoaPods/CocoaPods/issues/809</a></p>
</li>
<li><p>That’s why you see that my Example Podfile <a href="https://github.com/onmyway133/CommonCrypto.swift/blob/master/Example/CommonCryptoSwiftDemo/Podfile" target="_blank" rel="noopener">https://github.com/onmyway133/CommonCrypto.swift/blob/master/Example/CommonCryptoSwiftDemo/Podfile</a> points to the git repo</p>
<pre><code>target &apos;CommonCryptoSwiftDemo&apos; do
  pod &apos;CommonCryptoSwift&apos;, :git =&gt; &apos;https://github.com/onmyway133/CommonCrypto.swift&apos;
end</code></pre></li>
</ul>
<h3 id="public-header-approach"><a href="#public-header-approach" class="headerlink" title="public header approach"></a>public header approach</h3><ul>
<li><p><a href="https://github.com/honghaoz/Ji" target="_blank" rel="noopener">Ji</a> is a wrapper around libxml2, and it uses public header approach</p>
</li>
<li><p>It has a header file <a href="https://github.com/honghaoz/Ji/blob/master/Source/Ji.h" target="_blank" rel="noopener">https://github.com/honghaoz/Ji/blob/master/Source/Ji.h</a> with <code>Target Membership</code> set to <code>Public</code></p>
</li>
<li><p>It has a list of header files for libxml2 <a href="https://github.com/honghaoz/Ji/tree/master/Source/Ji-libxml" target="_blank" rel="noopener">https://github.com/honghaoz/Ji/tree/master/Source/Ji-libxml</a></p>
</li>
<li><p>It has Build Settings -&gt; Header Search Paths</p>
<pre><code>$(SDKROOT)/usr/include/libxml2</code></pre></li>
<li><p>It has Build Settings -&gt; Other Linker Flags</p>
<pre><code>-lxml2</code></pre></li>
</ul>
<h3 id="Cocoapods-with-public-header-approach"><a href="#Cocoapods-with-public-header-approach" class="headerlink" title="Cocoapods with public header approach"></a>Cocoapods with public header approach</h3><ul>
<li>Take a look at the podspec <a href="https://github.com/honghaoz/Ji/blob/master/Ji.podspec" target="_blank" rel="noopener">https://github.com/honghaoz/Ji/blob/master/Ji.podspec</a></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">s.libraries        = &quot;xml2&quot;</span><br><span class="line">s.xcconfig         = &#123; &apos;HEADER_SEARCH_PATHS&apos; =&gt;           &apos;$(SDKROOT)/usr/include/libxml2&apos;, &apos;OTHER_LDFLAGS&apos; =&gt; &apos;-lxml2&apos; &#125;</span><br></pre></td></tr></table></figure>

<p><strong>🐝 Interesting related posts</strong></p>
<ul>
<li><a href="https://stackoverflow.com/questions/24004732/how-to-call-c-from-swift" target="_blank" rel="noopener">https://stackoverflow.com/questions/24004732/how-to-call-c-from-swift</a></li>
<li><a href="https://spin.atomicobject.com/2015/02/23/c-libraries-swift/" target="_blank" rel="noopener">https://spin.atomicobject.com/2015/02/23/c-libraries-swift/</a></li>
</ul>
<h2 id="CommonCrypto-from-Xcode-10"><a href="#CommonCrypto-from-Xcode-10" class="headerlink" title="CommonCrypto from Xcode 10"></a>CommonCrypto from Xcode 10</h2><p>From Xcode 10, we can just</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> CommonCrypto</span><br></pre></td></tr></table></figure>

<h2 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h2><ul>
<li><a href="https://github.com/onmyway133/Arcane" target="_blank" rel="noopener">https://github.com/onmyway133/Arcane</a></li>
<li><a href="https://stackoverflow.com/questions/25248598/importing-commoncrypto-in-a-swift-framework/37125785#37125785" target="_blank" rel="noopener">https://stackoverflow.com/questions/25248598/importing-commoncrypto-in-a-swift-framework/37125785#37125785</a></li>
</ul>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/">iOS</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-make-ISO-8601-date-in-Swift"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-make-ISO-8601-date-in-Swift/">How to make ISO 8601 date in Swift</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-make-ISO-8601-date-in-Swift/" class="article-date">
	  <time datetime="2019-10-29T13:01:10.000Z" itemprop="datePublished">October 29, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/479" target="_blank" rel="noopener">#479</a></strong></p>
<p>From <a href="https://en.wikipedia.org/wiki/ISO_8601" target="_blank" rel="noopener">ISO8601 spec</a>, the problems are the representation and time zone</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ISO 8601 = year-month-day time timezone</span><br><span class="line">For date and time, there are basic (YYYYMMDD, hhmmss, ...) and extended format (YYYY-MM-DD, hh:mm:ss, ...)</span><br><span class="line">Time zone can be Zulu, offset or GMT</span><br><span class="line">Separator for date and time can be space, or T</span><br><span class="line">There are week format for date, but it is rarely used</span><br><span class="line">Timezone can be a lot of spaces after</span><br><span class="line">Second is optional</span><br></pre></td></tr></table></figure>

<p>Here are some valid strings</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">2016-04-08T10:25:30Z</span><br><span class="line">2016-04-08 11:25:30+0100</span><br><span class="line">2016-04-08 202530GMT+1000</span><br><span class="line">20160408 08:25:30-02:00</span><br><span class="line">2016-04-08 11:25:30     +0100</span><br></pre></td></tr></table></figure>

<h2 id="Solutions"><a href="#Solutions" class="headerlink" title="Solutions"></a>Solutions</h2><p>Use <code>NSDateFormatter</code> and normalize the date string.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">var</span> stringToDateFormatter: <span class="type">DateFormatter</span> = &#123;</span><br><span class="line">    <span class="keyword">let</span> formatter = <span class="type">Foundation</span>.<span class="type">DateFormatter</span>()</span><br><span class="line">    formatter.locale = <span class="type">Locale</span>(identifier: <span class="string">"en_US_POSIX"</span>)</span><br><span class="line">    formatter.dateFormat = <span class="string">"yyyyMMdd HHmmssZ"</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> formatter</span><br><span class="line">&#125;()</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">date</span><span class="params">(string: String)</span></span> -&gt; <span class="type">Date?</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> basicString = string</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">let</span> regex = <span class="keyword">try</span>? <span class="type">NSRegularExpression</span>(pattern: <span class="string">"[0-9]&#123;4&#125;-[0-9]&#123;2&#125;-[0-9]&#123;2&#125;"</span>, options: []),</span><br><span class="line">        <span class="keyword">let</span> result = regex.firstMatch(<span class="keyword">in</span>: string, options: .anchored, range: <span class="type">NSMakeRange</span>(<span class="number">0</span>, string.characters.<span class="built_in">count</span>)) &#123;</span><br><span class="line">        basicString = (basicString <span class="keyword">as</span> <span class="type">NSString</span>).replacingOccurrences(of: <span class="string">"-"</span>, with: <span class="string">""</span>, options: [], range: result.range)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    basicString = basicString</span><br><span class="line">        .replacingOccurrences(of: <span class="string">":"</span>, with: <span class="string">""</span>)</span><br><span class="line">        .replacingOccurrences(of: <span class="string">"GMT"</span>, with: <span class="string">""</span>)</span><br><span class="line">        .replacingOccurrences(of: <span class="string">"T"</span>, with: <span class="string">" "</span>)</span><br><span class="line">        .replacingOccurrences(of: <span class="string">","</span>, with: <span class="string">"."</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> stringToDateFormatter.date(from: basicString)</span><br><span class="line">        ?? stringToDateMillisecondsFormatter.date(from: basicString)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>So here is the format that I’m using in my ISO8601</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> formatter = <span class="type">NSDateFormatter</span>()</span><br><span class="line">formatter.locale = <span class="type">NSLocale</span>(localeIdentifier: <span class="string">"en_US_POSIX"</span>)</span><br><span class="line">formatter.dateFormat = <span class="string">"yyyyMMdd HHmmssZ"</span></span><br></pre></td></tr></table></figure>

<h3 id="About-the-Z-identifier-Date-Field-Symbol-Table"><a href="#About-the-Z-identifier-Date-Field-Symbol-Table" class="headerlink" title="About the Z identifier Date Field Symbol Table"></a>About the Z identifier Date Field Symbol Table</h3><blockquote>
<p>Z: The ISO8601 basic format with hours, minutes and optional seconds fields. The format is equivalent to RFC 822 zone format (when optional seconds field is absent)</p>
</blockquote>
<h3 id="About-locale-Formatting-Data-Using-the-Locale-Settings"><a href="#About-locale-Formatting-Data-Using-the-Locale-Settings" class="headerlink" title="About locale Formatting Data Using the Locale Settings"></a>About locale Formatting Data Using the Locale Settings</h3><blockquote>
<p>Locales represent the formatting choices for a particular user, not the user’s preferred language. These are often the same but can be different. For example, a native English speaker who lives in Germany might select English as the language and Germany as the region</p>
</blockquote>
<h3 id="About-en-US-POSIX-Technical-Q-amp-A-QA1480-NSDateFormatter-and-Internet-Dates"><a href="#About-en-US-POSIX-Technical-Q-amp-A-QA1480-NSDateFormatter-and-Internet-Dates" class="headerlink" title="About en_US_POSIX Technical Q&amp;A QA1480 NSDateFormatter and Internet Dates"></a>About en_US_POSIX Technical Q&amp;A QA1480 NSDateFormatter and Internet Dates</h3><blockquote>
<p>On the other hand, if you’re working with fixed-format dates, you should first set the locale of the date formatter to something appropriate for your fixed format. In most cases the best locale to choose is “en_US_POSIX”, a locale that’s specifically designed to yield US English results regardless of both user and system preferences. </p>
</blockquote>
<blockquote>
<p>“en_US_POSIX” is also invariant in time (if the US, at some point in the future, changes the way it formats dates, “en_US” will change to reflect the new behaviour, but “en_US_POSIX” will not), and between machines (“en_US_POSIX” works the same on iOS as it does on OS X, and as it it does on other platforms).</p>
</blockquote>
<h2 id="NSISO8601DateFormatter-from-iOS-10"><a href="#NSISO8601DateFormatter-from-iOS-10" class="headerlink" title="NSISO8601DateFormatter from iOS 10"></a>NSISO8601DateFormatter from iOS 10</h2><p>From iOS 10, we can use <a href="https://developer.apple.com/documentation/foundation/nsiso8601dateformatter" target="_blank" rel="noopener">NSISO8601DateFormatter</a></p>
<blockquote>
<p>The NSISO8601DateFormatter class generates and parses string representations of dates following the ISO 8601 standard. Use this class to create ISO 8601 representations of dates and create dates from text strings in ISO 8601 format.</p>
</blockquote>
<h2 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h2><ul>
<li><a href="https://github.com/onmyway133/ISO8601" target="_blank" rel="noopener">https://github.com/onmyway133/ISO8601</a></li>
<li><a href="https://stackoverflow.com/questions/16254575/how-do-i-get-an-iso-8601-date-on-ios/37082414#37082414" target="_blank" rel="noopener">https://stackoverflow.com/questions/16254575/how-do-i-get-an-iso-8601-date-on-ios/37082414#37082414</a></li>
</ul>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swift/">swift</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-configure-test-target-in-Xcode"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-configure-test-target-in-Xcode/">How to configure test target in Xcode</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-configure-test-target-in-Xcode/" class="article-date">
	  <time datetime="2019-10-29T12:57:33.000Z" itemprop="datePublished">October 29, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/478" target="_blank" rel="noopener">#478</a></strong></p>
<h4 id="This-applies-to"><a href="#This-applies-to" class="headerlink" title="This applies to"></a>This applies to</h4><ul>
<li>Main targets<ul>
<li>App</li>
<li>Framework</li>
</ul>
</li>
<li>Test targets<ul>
<li>Unit tests</li>
<li>UI tests</li>
</ul>
</li>
</ul>
<h4 id="Examples"><a href="#Examples" class="headerlink" title="Examples"></a>Examples</h4><p>Dependencies used</p>
<ul>
<li>Main target: <a href="http://github.com/hyperoslo/Sugar" target="_blank" rel="noopener">Sugar</a></li>
<li>Test target: <a href="https://github.com/Quick/Nimble" target="_blank" rel="noopener">Nimble</a>, <a href="https://github.com/Quick/Quick" target="_blank" rel="noopener">Quick</a></li>
</ul>
<p>Examples</p>
<ul>
<li>Cocoapods</li>
<li>Carthage</li>
</ul>
<h4 id="Notes"><a href="#Notes" class="headerlink" title="Notes"></a>Notes</h4><ul>
<li>Make sure test target can link to all the frameworks it needs. This includes frameworks that Test targets use, and possibly frameworks that Main target uses !</li>
<li>Remember to “Clean Build Folder” and “Clear Derived Data” so that you’re sure it works. Sometimes Xcode caches.</li>
</ul>
<h3 id="Errors"><a href="#Errors" class="headerlink" title="Errors"></a>Errors</h3><p>Errors occur mostly due to linker error</p>
<ul>
<li>Test target X encountered an error (Early unexpected exit, operation never finished bootstrapping - no restart will be attempted</li>
<li>Framework not found</li>
</ul>
<h2 id="Cocoapods"><a href="#Cocoapods" class="headerlink" title="Cocoapods"></a>Cocoapods</h2><h4 id="1-Pod"><a href="#1-Pod" class="headerlink" title="1. Pod"></a>1. Pod</h4><p>Test targets need to include pods that Main target uses !</p>
<p>or we’ll get “Framework not found”</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">app_pods</span></span></span><br><span class="line">	pod <span class="string">'Sugar'</span>, <span class="string">'~&gt; 1.0'</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test_pods</span></span></span><br><span class="line">	pod <span class="string">'Nimble'</span>, <span class="string">'~&gt; 3.2'</span></span><br><span class="line">	pod <span class="string">'Quick'</span>, <span class="string">'~&gt; 0.9'</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">target <span class="string">'TeaApp'</span> <span class="keyword">do</span></span><br><span class="line">	app_pods</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">target <span class="string">'TeaAppTests'</span> <span class="keyword">do</span></span><br><span class="line">	app_pods</span><br><span class="line">	test_pods</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">target <span class="string">'TeaAppUITests'</span> <span class="keyword">do</span></span><br><span class="line">	app_pods</span><br><span class="line">	test_pods</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<h4 id="2-Link-Binaries-with-Library"><a href="#2-Link-Binaries-with-Library" class="headerlink" title="2. Link Binaries with Library"></a>2. Link Binaries with Library</h4><p>Cocoapods builds a framework that contains all the frameworks the Test targets need, and configure it for us</p>
<p><img src="Screenshots/cocoapods_link_binaries.png" alt></p>
<h4 id="3-Runpath-Search-Paths"><a href="#3-Runpath-Search-Paths" class="headerlink" title="3. Runpath Search Paths"></a>3. Runpath Search Paths</h4><ul>
<li>Go to Test target Build Settings</li>
<li>Add <code>$(FRAMEWORK_SEARCH_PATHS)</code></li>
</ul>
<p><img src="Screenshots/cocoapods_runpath_search_paths.png" alt></p>
<h2 id="Carthage"><a href="#Carthage" class="headerlink" title="Carthage"></a>Carthage</h2><h4 id="1-Cartfile"><a href="#1-Cartfile" class="headerlink" title="1. Cartfile"></a>1. Cartfile</h4><p>We usually have</p>
<ul>
<li>Cartfile for Main target</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">github <span class="string">"hyperoslo/Sugar"</span> ~&gt; <span class="number">1.0</span></span><br></pre></td></tr></table></figure>

<ul>
<li>Cartfile.private for Test target</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">github <span class="string">"Quick/Nimble"</span></span><br><span class="line">github <span class="string">"Quick/Quick"</span></span><br></pre></td></tr></table></figure>

<h4 id="2-Link-Binaries-with-Libraries"><a href="#2-Link-Binaries-with-Libraries" class="headerlink" title="2. Link Binaries with Libraries"></a>2. Link Binaries with Libraries</h4><ul>
<li>Go to Test target build phase</li>
<li>Drag built frameworks from <code>Carthage/Build</code></li>
<li>In rare case, we need to drag frameworks that the Main target uses</li>
<li>In rare case, we need to drag the Main target framework</li>
</ul>
<p><img src="Screenshots/carthage_link_binaries.png" alt></p>
<h4 id="3-Framework-Search-Paths"><a href="#3-Framework-Search-Paths" class="headerlink" title="3. Framework Search Paths"></a>3. Framework Search Paths</h4><p>Configure correct path</p>
<ul>
<li>Go to Test target Built Settings</li>
<li>Configure Framework Search Paths</li>
</ul>
<p><img src="Screenshots/carthage_framework_search_paths.png" alt></p>
<h4 id="4-Runpath-Search-Paths"><a href="#4-Runpath-Search-Paths" class="headerlink" title="4. Runpath Search Paths"></a>4. Runpath Search Paths</h4><ul>
<li>Go to Test target Build Settings</li>
<li>Add <code>$(FRAMEWORK_SEARCH_PATHS)</code></li>
</ul>
<p><img src="Screenshots/cocoapods_runpath_search_paths.png" alt></p>
<h4 id="5-Copy-Files-maybe"><a href="#5-Copy-Files-maybe" class="headerlink" title="5. Copy Files (maybe)"></a>5. Copy Files (maybe)</h4><p>From <a href="https://github.com/Carthage/Carthage/blob/0.11/README.md#adding-frameworks-to-unit-tests-or-a-framework" target="_blank" rel="noopener">Adding frameworks to unit tests or a framework</a></p>
<blockquote>
<p>In rare cases, you may want to also copy each dependency into the build product (e.g., to embed dependencies within the outer framework, or make sure dependencies are present in a test bundle). To do this, create a new “Copy Files” build phase with the “Frameworks” destination, then add the framework reference there as well.</p>
</blockquote>
<p><img src="Screenshots/carthage_copy_files.png" alt></p>
<h2 id="Runpath-Search-Paths-and-Install-name"><a href="#Runpath-Search-Paths-and-Install-name" class="headerlink" title="Runpath Search Paths and Install name"></a>Runpath Search Paths and Install name</h2><p>Question</p>
<ul>
<li>Why preconfigured run path “@executable_path/Frameworks” and “@loader_path/Frameworks” not work?</li>
<li>Why configuring runpath to “$(FRAMEWORK_SEARCH_PATHS)” works ?</li>
<li>Why framework has install name “@rpath/Sugar.framework/Sugar” ?</li>
</ul>
<p>Reference</p>
<ul>
<li><a href="https://developer.apple.com/library/mac/documentation/DeveloperTools/Conceptual/DynamicLibraries/100-Articles/RunpathDependentLibraries.html" target="_blank" rel="noopener">Run-Path Dependent Libraries</a></li>
<li><a href="https://www.mikeash.com/pyblog/friday-qa-2009-11-06-linking-and-install-names.html" target="_blank" rel="noopener">Linking and Install Names</a></li>
</ul>
<h2 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h2><ul>
<li><a href="https://github.com/onmyway133/TestTarget" target="_blank" rel="noopener">https://github.com/onmyway133/TestTarget</a></li>
<li><a href="https://stackoverflow.com/questions/34990175/test-target-x-encountered-an-error-early-unexpected-exit-operation-never-finis/36343395#36343395" target="_blank" rel="noopener">https://stackoverflow.com/questions/34990175/test-target-x-encountered-an-error-early-unexpected-exit-operation-never-finis/36343395#36343395</a></li>
</ul>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/">iOS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/testing/">testing</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/xcode/">xcode</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-check-platform-versions-in-Swift"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-check-platform-versions-in-Swift/">How to check platform versions in Swift</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-check-platform-versions-in-Swift/" class="article-date">
	  <time datetime="2019-10-29T11:23:07.000Z" itemprop="datePublished">October 29, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/477" target="_blank" rel="noopener">#477</a></strong></p>
<h2 id="Mark-APIs-availability"><a href="#Mark-APIs-availability" class="headerlink" title="Mark APIs availability"></a>Mark APIs availability</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@available</span>(iOS <span class="number">13.0</span>, <span class="type">OSX</span> <span class="number">10.15</span>, tvOS <span class="number">13.0</span>, watchOS <span class="number">6.0</span>, *)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">extension</span> <span class="title">View</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Check-platform"><a href="#Check-platform" class="headerlink" title="Check platform"></a>Check platform</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#<span class="keyword">if</span> canImport(<span class="type">UIKit</span>)</span><br><span class="line"><span class="keyword">import</span> UIKit</span><br><span class="line">#elseif canImport(<span class="type">OSX</span>)</span><br><span class="line"><span class="keyword">import</span> AppKit</span><br><span class="line">#endif</span><br></pre></td></tr></table></figure>

<p>In watchOS app, it still can import <code>UIKit</code>, so for only iOS usage, we need to use <code>os</code> check</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#<span class="keyword">if</span> canImport(<span class="type">UIKit</span>) &amp;&amp; os(iOS)</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swift/">swift</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-use-react-native-link-and-CocoaPods"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-use-react-native-link-and-CocoaPods/">How to use react-native link and CocoaPods</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-use-react-native-link-and-CocoaPods/" class="article-date">
	  <time datetime="2019-10-29T08:20:23.000Z" itemprop="datePublished">October 29, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/476" target="_blank" rel="noopener">#476</a></strong></p>
<p>React Native comes with a default React library, and most CocoaPods libraries for React Native has React as a dependency pod, which causes the conflict</p>
<ul>
<li><a href="https://github.com/react-native-community/react-native-svg/issues/621" target="_blank" rel="noopener">https://github.com/react-native-community/react-native-svg/issues/621</a></li>
<li><a href="https://stackoverflow.com/questions/45296994/difference-between-react-native-link-and-cocoapods" target="_blank" rel="noopener">https://stackoverflow.com/questions/45296994/difference-between-react-native-link-and-cocoapods</a></li>
<li><a href="https://github.com/onmyway133/notes/issues/486" target="_blank" rel="noopener">https://github.com/onmyway133/notes/issues/486</a></li>
<li><a href="https://github.com/facebook/react-native/pull/23563" target="_blank" rel="noopener">https://github.com/facebook/react-native/pull/23563</a></li>
</ul>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/cocoapods/">cocoapods</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/">javascript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/react-native/">react native</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-flick-using-UIKit-Dynamic-in-iOS"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-flick-using-UIKit-Dynamic-in-iOS/">How to flick using UIKit Dynamic in iOS</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-flick-using-UIKit-Dynamic-in-iOS/" class="article-date">
	  <time datetime="2019-10-23T11:28:26.000Z" itemprop="datePublished">October 23, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/475" target="_blank" rel="noopener">#475</a></strong></p>
<p>For a <a href="https://onmyway133.github.io/blog/How-to-show-error-message-like-Snack-Bar-in-iOS/">snack bar</a> or image viewing, it’s handy to be able to just flick or toss to dismiss</p>
<p>We can use UIKit Dynamic, which was introduced in iOS 7, to make this happen.</p>
<p>Use <code>UIPanGestureRecognizer</code> to drag view around, <code>UISnapBehavior</code> to make view snap back to center if velocity is low, and <code>UIPushBehavior</code> to throw view in the direction of the gesture.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> UIKit</span><br><span class="line"></span><br><span class="line"><span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">FlickHandler</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">let</span> viewToMove: <span class="type">UIView</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">let</span> referenceView: <span class="type">UIView</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> panGR: <span class="type">UIPanGestureRecognizer!</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">let</span> animator: <span class="type">UIDynamicAnimator</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> snapBehavior: <span class="type">UISnapBehavior?</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> pushBehavior: <span class="type">UIPushBehavior?</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">let</span> debouncer = <span class="type">Debouncer</span>(delay: <span class="number">0.5</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> onFlick: () -&gt; <span class="type">Void</span> = &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">init</span>(viewToMove: <span class="type">UIView</span>, referenceView: <span class="type">UIView</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.viewToMove = viewToMove</span><br><span class="line">        <span class="keyword">self</span>.referenceView = referenceView</span><br><span class="line">        <span class="keyword">self</span>.animator = <span class="type">UIDynamicAnimator</span>(referenceView: referenceView)</span><br><span class="line">        <span class="keyword">self</span>.panGR = <span class="type">UIPanGestureRecognizer</span>(target: <span class="keyword">self</span>, action: #selector(handleGesture(<span class="number">_</span>:)))</span><br><span class="line">        viewToMove.addGestureRecognizer(panGR)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@objc</span> <span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">handleGesture</span><span class="params">(<span class="number">_</span> gr: UIPanGestureRecognizer)</span></span> &#123;</span><br><span class="line">        <span class="keyword">switch</span> gr.state &#123;</span><br><span class="line">        <span class="keyword">case</span> .began:</span><br><span class="line">            handleBegin()</span><br><span class="line">        <span class="keyword">case</span> .changed:</span><br><span class="line">            handleChange(gr)</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            handleEnd(gr)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">handleBegin</span><span class="params">()</span></span> &#123;</span><br><span class="line">        animator.removeAllBehaviors()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">handleChange</span><span class="params">(<span class="number">_</span> gr: UIPanGestureRecognizer)</span></span> &#123;</span><br><span class="line">        <span class="keyword">let</span> translation = panGR.translation(<span class="keyword">in</span>: referenceView)</span><br><span class="line">        viewToMove.transform = <span class="type">CGAffineTransform</span>(</span><br><span class="line">            translationX: translation.x,</span><br><span class="line">            y: translation.y</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">handleEnd</span><span class="params">(<span class="number">_</span> gr: UIPanGestureRecognizer)</span></span> &#123;</span><br><span class="line">        <span class="keyword">let</span> velocity = gr.velocity(<span class="keyword">in</span>: gr.view)</span><br><span class="line">        <span class="keyword">let</span> magnitude = sqrt((velocity.x * velocity.x) + (velocity.y * velocity.y))</span><br><span class="line">        <span class="keyword">if</span> magnitude &gt; <span class="number">1000</span> &#123;</span><br><span class="line">            animator.removeAllBehaviors()</span><br><span class="line"></span><br><span class="line">            <span class="keyword">let</span> pushBehavior = <span class="type">UIPushBehavior</span>(items: [viewToMove], mode: .instantaneous)</span><br><span class="line">            pushBehavior.pushDirection = <span class="type">CGVector</span>(dx: velocity.x, dy: velocity.y)</span><br><span class="line">            pushBehavior.magnitude = magnitude / <span class="number">35</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">self</span>.pushBehavior = pushBehavior</span><br><span class="line">            animator.addBehavior(pushBehavior)</span><br><span class="line"></span><br><span class="line">            onFlick()</span><br><span class="line">            debouncer.run &#123; [<span class="keyword">weak</span> <span class="keyword">self</span>] <span class="keyword">in</span></span><br><span class="line">                <span class="keyword">self</span>?.animator.removeAllBehaviors()</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">let</span> snapBehavior = <span class="type">UISnapBehavior</span>(</span><br><span class="line">                item: viewToMove,</span><br><span class="line">                snapTo: viewToMove.center</span><br><span class="line">            )</span><br><span class="line"></span><br><span class="line">            <span class="keyword">self</span>.snapBehavior = snapBehavior</span><br><span class="line">            animator.addBehavior(snapBehavior)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swift/">swift</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-use-Swift-package-manager-in-watchOS"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-use-Swift-package-manager-in-watchOS/">How to use Swift package manager in watchOS</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-use-Swift-package-manager-in-watchOS/" class="article-date">
	  <time datetime="2019-10-23T07:00:11.000Z" itemprop="datePublished">October 23, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/474" target="_blank" rel="noopener">#474</a></strong></p>
<h2 id="SPM"><a href="#SPM" class="headerlink" title="SPM"></a>SPM</h2><p>Go to Project -&gt; Swift Packages, add package. For example <a href="https://github.com/onmyway133/EasyStash" target="_blank" rel="noopener">https://github.com/onmyway133/EasyStash</a></p>
<p>Select your <code>WatchKit Extension</code> target, under <code>Frameworks, Libraries and Embedded Content</code> add the library</p>
<h2 id="CocoaPods"><a href="#CocoaPods" class="headerlink" title="CocoaPods"></a>CocoaPods</h2><p>If we use CocoaPods, then it needs to be in <code>WatchKit Extension</code></p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">target <span class="string">'MyApp WatchKit Extension'</span> <span class="keyword">do</span></span><br><span class="line">  use_frameworks!</span><br><span class="line">  pod <span class="string">'EasyStash'</span>, <span class="symbol">:git</span> =&gt; <span class="string">'https://github.com/onmyway133/EasyStash'</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swift/">swift</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/watchOS/">watchOS</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-use-external-display-in-iOS"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-use-external-display-in-iOS/">How to use external display in iOS</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-use-external-display-in-iOS/" class="article-date">
	  <time datetime="2019-10-22T18:25:18.000Z" itemprop="datePublished">October 22, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/473" target="_blank" rel="noopener">#473</a></strong></p>
<h2 id="Before-iOS-13"><a href="#Before-iOS-13" class="headerlink" title="Before iOS 13"></a>Before iOS 13</h2><p>Use <code>UIScreen.didConnectNotification</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">NotificationCenter</span>.<span class="keyword">default</span>.addObserver(forName: <span class="type">UIScreen</span>.didConnectNotification,</span><br><span class="line">                         object: <span class="literal">nil</span>, queue: <span class="literal">nil</span>) &#123; (notification) <span class="keyword">in</span></span><br><span class="line">        <span class="comment">// Get the new screen information.</span></span><br><span class="line">        <span class="keyword">let</span> newScreen = notification.object <span class="keyword">as</span>! <span class="type">UIScreen</span></span><br><span class="line">        <span class="keyword">let</span> screenDimensions = newScreen.bounds</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Configure a window for the screen.</span></span><br><span class="line">        <span class="keyword">let</span> newWindow = <span class="type">UIWindow</span>(frame: screenDimensions)</span><br><span class="line">        newWindow.screen = newScreen</span><br><span class="line">        <span class="comment">// Install a custom root view controller in the window.</span></span><br><span class="line">        <span class="keyword">self</span>.configureAuxilliaryInterface(with: newWindow)</span><br><span class="line"></span><br><span class="line">        <span class="comment">// You must show the window explicitly.</span></span><br><span class="line">        newWindow.isHidden = <span class="literal">false</span></span><br><span class="line">        <span class="comment">// Save a reference to the window in a local array.</span></span><br><span class="line">        <span class="keyword">self</span>.additionalWindows.append(newWindow)&#125;</span><br></pre></td></tr></table></figure>

<h2 id="From-iOS-13"><a href="#From-iOS-13" class="headerlink" title="From iOS 13"></a>From iOS 13</h2><p>Handle <code>configurationForConnecting</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@UIApplicationMain</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AppDelegate</span>: <span class="title">UIResponder</span>, <span class="title">UIApplicationDelegate</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> newWindow: <span class="type">UIWindow!</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// MARK: UISceneSession Lifecycle</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">application</span><span class="params">(<span class="number">_</span> application: UIApplication, configurationForConnecting connectingSceneSession: UISceneSession, options: UIScene.ConnectionOptions)</span></span> -&gt; <span class="type">UISceneConfiguration</span> &#123;</span><br><span class="line">        <span class="comment">// Called when a new scene session is being created.</span></span><br><span class="line">        <span class="comment">// Use this method to select a configuration to create the new scene with.</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                        <span class="built_in">print</span>(<span class="type">UIApplication</span>.shared.connectedScenes)</span><br><span class="line">        <span class="keyword">let</span> scene = <span class="type">UIWindowScene</span>(session: connectingSceneSession, connectionOptions: options)</span><br><span class="line"></span><br><span class="line">                        <span class="comment">// Configure a window for the screen.</span></span><br><span class="line">                        <span class="keyword">self</span>.newWindow = <span class="type">UIWindow</span>(frame: <span class="type">CGRect</span>(x: <span class="number">0</span>, y: <span class="number">0</span>, width: <span class="number">1000</span>, height: <span class="number">500</span>))</span><br><span class="line">        <span class="comment">//                self.newWindow.backgroundColor = UIColor.yellow</span></span><br><span class="line">                        <span class="comment">// Install a custom root view controller in the window.</span></span><br><span class="line"></span><br><span class="line">                        <span class="keyword">let</span> viewController = <span class="type">UIStoryboard</span>(name: <span class="string">"Main"</span>, bundle: <span class="literal">nil</span>).instantiateViewController(identifier: <span class="string">"other"</span>) <span class="keyword">as</span>! <span class="type">OtherViewController</span></span><br><span class="line">                        <span class="keyword">self</span>.newWindow.rootViewController = viewController</span><br><span class="line">                        <span class="keyword">self</span>.newWindow.windowScene = scene</span><br><span class="line"></span><br><span class="line">                        <span class="comment">// You must show the window explicitly.</span></span><br><span class="line">                        <span class="keyword">self</span>.newWindow.isHidden = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="type">UISceneConfiguration</span>(name: <span class="string">"External configuration"</span>, sessionRole: connectingSceneSession.role)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Or we can declare in plist</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dict</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">key</span>&gt;</span>UIApplicationSupportsMultipleScenes<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">false</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">key</span>&gt;</span>UISceneConfigurations<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dict</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">key</span>&gt;</span>UIWindowSceneSessionRoleApplication<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">array</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dict</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">key</span>&gt;</span>UISceneConfigurationName<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">string</span>&gt;</span>Default Configuration<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">key</span>&gt;</span>UISceneDelegateClassName<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">string</span>&gt;</span>$(PRODUCT_MODULE_NAME).SceneDelegate<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">key</span>&gt;</span>UISceneStoryboardFile<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">string</span>&gt;</span>Main<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dict</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">array</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">key</span>&gt;</span>UIWindowSceneSessionRoleExternalDisplay<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">array</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dict</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">key</span>&gt;</span>UISceneConfigurationName<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">string</span>&gt;</span>External configuration<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">key</span>&gt;</span>UISceneDelegateClassName<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">string</span>&gt;</span>$(PRODUCT_MODULE_NAME).OtherSceneDelegate<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">key</span>&gt;</span>UISceneStoryboardFile<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">string</span>&gt;</span>Other<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dict</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">array</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dict</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dict</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="Read-more"><a href="#Read-more" class="headerlink" title="Read more"></a>Read more</h2><ul>
<li><a href="https://medium.com/@hacknicity/external-display-support-on-ios-665cd1774511" target="_blank" rel="noopener">External Display Support on iOS</a></li>
<li><a href="https://www.swiftjectivec.com/supporting-external-displays/" target="_blank" rel="noopener">Supporting External Displays</a></li>
<li><a href="https://www.swiftbysundell.com/articles/building-ipad-pro-features-in-swift/" target="_blank" rel="noopener">Building iPad Pro features in Swift</a></li>
<li><a href="https://stackoverflow.com/questions/58415368/how-can-i-display-different-content-on-different-screens-in-ios-13" target="_blank" rel="noopener">How can I display different content on different screens in iOS 13?</a></li>
<li><a href="https://developer.apple.com/documentation/uikit/windows_and_screens/displaying_content_on_a_connected_screen" target="_blank" rel="noopener">Displaying Content on a Connected Screen</a></li>
<li><a href="https://www.bignerdranch.com/blog/adding-external-display-support-to-your-ios-app-is-ridiculously-easy/" target="_blank" rel="noopener">Adding External Display Support To Your iOS App Is Ridiculously Easy</a></li>
</ul>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/">iOS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swift/">swift</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-show-error-message-like-Snack-Bar-in-iOS"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-show-error-message-like-Snack-Bar-in-iOS/">How to show error message like Snack Bar in iOS</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-show-error-message-like-Snack-Bar-in-iOS/" class="article-date">
	  <time datetime="2019-10-21T08:55:27.000Z" itemprop="datePublished">October 21, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/472" target="_blank" rel="noopener">#472</a></strong></p>
<h2 id="Build-error-view"><a href="#Build-error-view" class="headerlink" title="Build error view"></a>Build error view</h2><p>Use convenient code from <a href="https://github.com/onmyway133/Omnia" target="_blank" rel="noopener">Omnia</a></p>
<p>To make view height dynamic, pin <code>UILabel</code> to edges and center</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> UIKit</span><br><span class="line"></span><br><span class="line"><span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">ErrorMessageView</span>: <span class="title">UIView</span> </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> box: <span class="type">UIView</span> = &#123;</span><br><span class="line">        <span class="keyword">let</span> view = <span class="type">UIView</span>()</span><br><span class="line">        view.backgroundColor = <span class="type">R</span>.color.primary</span><br><span class="line">        view.layer.cornerRadius = <span class="number">6</span></span><br><span class="line">        <span class="keyword">return</span> view</span><br><span class="line">    &#125;()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> label: <span class="type">UILabel</span> = &#123;</span><br><span class="line">        <span class="keyword">let</span> label = <span class="type">UILabel</span>()</span><br><span class="line">        label.styleAsText()</span><br><span class="line">        label.textColor = <span class="type">R</span>.color.darkText</span><br><span class="line">        label.numberOfLines = <span class="number">0</span></span><br><span class="line">        <span class="keyword">return</span> label</span><br><span class="line">    &#125;()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="keyword">init</span>(frame: <span class="type">CGRect</span>) &#123;</span><br><span class="line">        <span class="keyword">super</span>.<span class="keyword">init</span>(frame: frame)</span><br><span class="line">        setup()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">required</span> <span class="keyword">init</span>?(coder: <span class="type">NSCoder</span>) &#123;</span><br><span class="line">        <span class="built_in">fatalError</span>()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">setup</span><span class="params">()</span></span> &#123;</span><br><span class="line">        addSubviews([box, label])</span><br><span class="line">        <span class="type">NSLayoutConstraint</span>.on([</span><br><span class="line">            box.pinEdges(view: <span class="keyword">self</span>, inset: <span class="type">UIEdgeInsets</span>.all(<span class="number">16</span>)),</span><br><span class="line">            label.pinEdges(view: box, inset: <span class="type">UIEdgeInsets</span>.all(<span class="number">8</span>))</span><br><span class="line">        ])</span><br><span class="line"></span><br><span class="line">        <span class="type">NSLayoutConstraint</span>.on([</span><br><span class="line">            box.heightAnchor.constraint(greaterThanOrEqualToConstant: <span class="number">48</span>)</span><br><span class="line">        ])</span><br><span class="line"></span><br><span class="line">        <span class="type">NSLayoutConstraint</span>.on([</span><br><span class="line">            label.centerYAnchor.constraint(equalTo: centerYAnchor)</span><br><span class="line">        ])</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Show-and-hide"><a href="#Show-and-hide" class="headerlink" title="Show and hide"></a>Show and hide</h2><p>Use Auto Layout and basic UIView animation. Use debouncer to avoid <code>hide</code> gets called for the new <code>show</code>. Use debouncer instead of <code>DispatchQueue.main.asyncAfter</code> because it can cancel the previous <code>DispatchWorkItem</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> UIKit</span><br><span class="line"></span><br><span class="line"><span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">ErrorMessageHandler</span> </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> view: <span class="type">UIView</span></span><br><span class="line">    <span class="keyword">let</span> errorMessageView = <span class="type">ErrorMessageView</span>()</span><br><span class="line">    <span class="keyword">let</span> debouncer = <span class="type">Debouncer</span>(delay: <span class="number">0.5</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">init</span>(view: <span class="type">UIView</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.view = view</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">show</span><span class="params">(text: String)</span></span> &#123;</span><br><span class="line">        <span class="keyword">self</span>.errorMessageView.label.text = text</span><br><span class="line">        view.addSubview(errorMessageView)</span><br><span class="line">        <span class="type">NSLayoutConstraint</span>.on([</span><br><span class="line">            errorMessageView.leftAnchor.constraint(equalTo: view.leftAnchor),</span><br><span class="line">            errorMessageView.rightAnchor.constraint(equalTo: view.rightAnchor),</span><br><span class="line">            errorMessageView.bottomAnchor.constraint(equalTo: view.safeAreaLayoutGuide.bottomAnchor)</span><br><span class="line">        ])</span><br><span class="line"></span><br><span class="line">        toggle(shows: <span class="literal">true</span>)</span><br><span class="line">        debouncer.run &#123;</span><br><span class="line">            <span class="keyword">self</span>.hide()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">hide</span><span class="params">()</span></span> &#123;</span><br><span class="line">        toggle(shows: <span class="literal">false</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">toggle</span><span class="params">(shows: Bool)</span></span> &#123;</span><br><span class="line">        <span class="keyword">self</span>.errorMessageView.alpha = shows ? <span class="number">0</span> : <span class="number">1.0</span></span><br><span class="line">        <span class="type">UIView</span>.animate(withDuration: <span class="number">0.25</span>, animations: &#123;</span><br><span class="line">            <span class="keyword">self</span>.errorMessageView.alpha = shows ? <span class="number">1.0</span> : <span class="number">0</span></span><br><span class="line">        &#125;, completion: &#123; <span class="number">_</span> <span class="keyword">in</span></span><br><span class="line">            <span class="keyword">if</span> shows &#123;</span><br><span class="line">                <span class="keyword">self</span>.view.bringSubviewToFront(<span class="keyword">self</span>.errorMessageView)</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">self</span>.errorMessageView.removeFromSuperview()</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Handle-keyboard"><a href="#Handle-keyboard" class="headerlink" title="Handle keyboard"></a>Handle keyboard</h2><p>If we add this error message on UIView in ViewController and we use <a href="https://onmyway133.github.io/blog/How-to-handle-keyboard-for-UITextField-in-scrolling-UIStackView-in-iOS/">KeyboardHandler</a> to scroll the entire view, then this snack bar will move up as well</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">ErrorMessageHandler</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">let</span> errorMessageView = <span class="type">ErrorMessageView</span>()</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> view = <span class="type">UIView</span>()</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> bottomOffset: <span class="type">CGFloat</span> = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">on</span><span class="params">(view: UIView, bottomOffset: CGFloat)</span></span> &#123;</span><br><span class="line">        <span class="keyword">self</span>.view = view</span><br><span class="line">        <span class="keyword">self</span>.bottomOffset = bottomOffset</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="UIView-animation-completion"><a href="#UIView-animation-completion" class="headerlink" title="UIView animation completion"></a>UIView animation completion</h2><p>One tricky thing is that if we call <code>hide</code> and then <code>show</code> immediately, the completion of <code>hide</code> will be called after and then remove the view.</p>
<p>When we start animation again, the previous animation is not finished, so we need to check</p>
<p>Read <a href="https://developer.apple.com/documentation/uikit/uiview/1622451-animate" target="_blank" rel="noopener">UIView.animate</a></p>
<blockquote>
<p>completion<br>A block object to be executed when the animation sequence ends. This block has no return value and takes a single Boolean argument that indicates whether or not the animations actually finished before the completion handler was called. If the duration of the animation is 0, this block is performed at the beginning of the next run loop cycle. This parameter may be NULL.</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">toggle</span><span class="params">(shows: Bool)</span></span> &#123;</span><br><span class="line">    <span class="keyword">self</span>.errorMessageView.alpha = shows ? <span class="number">0</span> : <span class="number">1.0</span></span><br><span class="line">    <span class="type">UIView</span>.animate(withDuration: <span class="number">0.25</span>, delay: <span class="number">0</span>, options: .curveEaseInOut, animations: &#123;</span><br><span class="line">        <span class="keyword">self</span>.errorMessageView.alpha = shows ? <span class="number">1.0</span> : <span class="number">0</span></span><br><span class="line">    &#125;, completion: &#123; finished <span class="keyword">in</span></span><br><span class="line">        <span class="keyword">if</span> shows &#123;</span><br><span class="line">            <span class="keyword">self</span>.view.bringSubviewToFront(<span class="keyword">self</span>.errorMessageView)</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> finished &#123;</span><br><span class="line">            <span class="keyword">self</span>.errorMessageView.removeFromSuperview()</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// No op</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/android/">android</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/">iOS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swift/">swift</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-hide-tab-bar-when-push-in-iOS"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-hide-tab-bar-when-push-in-iOS/">How to hide tab bar when push in iOS</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-hide-tab-bar-when-push-in-iOS/" class="article-date">
	  <time datetime="2019-10-18T11:26:07.000Z" itemprop="datePublished">October 18, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/471" target="_blank" rel="noopener">#471</a></strong></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> navigationController = <span class="type">UINavigationController</span>(rootViewController: viewControllerA)</span><br><span class="line">navigationController.pushViewController(viewControllerB, animated: <span class="literal">true</span>)</span><br></pre></td></tr></table></figure>

<p>In view controller B, need to set <code>hidesBottomBarWhenPushed</code> in init</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">ViewControllerB</span>: <span class="title">UIViewController</span> </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> mainView = <span class="type">EditPaymentMethodView</span>()</span><br><span class="line">    <span class="keyword">var</span> scenario: <span class="type">PaymentMethodScenario!</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">init</span>() &#123;</span><br><span class="line">        <span class="keyword">super</span>.<span class="keyword">init</span>(nibName: <span class="literal">nil</span>, bundle: <span class="literal">nil</span>)</span><br><span class="line"></span><br><span class="line">        hidesBottomBarWhenPushed = <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">required</span> <span class="keyword">init</span>?(coder: <span class="type">NSCoder</span>) &#123;</span><br><span class="line">        <span class="built_in">fatalError</span>()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/">iOS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swift/">swift</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-add-trailing-image-to-UILabel-in-iOS"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-add-trailing-image-to-UILabel-in-iOS/">How to add trailing image to UILabel in iOS</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-add-trailing-image-to-UILabel-in-iOS/" class="article-date">
	  <time datetime="2019-10-17T12:05:36.000Z" itemprop="datePublished">October 17, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/470" target="_blank" rel="noopener">#470</a></strong></p>
<p>Use <code>NSTextAttachment</code> inside <code>NSAttributedString</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">UILabel</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">addTrailing</span><span class="params">(image: UIImage)</span></span> &#123;</span><br><span class="line">        <span class="keyword">let</span> attachment = <span class="type">NSTextAttachment</span>()</span><br><span class="line">        attachment.image = image</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> attachmentString = <span class="type">NSAttributedString</span>(attachment: attachment)</span><br><span class="line">        <span class="keyword">let</span> string = <span class="type">NSMutableAttributedString</span>(string: <span class="keyword">self</span>.text!, attributes: [:])</span><br><span class="line"></span><br><span class="line">        string.append(attachmentString)</span><br><span class="line">        <span class="keyword">self</span>.attributedText = string</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/">iOS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swift/">swift</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-handle-different-states-in-a-screen-in-iOS"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-handle-different-states-in-a-screen-in-iOS/">How to handle different states in a screen in iOS</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-handle-different-states-in-a-screen-in-iOS/" class="article-date">
	  <time datetime="2019-10-17T09:13:07.000Z" itemprop="datePublished">October 17, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/469" target="_blank" rel="noopener">#469</a></strong></p>
<p>If there are lots of logics and states inside a screen, it is best to introduce parent and child container, and switch child depends on state. Each child acts as a State handler.</p>
<p>In less logic case, we can introduce a Scenario class that holds the state. So the <code>ViewController</code> can be very slim. The thing with State is that all possible scenarios are clear and required to be handled</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">UserDetailScenario</span> </span>&#123;</span><br><span class="line">    <span class="class"><span class="keyword">enum</span> <span class="title">State</span> </span>&#123;</span><br><span class="line">        <span class="keyword">case</span> unknown</span><br><span class="line">        <span class="keyword">case</span> getUser(<span class="type">Email</span>)</span><br><span class="line">        <span class="keyword">case</span> newUser(<span class="type">Email</span>)</span><br><span class="line">        <span class="keyword">case</span> existingUser(<span class="type">User</span>)</span><br><span class="line">        <span class="keyword">case</span> failure(<span class="type">Error</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> state: <span class="type">State</span> = .unknown(<span class="literal">nil</span>) &#123;</span><br><span class="line">        <span class="keyword">didSet</span> &#123;</span><br><span class="line">            <span class="keyword">self</span>.reload()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">reload</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">switch</span> state &#123;</span><br><span class="line">        <span class="keyword">case</span> .unknown:</span><br><span class="line">            handleUnknown()</span><br><span class="line">        <span class="keyword">case</span> .getUser(<span class="keyword">let</span> email):</span><br><span class="line">            handleGetUser(email: email)</span><br><span class="line">        <span class="keyword">case</span> .newUser(<span class="keyword">let</span> email):</span><br><span class="line">            handleNewUser(email: email)</span><br><span class="line">        <span class="keyword">case</span> .existingUser(<span class="keyword">let</span> user):</span><br><span class="line">            handleExistingUser(user: user</span><br><span class="line">        <span class="keyword">case</span> .failure(<span class="keyword">let</span> error):</span><br><span class="line">            logError(error)</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/">iOS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swift/">swift</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-reload-data-without-using-onAppear-in-SwiftUI-in-watchOS"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-reload-data-without-using-onAppear-in-SwiftUI-in-watchOS/">How to reload data without using onAppear in SwiftUI in watchOS</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-reload-data-without-using-onAppear-in-SwiftUI-in-watchOS/" class="article-date">
	  <time datetime="2019-10-17T07:01:27.000Z" itemprop="datePublished">October 17, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/468" target="_blank" rel="noopener">#468</a></strong></p>
<p>From <a href="https://developer.apple.com/documentation/swiftui/text/3276931-onappear" target="_blank" rel="noopener">onAppeear</a></p>
<blockquote>
<p>Adds an action to perform when the view appears.</p>
</blockquote>
<p>In theory, this should be triggered every time this view appears. But in practice, it is only called when it is pushed on navigation stack, not when we return to it.</p>
<p>So if user goes to a bookmark in a bookmark list, unbookmark an item and go back to the bookmark list, <code>onAppear</code> is not called again and the list is not updated.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> SwiftUI</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">BookmarksView</span>: <span class="title">View</span> </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> service: <span class="type">Service</span></span><br><span class="line">    @<span class="type">State</span> <span class="keyword">var</span> items: [<span class="type">AnyItem</span>]</span><br><span class="line">    @<span class="type">EnvironmentObject</span> <span class="keyword">var</span> storeContainer: <span class="type">StoreContainer</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> body: some <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">List</span>(items)  &#123; item <span class="keyword">in</span></span><br><span class="line">            makeItemRow(item: item)</span><br><span class="line">                .padding([.top, .bottom], <span class="number">4</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        .onAppear(perform: &#123;</span><br><span class="line">            <span class="keyword">self</span>.items = storeContainer.bookmarks(service: service).<span class="built_in">map</span>(&#123; <span class="type">AnyItem</span>(item: $<span class="number">0</span>) &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>So instead of relying on UI state, we should rely on data state, by listening to <code>onReceive</code> and update our local <code>@State</code> </p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">BookmarksView</span>: <span class="title">View</span> </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> service: <span class="type">Service</span></span><br><span class="line">    @<span class="type">State</span> <span class="keyword">var</span> items: [<span class="type">AnyItem</span>]</span><br><span class="line">    @<span class="type">EnvironmentObject</span> <span class="keyword">var</span> storeContainer: <span class="type">StoreContainer</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> body: some <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">List</span>(items)  &#123; item <span class="keyword">in</span></span><br><span class="line">            makeItemRow(item: item)</span><br><span class="line">                .padding([.top, .bottom], <span class="number">4</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        .onAppear(perform: &#123;</span><br><span class="line">            <span class="keyword">self</span>.reload()</span><br><span class="line">        &#125;)</span><br><span class="line">        .onReceive(storeContainer.objectWillChange, perform: &#123; <span class="number">_</span> <span class="keyword">in</span></span><br><span class="line">            <span class="keyword">self</span>.reload()</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">reload</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">self</span>.items = storeContainer.bookmarks(service: service).<span class="built_in">map</span>(&#123; <span class="type">AnyItem</span>(item: $<span class="number">0</span>) &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Inside our <code>ObservableObject</code>, we need to trigger changes notification</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">StoreContainer</span>: <span class="title">ObservableObject</span> </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> objectWillChange = <span class="type">PassthroughSubject</span>&lt;(), <span class="type">Never</span>&gt;()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">bookmark</span><span class="params">(item: ItemProtocol)</span></span> &#123;</span><br><span class="line">        <span class="keyword">defer</span> &#123;</span><br><span class="line">            objectWillChange.send(())</span><br><span class="line">        &#125;        </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">unbookmark</span><span class="params">(item: ItemProtocol)</span></span> &#123;</span><br><span class="line">        <span class="keyword">defer</span> &#123;</span><br><span class="line">            objectWillChange.send(())</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swiftUI/">swiftUI</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/watchOS/">watchOS</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-use-EnvironmentObject-in-SwiftUI-for-watchOS"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-use-EnvironmentObject-in-SwiftUI-for-watchOS/">How to use EnvironmentObject in SwiftUI for watchOS</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-use-EnvironmentObject-in-SwiftUI-for-watchOS/" class="article-date">
	  <time datetime="2019-10-17T06:03:56.000Z" itemprop="datePublished">October 17, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/467" target="_blank" rel="noopener">#467</a></strong></p>
<p>Declare top dependencies in ExtensionDelegate</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ExtensionDelegate</span>: <span class="title">NSObject</span>, <span class="title">WKExtensionDelegate</span> </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> storeContainer = <span class="type">StoreContainer</span>()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">applicationDidEnterBackground</span><span class="params">()</span></span> &#123;</span><br><span class="line">        storeContainer.save()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Reference that in <code>HostingController</code>. Note that we need to change from generic <code>MainView</code> to <code>WKHostingController&lt;AnyView&gt;</code> as <code>environmentObject</code> returns <code>View</code> protocol</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HostingController</span>: <span class="title">WKHostingController</span>&lt;<span class="title">AnyView</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> storeContainer: <span class="type">StoreContainer!</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">awake</span><span class="params">(withContext context: <span class="keyword">Any</span>?)</span></span> &#123;</span><br><span class="line">        <span class="keyword">super</span>.awake(withContext: context)</span><br><span class="line">        <span class="keyword">self</span>.storeContainer = (<span class="type">WKExtension</span>.shared().delegate <span class="keyword">as</span>! <span class="type">ExtensionDelegate</span>).storeContainer</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="keyword">var</span> body: <span class="type">AnyView</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="type">AnyView</span>(<span class="type">MainView</span>()</span><br><span class="line">            .environmentObject(storeContainer)</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>In theory, the environment object will be propagated down the view hierarchy, but in practice it throws error. So a workaround now is to just pass that environment object down manually</p>
<blockquote>
<p>Fatal error: No ObservableObject of type SomeType found<br>A View.environmentObject(_:) for StoreContainer.Type may be missing as an ancestor of this view</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">MainView</span>: <span class="title">View</span> </span>&#123;</span><br><span class="line">    @<span class="type">EnvironmentObject</span> <span class="keyword">var</span> storeContainer: <span class="type">StoreContainer</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> body: some <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">VStack</span> &#123;</span><br><span class="line">            <span class="type">List</span>(services.<span class="built_in">map</span>(&#123; <span class="type">AnyService</span>($<span class="number">0</span>) &#125;)) &#123; anyService <span class="keyword">in</span></span><br><span class="line">                <span class="type">NavigationLink</span>(destination:</span><br><span class="line">                    <span class="type">ItemsView</span>(service: anyService.service)</span><br><span class="line">                        .navigationBarTitle(anyService.service.name)</span><br><span class="line">                        .onDisappear(perform: &#123;</span><br><span class="line">                            anyService.service.requestCancellable?.cancel()</span><br><span class="line">                        &#125;)</span><br><span class="line">                        .environmentObject(storeContainer)</span><br><span class="line">                ) &#123;</span><br><span class="line">                    <span class="type">HStack</span> &#123;</span><br><span class="line">                        <span class="type">Image</span>(anyService.service.name)</span><br><span class="line">                            .resizable()</span><br><span class="line">                            .frame(width: <span class="number">30</span>, height: <span class="number">30</span>, alignment: .leading)</span><br><span class="line">                        <span class="type">Text</span>(anyService.service.name)</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;.listStyle(<span class="type">CarouselListStyle</span>())</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swiftUI/">swiftUI</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/watchOS/">watchOS</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-structure-classes"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-structure-classes/">How to structure classes</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-structure-classes/" class="article-date">
	  <time datetime="2019-10-16T06:05:05.000Z" itemprop="datePublished">October 16, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/466" target="_blank" rel="noopener">#466</a></strong></p>
<p>iOS</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">View Controller -&gt; View Model | Logic Handler -&gt; Data Handler -&gt; Repo</span><br></pre></td></tr></table></figure>

<p>Android</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Activity -&gt; Fragment -&gt; View Model | Logic Handler -&gt; Data Handler -&gt; Repo</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/android/">android</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/">iOS</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-make-generic-store-for-Codable-in-Swift"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-make-generic-store-for-Codable-in-Swift/">How to make generic store for Codable in Swift</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-make-generic-store-for-Codable-in-Swift/" class="article-date">
	  <time datetime="2019-10-14T19:41:28.000Z" itemprop="datePublished">October 14, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/465" target="_blank" rel="noopener">#465</a></strong></p>
<p>Use <a href="https://github.com/onmyway133/EasyStash" target="_blank" rel="noopener">EasyStash</a></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> EasyStash</span><br><span class="line"></span><br><span class="line"><span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">Store</span>&lt;<span class="title">T</span>: <span class="title">Codable</span> &amp; <span class="title">ItemProtocol</span>&gt;: <span class="title">Codable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> items = [<span class="type">T</span>]()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">bookmark</span><span class="params">(item: T)</span></span> &#123;</span><br><span class="line">        items.append(item)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">unbookmark</span><span class="params">(item: T)</span></span> &#123;</span><br><span class="line">        <span class="keyword">guard</span> <span class="keyword">let</span> index = items.firstIndex(<span class="keyword">where</span>: &#123; $<span class="number">0</span>.itemId == item.itemId &#125;) <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        items.remove(at: index)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">isBookmark</span><span class="params">(item: T)</span></span> -&gt; <span class="type">Bool</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> items.<span class="built_in">contains</span>(<span class="keyword">where</span>: &#123; $<span class="number">0</span>.itemId == item.itemId &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> EasyStash</span><br><span class="line"></span><br><span class="line"><span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">StoreContainer</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> food: <span class="type">Store</span>&lt;<span class="type">Food</span>&gt;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">var</span> shared = <span class="type">StoreContainer</span>()</span><br><span class="line">    <span class="keyword">let</span> storage = <span class="keyword">try</span>! <span class="type">Storage</span>(options: <span class="type">Options</span>())</span><br><span class="line"></span><br><span class="line">    <span class="keyword">init</span>() &#123;</span><br><span class="line">        food = <span class="keyword">try</span>? storage.load(forKey: <span class="string">"food"</span>, <span class="keyword">as</span>: <span class="type">Store</span>&lt;<span class="type">Food</span>&gt;.<span class="keyword">self</span>) ?? <span class="type">Store</span>&lt;<span class="type">Food</span>&gt;()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>If Swift has problem compiling because of generic, use try catch to declare in multiple steps in stead of <code>??</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">init</span>() &#123;</span><br><span class="line">    <span class="keyword">do</span> &#123;</span><br><span class="line">        <span class="keyword">self</span>.food = <span class="keyword">try</span> storage.load(forKey: <span class="string">"food"</span>, <span class="keyword">as</span>: <span class="type">Store</span>&lt;<span class="type">Food</span>&gt;.<span class="keyword">self</span>)</span><br><span class="line">    &#125; <span class="keyword">catch</span> &#123;</span><br><span class="line">        <span class="keyword">self</span>.food = <span class="type">Store</span>&lt;<span class="type">Food</span>&gt;()</span><br><span class="line">    &#125;   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swift/">swift</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-declare-escaping-in-completion-in-callback-in-Swift"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-declare-escaping-in-completion-in-callback-in-Swift/">How to declare escaping in completion in callback in Swift</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-declare-escaping-in-completion-in-callback-in-Swift/" class="article-date">
	  <time datetime="2019-10-14T11:57:55.000Z" itemprop="datePublished">October 14, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/464" target="_blank" rel="noopener">#464</a></strong></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typealias</span> <span class="type">Completion</span> = (<span class="type">Result</span>&lt;<span class="type">User</span>, <span class="type">Error</span>&gt;) -&gt; <span class="type">Void</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">validate</span><span class="params">(completion: @escaping Completion, then: <span class="params">(String, String, @escaping Completion)</span></span></span> -&gt; <span class="type">Void</span>) &#123;&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swift/">swift</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  


  <nav id="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/14/">14</a><a class="extend next" rel="next" href="/page/2/">Next</a>
  </nav>

</section>
          <aside id="sidebar">
  
    <div class="widget-wrap" style="margin: 20px 0;">
	<div id="search-form-wrap">

    <form class="search-form">
        <label style="width: 75%;">
            <span class="screen-reader-text">Search for:</span>
            <input type="search" class="search-field" style="height: 42px;" placeholder=" Search…" value="" name="s" title="Search for:">
        </label>
        <input type="submit" class="search-form-submit" value="Search">
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="Type something..."/>
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'Posts',
            PAGES: 'Pages',
            CATEGORIES: 'Categories',
            TAGS: 'Tags',
            UNTITLED: '(Untitled)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="/js/insight.js"></script>

</div>
</div>
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Connect With Us</h3>
    <div class="widget widget_athemes_social_icons">

    	<ul class="clearfix widget-social-icons">   
    	
          
     			  <li><a href="https://github.com/onmyway133" title="Github"><i class="fa fa-github" aria-hidden="true"></i></a></li> 
          
   		
          
     			  <li><a href="https://twitter.com/onmyway133" title="Twitter"><i class="fa fa-twitter" aria-hidden="true"></i></a></li> 
          
   		
          
            <li><a href="mailto:onmyway133@gmail.com?subject=请联系我&body=我能帮你什么" title="email"><i class="fa fa-envelope" aria-hidden="true"></i></a></li> 
          
   		
   		</ul>


   		<!--
   		<ul class="clearfix widget-social-icons">   		
   		<li class="widget-si-twitter"><a href="http://twitter.com" title="Twitter"><i class="ico-twitter"></i></a></li> 
		<li class="widget-si-facebook"><a href="http://facebook.com" title="Facebook"><i class="ico-facebook"></i></a></li>
			<li class="widget-si-gplus"><a href="http://plus.google.com" title="Google+"><i class="ico-gplus"></i></a></li>
			<li class="widget-si-pinterest"><a href="http://pinterest.com" title="Pinterest"><i class="ico-pinterest"></i></a></li>
			<li class="widget-si-flickr"><a href="http://flickr.com" title="Flickr"><i class="ico-flickr"></i></a></li>
			<li class="widget-si-instagram"><a href="http://instagram.com" title="Instagram"><i class="ico-instagram"></i></a></li>
		</ul> -->

    </div>
  </div>


  
    
  <div class="widget_athemes_tabs">
    <ul id="widget-tab" class="clearfix widget-tab-nav">
      <li class="active"><a>Recent Posts</a></li>
    </ul>
    <div class="widget">
      <ul>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="/blog/How-to-use-Firebase-RemoteConfig/">How to use Firebase RemoteConfig</a></h6>
              <span>November 5, 2019</span>
            </div>

          </li>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="/blog/How-to-apply-translations-to-Localizable.strings/">How to apply translations to Localizable.strings</a></h6>
              <span>November 5, 2019</span>
            </div>

          </li>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="/blog/How-to-use-CreateML-to-classify-images/">How to use CreateML to classify images</a></h6>
              <span>November 4, 2019</span>
            </div>

          </li>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="/blog/How-to-use-Firebase-AutoML-Vision-Edge-to-classify-images/">How to use Firebase AutoML Vision Edge to classify images</a></h6>
              <span>November 4, 2019</span>
            </div>

          </li>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="/blog/How-to-use-Google-AutoML-to-classify-images/">How to use Google AutoML to classify images</a></h6>
              <span>November 4, 2019</span>
            </div>

          </li>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="/blog/How-to-get-Binding-via-dollar-prefix-in-SwiftUI/">How to get Binding via dollar prefix in SwiftUI</a></h6>
              <span>November 2, 2019</span>
            </div>

          </li>
        
      </ul>
    </div>
  </div>

  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/android/">android</a><span class="tag-list-count">31</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ci/">ci</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cloud/">cloud</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cocoapods/">cocoapods</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/combine/">combine</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/dart/">dart</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/design/">design</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/electron/">electron</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/firebase/">firebase</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/flutter/">flutter</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/github/">github</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/iOS/">iOS</a><span class="tag-list-count">102</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/javascript/">javascript</a><span class="tag-list-count">32</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/kotlin/">kotlin</a><span class="tag-list-count">23</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/life/">life</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/macOS/">macOS</a><span class="tag-list-count">47</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/machine-learning/">machine learning</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/node/">node</a><span class="tag-list-count">9</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/objc/">objc</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/react/">react</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/react-native/">react native</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/script/">script</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/swift/">swift</a><span class="tag-list-count">148</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/swiftUI/">swiftUI</a><span class="tag-list-count">14</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tech/">tech</a><span class="tag-list-count">13</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/testing/">testing</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/watchOS/">watchOS</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/web/">web</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/xcode/">xcode</a><span class="tag-list-count">4</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/android/" style="font-size: 17.14px;">android</a> <a href="/tags/ci/" style="font-size: 10px;">ci</a> <a href="/tags/cloud/" style="font-size: 10.71px;">cloud</a> <a href="/tags/cocoapods/" style="font-size: 10px;">cocoapods</a> <a href="/tags/combine/" style="font-size: 10px;">combine</a> <a href="/tags/dart/" style="font-size: 11.43px;">dart</a> <a href="/tags/design/" style="font-size: 10px;">design</a> <a href="/tags/electron/" style="font-size: 11.43px;">electron</a> <a href="/tags/firebase/" style="font-size: 10.71px;">firebase</a> <a href="/tags/flutter/" style="font-size: 11.43px;">flutter</a> <a href="/tags/github/" style="font-size: 10px;">github</a> <a href="/tags/iOS/" style="font-size: 19.29px;">iOS</a> <a href="/tags/javascript/" style="font-size: 17.86px;">javascript</a> <a href="/tags/kotlin/" style="font-size: 16.43px;">kotlin</a> <a href="/tags/life/" style="font-size: 11.43px;">life</a> <a href="/tags/macOS/" style="font-size: 18.57px;">macOS</a> <a href="/tags/machine-learning/" style="font-size: 10.71px;">machine learning</a> <a href="/tags/node/" style="font-size: 14.29px;">node</a> <a href="/tags/objc/" style="font-size: 10px;">objc</a> <a href="/tags/react/" style="font-size: 10px;">react</a> <a href="/tags/react-native/" style="font-size: 12.86px;">react native</a> <a href="/tags/script/" style="font-size: 10.71px;">script</a> <a href="/tags/swift/" style="font-size: 20px;">swift</a> <a href="/tags/swiftUI/" style="font-size: 15.71px;">swiftUI</a> <a href="/tags/tech/" style="font-size: 15px;">tech</a> <a href="/tags/testing/" style="font-size: 12.14px;">testing</a> <a href="/tags/watchOS/" style="font-size: 13.57px;">watchOS</a> <a href="/tags/web/" style="font-size: 10px;">web</a> <a href="/tags/xcode/" style="font-size: 11.43px;">xcode</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>

    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a><span class="archive-list-count">49</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a><span class="archive-list-count">50</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a><span class="archive-list-count">42</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a><span class="archive-list-count">39</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a><span class="archive-list-count">21</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a><span class="archive-list-count">23</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a><span class="archive-list-count">14</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a><span class="archive-list-count">14</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a><span class="archive-list-count">12</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a><span class="archive-list-count">18</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a><span class="archive-list-count">15</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a><span class="archive-list-count">36</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a><span class="archive-list-count">6</span></li></ul>
    </div>
  </div>


  
</aside>
        
      </div>
      <footer id="footer" class="site-footer">
  

  <div class="clearfix container">
      <div class="site-info">
	      &copy; 2019 onmyway133 All Rights Reserved.
          
      </div>
      <div class="site-credit">
        Theme by <a href="https://github.com/iTimeTraveler/hexo-theme-hiero" target="_blank">hiero</a>
      </div>
  </div>
</footer>


<!-- min height -->

<script>
    var contentdiv = document.getElementById("content");

    contentdiv.style.minHeight = document.body.offsetHeight - document.getElementById("allheader").offsetHeight - document.getElementById("footer").offsetHeight + "px";
</script>

<!-- Custome JS -->
<script src="/js/my.js"></script>
    </div>
    <!-- <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/about/" class="mobile-nav-link">About</a>
  
    <a href="/writing/" class="mobile-nav-link">Writing</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/speaking/" class="mobile-nav-link">Speaking</a>
  
    <a href="/opensource/" class="mobile-nav-link">Open Source</a>
  
    <a href="/projects/" class="mobile-nav-link">Projects</a>
  
    <a href="/news/" class="mobile-nav-link">News</a>
  
    <a href="/gumroad/" class="mobile-nav-link">Gumroad</a>
  
    <a href="/atom.xml" class="mobile-nav-link">RSS</a>
  
</nav> -->
    

<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>



  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.js"></script>


<script src="/js/scripts.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script src="/js/main.js"></script>













  </div>

  <a id="rocket" href="#top" class=""></a>
  <script type="text/javascript" src="/js/totop.js" async=""></script>
</body>
</html>
