<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="generator" content="Hexo 4.2.0"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>Tag: swiftUI - onmyway133</title><meta description="What you don&amp;#39;t know is what you haven&amp;#39;t learned"><meta property="og:type" content="blog"><meta property="og:title" content="onmyway133"><meta property="og:url" content="https://onmyway133.github.io/"><meta property="og:site_name" content="onmyway133"><meta property="og:description" content="What you don&amp;#39;t know is what you haven&amp;#39;t learned"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://onmyway133.github.io/img/og_image.png"><meta property="article:author" content="Khoa Pham"><meta property="article:tag" content="ios"><meta property="article:tag" content=" android"><meta property="article:tag" content="javascript"><meta property="article:tag" content=" react"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/img/og_image.png"><meta property="twitter:creator" content="@onmyway133"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://onmyway133.github.io"},"headline":"onmyway133","image":["https://onmyway133.github.io/img/og_image.png"],"author":{"@type":"Person","name":"Khoa Pham"},"description":"What you don&#39;t know is what you haven&#39;t learned"}</script><link rel="alternative" href="/atom.xml" title="onmyway133" type="application/atom+xml"><link rel="icon" href="/img/favicon.ico"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><script src="https://www.googletagmanager.com/gtag/js?id=UA-40119591-5" async></script><script>window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
    
        gtag('config', 'UA-40119591-5');</script><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><script data-ad-client="ca-pub-3656459401405265" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js" async></script></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/z.png" alt="onmyway133" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/apps">Apps</a><a class="navbar-item" href="/gumroad">Gumroad</a><a class="navbar-item" href="/about">About</a><a class="navbar-item" href="/opensource">Open Source</a><a class="navbar-item" href="/writing">Writing</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/speaking">Speaking</a><a class="navbar-item" href="/news">News</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/onmyway133"><i class="fab fa-github"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><div class="card-content"><nav class="breadcrumb" aria-label="breadcrumbs"><ul><li><a href="/tags">Tags</a></li><li class="is-active"><a href="#" aria-current="page">swiftUI</a></li></ul></nav></div></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2020-12-26T20:02:18.000Z" title="2020-12-26T20:02:18.000Z">2020-12-26</time><span class="level-item">a few seconds read (About 88 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-make-visual-effect-blur-in-SwiftUI-for-macOS/">How to make visual effect blur in SwiftUI for macOS</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/724">#724</a></strong></p>
<p>We can use <code>.blur</code> modifier, but with <code>VisualEffectView</code> gives us more options for material and blending mode.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">struct</span> <span class="title">VisualEffectView</span>: <span class="title">NSViewRepresentable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> material: <span class="type">NSVisualEffectView</span>.<span class="type">Material</span></span><br><span class="line">    <span class="keyword">let</span> blendingMode: <span class="type">NSVisualEffectView</span>.<span class="type">BlendingMode</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">init</span>(</span><br><span class="line">        material: <span class="type">NSVisualEffectView</span>.<span class="type">Material</span> = .contentBackground,</span><br><span class="line">        blendingMode: <span class="type">NSVisualEffectView</span>.<span class="type">BlendingMode</span> = .withinWindow</span><br><span class="line">    ) &#123;</span><br><span class="line">        <span class="keyword">self</span>.material = material</span><br><span class="line">        <span class="keyword">self</span>.blendingMode = blendingMode</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">makeNSView</span><span class="params">(context: Context)</span></span> -&gt; <span class="type">NSVisualEffectView</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> visualEffectView = <span class="type">NSVisualEffectView</span>()</span><br><span class="line">        visualEffectView.material = material</span><br><span class="line">        visualEffectView.blendingMode = blendingMode</span><br><span class="line">        visualEffectView.state = <span class="type">NSVisualEffectView</span>.<span class="type">State</span>.active</span><br><span class="line">        <span class="keyword">return</span> visualEffectView</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">updateNSView</span><span class="params">(<span class="number">_</span> visualEffectView: NSVisualEffectView, context: Context)</span></span> &#123;</span><br><span class="line">        visualEffectView.material = material</span><br><span class="line">        visualEffectView.blendingMode = blendingMode</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2020-12-26T19:51:44.000Z" title="2020-12-26T19:51:44.000Z">2020-12-26</time><span class="level-item">a minute read (About 121 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-make-simple-HUD-in-SwiftUI/">How to make simple HUD in SwiftUI</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/723">#723</a></strong></p>
<p>Use <code>@ViewBuilder</code> to build dynamic content for our HUD. For blur effect, here I use <code>NSVisualEffectView</code>, but we can use <code>.blur</code> modifier also</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">HUD</span>&lt;<span class="title">Content</span>&gt;: <span class="title">View</span> <span class="title">where</span> <span class="title">Content</span>: <span class="title">View</span> </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> content: () -&gt; <span class="type">Content</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">init</span>(@<span class="type">ViewBuilder</span> content: @escaping () -&gt; <span class="type">Content</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.content = content</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> body: some <span class="type">View</span> &#123;</span><br><span class="line">        content()</span><br><span class="line">        .frame(width: <span class="number">80</span>, height: <span class="number">80</span>)</span><br><span class="line">        .background(</span><br><span class="line">            <span class="type">VisualEffectView</span>(material: .hudWindow)</span><br><span class="line">                .clipShape(<span class="type">RoundedRectangle</span>(cornerRadius: <span class="number">12</span>))</span><br><span class="line">                .shadow(color: <span class="type">Color</span>.black.opacity(<span class="number">0.22</span>), radius: <span class="number">12</span>, x: <span class="number">0</span>, y: <span class="number">5</span>)</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Then we can make some wrappers for information and progress HUD</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">HUD</span>&lt;<span class="title">Content</span>&gt;: <span class="title">View</span> <span class="title">where</span> <span class="title">Content</span>: <span class="title">View</span> </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> content: () -&gt; <span class="type">Content</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">init</span>(@<span class="type">ViewBuilder</span> content: @escaping () -&gt; <span class="type">Content</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.content = content</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> body: some <span class="type">View</span> &#123;</span><br><span class="line">        content()</span><br><span class="line">        .frame(width: <span class="number">80</span>, height: <span class="number">80</span>)</span><br><span class="line">        .background(</span><br><span class="line">            <span class="type">VisualEffectView</span>()</span><br><span class="line">        )</span><br><span class="line">        .cornerRadius(<span class="number">10</span>)</span><br><span class="line">        .shadow(color: <span class="type">Color</span>.gray.opacity(<span class="number">0.3</span>), radius: <span class="number">1</span>, x: <span class="number">0</span>, y: <span class="number">1</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<p><strong>Updated at</strong> 2020-12-26 20:59:10</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2020-12-25T22:06:34.000Z" title="2020-12-25T22:06:34.000Z">2020-12-25</time><span class="level-item">2 minutes read (About 317 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-instrument-SwiftUI-app/">How to instrument SwiftUI app</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/722">#722</a></strong></p>
<p>With Xcode 12, we can fire up Instrument to profile our app. Select <code>SwiftUI template</code></p>
<img width="836" alt="Screenshot 2020-12-26 at 00 02 03" src="https://user-images.githubusercontent.com/2284279/103142980-a0a13b00-470d-11eb-81bc-632a08b8084b.png">

<p>There are many profiles in that template, I find SwiftUI and Time Profile very useful. Here’s the profile I run for my app <a href="https://onmyway133.com/pastepal">PastePal</a></p>
<h2 id="SwiftUI-View-Body"><a href="#SwiftUI-View-Body" class="headerlink" title="SwiftUI View Body"></a>SwiftUI View Body</h2><p>This shows how many instance of View with body invocation are there, both for SwiftUI views and our app views</p>
<p>Taking a look at SwiftUI profile, it shows that <code>ClipboardCell</code> is taking most of the time, here over 7 seconds</p>
<img width="1396" alt="Screenshot 2020-12-25 at 23 59 12" src="https://user-images.githubusercontent.com/2284279/103142965-7bacc800-470d-11eb-8b0e-5d598f6e082b.png">

<h2 id="Time-Profiler"><a href="#Time-Profiler" class="headerlink" title="Time Profiler"></a>Time Profiler</h2><p>This shows how much time was spent in each functions and call stack.</p>
<p>Then we drill down to Time Profiler, it shows that <code>NSSharingService.submenu</code> accounts for 75% of performance issue</p>
<img width="1396" alt="Screenshot 2020-12-25 at 23 59 57" src="https://user-images.githubusercontent.com/2284279/103142966-7f404f00-470d-11eb-85b7-3e813ff5476c.png">

<p>With these instruments, I found out that the <a href="https://onmyway133.com/blog/how-to-make-sharing-menu-in-swiftui-for-macos/">NSSharingService context menu I added</a> has poor performance. </p>
<p>This below method is used every time <code>Menu</code> is asked, which causes a significant overload on main thread, resulting in noticeable laggy scrolling</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">NSSharingService</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="function"><span class="keyword">func</span> <span class="title">submenu</span><span class="params">(text: String)</span></span> -&gt; some <span class="type">View</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="type">Menu</span>(</span><br><span class="line">            content: &#123;</span><br><span class="line">                <span class="type">ForEach</span>(<span class="type">NSSharingService</span>.sharingServices(forItems: [<span class="string">""</span>])), id: \.title) &#123; item <span class="keyword">in</span></span><br><span class="line">                    <span class="type">Button</span>(action: &#123; item.perform(withItems: [string]) &#125;) &#123;</span><br><span class="line">                        <span class="type">Image</span>(nsImage: item.image)</span><br><span class="line">                        <span class="type">Text</span>(item.title)</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            label: &#123;</span><br><span class="line">                <span class="type">Text</span>(<span class="string">"Share"</span>)</span><br><span class="line">                <span class="type">Image</span>(systemName: <span class="type">SFSymbol</span>.squareAndArrowUp.rawValue)</span><br><span class="line">            &#125;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>The reason is that <code>NSSharingService.sharingServices</code> requires quite some time to get sharing services. A quick fix is to cache the items using <code>static</code> variable. In Swift, static variable is like <code>lazy</code> attribute, it is computed only once on first asked</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">let</span> items = <span class="type">NSSharingService</span>.sharingServices(forItems: [<span class="string">""</span>])</span><br></pre></td></tr></table></figure>

<p>There are more to optimize in my case, for example calculation of image and dominant colors. But we should only optimize when seeing real performance issue and after proper instruments</p>
<h2 id="Fix-and-instrument-again"><a href="#Fix-and-instrument-again" class="headerlink" title="Fix and instrument again"></a>Fix and instrument again</h2><p>After the fix, the time reduces from over 7 seconds to just less than 200ms</p>
<img width="1396" alt="Screenshot 2020-12-26 at 00 09 51" src="https://user-images.githubusercontent.com/2284279/103143031-db57a300-470e-11eb-8953-c15f163fe364.png">
<img width="1396" alt="Screenshot 2020-12-26 at 00 09 01" src="https://user-images.githubusercontent.com/2284279/103143033-deeb2a00-470e-11eb-980e-27c82136b1a8.png">

<hr>
<p><strong>Updated at</strong> 2020-12-30 06:37:53</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2020-12-23T05:17:48.000Z" title="2020-12-23T05:17:48.000Z">2020-12-23</time><span class="level-item">a minute read (About 223 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-show-image-and-text-in-menu-item-in-SwiftUI-for-macOS/">How to show image and text in menu item in SwiftUI for macOS</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/719">#719</a></strong></p>
<p>From SwiftUI 2 for macOS 11.0, we have access to <code>Menu</code> for creating menu and submenu. Usually we use <code>Button</code> for interactive menu items and <code>Text</code> for disabled menu items.</p>
<p>The easy way to customize menu with image is to call <code>Menu</code> with <code>content</code> and <code>label</code>. Pay attention to how we use <code>Button</code> and <code>Label</code> inside <code>Content</code> to create interactive menu items</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Menu</span>(</span><br><span class="line">    content: &#123;</span><br><span class="line">        <span class="type">ForEach</span>(collections) &#123; collection <span class="keyword">in</span></span><br><span class="line">            <span class="type">Button</span>(action: &#123;) &#123;</span><br><span class="line">                <span class="type">Label</span>(collection.name, systemImage: <span class="type">SFSymbol</span>.star.rawValue)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    label: &#123;</span><br><span class="line">        <span class="type">Image</span>(systemName: <span class="type">SFSymbol</span>.bookmarkFill.rawValue)</span><br><span class="line">        <span class="type">Text</span>(<span class="string">"Add to collection"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>We can also use <code>Image</code> and <code>Text</code> separately. By default SwiftUI wraps these inside <code>HStack</code> automatically for us. For now, color has no effect in <code>Menu</code>, but it works on <code>Text</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Image</span>(systemName: <span class="type">SFSymbol</span>.bookmarkFill.rawValue)</span><br><span class="line">     .foregroundColor(<span class="type">Color</span>.red)</span><br><span class="line"><span class="type">Text</span>(collection.name)</span><br><span class="line">    .foregroundColor(<span class="type">Color</span>.green)</span><br></pre></td></tr></table></figure>

<p>One way to mitigate this is to use Text with icon font. Here I use my <a href="https://github.com/onmyway133/FontAwesomeSwiftUI">FontAwesomeSwiftUI</a></p>
<p>There’s a problem that only the first <code>Text</code> is shown</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Text</span>(collection.icon)</span><br><span class="line">    .font(.awesome(style: .solid, size: <span class="number">18</span>))</span><br><span class="line">    .foregroundColor(<span class="type">Color</span>.red)</span><br><span class="line"><span class="type">Text</span>(collection.name)</span><br></pre></td></tr></table></figure>

<p>The solution is to concatenate <code>Text</code>. In SwiftUI, <code>Text</code> has <code>+</code> operator that allows us to make cool attributed texts</p>
<img width="409" alt="Screenshot 2020-12-23 at 07 34 40" src="https://user-images.githubusercontent.com/2284279/102967039-652a2500-44f1-11eb-826c-ce69f10468b7.png">

<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Text</span>(collection.icon)</span><br><span class="line">    .font(.awesome(style: .solid, size: <span class="number">18</span>))</span><br><span class="line">    .foregroundColor(<span class="type">Color</span>.red)</span><br><span class="line">+ <span class="type">Text</span>(collection.name)</span><br></pre></td></tr></table></figure>
<hr>
<p><strong>Updated at</strong> 2020-12-23 06:35:31</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2020-12-23T04:19:17.000Z" title="2020-12-23T04:19:17.000Z">2020-12-23</time><span class="level-item">a minute read (About 127 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-make-sharing-menu-in-SwiftUI-for-macOS/">How to make sharing menu in SwiftUI for macOS</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/718">#718</a></strong></p>
<p>Use <code>NSSharingService.sharingServices(forItems:)</code> with an array of one empty string gives a list of sharing items. There we show <code>image</code> and <code>title</code> of each menu item.</p>
<p>We should cache sharing items as that can cause performance issue</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> SwiftUI</span><br><span class="line"><span class="keyword">import</span> AppKit</span><br><span class="line"><span class="keyword">import</span> EasySwiftUI</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">NSSharingService</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">let</span> items = <span class="type">NSSharingService</span>.sharingServices(forItems: [<span class="string">""</span>])</span><br><span class="line">    <span class="keyword">static</span> <span class="function"><span class="keyword">func</span> <span class="title">submenu</span><span class="params">(text: String)</span></span> -&gt; some <span class="type">View</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="type">Menu</span>(</span><br><span class="line">            content: &#123;</span><br><span class="line">                <span class="type">ForEach</span>(items, id: \.title) &#123; item <span class="keyword">in</span></span><br><span class="line">                    <span class="type">Button</span>(action: &#123; item.perform(withItems: [string]) &#125;) &#123;</span><br><span class="line">                        <span class="type">Image</span>(nsImage: item.image)</span><br><span class="line">                        <span class="type">Text</span>(item.title)</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            label: &#123;</span><br><span class="line">                <span class="type">Text</span>(<span class="string">"Share"</span>)</span><br><span class="line">                <span class="type">Image</span>(systemName: <span class="type">SFSymbol</span>.squareAndArrowUp.rawValue)</span><br><span class="line">            &#125;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Alternative, you can trigger <code>NSSharingServicePicker</code> from a button, it shows a context menu with sharing options</p>
<h2 id="Read-more"><a href="#Read-more" class="headerlink" title="Read more"></a>Read more</h2><ul>
<li><a href="https://stackoverflow.com/questions/60952334/swiftui-using-nssharingservicepicker-in-macos">https://stackoverflow.com/questions/60952334/swiftui-using-nssharingservicepicker-in-macos</a></li>
</ul>
<hr>
<p><strong>Updated at</strong> 2020-12-25 22:57:57</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2020-12-21T04:24:26.000Z" title="2020-12-21T04:24:26.000Z">2020-12-21</time><span class="level-item">a minute read (About 156 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-make-stepper-with-plus-and-minus-buttons-in-SwiftUI-for-macOS/">How to make stepper with plus and minus buttons in SwiftUI for macOS</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/717">#717</a></strong></p>
<p>Try to use predefined system colors in <a href="https://developer.apple.com/design/human-interface-guidelines/macos/visual-design/color/">Human Interface Guidelines</a> for macOS</p>
<p>Here we use this color <code>unemphasizedSelectedTextBackgroundColor</code> for button background</p>
<img width="88" alt="Screenshot 2020-12-21 at 06 24 16" src="https://user-images.githubusercontent.com/2284279/102742430-29f2ef00-4355-11eb-9bdd-b5fe373677c5.png">

<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">HStack</span>(spacing: <span class="number">1</span>) &#123;</span><br><span class="line">    makeUnderListButton(action: &#123;&#125;, icon: .plus)</span><br><span class="line">    makeUnderListButton(action: &#123;&#125;, icon: .minus)</span><br><span class="line">&#125;</span><br><span class="line">.background(<span class="type">Color</span>(<span class="type">NSColor</span>.unemphasizedSelectedTextBackgroundColor))</span><br><span class="line">.cornerRadius(<span class="number">4</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">makeUnderListButton</span><span class="params">(action: @escaping <span class="params">()</span></span></span> -&gt; <span class="type">Void</span>, icon: <span class="type">AwesomeIcon</span>) -&gt; some <span class="type">View</span> &#123;</span><br><span class="line">    <span class="type">Button</span>(action: action) &#123;</span><br><span class="line">        <span class="type">Text</span>(icon.rawValue)</span><br><span class="line">            .font(.awesome(style: .solid, size: <span class="number">14</span>))</span><br><span class="line">    &#125;</span><br><span class="line">    .buttonStyle(<span class="type">HighlightButtonStyle</span>(h: <span class="number">8</span>, v: <span class="number">6</span>, cornerRadius: <span class="number">4</span>))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Another thing is List, where we have selected and alternative background colors. We should also use dynamic system colors <code>selectedContentBackgroundColor</code> and <code>alternatingContentBackgroundColors</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">VStack</span> &#123;</span><br><span class="line">    <span class="type">ForEach</span>(apps.enumerated().<span class="built_in">map</span>(&#123; $<span class="number">0</span> &#125;), id: \.element) &#123; index, app <span class="keyword">in</span></span><br><span class="line">        makeRow(app: app)</span><br><span class="line">            .onTapGesture &#123;</span><br><span class="line">                <span class="keyword">self</span>.selected = app</span><br><span class="line">            &#125;</span><br><span class="line">            .background(</span><br><span class="line">                <span class="keyword">self</span>.selected == app</span><br><span class="line">                    ? <span class="type">Color</span>(<span class="type">NSColor</span>.selectedContentBackgroundColor)</span><br><span class="line">                    : <span class="type">Color</span>(<span class="type">NSColor</span>.alternatingContentBackgroundColors[index % <span class="number">2</span>])</span><br><span class="line">            )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Read-more"><a href="#Read-more" class="headerlink" title="Read more"></a>Read more</h2><ul>
<li><a href="https://blog.verslu.is/xamarin/ios-macos-dark-mode-dynamic-colors-overview/">iOS and macOS Dark Mode Dynamic Colors Overview</a></li>
</ul>
<hr>
<p><strong>Updated at</strong> 2020-12-21 05:56:28</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2020-12-20T05:18:26.000Z" title="2020-12-20T05:18:26.000Z">2020-12-20</time><span class="level-item">2 minutes read (About 286 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-fix-Picker-not-showing-selection-in-SwiftUI/">How to fix Picker not showing selection in SwiftUI</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/716">#716</a></strong></p>
<p>I have an enum that conforms to <code>CaseIterable</code> that I want to show in <code>Picker</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">Position</span>: <span class="title">String</span>, <span class="title">Codable</span>, <span class="title">CaseIterable</span>, <span class="title">Identifiable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> id: <span class="type">String</span> &#123; rawValue &#125;</span><br><span class="line">    <span class="keyword">case</span> <span class="keyword">left</span></span><br><span class="line">    <span class="keyword">case</span> <span class="keyword">right</span></span><br><span class="line">    <span class="keyword">case</span> bottom</span><br><span class="line">    <span class="keyword">case</span> top</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">Picker</span>(selection: $preference.position, label: <span class="type">Text</span>(<span class="string">"Position"</span>)) &#123;</span><br><span class="line">    <span class="type">ForEach</span>(<span class="type">Preference</span>.<span class="type">Position</span>.allCases) &#123; position <span class="keyword">in</span></span><br><span class="line">        <span class="type">Text</span>(position.rawValue)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>It compiles and runs just fine, but Picker does not show current selection regardless of any Picker style I choose. It does not update <code>Binding</code> at all.</p>
<p>The fix is to specify <code>id</code>, it looks redundant because of enum conforms to <code>Identifiable</code>, but it fixes the problem</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Picker</span>(selection: $preference.position, label: <span class="type">Text</span>(<span class="string">"Position"</span>)) &#123;</span><br><span class="line">    <span class="type">ForEach</span>(<span class="type">Preference</span>.<span class="type">Position</span>.allCases, id: \.<span class="keyword">self</span>) &#123; position <span class="keyword">in</span></span><br><span class="line">        <span class="type">Text</span>(position.rawValue)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Mismatch-between-rawValue-and-enum-case-itself"><a href="#Mismatch-between-rawValue-and-enum-case-itself" class="headerlink" title="Mismatch between rawValue and enum case itself"></a>Mismatch between rawValue and enum case itself</h3><p>Reading <a href="https://developer.apple.com/documentation/swiftui/foreach/init(_:content:)-6oy5i">ForEach</a> once again </p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">init</span>(<span class="number">_</span> data: <span class="type">Data</span>, content: @escaping (<span class="type">Data</span>.<span class="type">Element</span>) -&gt; <span class="type">Content</span>)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>Available when Data conforms to RandomAccessCollection, ID is Data.Element.ID, Content conforms to View, and Data.Element conforms to Identifiable.</p>
</blockquote>
<p>So in our case, we use <code>rawValue</code> as <code>id</code> for <code>Identifiable</code>, so there’s mismatch between our <code>selection</code> being <code>enum case</code> and items in <code>ForEach</code>, which uses <code>rawValue</code> to uniquely identifies items. So our fix is to explicitly state that we want to use the enum case itself <code>\.self</code> as <code>id</code>for ForEach</p>
<p>What we can also do is to declare enum case itself as <code>id</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">Position</span>: <span class="title">String</span>, <span class="title">Codable</span>, <span class="title">CaseIterable</span>, <span class="title">Identifiable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> id: <span class="type">Position</span> &#123; <span class="keyword">self</span> &#125;</span><br><span class="line">    <span class="keyword">case</span> <span class="keyword">left</span></span><br><span class="line">    <span class="keyword">case</span> <span class="keyword">right</span></span><br><span class="line">    <span class="keyword">case</span> bottom</span><br><span class="line">    <span class="keyword">case</span> top</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="The-lesson-learned-here-is-we-need-to-ensure-the-underlying-type-of-selection-in-List-and-id-used-in-ForEach-are-the-same"><a href="#The-lesson-learned-here-is-we-need-to-ensure-the-underlying-type-of-selection-in-List-and-id-used-in-ForEach-are-the-same" class="headerlink" title="The lesson learned here is we need to ensure the underlying type of selection in List and id used  in ForEach are the same"></a>The lesson learned here is we need to ensure the underlying type of <code>selection</code> in <code>List</code> and <code>id</code> used  in <code>ForEach</code> are the same</h2><p><strong>Updated at</strong> 2020-12-23 06:05:08</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2020-12-16T04:30:50.000Z" title="2020-12-16T04:30:50.000Z">2020-12-16</time><span class="level-item">2 minutes read (About 289 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-do-didSet-for-State-and-Binding-in-SwiftUI/">How to do didSet for State and Binding in SwiftUI</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/714">#714</a></strong></p>
<p>Below is an example of a parent <code>ContentView</code> with <code>State</code> and a child <code>Sidebar</code> with a <code>Binding</code>.</p>
<p>The <code>didSet</code> is only called for the property that is changed. </p>
<p>When we click <code>Button in ContentView</code>, that changes <code>State</code> property, so only the <code>didSet</code> in <code>ContentView</code> is called<br>When we click <code>Button in Sidebar</code>, that changes <code>Binding</code> property, so only the <code>didSet</code> in <code>Sidebar</code> is called</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">Tag</span>: <span class="title">String</span> </span>&#123;</span><br><span class="line">    <span class="keyword">case</span> all</span><br><span class="line">    <span class="keyword">case</span> settings</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">ContentView</span>: <span class="title">View</span> </span>&#123;</span><br><span class="line">    @<span class="type">State</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> tag: <span class="type">Tag</span> = .all &#123;</span><br><span class="line">        <span class="keyword">didSet</span> &#123;</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">"ContentView \(tag)"</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> body: some <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">Sidebar</span>(tag: $tag)</span><br><span class="line">        <span class="type">Button</span>(action: &#123; tag = .settings &#125;) &#123;</span><br><span class="line">            <span class="type">Text</span>(<span class="string">"Button in ContentView"</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Sidebar</span>: <span class="title">View</span> </span>&#123;</span><br><span class="line">    @<span class="type">Binding</span></span><br><span class="line">    <span class="keyword">var</span> tag: <span class="type">Tag</span> &#123;</span><br><span class="line">        <span class="keyword">didSet</span> &#123;</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">"Sidebar \(tag)"</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> body: some <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">Text</span>(tag.rawValue)</span><br><span class="line">        <span class="type">Button</span>(action: &#123; tag = .settings &#125;) &#123;</span><br><span class="line">            <span class="type">Text</span>(<span class="string">"Button in Sidebar"</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Custom-Binding-with-get-set"><a href="#Custom-Binding-with-get-set" class="headerlink" title="Custom Binding with get set"></a>Custom Binding with get set</h3><p>Another way to observe Binding changes is to use custom <code>Binding</code> with <code>get, set</code>. Here even if we click <code>Button in ContentView</code>, the <code>set</code> block is triggered and here we can change <code>State</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> body: some <span class="type">View</span> &#123;</span><br><span class="line">    <span class="type">Sidebar</span>(tag: <span class="type">Binding</span>&lt;<span class="type">Tag</span>&gt;(</span><br><span class="line">        <span class="keyword">get</span>: &#123; tag &#125;,</span><br><span class="line">        <span class="keyword">set</span>: &#123; newTag <span class="keyword">in</span></span><br><span class="line">            <span class="keyword">self</span>.tag = newTag</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">"ContentView newTag \(newTag)"</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    ))</span><br><span class="line">    <span class="type">Button</span>(action: &#123; tag = .settings &#125;) &#123;</span><br><span class="line">        <span class="type">Text</span>(<span class="string">"Button in ContentView"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Convenient-new-Binding"><a href="#Convenient-new-Binding" class="headerlink" title="Convenient new Binding"></a>Convenient new Binding</h3><p>We can also make convenient extension on Binding to return new <code>Binding</code>, with a hook allowing us to inspect newValue. So we can call like <code>Sidebar(tag: $tag.didSet</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Binding</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">didSet</span><span class="params">(<span class="number">_</span> <span class="keyword">didSet</span>: @escaping <span class="params">(Value)</span></span></span> -&gt; <span class="type">Void</span>) -&gt; <span class="type">Binding</span>&lt;<span class="type">Value</span>&gt; &#123;</span><br><span class="line">        <span class="type">Binding</span>(</span><br><span class="line">            <span class="keyword">get</span>: &#123; wrappedValue &#125;,</span><br><span class="line">            <span class="keyword">set</span>: &#123; newValue <span class="keyword">in</span></span><br><span class="line">                <span class="keyword">self</span>.wrappedValue = newValue</span><br><span class="line">                <span class="keyword">didSet</span>(newValue)</span><br><span class="line">            &#125;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">ContentView</span>: <span class="title">View</span> </span>&#123;</span><br><span class="line">    @<span class="type">State</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> tag: <span class="type">Tag</span> = .all &#123;</span><br><span class="line">        <span class="keyword">didSet</span> &#123;</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">"ContentView \(tag)"</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> body: some <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">Sidebar</span>(tag: $tag.<span class="keyword">didSet</span> &#123; newValue <span class="keyword">in</span></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">"ContentView newTag \(newValue)"</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="type">Button</span>(action: &#123; tag = .settings &#125;) &#123;</span><br><span class="line">            <span class="type">Text</span>(<span class="string">"Button in ContentView"</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<p><strong>Updated at</strong> 2020-12-16 19:27:35</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2020-12-13T18:54:22.000Z" title="2020-12-13T18:54:22.000Z">2020-12-13</time><span class="level-item">a few seconds read (About 106 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-programatically-select-row-in-List-in-SwiftUI/">How to programatically select row in List in SwiftUI</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/711">#711</a></strong></p>
<p><code>List</code> has a selection parameter where we can pass selection binding. As we can see here <code>selection</code> is of type optional <code>Binding&lt;Set&lt;SelectionValue&gt;&gt;?</code> where <code>SelectionValue</code> is any thing conforming to <code>Hasable</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@available</span>(iOS <span class="number">13.0</span>, macOS <span class="number">10.15</span>, tvOS <span class="number">13.0</span>, watchOS <span class="number">6.0</span>, *)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">struct</span> <span class="title">List</span>&lt;<span class="title">SelectionValue</span>, <span class="title">Content</span>&gt; : <span class="title">View</span> <span class="title">where</span> <span class="title">SelectionValue</span> : <span class="title">Hashable</span>, <span class="title">Content</span> : <span class="title">View</span> </span>&#123;</span><br><span class="line">    <span class="meta">@available</span>(watchOS, unavailable)</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">init</span>(selection: <span class="type">Binding</span>&lt;<span class="type">Set</span>&lt;<span class="type">SelectionValue</span>&gt;&gt;?, @<span class="type">ViewBuilder</span> content: () -&gt; <span class="type">Content</span>)</span><br></pre></td></tr></table></figure>

<p>So we can programatically control selection by tagging row with our own <code>Tag</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">SideView</span>: <span class="title">View</span> </span>&#123;</span><br><span class="line">    <span class="class"><span class="keyword">enum</span> <span class="title">Tag</span>: <span class="title">String</span>, <span class="title">Hashable</span> </span>&#123;</span><br><span class="line">        <span class="keyword">case</span> all</span><br><span class="line">        <span class="keyword">case</span> settings</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @<span class="type">State</span></span><br><span class="line">    <span class="keyword">var</span> selection: <span class="type">Tag?</span> = .all</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> body: some <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">List</span> &#123;</span><br><span class="line">            all</span><br><span class="line">                .tag(<span class="type">Tag</span>.all)</span><br><span class="line">            categories</span><br><span class="line">            settings</span><br><span class="line">                .tag(<span class="type">Tag</span>.settings)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2020-12-13T18:01:59.000Z" title="2020-12-13T18:01:59.000Z">2020-12-13</time><span class="level-item">a minute read (About 167 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-show-sidebar-in-SwiftUi-for-macOS/">How to show sidebar in SwiftUI for macOS</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/710">#710</a></strong></p>
<p>Starting from macOS 11, we can use <code>List</code> with <code>SidebarListStyle</code> inside <code>NavigationView</code> to declare master detail view. The <code>SidebarListStyle</code> makes list translucent. It automatically handles selection and marks selected row in list with accent color.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">MainView</span>: <span class="title">some</span> <span class="title">View</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> body: some <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">NavigationView</span> &#123;</span><br><span class="line">            sidebar</span><br><span class="line">            <span class="type">ContentView</span>()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> sidebar: some <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">List</span> &#123;</span><br><span class="line">            <span class="type">Group</span> &#123;</span><br><span class="line">                <span class="type">Text</span>(<span class="string">"Categories"</span>)</span><br><span class="line">                    .foregroundColor(.gray)</span><br><span class="line">                <span class="type">ForEach</span>(categories) &#123; category <span class="keyword">in</span></span><br><span class="line">                    <span class="type">NavigationLink</span>(destination: <span class="type">ContentView</span>(category: category)) &#123;</span><br><span class="line">                        <span class="type">Label</span>(category.name, systemImage: <span class="string">"message"</span>)</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="type">Divider</span>()</span><br><span class="line">            <span class="type">NavigationLink</span>(destination: <span class="type">SettingsView</span>()) &#123;</span><br><span class="line">                <span class="type">Label</span>(<span class="string">"Settings"</span>, systemImage: <span class="string">"gear"</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        .listStyle(<span class="type">SidebarListStyle</span>())</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>To toggle side bar, we can use <code>toggleSidebar</code> selector since for now, sidebar is backed by <code>NSSplitViewController</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mainWindow.firstResponder?.tryToPerform(#selector(<span class="type">NSSplitViewController</span>.toggleSidebar(<span class="number">_</span>:)), with: <span class="literal">nil</span>)</span><br></pre></td></tr></table></figure>

<p>We can specify tool bar items on either sidebar or content.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">.toolbar&#123;</span><br><span class="line">    <span class="comment">//Toggle Sidebar Button</span></span><br><span class="line">    <span class="type">ToolbarItem</span>(placement: .navigation)&#123;</span><br><span class="line">        <span class="type">Button</span>(action: toggleSidebar) &#123;</span><br><span class="line">            <span class="type">Image</span>(systemName: <span class="string">"sidebar.left"</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>For tool bar to work, we must use <code>App</code> and embed views inside <code>WindowGroup</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">@main</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">AppWithSidebarAndToolbar</span>: <span class="title">App</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> body: some <span class="type">Scene</span> &#123;</span><br><span class="line">        <span class="type">WindowGroup</span> &#123;</span><br><span class="line">            <span class="type">MainView</span>()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<p><strong>Updated at</strong> 2020-12-14 15:38:19</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2020-11-27T11:24:13.000Z" title="2020-11-27T11:24:13.000Z">2020-11-27</time><span class="level-item">a few seconds read (About 37 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-disable-NSTextView-in-SwiftUI/">How to disable NSTextView in SwiftUI</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/702">#702</a></strong></p>
<p>The trick is to use an overlay</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">MessageTextView</span>(text: $input.message)</span><br><span class="line">    .overlay(obscure)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> obscure: <span class="type">AnyView</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> store.pricingPlan.isPro &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="type">EmptyView</span>().erase()</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="type">Color</span>.black.opacity(<span class="number">0.01</span>).erase()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2020-11-14T03:49:39.000Z" title="2020-11-14T03:49:39.000Z">2020-11-14</time><span class="level-item">a minute read (About 199 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-use-nested-ObservableObject-in-SwiftUI/">How to use nested ObservableObject in SwiftUI</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/694">#694</a></strong></p>
<p>I usually structure my app to have 1 main <code>ObservableObject</code> called <code>Store</code> with multiple properties in it.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">Store</span>: <span class="title">ObservableObject</span> </span>&#123;</span><br><span class="line">    @<span class="type">Published</span> <span class="keyword">var</span> pricingPlan: <span class="type">PricingPlan</span>()</span><br><span class="line">    @<span class="type">Published</span> <span class="keyword">var</span> preferences: <span class="type">Preferences</span>()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Preferences</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> opensAtLogin: <span class="type">Bool</span> = <span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">PricingPlan</span>: <span class="title">ObservableObject</span> </span>&#123;</span><br><span class="line">    @<span class="type">Published</span> <span class="keyword">var</span> isPro: <span class="type">Bool</span> = <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>SwiftUI for now does not work with nested <code>ObservableObject</code>, so if I pass <code>Store</code> to PricingView, changes in <code>PricingPlan</code> does not trigger view update in PricingView.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">MainView</span>: <span class="title">View</span> </span>&#123;</span><br><span class="line">    @<span class="type">ObservedObject</span></span><br><span class="line">    <span class="keyword">var</span> store: <span class="type">Store</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> body: some <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">VStack</span> &#123; geo <span class="keyword">in</span></span><br><span class="line">            </span><br><span class="line">        &#125;</span><br><span class="line">        .sheet(isPresented: $showsPricing) &#123;</span><br><span class="line">            <span class="type">PricingView</span>(</span><br><span class="line">                isPresented: $showsPricing,</span><br><span class="line">                store: store</span><br><span class="line">            )</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>There are some workarounds</p>
<h3 id="Pass-nested-ObservableObject"><a href="#Pass-nested-ObservableObject" class="headerlink" title="Pass nested ObservableObject"></a>Pass nested ObservableObject</h3><p>So that View observes both parent and nested objects.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">PricingView</span>(</span><br><span class="line">    store: store,</span><br><span class="line">    pricingPlan: store.pricingPlan</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h3 id="Use-struct"><a href="#Use-struct" class="headerlink" title="Use struct"></a>Use struct</h3><p>This forces us to deal with immutability also, as with reference type PricingPlan, someone could just save a reference to it and alter it at some point.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">PricingPlan</span> </span>&#123;&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Listen-to-nested-objects-changes"><a href="#Listen-to-nested-objects-changes" class="headerlink" title="Listen to nested objects changes"></a>Listen to nested objects changes</h3><p>Every <code>ObservableObject</code> has a synthesized property <code>objectWillChange</code> that triggers when any <code>@Publisshed</code> property changes</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">Store</span>: <span class="title">ObservableObject</span> </span>&#123;</span><br><span class="line">    @<span class="type">Published</span> <span class="keyword">var</span> pricingPlan = <span class="type">PricingPlan</span>()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> anyCancellable: <span class="type">AnyCancellable?</span> = <span class="literal">nil</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">init</span>() &#123;</span><br><span class="line">        anyCancellable = pricingPlan.objectWillChange.sink &#123; [<span class="keyword">weak</span> <span class="keyword">self</span>] <span class="number">_</span> <span class="keyword">in</span></span><br><span class="line">            <span class="keyword">self</span>?.objectWillChange.send()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2020-11-10T03:48:21.000Z" title="2020-11-10T03:48:21.000Z">2020-11-10</time><span class="level-item">a few seconds read (About 44 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-check-dark-mode-with-color-scheme-in-SwiftUI/">How to check dark mode with color scheme in SwiftUI</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/692">#692</a></strong></p>
<p>Use <a href="https://developer.apple.com/documentation/swiftui/colorscheme">colorScheme</a> environment, for now it has 2 cases <code>dark</code> and <code>light</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">MainView</span>: <span class="title">View</span> </span>&#123;</span><br><span class="line">    @<span class="type">Environment</span>(\.colorScheme) <span class="keyword">var</span> colorScheme</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> body: some <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">Text</span>(colorScheme == .dark ? <span class="string">"Dark Mode"</span> : <span class="string">"Light Mode"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2020-11-03T04:19:35.000Z" title="2020-11-03T04:19:35.000Z">2020-11-03</time><span class="level-item">a minute read (About 129 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-make-full-size-content-view-in-SwiftUI-for-macOS/">How to make full size content view in SwiftUI for macOS</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/689">#689</a></strong></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">applicationDidFinishLaunching</span><span class="params">(<span class="number">_</span> aNotification: Notification)</span></span> &#123;</span><br><span class="line">    <span class="comment">// extend to title bar</span></span><br><span class="line">    <span class="keyword">let</span> contentView = <span class="type">ContentView</span>()</span><br><span class="line">        <span class="comment">// .padding(.top, 24) // can padding to give some space</span></span><br><span class="line">        .edgesIgnoringSafeArea(.top)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// specify fullSizeContentView</span></span><br><span class="line">    window = <span class="type">NSWindow</span>(</span><br><span class="line">        contentRect: <span class="type">NSRect</span>(x: <span class="number">0</span>, y: <span class="number">0</span>, width: <span class="number">800</span>, height: <span class="number">600</span>),</span><br><span class="line">        styleMask: [.titled, .closable, .miniaturizable, .texturedBackground, .resizable, .fullSizeContentView],</span><br><span class="line">        backing: .buffered, </span><br><span class="line">       <span class="keyword">defer</span>: <span class="literal">false</span></span><br><span class="line">    )</span><br><span class="line">    window.center()</span><br><span class="line">    window.setFrameAutosaveName(<span class="string">"My App"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// window.title = ... // no title</span></span><br><span class="line">    <span class="comment">// window.toolbar = NSToolbar() // use toolbar if wanted. This triggers .unifiedTitleAndToolbar styleMask</span></span><br><span class="line">    window.titlebarAppearsTransparent = <span class="literal">true</span></span><br><span class="line">    window.titleVisibility = .hidden <span class="comment">// hide title</span></span><br><span class="line">    window.backgroundColor = <span class="type">R</span>.color.myBackgroundColor <span class="comment">// set our preferred background color</span></span><br><span class="line"></span><br><span class="line">    window.contentView = <span class="type">NSHostingView</span>(rootView: contentView)</span><br><span class="line">    window.makeKeyAndOrderFront(<span class="literal">nil</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="I-have-an-issue-where-if-I-use-HSplitView-some-Button-are-not-clickable-until-I-drag-the-split-view-handle-The-workaround-is-to-use-HStack-with-a-Divider"><a href="#I-have-an-issue-where-if-I-use-HSplitView-some-Button-are-not-clickable-until-I-drag-the-split-view-handle-The-workaround-is-to-use-HStack-with-a-Divider" class="headerlink" title="I have an issue where if I use HSplitView, some Button are not clickable until I drag the split view handle. The workaround is to use HStack with a Divider"></a>I have an issue where if I use <code>HSplitView</code>, some Button are not clickable until I drag the split view handle. The workaround is to use HStack with a Divider</h2><p><strong>Updated at</strong> 2020-11-03 05:21:50</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2020-10-31T04:53:31.000Z" title="2020-10-31T04:53:31.000Z">2020-10-31</time><span class="level-item">2 minutes read (About 238 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-override-styles-in-SwiftUI/">How to override styles in SwiftUI</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/688">#688</a></strong></p>
<p>In the app I’m working on <a href="https://onmyway133.com/elegantconverter/">Elegant Converter</a>, I usually like preset theme with a custom background color and a matching foreground color.</p>
<p>Thanks to SwiftUI style cascading, I can just declare in root <code>MainView</code> and it will be inherited down the view hierachy.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">MainView</span>: <span class="title">View</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> body: some <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">HSplitView</span> &#123;</span><br><span class="line">            <span class="type">ListView</span>()</span><br><span class="line">            <span class="type">RightView</span>()</span><br><span class="line">        &#125;</span><br><span class="line">        .foregroundColor(<span class="type">R</span>.color.text)</span><br><span class="line">        .background(<span class="type">R</span>.color.background)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>This works great regardless of system light or dark mode, but in light mode it does not look good, as my designed theme is similar to dark mode. Here the color is pale for default Picker and Button.</p>
<img width="665" alt="Screenshot 2020-10-31 at 06 49 55" src="https://user-images.githubusercontent.com/2284279/97772225-4b99dc00-1b45-11eb-821f-7797e39d1da6.png">

<p>The way to fix that is to reset the <code>foregroundColor</code>, take a look at the documentation for <a href="https://developer.apple.com/documentation/swiftui/view/foregroundcolor(_:)">foregroundColor</a></p>
<blockquote>
<p>The foreground color to use when displaying this view. Pass nil to remove any custom foreground color and to allow the system or the container to provide its own foreground color. If a container-specific override doesn’t exist, the system uses the primary color.</p>
</blockquote>
<p>So we can pass <code>nil</code> and the controls will pick the correct color based on system preferences.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Picker</span>(selection: intent.fileType, label: <span class="type">EmptyView</span>()) &#123;</span><br><span class="line">    <span class="type">ForEach</span>(filtered, id: \.<span class="keyword">self</span>) &#123;</span><br><span class="line">        <span class="type">Text</span>($<span class="number">0</span>.dropdownName)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">.foregroundColor(<span class="literal">nil</span>)</span><br><span class="line"></span><br><span class="line"><span class="type">Button</span>(action: convert) &#123;</span><br><span class="line">    <span class="type">Text</span>(<span class="string">"Convert"</span>)</span><br><span class="line">&#125;</span><br><span class="line">.foregroundColor(<span class="literal">nil</span>)</span><br></pre></td></tr></table></figure>

<p>Now Picker and Button look nice in both dark and light mode</p>
<img width="613" alt="Screenshot 2020-10-31 at 06 52 53" src="https://user-images.githubusercontent.com/2284279/97772260-b5b28100-1b45-11eb-8a24-367fef910ce3.png">

<img width="601" alt="Screenshot 2020-10-31 at 06 53 10" src="https://user-images.githubusercontent.com/2284279/97772265-c06d1600-1b45-11eb-88c9-340b045ba815.png">


<hr>
<p><strong>Updated at</strong> 2020-11-01 04:57:11</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2020-10-25T19:55:33.000Z" title="2020-10-25T19:55:33.000Z">2020-10-25</time><span class="level-item">2 minutes read (About 287 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-use-CoreData-safely/">How to use CoreData safely</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/686">#686</a></strong></p>
<p>I now use Core Data more often now. Here is how I usually use it, for example in <a href="https://onmyway133.com/pushhero/">Push Hero</a></p>
<p>From iOS 10 and macOS 10.12, <a href="https://developer.apple.com/documentation/coredata/nspersistentcontainer">NSPersistentContainer</a> that simplifies Core Data setup quite a lot. I usually use 1 <code>NSPersistentContainer</code> and its <code>viewContext</code> together with <code>newBackgroundContext</code> attached to that <code>NSPersistentContainer</code></p>
<p>In Core Data, each context has a queue, except for <code>viewContext</code> using the <code>DispatchQueue.main</code>, and each <code>NSManagedObject</code> retrieved from 1 context is supposed to use within that context queue only, except for <code>objectId</code> property.</p>
<p>Although <code>NSManagedObject</code> subclasses from <code>NSObject</code>, it has a lot of other constraints that we need to be aware of. So it’s safe to treat Core Data as a cache layer, and use our own model on top of it. I usually perform operations on background context to avoid main thread blocking, and <code>automaticallyMergesChangesFromParent</code> handles merge changes automatically for us.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">SendHistoryItem</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">toCoreData</span><span class="params">(context: NSManagedObjectContext)</span></span> &#123;</span><br><span class="line">        context.perform &#123;</span><br><span class="line">            <span class="keyword">let</span> cd = <span class="type">CDSendHistoryItem</span>(context: context)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">CDSendHistoryItem</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">toModel</span><span class="params">()</span></span> <span class="keyword">throws</span> -&gt; <span class="type">SendHistoryItem</span> &#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">CoreDataManager</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> backgroundContext: <span class="type">NSManagedObjectContext?</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">init</span>() &#123;</span><br><span class="line">        <span class="keyword">self</span>.backgroundContext = <span class="keyword">self</span>.persistentContainer.newBackgroundContext()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">lazy</span> <span class="keyword">var</span> persistentContainer: <span class="type">NSPersistentContainer</span> = &#123;</span><br><span class="line">        <span class="keyword">let</span> container = <span class="type">NSPersistentContainer</span>(name: <span class="string">"PushHero"</span>)</span><br><span class="line">        container.loadPersistentStores(completionHandler: &#123; (storeDescription, error) <span class="keyword">in</span></span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">let</span> error = error &#123;</span><br><span class="line">                <span class="built_in">print</span>(error)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="keyword">return</span> container</span><br><span class="line">    &#125;()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">load</span><span class="params">(request: NSFetchRequest&lt;CDSendHistoryItem&gt;, completion: @escaping <span class="params">([SendHistoryItem])</span></span></span> -&gt; <span class="type">Void</span>) &#123;</span><br><span class="line">        <span class="keyword">guard</span> <span class="keyword">let</span> context = <span class="type">CoreDataManager</span>.shared.backgroundContext <span class="keyword">else</span> &#123; <span class="keyword">return</span> &#125;</span><br><span class="line">        context.perform &#123;</span><br><span class="line">            <span class="keyword">do</span> &#123;</span><br><span class="line">                <span class="keyword">let</span> cdItems = <span class="keyword">try</span> request.execute()</span><br><span class="line">                <span class="keyword">let</span> items = cdItems.compactMap(&#123; <span class="keyword">try</span>? $<span class="number">0</span>.toModel() &#125;)</span><br><span class="line">                completion(items)</span><br><span class="line">            &#125; <span class="keyword">catch</span> &#123;</span><br><span class="line">                completion([])</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">save</span><span class="params">(items: [SendHistoryItem])</span></span> &#123;</span><br><span class="line">        <span class="keyword">guard</span> <span class="keyword">let</span> context = backgroundContext <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        context.perform &#123;</span><br><span class="line">            items.forEach &#123;</span><br><span class="line">                <span class="keyword">let</span> <span class="number">_</span> = $<span class="number">0</span>.toCoreData(context: context)</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">do</span> &#123;</span><br><span class="line">                <span class="keyword">try</span> context.save()</span><br><span class="line">            &#125; <span class="keyword">catch</span> &#123;</span><br><span class="line">                <span class="built_in">print</span>(error)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Read-more"><a href="#Read-more" class="headerlink" title="Read more"></a>Read more</h2><ul>
<li><a href="https://davedelong.com/blog/2018/05/09/the-laws-of-core-data/">https://davedelong.com/blog/2018/05/09/the-laws-of-core-data/</a></li>
</ul>
<hr>
<p><strong>Updated at</strong> 2020-10-25 20:58:07</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2020-10-24T02:45:15.000Z" title="2020-10-24T02:45:15.000Z">2020-10-24</time><span class="level-item">a few seconds read (About 71 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-pass-ObservedObject-as-parameter-in-SwiftUI/">How to pass ObservedObject as parameter in SwiftUI</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/685">#685</a></strong></p>
<p>Since we have custom init in <code>ChildView</code> to manually set a <code>State</code>, we need to pass <code>ObservedObject</code>. In the ParentView, use underscore <code>_</code> to access property wrapper type.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">ChildView</span>: <span class="title">View</span> </span>&#123;</span><br><span class="line">    @<span class="type">ObservedObject</span></span><br><span class="line">    <span class="keyword">var</span> store: <span class="type">Store</span></span><br><span class="line"></span><br><span class="line">    @<span class="type">State</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> selectedTask: <span class="type">AnyTask</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">init</span>(store: <span class="type">ObservedObject</span>&lt;<span class="type">Store</span>&gt;) &#123;</span><br><span class="line">        _selectedTask = <span class="type">State</span>(initialValue: tasks.first!)</span><br><span class="line">        _store = store</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">ParentView</span>: <span class="title">View</span> </span>&#123;</span><br><span class="line">    @<span class="type">ObservedObject</span></span><br><span class="line">    <span class="keyword">var</span> store: <span class="type">Store</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> body: some <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">ChildView</span>(store: _store)</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2020-10-23T06:17:01.000Z" title="2020-10-23T06:17:01.000Z">2020-10-23</time><span class="level-item">a few seconds read (About 72 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-do-equal-width-in-SwiftUI/">How to do equal width in SwiftUI</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/684">#684</a></strong></p>
<p>In SwiftUI, specifying <code>maxWidth</code> as <code>.infinity</code> means taking the whole available width of the container.<br>If many children ask for max width, then they will be divided equally.<br>This is similar to <code>weight</code> in <code>LinearLayout</code> in Android or css <code>flex-grow</code> property.</p>
<p>The same applies in vertical direct also.</p>
<p><img src="https://user-images.githubusercontent.com/2284279/96973946-da40a480-1518-11eb-8d32-5e9276b809b2.jpeg" alt="width"></p>
<hr>
<p><strong>Updated at</strong> 2020-10-23 08:17:08</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2020-10-07T03:01:55.000Z" title="2020-10-07T03:01:55.000Z">2020-10-07</time><span class="level-item">a few seconds read (About 102 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-style-multiline-Text-in-SwiftUI-for-macOS/">How to style multiline Text in SwiftUI for macOS</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/681">#681</a></strong></p>
<p>Only need to specify <code>fixedSize</code> on text to preserve ideal height.</p>
<blockquote>
<p>The maximum number of lines is 1 if the value is less than 1. If the value is nil, the text uses as many lines as required. The default is nil.</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Text</span>(longText)</span><br><span class="line">    .lineLimit(<span class="literal">nil</span>) <span class="comment">// No need</span></span><br><span class="line">    .fixedSize(horizontal: <span class="literal">false</span>, vertical: <span class="literal">true</span>)</span><br></pre></td></tr></table></figure>

<p>If the Text is inside a row in a <code>List</code>, <code>fixedSize</code> causes the row to be in middle of the <code>List</code>, workaround is to use <code>ScrollView</code> and vertical <code>StackView</code>.</p>
<h2 id="Sometimes-for-Text-to-properly-size-itself-specify-an-explicit-frame-width"><a href="#Sometimes-for-Text-to-properly-size-itself-specify-an-explicit-frame-width" class="headerlink" title="Sometimes for Text to properly size itself, specify an explicit frame width"></a>Sometimes for Text to properly size itself, specify an explicit frame width</h2><p><strong>Updated at</strong> 2020-10-07 05:02:01</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2020-10-04T03:14:08.000Z" title="2020-10-04T03:14:08.000Z">2020-10-04</time><span class="level-item">a minute read (About 212 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-clear-List-background-color-in-SwiftUI-for-macOS/">How to clear List background color in SwiftUI for macOS</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/680">#680</a></strong></p>
<p>For <code>List</code> in SwiftUI for macOS, it has default background color because of the enclosing <code>NSScrollView</code> via <code>NSTableView</code> that <code>List</code> uses under the hood. Using <code>listRowBackground</code> also gives no effect</p>
<p>The solution is to use a library like <a href="https://github.com/siteline/SwiftUI-Introspect">SwiftUI-Introspect</a></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Introspect</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">List</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">removeBackground</span><span class="params">()</span></span> -&gt; some <span class="type">View</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> introspectTableView &#123; tableView <span class="keyword">in</span></span><br><span class="line">            tableView.backgroundColor = .clear</span><br><span class="line">            tableView.enclosingScrollView!.drawsBackground = <span class="literal">false</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>then</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">List</span> &#123;</span><br><span class="line">    <span class="type">ForEach</span>(items) &#123; item <span class="keyword">in</span></span><br><span class="line">        <span class="comment">// view here</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">.removeBackground()</span><br></pre></td></tr></table></figure>

<p>Or we can add extension on <code>NSTableView</code> to alter its content when it moves to superview</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">NSTableView</span> </span>&#123;</span><br><span class="line">    <span class="keyword">open</span> <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidMoveToWindow</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">super</span>.viewDidMoveToWindow()</span><br><span class="line"></span><br><span class="line">        backgroundColor = <span class="type">NSColor</span>.clear</span><br><span class="line">        enclosingScrollView!.drawsBackground = <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>This works OK for me on macOS 10.15.5, 10.15.7 and macOS 10.11 beta. But it was reported crash during review on macOS 10.15.6</p>
<blockquote>
<p>The app launches briefly and then quits without error message.</p>
</blockquote>
<p>After inspecting crash log, it is because of <code>viewDidMoveToWindow</code>. So it’s wise not to mess with NSTableView for now</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Thread 0 Crashed:: Dispatch queue: com.apple.main-thread</span><br><span class="line">0   com.onmyway133.PushHero       	0x0000000104770b0a @objc NSTableView.viewDidMoveToWindow() (in Push Hero) (&lt;compiler-generated&gt;:296)</span><br><span class="line">1   com.apple.AppKit              	0x00007fff2d8638ea -[NSView _setWindow:] + 2416</span><br><span class="line">2   com.apple.AppKit              	0x00007fff2d8844ea -[NSControl _setWindow:] + 158</span><br><span class="line">3   com.apple.AppKit              	0x00007fff2d946ace -[NSTableView _setWindow:] + 306</span><br></pre></td></tr></table></figure>
<hr>
<p><strong>Updated at</strong> 2020-10-09 03:49:39</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2020-10-01T03:05:30.000Z" title="2020-10-01T03:05:30.000Z">2020-10-01</time><span class="level-item">a minute read (About 139 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-avoid-reduced-opacity-when-hiding-view-with-animation-in-SwiftUI/">How to avoid reduced opacity when hiding view with animation in SwiftUI</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/679">#679</a></strong></p>
<p>While redesigning UI for my app <a href="https://onmyway133.com/pushhero/">Push Hero</a>, I ended up with an accordion style to toggle section.</p>
<img width="588" alt="Screenshot 2020-10-01 at 06 58 33" src="https://user-images.githubusercontent.com/2284279/94769940-86c4b600-03b3-11eb-87da-fbba61f13ace.png">

<p>It worked great so far, but after 1 collapsing, all image and text views have reduced opacity. This does not happen for other elements like dropdown button or text.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">extension View &#123;</span><br><span class="line">    func sectionBackground(_ title: String, _ shows: Binding&lt;Bool&gt;) -&gt; some View &#123;</span><br><span class="line">        VStack(alignment: .leading) &#123;</span><br><span class="line">            HStack &#123;</span><br><span class="line">                Text(title.uppercased())</span><br><span class="line">                Spacer()</span><br><span class="line">                if shows !&#x3D; nil &#123;</span><br><span class="line">                    SmallButton(</span><br><span class="line">                        imageName: &quot;downArrow&quot;,</span><br><span class="line">                        tooltip: shows!.wrappedValue ? &quot;Collapse&quot; : &quot;Expand&quot;,</span><br><span class="line">                        action: &#123;</span><br><span class="line">                           withAnimation(.easeInOut) &#123;</span><br><span class="line">                                shows!.wrappedValue.toggle()</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                    )</span><br><span class="line">                    .rotationEffect(.radians(shows!.wrappedValue ? .pi : 0))</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            if shows.wrappedValue &#123;</span><br><span class="line">                self</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>The culprit is that <code>withAnimation</code>, it seems to apply opacity effect. So the workaround is to disable animation <code>wrappedValue</code>, or to tweak transition so that there’s no opacity adjustment.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> shows.wrappedValue &#123;</span><br><span class="line">    <span class="keyword">self</span>.transition(<span class="type">AnyTransition</span>.identity)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2020-10-01T02:24:15.000Z" title="2020-10-01T02:24:15.000Z">2020-10-01</time><span class="level-item">a few seconds read (About 85 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-dynamically-add-items-to-VStack-from-list-in-SwiftUI/">How to dynamically add items to VStack from list in SwiftUI</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/678">#678</a></strong></p>
<p>Use <code>enumerated</code> to get <code>index</code> so we can assign to item in list. Here is how I show list of device tokens in my app <a href="https://onmyway133.com/pushhero">Push Hero</a></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">var</span> textViews: some <span class="type">View</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> withIndex = input.deviceTokens.enumerated().<span class="built_in">map</span>(&#123; $<span class="number">0</span> &#125;)</span><br><span class="line">    <span class="keyword">let</span> binding: (<span class="type">Int</span>, <span class="type">Input</span>.<span class="type">DeviceToken</span>) -&gt; <span class="type">Binding</span>&lt;<span class="type">String</span>&gt; = &#123; index, token <span class="keyword">in</span></span><br><span class="line">        <span class="type">Binding</span>&lt;<span class="type">String</span>&gt;(</span><br><span class="line">            <span class="keyword">get</span>: &#123; token.token &#125;,</span><br><span class="line">            <span class="keyword">set</span>: &#123; <span class="keyword">self</span>.input.deviceTokens[index].token = $<span class="number">0</span> &#125;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="type">VStack</span> &#123;</span><br><span class="line">        <span class="type">ForEach</span>(withIndex, id: \.element.id) &#123; index, token <span class="keyword">in</span></span><br><span class="line">            <span class="keyword">return</span> <span class="type">DeviceTokenTextView</span>(text: binding(index, token))</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2020-09-29T03:01:46.000Z" title="2020-09-29T03:01:46.000Z">2020-09-29</time><span class="level-item">a minute read (About 135 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-unwrap-Binding-with-Optional-in-SwiftUI/">How to unwrap Binding with Optional in SwiftUI</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/677">#677</a></strong></p>
<p>The quick way to add new properties without breaking current saved Codable is to declare them as optional. For example if you use  <a href="https://github.com/onmyway133/EasyStash">EasyStash</a> library to save and load Codable models.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> SwiftUI</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Input</span>: <span class="title">Codable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> bundleId: <span class="type">String</span> = <span class="string">""</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// New props</span></span><br><span class="line">    <span class="keyword">var</span> notificationId: <span class="type">String?</span></span><br></pre></td></tr></table></figure>

<p>This new property when using dollar syntax <code>$input.notificationId</code> turn into Binding with optional <code>Binding&lt;Strting?&gt;</code> which is incompatible in SwiftUI when we use Binding.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">MaterialTextField</span>: <span class="title">View</span> </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> placeholder: <span class="type">String</span></span><br><span class="line">    @<span class="type">Binding</span> <span class="keyword">var</span> text: <span class="type">String</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>The solution here is write an extension that converts <code>Binding&lt;String?&gt;</code> to <code>Binding&lt;String&gt;</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Binding</span> <span class="title">where</span> <span class="title">Value</span> == <span class="title">String</span>? </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">toNonOptional</span><span class="params">()</span></span> -&gt; <span class="type">Binding</span>&lt;<span class="type">String</span>&gt; &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="type">Binding</span>&lt;<span class="type">String</span>&gt;(</span><br><span class="line">            <span class="keyword">get</span>: &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">self</span>.wrappedValue ?? <span class="string">""</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="keyword">set</span>: &#123;</span><br><span class="line">                <span class="keyword">self</span>.wrappedValue = $<span class="number">0</span></span><br><span class="line">            &#125;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>so we can use them as normal</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">MaterialTextField</span>(text: $input.notificationId.toNonOptional())</span><br></pre></td></tr></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2020-09-29T02:55:04.000Z" title="2020-09-29T02:55:04.000Z">2020-09-29</time><span class="level-item">a minute read (About 196 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-make-custom-toggle-in-SwiftUI/">How to make custom toggle in SwiftUI</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/676">#676</a></strong></p>
<p>I’ve used the default <code>SwiftUI</code> to achieve the 2 tab views in SwiftUI. It adds a default box around the content and also opinionated paddings. For now on light mode on macOS, the unselected tab has wrong colors.</p>
<p>The way to solve this is to come up with a custom toggle, that we can style and align the way we want. Here is how I did for my app <a href="https://onmyway133.com/pushhero">Push Hero</a></p>
<p>Using a Text instead of Button here gives me default static text look.</p>
<img width="752" alt="Screenshot 2020-09-29 at 06 52 33" src="https://user-images.githubusercontent.com/2284279/94513986-5bf62880-0220-11eb-9b29-bca0de5de64b.png">

<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">AuthenticationView</span>: <span class="title">View</span> </span>&#123;</span><br><span class="line">    @<span class="type">Binding</span> <span class="keyword">var</span> input: <span class="type">Input</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> body: some <span class="type">View</span> &#123;</span><br><span class="line">        toggle</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> toggle: some <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">VStack</span>(alignment: .leading) &#123;</span><br><span class="line">            <span class="type">HStack</span> &#123;</span><br><span class="line">                <span class="type">HStack</span>(spacing: <span class="number">0</span>) &#123;</span><br><span class="line">                    <span class="type">Text</span>(<span class="string">"🔑 Key"</span>)</span><br><span class="line">                        .style(selected: input.authentication == .key)</span><br><span class="line">                        .onTapGesture &#123;</span><br><span class="line">                            <span class="keyword">self</span>.input.authentication = .key</span><br><span class="line">                        &#125;</span><br><span class="line"></span><br><span class="line">                    <span class="type">Text</span>(<span class="string">"📰 Certificate"</span>)</span><br><span class="line">                        .style(selected: input.authentication == .certificate)</span><br><span class="line">                        .onTapGesture &#123;</span><br><span class="line">                            <span class="keyword">self</span>.input.authentication = .certificate</span><br><span class="line">                        &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                .padding(<span class="number">3</span>)</span><br><span class="line">                .background(<span class="type">Color</span>.white.opacity(<span class="number">0.2</span>))</span><br><span class="line">                .cornerRadius(<span class="number">6</span>)</span><br><span class="line"></span><br><span class="line">                <span class="type">Spacer</span>()</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            choose</span><br><span class="line">            <span class="type">Spacer</span>()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> choose: <span class="type">AnyView</span> &#123;</span><br><span class="line">        <span class="keyword">switch</span> input.authentication &#123;</span><br><span class="line">        <span class="keyword">case</span> .key:</span><br><span class="line">            <span class="keyword">return</span> <span class="type">KeyAuthenticationView</span>().erase()</span><br><span class="line">        <span class="keyword">case</span> .certificate:</span><br><span class="line">            <span class="keyword">return</span> <span class="type">CertificateAuthenticationView</span>().erase()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="class"><span class="keyword">extension</span> <span class="title">Text</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">style</span><span class="params">(selected: Bool)</span></span> -&gt; some <span class="type">View</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">self</span></span><br><span class="line">            .padding(.vertical, <span class="number">3</span>)</span><br><span class="line">            .padding(.horizontal, <span class="number">4</span>)</span><br><span class="line">            .background(selected ? <span class="type">Color</span>.white.opacity(<span class="number">0.5</span>) : <span class="type">Color</span>.clear)</span><br><span class="line">            .cornerRadius(<span class="number">6</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<p><strong>Updated at</strong> 2020-09-29 04:55:14</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2020-09-25T02:01:53.000Z" title="2020-09-25T02:01:53.000Z">2020-09-25</time><span class="level-item">a few seconds read (About 49 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-use-Binding-in-function-in-Swift/">How to use Binding in function in Swift</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/675">#675</a></strong></p>
<p>Use <code>wrappedValue</code> to get the underlying value that Binding contains</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">View</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">addOverlay</span><span class="params">(shows: Binding&lt;Bool&gt;)</span></span> -&gt; some <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">HStack</span> &#123;</span><br><span class="line">            <span class="keyword">self</span></span><br><span class="line">            <span class="type">Spacer</span>()</span><br><span class="line">        &#125;</span><br><span class="line">        .overlay(</span><br><span class="line">            <span class="type">HStack</span> &#123;</span><br><span class="line">                <span class="type">Spacer</span>()</span><br><span class="line">                <span class="type">SmallButton</span>(</span><br><span class="line">                    imageName: <span class="string">"downArrow"</span>,</span><br><span class="line">                    tooltip: shows.wrappedValue ? <span class="string">"Collapse"</span> : <span class="string">"Expand"</span>,</span><br><span class="line">                    action: &#123;</span><br><span class="line">                        shows.wrappedValue.toggle()</span><br><span class="line">                    &#125;</span><br><span class="line">                )</span><br><span class="line">                .rotationEffect(.radians(shows.wrappedValue ? .pi : <span class="number">0</span>))</span><br><span class="line">            &#125;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2020-09-23T02:32:58.000Z" title="2020-09-23T02:32:58.000Z">2020-09-23</time><span class="level-item">a few seconds read (About 58 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-use-HSplitView-to-define-3-panes-view-in-SwiftUI-for-macOS/">How to use HSplitView to define 3 panes view in SwiftUI for macOS</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/674">#674</a></strong></p>
<p>Specify <code>minWidth</code> to ensure miminum width, and use <code>.layoutPriority(1)</code> for the most important pane.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> SwiftUI</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">MainView</span>: <span class="title">View</span> </span>&#123;</span><br><span class="line">    @<span class="type">EnvironmentObject</span> <span class="keyword">var</span> store: <span class="type">Store</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> body: some <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">HSplitView</span> &#123;</span><br><span class="line">            <span class="type">LeftPane</span>()</span><br><span class="line">                .padding()</span><br><span class="line">                .frame(minWidth: <span class="number">200</span>, maxWidth: <span class="number">500</span>)</span><br><span class="line">            <span class="type">MiddlePane</span>(store: store)</span><br><span class="line">                .padding()</span><br><span class="line">                .frame(minWidth: <span class="number">500</span>)</span><br><span class="line">                .layoutPriority(<span class="number">1</span>)</span><br><span class="line">            <span class="type">RightPane</span>()</span><br><span class="line">                .padding()</span><br><span class="line">                .frame(minWidth: <span class="number">300</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        .background(<span class="type">R</span>.color.background)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<p><strong>Updated at</strong> 2020-09-23 08:42:29</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2020-05-22T18:41:10.000Z" title="2020-05-22T18:41:10.000Z">2020-05-22</time><span class="level-item">2 minutes read (About 245 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-make-switch-statement-in-SwiftUI/">How to make switch statement in SwiftUI</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/656">#656</a></strong></p>
<p>Lately I’ve been challenging myself to declare switch statement in SwiftUI, or in a more generalized way, execute any anonymous function that can return a View</p>
<h2 id="Use-Switch-and-Case-views"><a href="#Use-Switch-and-Case-views" class="headerlink" title="Use Switch and Case views"></a>Use Switch and Case views</h2><p>Note that this approach does not work yet, as <code>TupeView</code> should support variadic number of contents, and also T.RawValue needs to conform to Equatable in order to check the cases.</p>
<p>Also in Switch statement, Content can’t be inferred</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Case</span>&lt;<span class="title">T</span>: <span class="title">RawRepresentable</span>, <span class="title">Content</span>: <span class="title">View</span>&gt;: <span class="title">View</span> </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> value: <span class="type">T</span></span><br><span class="line">    <span class="keyword">let</span> content: <span class="type">Content</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">init</span>(<span class="number">_</span> value: <span class="type">T</span>, @<span class="type">ViewBuilder</span> content: () -&gt; <span class="type">Content</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.value = value</span><br><span class="line">        <span class="keyword">self</span>.content = content()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> body: some <span class="type">View</span> &#123;</span><br><span class="line">        content</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Switch</span>&lt;<span class="title">T</span>: <span class="title">RawRepresentable</span>, <span class="title">Content</span>: <span class="title">View</span>&gt;: <span class="title">View</span> </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> value: <span class="type">T</span></span><br><span class="line">    <span class="keyword">let</span> cases: <span class="type">TupleView</span>&lt;<span class="type">Case</span>&lt;<span class="type">T</span>, <span class="type">Content</span>&gt;&gt;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">init</span>(<span class="number">_</span> value: <span class="type">T</span>, @<span class="type">ViewBuilder</span> cases: () -&gt; <span class="type">TupleView</span>&lt;<span class="type">Case</span>&lt;<span class="type">T</span>, <span class="type">Content</span>&gt;&gt;) &#123;</span><br><span class="line">        <span class="keyword">self</span>.value = value</span><br><span class="line">        <span class="keyword">self</span>.cases = cases()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> body: some <span class="type">View</span> &#123;</span><br><span class="line">        makeBody()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">makeBody</span><span class="params">()</span></span> -&gt; some <span class="type">View</span> &#123;</span><br><span class="line">        <span class="comment">// <span class="doctag">TODO:</span> Logic here</span></span><br><span class="line">        cases</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">UseSwitchStatement</span> </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> animal: <span class="type">Animal</span> = .cat</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> body: some <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">VStack</span> &#123;</span><br><span class="line">            <span class="type">Switch</span>(animal) &#123;</span><br><span class="line">                <span class="type">Case</span>(<span class="type">Animal</span>.cat) &#123;</span><br><span class="line">                    <span class="type">Text</span>(<span class="string">"cat"</span>)</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="type">Case</span>(<span class="type">Animal</span>.dog) &#123;</span><br><span class="line">                    <span class="type">Text</span>(<span class="string">"dog"</span>)</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="type">Case</span>(<span class="type">Animal</span>.mouse) &#123;</span><br><span class="line">                    <span class="type">Text</span>(<span class="string">"mouse"</span>)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Use-MakeView"><a href="#Use-MakeView" class="headerlink" title="Use MakeView"></a>Use MakeView</h2><p>Another solution is to use a <code>MakeView</code> view, this is more generic as it can execute any functions</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">Animal</span>: <span class="title">String</span> </span>&#123;</span><br><span class="line">    <span class="keyword">case</span> cat</span><br><span class="line">    <span class="keyword">case</span> dog</span><br><span class="line">    <span class="keyword">case</span> mouse</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">MakeView</span>: <span class="title">View</span> </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> make: () -&gt; <span class="type">AnyView</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> body: some <span class="type">View</span> &#123;</span><br><span class="line">        make()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">UseMakeView</span>: <span class="title">View</span> </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> animal: <span class="type">Animal</span> = .cat</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> body: some <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">MakeView</span> &#123;</span><br><span class="line">            <span class="keyword">switch</span> <span class="keyword">self</span>.animal &#123;</span><br><span class="line">            <span class="keyword">case</span> .cat:</span><br><span class="line">                <span class="keyword">return</span> <span class="type">Text</span>(<span class="string">"cat"</span>).erase()</span><br><span class="line">            <span class="keyword">case</span> .dog:</span><br><span class="line">                <span class="keyword">return</span> <span class="type">Text</span>(<span class="string">"dog"</span>).erase()</span><br><span class="line">            <span class="keyword">case</span> .mouse:</span><br><span class="line">                <span class="keyword">return</span> <span class="type">Text</span>(<span class="string">"mouse"</span>).erase()</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p><strong>Updated at</strong> 2020-05-22 20:42:14</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2020-03-29T23:48:46.000Z" title="2020-03-29T23:48:46.000Z">2020-03-30</time><span class="level-item">a few seconds read (About 58 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-conditionally-apply-modifier-in-SwiftUI/">How to conditionally apply modifier in SwiftUI</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/633">#633</a></strong></p>
<p>Use <code>autoclosure</code> and <code>AnyView</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@available</span>(iOS <span class="number">13.0</span>, <span class="type">OSX</span> <span class="number">10.15</span>, tvOS <span class="number">13.0</span>, watchOS <span class="number">6.0</span>, *)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">extension</span> <span class="title">View</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">applyIf</span>&lt;T: View&gt;<span class="params">(<span class="number">_</span> condition: @autoclosure <span class="params">()</span></span></span> -&gt; <span class="type">Bool</span>, apply: (<span class="type">Self</span>) -&gt; <span class="type">T</span>) -&gt; <span class="type">AnyView</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> condition() &#123;</span><br><span class="line">            <span class="keyword">return</span> apply(<span class="keyword">self</span>).erase()</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">self</span>.erase()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Button</span>(action: onSearch) &#123;</span><br><span class="line">    <span class="type">Image</span>(<span class="string">"search"</span>)</span><br><span class="line">        .resizable()</span><br><span class="line">        .styleButton()</span><br><span class="line">        .overlay(<span class="type">ToolTip</span>(<span class="string">"Search"</span>))</span><br><span class="line">&#125;</span><br><span class="line">.buttonStyle(<span class="type">BorderlessButtonStyle</span>())</span><br><span class="line">.applyIf(showsSearch, apply: &#123;</span><br><span class="line">    $<span class="number">0</span>.foregroundColor(<span class="type">Color</span>.orange)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2020-03-29T23:47:37.000Z" title="2020-03-29T23:47:37.000Z">2020-03-30</time><span class="level-item">a few seconds read (About 37 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-toggle-with-animation-in-SwiftUI/">How to toggle with animation in SwiftUI</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/632">#632</a></strong></p>
<p>Use Group</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">makeHeader</span><span class="params">()</span></span> -&gt; some <span class="type">View</span> &#123;</span><br><span class="line">    <span class="type">Group</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> showsSearch &#123;</span><br><span class="line">            <span class="type">SearchView</span>(</span><br><span class="line">                onSearch: onSearch</span><br><span class="line">            )</span><br><span class="line">            .transition(.move(edge: .leading))</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="type">InputView</span>(</span><br><span class="line">                onAdd: onAdd</span><br><span class="line">            )</span><br><span class="line">            .transition(.move(edge: .leading))</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">withAnimation &#123;</span><br><span class="line">    <span class="keyword">self</span>.showsSearch.toggle()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2020-03-22T21:42:16.000Z" title="2020-03-22T21:42:16.000Z">2020-03-22</time><span class="level-item">a few seconds read (About 92 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-show-context-popover-from-SwiftUI-for-macOS/">How to show context popover from SwiftUI for macOS</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/630">#630</a></strong></p>
<p>For SwiftUI app using <code>NSPopover</code>, to show  context popover menu, we can ask for <code>windows</code> array, get the <code>_NSPopoverWindow</code> and calculate the position. Note that origin of macOS screen is bottom left</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(lldb) po NSApp.windows</span><br><span class="line">▿ 2 elements</span><br><span class="line">  - 0 : &lt;NSStatusBarWindow: 0x101a02700&gt;</span><br><span class="line">  - 1 : &lt;_NSPopoverWindow: 0x101c01060&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> handler = <span class="type">MenuHandler</span>()</span><br><span class="line">handler.add(title: <span class="string">"About"</span>, action: onAbout)</span><br><span class="line">handler.add(title: <span class="string">"Quit"</span>, action: onQuit)</span><br><span class="line"></span><br><span class="line"><span class="keyword">guard</span> <span class="keyword">let</span> window = <span class="type">NSApp</span>.windows.last <span class="keyword">else</span> &#123; <span class="keyword">return</span> &#125;</span><br><span class="line"><span class="keyword">let</span> position = <span class="type">CGPoint</span>(</span><br><span class="line">    x: window.frame.maxX - <span class="number">100</span>,</span><br><span class="line">    y: window.frame.minY + <span class="number">80</span></span><br><span class="line">)</span><br><span class="line">handler.menu.popUp(positioning: <span class="literal">nil</span>, at: position, <span class="keyword">in</span>: <span class="literal">nil</span>)</span><br></pre></td></tr></table></figure></div></article></div><nav class="pagination is-centered mt-4" role="navigation" aria-label="pagination"><div class="pagination-previous is-invisible is-hidden-mobile"><a href="/tags/swiftUI/page/0/">Previous</a></div><div class="pagination-next"><a href="/tags/swiftUI/page/2/">Next</a></div><ul class="pagination-list is-hidden-mobile"><li><a class="pagination-link is-current" href="/tags/swiftUI/">1</a></li><li><a class="pagination-link" href="/tags/swiftUI/page/2/">2</a></li><li><a class="pagination-link" href="/tags/swiftUI/page/3/">3</a></li></ul></nav></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1"><div class="card widget"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="" src="https://avatars1.githubusercontent.com/u/2284279?s=460&amp;v=4" alt="onmyway133"></figure><p class="title is-size-4 is-block line-height-inherit">onmyway133</p><p class="is-size-6 is-block">iOS, macOS, Android, React. Serial maker. Writer. Speaker.</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Oslo, Norway</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Posts</p><a href="/archives"><p class="title">675</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Categories</p><a href="/categories"><p class="title">0</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Tags</p><a href="/tags"><p class="title">52</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/onmyway133" target="_blank" rel="noopener">Follow</a></div><div class="level is-mobile"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/onmyway133"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Twitter" href="https://twitter.com/onmyway133"><i class="fab fa-twitter"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Dribbble" href="https://dribbble.com"><i class="fab fa-dribbble"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/"><i class="fas fa-rss"></i></a></div></div></div><!--!--><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">Links</h3><ul class="menu-list"><li><a class="level is-mobile is-mobile" href="https://onmyway133.com/apps" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Apps</span></span><span class="level-right"><span class="level-item tag">onmyway133.com</span></span></a></li><li><a class="level is-mobile is-mobile" href="https://learntalks.com" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Learn Talks</span></span><span class="level-right"><span class="level-item tag">learntalks.com</span></span></a></li><li><a class="level is-mobile is-mobile" href="https://wwdctogether.com" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">WWDC Together</span></span><span class="level-right"><span class="level-item tag">wwdctogether.com</span></span></a></li></ul></div></div></div><!--!--><div class="card widget"><div class="card-content"><h3 class="menu-label">Recent</h3><article class="media"><div class="media-content size-small"><p><time dateTime="2020-12-30T04:30:52.000Z">2020-12-30</time></p><p class="title is-6"><a class="link-muted" href="/blog/How-to-do-copy-paste-delete-in-Swift-for-macOS/">How to do copy paste delete in Swift for macOS</a></p><p class="is-uppercase"></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2020-12-30T04:11:52.000Z">2020-12-30</time></p><p class="title is-6"><a class="link-muted" href="/blog/How-to-make-simple-NSItemProvider-in-Swift/">How to make simple NSItemProvider in Swift</a></p><p class="is-uppercase"></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2020-12-27T21:11:35.000Z">2020-12-27</time></p><p class="title is-6"><a class="link-muted" href="/blog/How-to-use-hashtag-raw-string-in-Swift/">How to use hashtag raw string in Swift</a></p><p class="is-uppercase"></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2020-12-26T20:42:53.000Z">2020-12-26</time></p><p class="title is-6"><a class="link-muted" href="/blog/How-to-make-UserDefaults-property-wrapper/">How to make UserDefaults property wrapper</a></p><p class="is-uppercase"></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2020-12-26T20:09:15.000Z">2020-12-26</time></p><p class="title is-6"><a class="link-muted" href="/blog/How-to-use-Set-to-check-for-bool-in-Swift/">How to use Set to check for bool in Swift</a></p><p class="is-uppercase"></p></div></article></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">Archives</h3><ul class="menu-list"><li><a class="level is-mobile is-marginless" href="/archives/2020/12/"><span class="level-start"><span class="level-item">December 2020</span></span><span class="level-end"><span class="level-item tag">25</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/11/"><span class="level-start"><span class="level-item">November 2020</span></span><span class="level-end"><span class="level-item tag">15</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/10/"><span class="level-start"><span class="level-item">October 2020</span></span><span class="level-end"><span class="level-item tag">11</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/09/"><span class="level-start"><span class="level-item">September 2020</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/08/"><span class="level-start"><span class="level-item">August 2020</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/06/"><span class="level-start"><span class="level-item">June 2020</span></span><span class="level-end"><span class="level-item tag">14</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/05/"><span class="level-start"><span class="level-item">May 2020</span></span><span class="level-end"><span class="level-item tag">11</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/04/"><span class="level-start"><span class="level-item">April 2020</span></span><span class="level-end"><span class="level-item tag">13</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/03/"><span class="level-start"><span class="level-item">March 2020</span></span><span class="level-end"><span class="level-item tag">21</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/02/"><span class="level-start"><span class="level-item">February 2020</span></span><span class="level-end"><span class="level-item tag">20</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/01/"><span class="level-start"><span class="level-item">January 2020</span></span><span class="level-end"><span class="level-item tag">30</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2019/12/"><span class="level-start"><span class="level-item">December 2019</span></span><span class="level-end"><span class="level-item tag">36</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2019/11/"><span class="level-start"><span class="level-item">November 2019</span></span><span class="level-end"><span class="level-item tag">38</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2019/10/"><span class="level-start"><span class="level-item">October 2019</span></span><span class="level-end"><span class="level-item tag">49</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2019/09/"><span class="level-start"><span class="level-item">September 2019</span></span><span class="level-end"><span class="level-item tag">50</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2019/08/"><span class="level-start"><span class="level-item">August 2019</span></span><span class="level-end"><span class="level-item tag">39</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2019/07/"><span class="level-start"><span class="level-item">July 2019</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2019/06/"><span class="level-start"><span class="level-item">June 2019</span></span><span class="level-end"><span class="level-item tag">41</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2019/05/"><span class="level-start"><span class="level-item">May 2019</span></span><span class="level-end"><span class="level-item tag">49</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2019/04/"><span class="level-start"><span class="level-item">April 2019</span></span><span class="level-end"><span class="level-item tag">27</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2019/03/"><span class="level-start"><span class="level-item">March 2019</span></span><span class="level-end"><span class="level-item tag">24</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2019/02/"><span class="level-start"><span class="level-item">February 2019</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2018/12/"><span class="level-start"><span class="level-item">December 2018</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2018/05/"><span class="level-start"><span class="level-item">May 2018</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2018/04/"><span class="level-start"><span class="level-item">April 2018</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2018/02/"><span class="level-start"><span class="level-item">February 2018</span></span><span class="level-end"><span class="level-item tag">9</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2018/01/"><span class="level-start"><span class="level-item">January 2018</span></span><span class="level-end"><span class="level-item tag">14</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2017/12/"><span class="level-start"><span class="level-item">December 2017</span></span><span class="level-end"><span class="level-item tag">14</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2017/11/"><span class="level-start"><span class="level-item">November 2017</span></span><span class="level-end"><span class="level-item tag">12</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2017/10/"><span class="level-start"><span class="level-item">October 2017</span></span><span class="level-end"><span class="level-item tag">18</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2017/09/"><span class="level-start"><span class="level-item">September 2017</span></span><span class="level-end"><span class="level-item tag">10</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2017/08/"><span class="level-start"><span class="level-item">August 2017</span></span><span class="level-end"><span class="level-item tag">9</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2017/07/"><span class="level-start"><span class="level-item">July 2017</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2017/06/"><span class="level-start"><span class="level-item">June 2017</span></span><span class="level-end"><span class="level-item tag">12</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2017/05/"><span class="level-start"><span class="level-item">May 2017</span></span><span class="level-end"><span class="level-item tag">35</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2017/04/"><span class="level-start"><span class="level-item">April 2017</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">Tags</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/algorithm/"><span class="tag">algorithm</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/android/"><span class="tag">android</span><span class="tag is-grey-lightest">34</span></a></div><div class="control"><a class="tags has-addons" href="/tags/apple-script/"><span class="tag">apple script</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/catalyst/"><span class="tag">catalyst</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ci/"><span class="tag">ci</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/cloud/"><span class="tag">cloud</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/cocoapods/"><span class="tag">cocoapods</span><span class="tag is-grey-lightest">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/combine/"><span class="tag">combine</span><span class="tag is-grey-lightest">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/core-data/"><span class="tag">core data</span><span class="tag is-grey-lightest">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/csharp/"><span class="tag">csharp</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/css/"><span class="tag">css</span><span class="tag is-grey-lightest">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/dart/"><span class="tag">dart</span><span class="tag is-grey-lightest">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/database/"><span class="tag">database</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/design/"><span class="tag">design</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/electron/"><span class="tag">electron</span><span class="tag is-grey-lightest">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/firebase/"><span class="tag">firebase</span><span class="tag is-grey-lightest">7</span></a></div><div class="control"><a class="tags has-addons" href="/tags/flutter/"><span class="tag">flutter</span><span class="tag is-grey-lightest">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/git/"><span class="tag">git</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/github/"><span class="tag">github</span><span class="tag is-grey-lightest">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/go/"><span class="tag">go</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/google/"><span class="tag">google</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/iOS/"><span class="tag">iOS</span><span class="tag is-grey-lightest">166</span></a></div><div class="control"><a class="tags has-addons" href="/tags/javascript/"><span class="tag">javascript</span><span class="tag is-grey-lightest">50</span></a></div><div class="control"><a class="tags has-addons" href="/tags/kotlin/"><span class="tag">kotlin</span><span class="tag is-grey-lightest">27</span></a></div><div class="control"><a class="tags has-addons" href="/tags/layout/"><span class="tag">layout</span><span class="tag is-grey-lightest">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/life/"><span class="tag">life</span><span class="tag is-grey-lightest">12</span></a></div><div class="control"><a class="tags has-addons" href="/tags/links/"><span class="tag">links</span><span class="tag is-grey-lightest">9</span></a></div><div class="control"><a class="tags has-addons" href="/tags/macOS/"><span class="tag">macOS</span><span class="tag is-grey-lightest">117</span></a></div><div class="control"><a class="tags has-addons" href="/tags/machine-learning/"><span class="tag">machine learning</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/maps/"><span class="tag">maps</span><span class="tag is-grey-lightest">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/networking/"><span class="tag">networking</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/node/"><span class="tag">node</span><span class="tag is-grey-lightest">11</span></a></div><div class="control"><a class="tags has-addons" href="/tags/objc/"><span class="tag">objc</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/react/"><span class="tag">react</span><span class="tag is-grey-lightest">23</span></a></div><div class="control"><a class="tags has-addons" href="/tags/react-native/"><span class="tag">react native</span><span class="tag is-grey-lightest">14</span></a></div><div class="control"><a class="tags has-addons" href="/tags/realm/"><span class="tag">realm</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/rx/"><span class="tag">rx</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/script/"><span class="tag">script</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/spm/"><span class="tag">spm</span><span class="tag is-grey-lightest">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/swift/"><span class="tag">swift</span><span class="tag is-grey-lightest">319</span></a></div><div class="control"><a class="tags has-addons" href="/tags/swiftUI/"><span class="tag">swiftUI</span><span class="tag is-grey-lightest">76</span></a></div><div class="control"><a class="tags has-addons" href="/tags/tech/"><span class="tag">tech</span><span class="tag is-grey-lightest">14</span></a></div><div class="control"><a class="tags has-addons" href="/tags/terminal/"><span class="tag">terminal</span><span class="tag is-grey-lightest">9</span></a></div><div class="control"><a class="tags has-addons" href="/tags/testing/"><span class="tag">testing</span><span class="tag is-grey-lightest">17</span></a></div><div class="control"><a class="tags has-addons" href="/tags/tool/"><span class="tag">tool</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/unity/"><span class="tag">unity</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/voip/"><span class="tag">voip</span><span class="tag is-grey-lightest">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/watchOS/"><span class="tag">watchOS</span><span class="tag is-grey-lightest">11</span></a></div><div class="control"><a class="tags has-addons" href="/tags/web/"><span class="tag">web</span><span class="tag is-grey-lightest">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/work/"><span class="tag">work</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/wwdc/"><span class="tag">wwdc</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/xcode/"><span class="tag">xcode</span><span class="tag is-grey-lightest">24</span></a></div></div></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">Subscribe to Updates</h3><form action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open(&#039;https://feedburner.google.com/fb/a/mailverify?uri=c2r59mmt2n5k0o5dt5vv3nq4u4&#039;,&#039;popupwindow&#039;,&#039;scrollbars=yes,width=550,height=520&#039;);return true"><input type="hidden" value="c2r59mmt2n5k0o5dt5vv3nq4u4" name="uri"><input type="hidden" name="loc" value="en_US"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button is-primary" type="submit" value="Subscribe"></div></div></form></div></div></div><div class="card widget"><div class="card-content"><div class="notification is-danger">You need to set <code>client_id</code> and <code>slot_id</code> to show this AD unit. Please set it in <code>_config.yml</code>.</div></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/z.png" alt="onmyway133" height="28"></a><p class="size-small"><span>&copy; 2020 Khoa Pham</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/onmyway133"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            site: {
                url: 'https://onmyway133.github.io',
                external_link: {"enable":true,"exclude":[]}
            },
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to Top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>