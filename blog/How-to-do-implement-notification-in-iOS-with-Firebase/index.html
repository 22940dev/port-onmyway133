<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">

  <!-- PACE Progress Bar START -->
  
    <script src="https://raw.githubusercontent.com/HubSpot/pace/v1.0.2/pace.min.js"></script>
    <link rel="stylesheet" href="https://github.com/HubSpot/pace/raw/master/themes/orange/pace-theme-flash.css">
  
  

  <!-- PACE Progress Bar START -->

  
  <title>how to do implement notification in ios with firebase | onmyway133</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  <meta name="keywords" content="iOS">
  
  
  
  
  <meta name="description" content="Issue #64 Note: This applies to Firebase 4.0.4 Preparing push notification certificateGo to Member Center -&amp;gt; Certificates -&amp;gt; Production CertificateYou can now use 1 certificate for both sandbox">
<meta name="keywords" content="iOS">
<meta property="og:type" content="article">
<meta property="og:title" content="How to do implement notification in iOS with Firebase">
<meta property="og:url" content="https://onmyway133.github.io/blog/How-to-do-implement-notification-in-iOS-with-Firebase/index.html">
<meta property="og:site_name" content="onmyway133">
<meta property="og:description" content="Issue #64 Note: This applies to Firebase 4.0.4 Preparing push notification certificateGo to Member Center -&amp;gt; Certificates -&amp;gt; Production CertificateYou can now use 1 certificate for both sandbox">
<meta property="og:locale" content="en">
<meta property="og:image" content="https://user-images.githubusercontent.com/2284279/29111626-5617e09c-7ceb-11e7-9f56-c1f9ceab3cd1.png">
<meta property="og:image" content="https://user-images.githubusercontent.com/2284279/29111784-f0dfcbe4-7ceb-11e7-8aff-db1a50ea3ee5.png">
<meta property="og:updated_time" content="2019-09-03T08:18:00.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="How to do implement notification in iOS with Firebase">
<meta name="twitter:description" content="Issue #64 Note: This applies to Firebase 4.0.4 Preparing push notification certificateGo to Member Center -&amp;gt; Certificates -&amp;gt; Production CertificateYou can now use 1 certificate for both sandbox">
<meta name="twitter:image" content="https://user-images.githubusercontent.com/2284279/29111626-5617e09c-7ceb-11e7-9f56-c1f9ceab3cd1.png">
  
    <link rel="alternate" href="/atom.xml" title="onmyway133" type="application/atom+xml">
  
  <link rel="icon" href="/favicon.ico">
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link href="https://fonts.googleapis.com/css?family=Open+Sans|Montserrat:700" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Roboto:400,300,300italic,400italic" rel="stylesheet" type="text/css">
  <link href="https://cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">
  <style type="text/css">
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/9749f0/00000000000000000001008f/27/l?subset_id=2&fvd=n5) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/90cf9f/000000000000000000010091/27/l?subset_id=2&fvd=n7) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/8a5494/000000000000000000013365/27/l?subset_id=2&fvd=n4) format("woff2");font-weight:lighter;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/d337d8/000000000000000000010095/27/l?subset_id=2&fvd=i4) format("woff2");font-weight:400;font-style:italic;}</style>
    
  <link rel="stylesheet" id="athemes-headings-fonts-css" href="//fonts.googleapis.com/css?family=Yanone+Kaffeesatz%3A200%2C300%2C400%2C700&amp;ver=4.6.1" type="text/css" media="all">
  <link rel="stylesheet" href="/css/style.css">

  <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>

  <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.0.2/css/bootstrap.min.css">
  <link rel="stylesheet" href="/css/hiero.css">
  <link rel="stylesheet" href="/css/glyphs.css">
  

  <!-- Custom CSS -->
  <link rel="stylesheet" href="/css/my.css">
  <!-- Google Adsense -->
  
</head>
</html>
<script>
var themeMenus = {};

  themeMenus["/"] = "Home"; 

  themeMenus["/about/"] = "About"; 

  themeMenus["/writing/"] = "writing"; 

  themeMenus["/archives"] = "Archives"; 

  themeMenus["/speaking/"] = "speaking"; 

  themeMenus["/opensource/"] = "open source"; 

  themeMenus["/projects/"] = "projects"; 

  themeMenus["/news/"] = "news"; 

  themeMenus["/gumroad/"] = "gumroad"; 

  themeMenus["/atom.xml"] = "rss"; 

</script>


  <body data-spy="scroll" data-target="#toc" data-offset="50">


  <header id="allheader" class="site-header" role="banner">
  <div class="clearfix container">
      <div class="site-branding">

          <h1 class="site-title">
            
              <a href="/" title="onmyway133" rel="home"> onmyway133 </a>
            
          </h1>

          
            <div class="site-description">What you don&#39;t know is what you haven&#39;t learned</div>
          
            
          <nav id="main-navigation" class="main-navigation" role="navigation">
            <a class="nav-open">Menu</a>
            <a class="nav-close">Close</a>
            <div class="clearfix sf-menu">

              <ul id="main-nav" class="nmenu sf-js-enabled">
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/">Home</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/about/">About</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/writing/">writing</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/archives">Archives</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/speaking/">speaking</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/opensource/">open source</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/projects/">projects</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/news/">news</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/gumroad/">gumroad</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/atom.xml">rss</a> </li>
                    
              </ul>
            </div>
          </nav>


      </div>
  </div>
</header>


  <div id="originBgDiv" style="background: #fff; width: 100%;">

      <div style="max-height:600px; overflow: hidden;  display: flex; display: -webkit-flex; align-items: center;">
        <img id="originBg" width="100%" alt="" src="">
      </div>

  </div>

  <script>
  function setAboutIMG(){
      var imgUrls = "css/images/pose.jpg,https://avatars1.githubusercontent.com/u/2284279?s=460&v=4".split(",");
      var random = Math.floor((Math.random() * imgUrls.length ));
      if (imgUrls[random].startsWith('http') || imgUrls[random].indexOf('://') >= 0) {
        document.getElementById("originBg").src=imgUrls[random];
      } else {
        document.getElementById("originBg").src='/' + imgUrls[random];
      }
  }
  bgDiv=document.getElementById("originBgDiv");
  if(location.pathname.match('about')){
    setAboutIMG();
    bgDiv.style.display='block';
  }else{
    bgDiv.style.display='none';
  }
  </script>



  <div id="container">
    <div id="wrap">
            
      <div id="content" class="outer">
        
          <section id="main" style="float:none;"><article id="post-How-to-do-implement-notification-in-iOS-with-Firebase" style="width: 66%; float:left;" class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" class="article-title" itemprop="name">
      How to do implement notification in iOS with Firebase
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-do-implement-notification-in-iOS-with-Firebase/" class="article-date">
	  <time datetime="2017-08-09T06:29:51.000Z" itemprop="datePublished">August 9, 2017</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/64" target="_blank" rel="noopener">#64</a></strong></p>
<p>Note: This applies to Firebase 4.0.4</p>
<h2 id="Preparing-push-notification-certificate"><a href="#Preparing-push-notification-certificate" class="headerlink" title="Preparing push notification certificate"></a>Preparing push notification certificate</h2><p>Go to <a href="https://developer.apple.com/account/ios/certificate/distribution/create" target="_blank" rel="noopener">Member Center</a> -&gt; <code>Certificates</code> -&gt; <code>Production</code></p>
<h3 id="Certificate"><a href="#Certificate" class="headerlink" title="Certificate"></a>Certificate</h3><p>You can now use 1 certificate for both sandbox and production environment<br><img src="https://user-images.githubusercontent.com/2284279/29111626-5617e09c-7ceb-11e7-9f56-c1f9ceab3cd1.png" alt="push"></p>
<h3 id="Auth-Key"><a href="#Auth-Key" class="headerlink" title="Auth Key"></a>Auth Key</h3><ul>
<li>If you like to use <a href="https://developer.apple.com/account/ios/authkey/create" target="_blank" rel="noopener">Auth Key</a>, read <a href="https://developer.apple.com/library/content/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/CommunicatingwithAPNs.html#//apple_ref/doc/uid/TP40008194-CH11-SW3" target="_blank" rel="noopener">Provider Authentication Tokens</a></li>
</ul>
<h2 id="Configure-push-notification"><a href="#Configure-push-notification" class="headerlink" title="Configure push notification"></a>Configure push notification</h2><ul>
<li>Go to <a href="https://console.firebase.google.com/" target="_blank" rel="noopener">Firebase Console</a> -&gt; <code>Settings</code> -&gt; <code>Project Settings</code> -&gt; <code>Cloud Messaging</code> -&gt; <code>iOS app configuration</code><ul>
<li>If you use certificate, use just 1 <code>Apple Push Notification service SSL</code> for both fields</li>
<li>If you use Authenticate Key, fill in <code>APNS auth key</code></li>
</ul>
</li>
</ul>
<p><img src="https://user-images.githubusercontent.com/2284279/29111784-f0dfcbe4-7ceb-11e7-8aff-db1a50ea3ee5.png" alt="firebase"></p>
<h2 id="Adding-pod"><a href="#Adding-pod" class="headerlink" title="Adding pod"></a>Adding pod</h2><p>In your <code>Podfile</code>, declare</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pod <span class="string">'Firebase/Core'</span></span><br><span class="line">pod <span class="string">'Firebase/Messaging'</span></span><br></pre></td></tr></table></figure>

<h2 id="Disabling-app-delegate-swizzling"><a href="#Disabling-app-delegate-swizzling" class="headerlink" title="Disabling app delegate swizzling"></a>Disabling app delegate swizzling</h2><ul>
<li>Read <a href="https://firebase.google.com/docs/cloud-messaging/ios/client" target="_blank" rel="noopener">Method swizzling in Firebase Cloud Messaging</a></li>
<li>You should say NO to swizzling. Do this in your <code>Info.plist</code></li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">key</span>&gt;</span>FirebaseAppDelegateProxyEnabled<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">false</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<p>Read more on <code>Messaging.messaging().apnsToken</code></p>
<blockquote>
<p>This property is used to set the APNS Token received by the application delegate.<br>FIRMessaging uses method swizzling to ensure the APNS token is set automatically. However, if you have disabled swizzling by setting <code>FirebaseAppDelegateProxyEnabled</code> to <code>NO</code> in your app’s Info.plist, you should manually set the APNS token in your application delegate’s -application:didRegisterForRemoteNotificationsWithDeviceToken: method.<br>If you would like to set the type of the APNS token, rather than relying on automatic detection, see: -setAPNSToken:type:.</p>
</blockquote>
<h2 id="Configuring-Firebase"><a href="#Configuring-Firebase" class="headerlink" title="Configuring Firebase"></a>Configuring Firebase</h2><p>You can and should configure Firebase in code</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Firebase</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> options = <span class="type">FirebaseOptions</span>(googleAppID: <span class="string">""</span>, gcmSenderID: <span class="string">""</span>)</span><br><span class="line">options.bundleID = <span class="string">""</span></span><br><span class="line">options.apiKey = <span class="string">""</span></span><br><span class="line">options.projectID = <span class="string">""</span></span><br><span class="line">options.clientID = <span class="string">""</span></span><br><span class="line"><span class="type">FirebaseApp</span>.configure(options: options)</span><br></pre></td></tr></table></figure>

<h2 id="Handling-device-token"><a href="#Handling-device-token" class="headerlink" title="Handling device token"></a>Handling device token</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Firebase</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">application</span><span class="params">(<span class="number">_</span> application: UIApplication, didRegisterForRemoteNotificationsWithDeviceToken deviceToken: Data)</span></span> &#123;</span><br><span class="line">  <span class="type">Messaging</span>.messaging().apnsToken = deviceToken</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Getting-FCM-token"><a href="#Getting-FCM-token" class="headerlink" title="Getting FCM token"></a>Getting FCM token</h2><h3 id="Retrieving-FCM-token"><a href="#Retrieving-FCM-token" class="headerlink" title="Retrieving FCM token"></a>Retrieving FCM token</h3><p>Read <a href="https://firebase.google.com/docs/cloud-messaging/ios/first-message" target="_blank" rel="noopener">Access the registration token</a></p>
<blockquote>
<p>By default, the FCM SDK generates a registration token for the client app instance on initial startup of your app. Similar to the APNs device token, this token allows you to target notification messages to this particular instance of the app.</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Messaging</span>.messaging().fcmToken</span><br></pre></td></tr></table></figure>

<h3 id="Observing-for-FCM-token-change"><a href="#Observing-for-FCM-token-change" class="headerlink" title="Observing for FCM token change"></a>Observing for FCM token change</h3><p>Read <a href="https://firebase.google.com/docs/cloud-messaging/ios/first-message#access_the_registration_token" target="_blank" rel="noopener">Monitor token generation</a></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Messaging</span>.messaging().delegate = <span class="keyword">self</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// MARK: - MessagingDelegate</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">messaging</span><span class="params">(<span class="number">_</span> messaging: Messaging, didRefreshRegistrationToken fcmToken: String)</span></span> &#123;</span><br><span class="line">  <span class="built_in">print</span>(fcmToken)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/">iOS</a></li></ul>

      
            
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/blog/Another-layer-of-abstraction/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Another layer of abstraction
        
      </div>
    </a>
  
  
    <a href="/blog/How-to-use-JSON-Codable-in-Swift-4/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">How to use JSON Codable in Swift 4</div>
    </a>
  
</nav>

  
</article>

<!-- Table of Contents -->

  <aside id="sidebar">
    <div id="toc" class="toc-article" style="overflow-y: scroll; max-width: 28%;">
    <strong class="toc-title">Contents</strong>
    
      <ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Preparing-push-notification-certificate"><span class="nav-number">1.</span> <span class="nav-text">Preparing push notification certificate</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Certificate"><span class="nav-number">1.1.</span> <span class="nav-text">Certificate</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Auth-Key"><span class="nav-number">1.2.</span> <span class="nav-text">Auth Key</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Configure-push-notification"><span class="nav-number">2.</span> <span class="nav-text">Configure push notification</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Adding-pod"><span class="nav-number">3.</span> <span class="nav-text">Adding pod</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Disabling-app-delegate-swizzling"><span class="nav-number">4.</span> <span class="nav-text">Disabling app delegate swizzling</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Configuring-Firebase"><span class="nav-number">5.</span> <span class="nav-text">Configuring Firebase</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Handling-device-token"><span class="nav-number">6.</span> <span class="nav-text">Handling device token</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Getting-FCM-token"><span class="nav-number">7.</span> <span class="nav-text">Getting FCM token</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Retrieving-FCM-token"><span class="nav-number">7.1.</span> <span class="nav-text">Retrieving FCM token</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Observing-for-FCM-token-change"><span class="nav-number">7.2.</span> <span class="nav-text">Observing for FCM token change</span></a></li></ol></li></ol>
    
    </div>
  </aside>
</section>
        
      </div>
      <footer id="footer" class="site-footer">
  

  <div class="clearfix container">
      <div class="site-info">
	      &copy; 2019 onmyway133 All Rights Reserved.
          
      </div>
      <div class="site-credit">
        Theme by <a href="https://github.com/iTimeTraveler/hexo-theme-hiero" target="_blank">hiero</a>
      </div>
  </div>
</footer>


<!-- min height -->

<script>
    var contentdiv = document.getElementById("content");

    contentdiv.style.minHeight = document.body.offsetHeight - document.getElementById("allheader").offsetHeight - document.getElementById("footer").offsetHeight + "px";
</script>

<!-- Custome JS -->
<script src="/js/my.js"></script>
    </div>
    <!-- <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/about/" class="mobile-nav-link">About</a>
  
    <a href="/writing/" class="mobile-nav-link">Writing</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/speaking/" class="mobile-nav-link">Speaking</a>
  
    <a href="/opensource/" class="mobile-nav-link">Open Source</a>
  
    <a href="/projects/" class="mobile-nav-link">Projects</a>
  
    <a href="/news/" class="mobile-nav-link">News</a>
  
    <a href="/gumroad/" class="mobile-nav-link">Gumroad</a>
  
    <a href="/atom.xml" class="mobile-nav-link">RSS</a>
  
</nav> -->
    

<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>



  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.js"></script>


<script src="/js/scripts.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script src="/js/main.js"></script>













  </div>

  <a id="rocket" href="#top" class=""></a>
  <script type="text/javascript" src="/js/totop.js" async=""></script>
</body>
</html>
