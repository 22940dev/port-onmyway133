<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">

  <!-- PACE Progress Bar START -->
  
    <script src="https://raw.githubusercontent.com/HubSpot/pace/v1.0.2/pace.min.js"></script>
    <link rel="stylesheet" href="https://github.com/HubSpot/pace/raw/master/themes/orange/pace-theme-flash.css">
  
  

  <!-- PACE Progress Bar START -->

  
  <title>how to make a simple resolver in swift | onmyway133</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  
  
  
  <meta name="description" content="Issue #25 The Marvel worldAnt ManWe know Ant Man is Hank Pym 1234567891011121314struct AntManSuit &amp;#123;    let name: String&amp;#125;struct HankPym &amp;#123;    let suit = AntManSuit(name: &quot;Ant Man ID #101&quot;">
<meta name="keywords" content="ios, android,javascript, react">
<meta property="og:type" content="article">
<meta property="og:title" content="How to make a simple resolver in Swift">
<meta property="og:url" content="https://onmyway133.github.io/blog/How-to-make-a-simple-resolver-in-Swift/index.html">
<meta property="og:site_name" content="onmyway133">
<meta property="og:description" content="Issue #25 The Marvel worldAnt ManWe know Ant Man is Hank Pym 1234567891011121314struct AntManSuit &amp;#123;    let name: String&amp;#125;struct HankPym &amp;#123;    let suit = AntManSuit(name: &quot;Ant Man ID #101&quot;">
<meta property="og:locale" content="en">
<meta property="og:updated_time" content="2019-05-23T16:40:30.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="How to make a simple resolver in Swift">
<meta name="twitter:description" content="Issue #25 The Marvel worldAnt ManWe know Ant Man is Hank Pym 1234567891011121314struct AntManSuit &amp;#123;    let name: String&amp;#125;struct HankPym &amp;#123;    let suit = AntManSuit(name: &quot;Ant Man ID #101&quot;">
  
    <link rel="alternate" href="/atom.xml" title="onmyway133" type="application/atom+xml">
  
  <link rel="icon" href="/favicon.ico">
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link href="https://fonts.googleapis.com/css?family=Open+Sans|Montserrat:700" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Roboto:400,300,300italic,400italic" rel="stylesheet" type="text/css">
  <link href="https://cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">
  <style type="text/css">
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/9749f0/00000000000000000001008f/27/l?subset_id=2&fvd=n5) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/90cf9f/000000000000000000010091/27/l?subset_id=2&fvd=n7) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/8a5494/000000000000000000013365/27/l?subset_id=2&fvd=n4) format("woff2");font-weight:lighter;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/d337d8/000000000000000000010095/27/l?subset_id=2&fvd=i4) format("woff2");font-weight:400;font-style:italic;}</style>
    
  <link rel="stylesheet" id="athemes-headings-fonts-css" href="//fonts.googleapis.com/css?family=Yanone+Kaffeesatz%3A200%2C300%2C400%2C700&amp;ver=4.6.1" type="text/css" media="all">
  <link rel="stylesheet" href="/css/style.css">

  <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>

  <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.0.2/css/bootstrap.min.css">
  <link rel="stylesheet" href="/css/hiero.css">
  <link rel="stylesheet" href="/css/glyphs.css">
  

  <!-- Custom CSS -->
  <link rel="stylesheet" href="/css/my.css">
  <!-- Google Adsense -->
  
</head>
</html>
<script>
var themeMenus = {};

  themeMenus["/"] = "Home"; 

  themeMenus["/about/"] = "About"; 

  themeMenus["/writing/"] = "writing"; 

  themeMenus["/archives"] = "Archives"; 

  themeMenus["/speaking/"] = "speaking"; 

  themeMenus["/opensource/"] = "open source"; 

  themeMenus["/projects/"] = "projects"; 

  themeMenus["/news/"] = "news"; 

  themeMenus["/gumroad/"] = "gumroad"; 

  themeMenus["/atom.xml"] = "rss"; 

</script>


  <body data-spy="scroll" data-target="#toc" data-offset="50">


  <header id="allheader" class="site-header" role="banner">
  <div class="clearfix container">
      <div class="site-branding">

          <h1 class="site-title">
            
              <a href="/" title="onmyway133" rel="home"> onmyway133 </a>
            
          </h1>

          
            <div class="site-description">What you don&#39;t know is what you haven&#39;t learned</div>
          
            
          <nav id="main-navigation" class="main-navigation" role="navigation">
            <a class="nav-open">Menu</a>
            <a class="nav-close">Close</a>
            <div class="clearfix sf-menu">

              <ul id="main-nav" class="nmenu sf-js-enabled">
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/">Home</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/about/">About</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/writing/">writing</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/archives">Archives</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/speaking/">speaking</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/opensource/">open source</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/projects/">projects</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/news/">news</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/gumroad/">gumroad</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/atom.xml">rss</a> </li>
                    
              </ul>
            </div>
          </nav>


      </div>
  </div>
</header>


  <div id="originBgDiv" style="background: #fff; width: 100%;">

      <div style="max-height:600px; overflow: hidden;  display: flex; display: -webkit-flex; align-items: center;">
        <img id="originBg" width="100%" alt="" src="">
      </div>

  </div>

  <script>
  function setAboutIMG(){
      var imgUrls = "https://avatars1.githubusercontent.com/u/2284279?s=460&v=4".split(",");
      var random = Math.floor((Math.random() * imgUrls.length ));
      if (imgUrls[random].startsWith('http') || imgUrls[random].indexOf('://') >= 0) {
        document.getElementById("originBg").src=imgUrls[random];
      } else {
        document.getElementById("originBg").src='/' + imgUrls[random];
      }
  }
  bgDiv=document.getElementById("originBgDiv");
  if(location.pathname.match('about')){
    setAboutIMG();
    bgDiv.style.display='block';
  }else{
    bgDiv.style.display='none';
  }
  </script>



  <div id="container">
    <div id="wrap">
            
      <div id="content" class="outer">
        
          <section id="main" style="float:none;"><article id="post-How-to-make-a-simple-resolver-in-Swift" style="width: 66%; float:left;" class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" class="article-title" itemprop="name">
      How to make a simple resolver in Swift
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-make-a-simple-resolver-in-Swift/" class="article-date">
	  <time datetime="2017-05-10T20:09:27.000Z" itemprop="datePublished">May 10, 2017</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/25" target="_blank" rel="noopener">#25</a></strong></p>
<h2 id="The-Marvel-world"><a href="#The-Marvel-world" class="headerlink" title="The Marvel world"></a>The Marvel world</h2><h3 id="Ant-Man"><a href="#Ant-Man" class="headerlink" title="Ant Man"></a>Ant Man</h3><p>We know Ant Man is Hank Pym</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">AntManSuit</span> </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> name: <span class="type">String</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">HankPym</span> </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> suit = <span class="type">AntManSuit</span>(name: <span class="string">"Ant Man ID #101"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">fight</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"Fighting with the suit named "</span> + suit.name)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> hankPym = <span class="type">HankPym</span>()</span><br><span class="line">hankPym.fight()</span><br></pre></td></tr></table></figure>

<p>Everytime HankPym is created, he always uses the Ant Man suit. This time he is so coupled to the role Ant Man</p>
<h3 id="More-suits"><a href="#More-suits" class="headerlink" title="More suits"></a>More suits</h3><p>Well, he does not have to be too dependent on the Ant Man suit. We know Hank Pym is a genius scientist, he has more suits to use. Let’s make it decoupled</p>
<p>Using Dependency Injection</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">Suit</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> name: <span class="type">String</span> &#123; <span class="keyword">get</span> &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">AntManSuit</span>: <span class="title">Suit</span> </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> name: <span class="type">String</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">YellowJacketSuit</span>: <span class="title">Suit</span> </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> name: <span class="type">String</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">HankPym</span> </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> suit: <span class="type">Suit</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">fight</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"Fighting with the suit named "</span> + suit.name)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> suit = <span class="type">YellowJacketSuit</span>(name: <span class="string">"Yellow Jacket ID #33"</span>)</span><br><span class="line"><span class="keyword">let</span> hankPym = <span class="type">HankPym</span>(suit: suit)</span><br><span class="line">hankPym.fight()</span><br></pre></td></tr></table></figure>

<p>Now Hank Pym can be more flexible on which suit to use.</p>
<h2 id="Dependency-Injection"><a href="#Dependency-Injection" class="headerlink" title="Dependency Injection"></a>Dependency Injection</h2><p>The technique we just saw is called <code>Dependency Injection</code>, in which Hank Pym does not need to create the Suit, it will be provided through constructor or property.</p>
<h2 id="Dependency-Inversion-Principle"><a href="#Dependency-Inversion-Principle" class="headerlink" title="Dependency Inversion Principle"></a>Dependency Inversion Principle</h2><p>In the first example, Hank Pym is dependent on the concrete implementation of the Suit</p>
<p>In the second example, both Hank Pym and the suits are dependent on the Suit protocol. This way Hank Pym only knows about the Suit protocol, and future suits must be crafted to that it conforms to the Suit protocol</p>
<p>This way the dependency is inverted</p>
<blockquote>
<p>High level modules should not depend upon low level modules. Both should depend upon abstractions.</p>
</blockquote>
<blockquote>
<p>What is the high level policy? It is the abstractions that underlie the application, the<br>truths that do not vary when the details are changed</p>
</blockquote>
<h2 id="Inversion-of-Control-Container"><a href="#Inversion-of-Control-Container" class="headerlink" title="Inversion of Control Container"></a>Inversion of Control Container</h2><p>You may ask yourself <a href="http://programmers.stackexchange.com/questions/205681/why-is-inversion-of-control-named-that-way" target="_blank" rel="noopener">Why is Inversion of Control named that way?</a></p>
<h3 id="Framework-vs-library"><a href="#Framework-vs-library" class="headerlink" title="Framework vs library"></a>Framework vs library</h3><p>People said “the framework calls you but you call the library”</p>
<h3 id="Command-line-vs-GUI"><a href="#Command-line-vs-GUI" class="headerlink" title="Command line vs GUI"></a>Command line vs GUI</h3><p>See <a href="http://stackoverflow.com/a/3108/1418457" target="_blank" rel="noopener">What is Inversion of Control?</a></p>
<p>For example, in an old school menu, you might have:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">print &quot;enter your name&quot;</span><br><span class="line">read name</span><br><span class="line">print &quot;enter your address&quot;</span><br><span class="line">read address</span><br><span class="line">etc...</span><br><span class="line">store in database</span><br></pre></td></tr></table></figure>

<p>thereby controlling the flow of user interaction.</p>
<p>In a GUI program or some such, instead we say</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">when the user types in field a, store it in NAME</span><br><span class="line">when the user types in field b, store it in ADDRESS</span><br><span class="line">when the user clicks the save button, call StoreInDatabase</span><br></pre></td></tr></table></figure>

<p>You how have a brief understanding of how IoC means</p>
<h3 id="IoC-container"><a href="#IoC-container" class="headerlink" title="IoC container"></a>IoC container</h3><p>In the 2nd example of the Suit protocol, you can see how there is a inversion of control. What if there is a container that contains all the Suit conformances?</p>
<p>Let’s use my <a href="https://github.com/onmyway133/Resolver" target="_blank" rel="noopener">Resolver</a></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> resolver = <span class="type">Resolver</span>()</span><br><span class="line">resolver.register &#123;</span><br><span class="line">    <span class="type">YellowJacketSuit</span>(name: <span class="string">"YellowJacket ID #404"</span>) <span class="keyword">as</span> <span class="type">Suit</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> suit = <span class="keyword">try</span>! resolver.resolve() <span class="keyword">as</span> <span class="type">Suit</span></span><br><span class="line"><span class="keyword">let</span> hankPym = <span class="type">HankPym</span>(suit: suit)</span><br></pre></td></tr></table></figure>

<p>Quite helpful, right? :]</p>
<h2 id="Features"><a href="#Features" class="headerlink" title="Features"></a>Features</h2><p>Actually, IoC container helps you more than that.</p>
<ul>
<li>Circular Dependency Injection</li>
<li>Auto Injection</li>
<li>Object Scope</li>
<li>…</li>
</ul>
<p>There are some IoC containers in Swift</p>
<h3 id="Swinject"><a href="#Swinject" class="headerlink" title="Swinject"></a><a href="https://github.com/Swinject/Swinject" target="_blank" rel="noopener">Swinject</a></h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> container = <span class="type">Container</span>()</span><br><span class="line">container.register(<span class="type">AnimalType</span>.<span class="keyword">self</span>) &#123; <span class="number">_</span> <span class="keyword">in</span> <span class="type">Cat</span>(name: <span class="string">"Mimi"</span>) &#125;</span><br><span class="line">container.register(<span class="type">PersonType</span>.<span class="keyword">self</span>) &#123; r <span class="keyword">in</span></span><br><span class="line">     <span class="type">PetOwner</span>(pet: r.resolve(<span class="type">AnimalType</span>.<span class="keyword">self</span>)!)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Swinject requires explicit type declaration. It has SwinjectStoryboard, which helps configuring the dependency for your view controller</p>
<h3 id="Dip"><a href="#Dip" class="headerlink" title="Dip"></a><a href="https://github.com/AliSoftware/Dip" target="_blank" rel="noopener">Dip</a></h3><p>Dip leverages generic and encourage protocols</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">container.register &#123; <span class="type">ServiceImp</span>() <span class="keyword">as</span> <span class="type">Service</span> &#125;</span><br><span class="line"><span class="keyword">let</span> service = <span class="keyword">try</span>! container.resolve() <span class="keyword">as</span> <span class="type">Service</span></span><br></pre></td></tr></table></figure>

<p>You ‘ll learn a lot just by reading Dip source code, on how factory and factory type are stored and checked using generic</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">resolve</span>&lt;T, F&gt;<span class="params">(tag tag: Tag? = <span class="literal">nil</span>, builder: F-&gt;T)</span></span> <span class="keyword">throws</span> -&gt; <span class="type">T</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> key = <span class="type">DefinitionKey</span>(protocolType: <span class="type">T</span>.<span class="keyword">self</span>, factoryType: <span class="type">F</span>.<span class="keyword">self</span>, associatedTag: tag)</span><br><span class="line">    <span class="keyword">let</span> nilTagKey = tag.<span class="built_in">map</span> &#123; <span class="number">_</span> <span class="keyword">in</span> <span class="type">DefinitionKey</span>(protocolType: <span class="type">T</span>.<span class="keyword">self</span>, factoryType: <span class="type">F</span>.<span class="keyword">self</span>, associatedTag: <span class="literal">nil</span>) &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">guard</span> <span class="keyword">let</span> definition = (<span class="keyword">self</span>.definitions[key] ?? <span class="keyword">self</span>.definitions[nilTagKey]) <span class="keyword">as</span>? <span class="type">DefinitionOf</span>&lt;<span class="type">T</span>, <span class="type">F</span>&gt; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="type">DipError</span>.<span class="type">DefinitionNotFound</span>(key)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> usingKey: <span class="type">DefinitionKey?</span> = definition.scope == .<span class="type">ObjectGraph</span> ? key : <span class="literal">nil</span></span><br><span class="line">    <span class="keyword">return</span> _resolve(tag, key: usingKey, definition: definition, builder: builder)</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<h2 id="Build-your-own-simple-IoC-container"><a href="#Build-your-own-simple-IoC-container" class="headerlink" title="Build your own simple IoC container"></a>Build your own simple IoC container</h2><p>You may have discovered, that the idea of all those framework is to use closure as factory method</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> factory = &#123;</span><br><span class="line">    <span class="type">YellowJacketSuit</span>(name: <span class="string">"YellowJacket ID #007"</span>) <span class="keyword">as</span> <span class="type">Suit</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> suit = factory()</span><br></pre></td></tr></table></figure>

<p>All we have to do is to store these factories closure</p>
<p>Take a look at my gist <a href="https://gist.github.com/onmyway133/3244cde1eaf8f2cd2ecb" target="_blank" rel="noopener">SimpleResolver.swift</a></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SimpleResolver</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> factories = [<span class="type">String</span>: <span class="type">Any</span>]()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">factory</span>&lt;T&gt;<span class="params">(factory: <span class="params">()</span></span></span> -&gt; <span class="type">T</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> key = <span class="type">String</span>(<span class="type">T</span>.<span class="keyword">self</span>)</span><br><span class="line">        factories[key] = factory</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">resolve</span>&lt;T&gt;<span class="params">()</span></span> -&gt; <span class="type">T</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> key = <span class="type">String</span>(<span class="type">T</span>.<span class="keyword">self</span>)</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">let</span> factory = factories[key] <span class="keyword">as</span>? () -&gt; <span class="type">T</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> factory()</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="built_in">fatalError</span>(<span class="string">"Registration not found"</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> resolver = <span class="type">SimpleResolver</span>()</span><br><span class="line"></span><br><span class="line">resolver.factory &#123;</span><br><span class="line">    <span class="type">YellowJacketSuit</span>(name: <span class="string">"YellowJacket IS #009"</span>) <span class="keyword">as</span> <span class="type">Suit</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> suit = resolver.resolve() <span class="keyword">as</span> <span class="type">Suit</span></span><br><span class="line"><span class="built_in">print</span>(suit.name)</span><br></pre></td></tr></table></figure>

<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://yoichitgy.github.io/post/dependency-injection-framework-for-swift-introduction-to-swinject/" target="_blank" rel="noopener">Dependency Injection Framework for Swift - Introduction to Swinject</a></li>
<li><a href="http://ilya.puchka.me/ioc-container-in-swift/" target="_blank" rel="noopener">IoC container in Swift</a></li>
<li><a href="https://github.com/chakrit/swift-ioc" target="_blank" rel="noopener">swift-ioc</a></li>
<li><a href="https://github.com/AliSoftware/Dip" target="_blank" rel="noopener">Dip</a></li>
<li><a href="http://typhoonframework.org/" target="_blank" rel="noopener">Typhoon</a></li>
</ul>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
      
            
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/blog/How-to-group-digits-in-Swift/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          How to group digits in Swift
        
      </div>
    </a>
  
  
    <a href="/blog/How-to-make-lighter-AppDelegate-in-iOS/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">How to make lighter AppDelegate in iOS</div>
    </a>
  
</nav>

  
</article>

<!-- Table of Contents -->

  <aside id="sidebar">
    <div id="toc" class="toc-article" style="overflow-y: scroll; max-width: 28%;">
    <strong class="toc-title">Contents</strong>
    
      <ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#The-Marvel-world"><span class="nav-number">1.</span> <span class="nav-text">The Marvel world</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Ant-Man"><span class="nav-number">1.1.</span> <span class="nav-text">Ant Man</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#More-suits"><span class="nav-number">1.2.</span> <span class="nav-text">More suits</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Dependency-Injection"><span class="nav-number">2.</span> <span class="nav-text">Dependency Injection</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Dependency-Inversion-Principle"><span class="nav-number">3.</span> <span class="nav-text">Dependency Inversion Principle</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Inversion-of-Control-Container"><span class="nav-number">4.</span> <span class="nav-text">Inversion of Control Container</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Framework-vs-library"><span class="nav-number">4.1.</span> <span class="nav-text">Framework vs library</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Command-line-vs-GUI"><span class="nav-number">4.2.</span> <span class="nav-text">Command line vs GUI</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#IoC-container"><span class="nav-number">4.3.</span> <span class="nav-text">IoC container</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Features"><span class="nav-number">5.</span> <span class="nav-text">Features</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Swinject"><span class="nav-number">5.1.</span> <span class="nav-text">Swinject</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Dip"><span class="nav-number">5.2.</span> <span class="nav-text">Dip</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Build-your-own-simple-IoC-container"><span class="nav-number">6.</span> <span class="nav-text">Build your own simple IoC container</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Reference"><span class="nav-number">7.</span> <span class="nav-text">Reference</span></a></li></ol>
    
    </div>
  </aside>
</section>
        
      </div>
      <footer id="footer" class="site-footer">
  

  <div class="clearfix container">
      <div class="site-info">
	      &copy; 2019 onmyway133 All Rights Reserved.
          
      </div>
      <div class="site-credit">
        Theme by <a href="https://github.com/iTimeTraveler/hexo-theme-hiero" target="_blank">hiero</a>
      </div>
  </div>
</footer>


<!-- min height -->

<script>
    var contentdiv = document.getElementById("content");

    contentdiv.style.minHeight = document.body.offsetHeight - document.getElementById("allheader").offsetHeight - document.getElementById("footer").offsetHeight + "px";
</script>

<!-- Custome JS -->
<script src="/js/my.js"></script>
    </div>
    <!-- <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/about/" class="mobile-nav-link">About</a>
  
    <a href="/writing/" class="mobile-nav-link">Writing</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/speaking/" class="mobile-nav-link">Speaking</a>
  
    <a href="/opensource/" class="mobile-nav-link">Open Source</a>
  
    <a href="/projects/" class="mobile-nav-link">Projects</a>
  
    <a href="/news/" class="mobile-nav-link">News</a>
  
    <a href="/gumroad/" class="mobile-nav-link">Gumroad</a>
  
    <a href="/atom.xml" class="mobile-nav-link">RSS</a>
  
</nav> -->
    

<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>



  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.js"></script>


<script src="/js/scripts.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script src="/js/main.js"></script>


<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-40119591-5', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->












  </div>

  <a id="rocket" href="#top" class=""></a>
  <script type="text/javascript" src="/js/totop.js" async=""></script>
</body>
</html>
