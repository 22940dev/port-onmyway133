<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">

  <!-- PACE Progress Bar START -->
  
    <script src="https://raw.githubusercontent.com/HubSpot/pace/v1.0.2/pace.min.js"></script>
    <link rel="stylesheet" href="https://github.com/HubSpot/pace/raw/master/themes/orange/pace-theme-flash.css">
  
  

  <!-- PACE Progress Bar START -->

  
  <title>how to dismiss keyboard with react-navigation in react native apps | onmyway133</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  <meta name="keywords" content="javascriptreact native">
  
  
  
  
  <meta name="description" content="Issue #263 Original post https://medium.com/react-native-training/how-to-dismiss-keyboard-with-react-navigation-in-react-native-apps-4b987bbfdc48  Showing and dismiss keyboard seems like a trivial thi">
<meta name="keywords" content="javascript,react native">
<meta property="og:type" content="article">
<meta property="og:title" content="How to dismiss keyboard with react-navigation in React Native apps">
<meta property="og:url" content="https://onmyway133.github.io/blog/How-to-dismiss-keyboard-with-react-navigation-in-React-Native-apps/index.html">
<meta property="og:site_name" content="onmyway133">
<meta property="og:description" content="Issue #263 Original post https://medium.com/react-native-training/how-to-dismiss-keyboard-with-react-navigation-in-react-native-apps-4b987bbfdc48  Showing and dismiss keyboard seems like a trivial thi">
<meta property="og:locale" content="en">
<meta property="og:image" content="https://cdn-images-1.medium.com/max/7168/1*RDNnY3yKYpgxdaXi4bGUTg.png">
<meta property="og:updated_time" content="2019-08-26T06:36:07.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="How to dismiss keyboard with react-navigation in React Native apps">
<meta name="twitter:description" content="Issue #263 Original post https://medium.com/react-native-training/how-to-dismiss-keyboard-with-react-navigation-in-react-native-apps-4b987bbfdc48  Showing and dismiss keyboard seems like a trivial thi">
<meta name="twitter:image" content="https://cdn-images-1.medium.com/max/7168/1*RDNnY3yKYpgxdaXi4bGUTg.png">
  
    <link rel="alternate" href="/atom.xml" title="onmyway133" type="application/atom+xml">
  
  <link rel="icon" href="/favicon.ico">
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link href="https://fonts.googleapis.com/css?family=Open+Sans|Montserrat:700" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Roboto:400,300,300italic,400italic" rel="stylesheet" type="text/css">
  <link href="https://cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">
  <style type="text/css">
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/9749f0/00000000000000000001008f/27/l?subset_id=2&fvd=n5) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/90cf9f/000000000000000000010091/27/l?subset_id=2&fvd=n7) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/8a5494/000000000000000000013365/27/l?subset_id=2&fvd=n4) format("woff2");font-weight:lighter;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/d337d8/000000000000000000010095/27/l?subset_id=2&fvd=i4) format("woff2");font-weight:400;font-style:italic;}</style>
    
  <link rel="stylesheet" id="athemes-headings-fonts-css" href="//fonts.googleapis.com/css?family=Yanone+Kaffeesatz%3A200%2C300%2C400%2C700&amp;ver=4.6.1" type="text/css" media="all">
  <link rel="stylesheet" href="/css/style.css">

  <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>

  <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.0.2/css/bootstrap.min.css">
  <link rel="stylesheet" href="/css/hiero.css">
  <link rel="stylesheet" href="/css/glyphs.css">
  

  <!-- Custom CSS -->
  <link rel="stylesheet" href="/css/my.css">
  <!-- Google Adsense -->
  
</head>
</html>
<script>
var themeMenus = {};

  themeMenus["/"] = "Home"; 

  themeMenus["/about/"] = "About"; 

  themeMenus["/writing/"] = "writing"; 

  themeMenus["/archives"] = "Archives"; 

  themeMenus["/speaking/"] = "speaking"; 

  themeMenus["/opensource/"] = "open source"; 

  themeMenus["/projects/"] = "projects"; 

  themeMenus["/news/"] = "news"; 

  themeMenus["/gumroad/"] = "gumroad"; 

  themeMenus["/atom.xml"] = "rss"; 

</script>


  <body data-spy="scroll" data-target="#toc" data-offset="50">


  <header id="allheader" class="site-header" role="banner">
  <div class="clearfix container">
      <div class="site-branding">

          <h1 class="site-title">
            
              <a href="/" title="onmyway133" rel="home"> onmyway133 </a>
            
          </h1>

          
            <div class="site-description">What you don&#39;t know is what you haven&#39;t learned</div>
          
            
          <nav id="main-navigation" class="main-navigation" role="navigation">
            <a class="nav-open">Menu</a>
            <a class="nav-close">Close</a>
            <div class="clearfix sf-menu">

              <ul id="main-nav" class="nmenu sf-js-enabled">
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/">Home</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/about/">About</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/writing/">writing</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/archives">Archives</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/speaking/">speaking</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/opensource/">open source</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/projects/">projects</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/news/">news</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/gumroad/">gumroad</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/atom.xml">rss</a> </li>
                    
              </ul>
            </div>
          </nav>


      </div>
  </div>
</header>


  <div id="originBgDiv" style="background: #fff; width: 100%;">

      <div style="max-height:600px; overflow: hidden;  display: flex; display: -webkit-flex; align-items: center;">
        <img id="originBg" width="100%" alt="" src="">
      </div>

  </div>

  <script>
  function setAboutIMG(){
      var imgUrls = "css/images/pose.jpg,https://avatars1.githubusercontent.com/u/2284279?s=460&v=4".split(",");
      var random = Math.floor((Math.random() * imgUrls.length ));
      if (imgUrls[random].startsWith('http') || imgUrls[random].indexOf('://') >= 0) {
        document.getElementById("originBg").src=imgUrls[random];
      } else {
        document.getElementById("originBg").src='/' + imgUrls[random];
      }
  }
  bgDiv=document.getElementById("originBgDiv");
  if(location.pathname.match('about')){
    setAboutIMG();
    bgDiv.style.display='block';
  }else{
    bgDiv.style.display='none';
  }
  </script>



  <div id="container">
    <div id="wrap">
            
      <div id="content" class="outer">
        
          <section id="main" style="float:none;"><article id="post-How-to-dismiss-keyboard-with-react-navigation-in-React-Native-apps" style="width: 66%; float:left;" class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" class="article-title" itemprop="name">
      How to dismiss keyboard with react-navigation in React Native apps
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-dismiss-keyboard-with-react-navigation-in-React-Native-apps/" class="article-date">
	  <time datetime="2019-05-23T15:57:01.000Z" itemprop="datePublished">May 23, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/263" target="_blank" rel="noopener">#263</a></strong></p>
<p>Original post <a href="https://medium.com/react-native-training/how-to-dismiss-keyboard-with-react-navigation-in-react-native-apps-4b987bbfdc48" target="_blank" rel="noopener">https://medium.com/react-native-training/how-to-dismiss-keyboard-with-react-navigation-in-react-native-apps-4b987bbfdc48</a></p>
<hr>
<p>Showing and dismiss keyboard seems like a trivial thing to do in mobile apps, but it can be tricky in automatically dismissing it when it comes together with react-navigation and modal presentation. At least that’s according to my initial assumption. This article aims to detail what I have learned about keyboard handling and how to avoid extra tap when dealing with TextInput There will also be lots of code spelunking, thanks to the all the libraries being open source. The version of React Native I’m using at the time of writing is 0.57.5</p>
<h2 id="The-built-in-TextInput-component"><a href="#The-built-in-TextInput-component" class="headerlink" title="The built in TextInput component"></a>The built in TextInput component</h2><p>React Native comes with a bunch of basic components, one of them is the <a href="https://facebook.github.io/react-native/docs/textinput" target="_blank" rel="noopener">TextInput</a> for inputting text into the app via a keyboard.</p>
<pre><code>import React, { Component } from &apos;react&apos;;
import { AppRegistry, TextInput } from &apos;react-native&apos;;

export default class UselessTextInput extends Component {
  constructor(props) {
    super(props);
    this.state = { text: &apos;Useless Placeholder&apos; };
  }

render() {
    return (
      &lt;TextInput
        style={{height: 40, borderColor: 'gray', borderWidth: 1}}
        onChangeText={(text) =&gt; this.setState({text})}
        value={this.state.text}
      /&gt;
    );
  }
}</code></pre><p>That’s it, whenever we click on the text input, keyboard appears allowing us to enter values. To dismiss the keyboard by pressing anywhere on the screen, the easy solution is to TouchableWithoutFeedback together with Keyboard . This is similar to having UITapGestureRecognizer in iOS UIView and calling view.endEditing</p>
<pre><code>import { Keyboard } from &apos;react-native&apos;

Keyboard.dismiss()</code></pre><h2 id="TextInput-inside-ScrollView"><a href="#TextInput-inside-ScrollView" class="headerlink" title="TextInput inside ScrollView"></a>TextInput inside ScrollView</h2><p>Normally we should have some text inputs inside a scrolling component, in React Native that is mostly ScrollView to be able to handle long list of content and avoid keyboard. If TextInput is inside ScrollView then the way keyboard gets dismissed behaves a bit differently, and depends on <a href="https://facebook.github.io/react-native/docs/scrollview#keyboardshouldpersisttaps" target="_blank" rel="noopener">keyboardShouldPersistTaps</a></p>
<p>Determines when the keyboard should stay visible after a tap.</p>
<ul>
<li><p>‘never’ (the default), tapping outside of the focused text input when the keyboard is up dismisses the keyboard. When this happens, children won’t receive the tap.</p>
</li>
<li><p>‘always’, the keyboard will not dismiss automatically, and the scroll view will not catch taps, but children of the scroll view can catch taps.</p>
</li>
<li><p>‘handled’, the keyboard will not dismiss automatically when the tap was handled by a children, (or captured by an ancestor).</p>
</li>
</ul>
<p>The never mode should be the desired behaviour in most cases, clicking anywhere outside the focused text input should dismiss the keyboard.</p>
<p>In my app, there are some text inputs and an action button. The scenario is that users enter some infos and then press that button to register data. With the never mode, we have to press button twice, one for dismissing the keyboard, and two for the onPress of the Button . So the solution is to use always mode. This way the Button always gets the press event first.</p>
<pre><code>&lt;ScrollView keyboardShouldPersistTaps=&apos;always&apos; /&gt;</code></pre><h2 id="ScrollView-cares-about-keyboard"><a href="#ScrollView-cares-about-keyboard" class="headerlink" title="ScrollView cares about keyboard"></a>ScrollView cares about keyboard</h2><p>The native RCTScrollView class that power react native ScrollView has code to handle dismiss mode</p>
<pre><code>RCT_SET_AND_PRESERVE_OFFSET(setKeyboardDismissMode, keyboardDismissMode, UIScrollViewKeyboardDismissMode)</code></pre><p>The option that it chooses is UIScrollViewKeyboardDismissMode for <a href="https://developer.apple.com/documentation/uikit/uiscrollview/1619437-keyboarddismissmode" target="_blank" rel="noopener">keyboardDismissMode</a> property</p>
<blockquote>
<p>The manner in which the keyboard is dismissed when a drag begins in the scroll view.</p>
</blockquote>
<p>As you can see, the possible modes are onDrag and interactive . And react native exposes customization point for this via keyboardShouldPersistTaps</p>
<p><a href="https://developer.apple.com/documentation/uikit/uiscrollview/keyboarddismissmode/none" target="_blank" rel="noopener">case none</a> The keyboard does not get dismissed with a drag.</p>
<p><a href="https://developer.apple.com/documentation/uikit/uiscrollview/keyboarddismissmode/ondrag" target="_blank" rel="noopener">case onDrag</a> The keyboard is dismissed when a drag begins.</p>
<p><a href="https://developer.apple.com/documentation/uikit/uiscrollview/keyboarddismissmode/interactive" target="_blank" rel="noopener">case interactive</a> The keyboard follows the dragging touch offscreen, and can be pulled upward again to cancel the dismiss.</p>
<h2 id="ScrollView-inside-a-Modal"><a href="#ScrollView-inside-a-Modal" class="headerlink" title="ScrollView inside a Modal"></a>ScrollView inside a Modal</h2><p>But that does not work when ScrollView is inside <a href="https://facebook.github.io/react-native/docs/modal.html" target="_blank" rel="noopener">Modal</a> . By Modal I meant the <a href="https://facebook.github.io/react-native/docs/modal.html" target="_blank" rel="noopener">Modal</a> component in React Native. The only library that I use is react-navigation , and it supports <a href="https://reactnavigation.org/docs/en/modal.html" target="_blank" rel="noopener">Opening a full-screen modal</a> too, but they way we declare modal in react-navigation looks like stack and it is confusing, so I would rather not use it. I use Modal in react-native and that works pretty well.</p>
<p>So if we have TextInput inside ScrollView inside Modal then keyboardShouldPersistTaps does not work. Modal seems to be aware of parent ScrollView so we have to declare keyboardShouldPersistTaps=’always’ on every parent ScrollView . In React Native FlatList and SectionList uses ScrollView under the hood, so we need to be aware of all those ScrollView components.</p>
<h2 id="Spelunking-react-navigation"><a href="#Spelunking-react-navigation" class="headerlink" title="Spelunking react-navigation"></a>Spelunking react-navigation</h2><p>Since my app relies heavily on react-navigation , it’s good to have a deep understanding about its components so we make sure where the problem lies. I’ve written a bit about react-navigation structure below.<br><a href="https://codeburst.io/using-react-navigation-3-0-in-react-native-apps-38cd5020fbbe" target="_blank" rel="noopener"><strong>Using react-navigation 3.0 in React Native apps</strong><br><em>react-navigation is probably the only dependency I use in React Native apps. I’m happy with it so far, then version 3.0…</em>codeburst.io</a></p>
<p>Like every traditional mobile apps, my app consists of many stack navigators inside tab navigator. In iOS that means many UINavigationViewController inside UITabbarController . In react-navigation I use createMaterialTopTabNavigator inside createBottomTabNavigator</p>
<pre><code>import { createMaterialTopTabNavigator } from &apos;react-navigation&apos;
import { createBottomTabNavigator, BottomTabBar } from &apos;react-navigation-tabs&apos;</code></pre><p>The screen I have keyboard issue is a Modal presented from the 2nd screen in one of the stack navigators, so let’s examine every possible ScrollView up the hierarchy. This process involves lots of code reading and this’s how I love open source.</p>
<p>First let’s start with <a href="https://github.com/react-navigation/react-navigation-tabs/blob/master/src/navigators/createBottomTabNavigator.js" target="_blank" rel="noopener">createBottomTabNavigator</a> which uses <a href="https://github.com/react-navigation/react-navigation-tabs/blob/master/src/utils/createTabNavigator.js" target="_blank" rel="noopener">createTabNavigator</a> together with its own TabNavigationView</p>
<pre><code>class TabNavigationView extends React.PureComponent&lt;Props, State&gt;

export default createTabNavigator(TabNavigationView);</code></pre><p>Tab navigator has tab bar view below ScreenContainer , which is used to contain view. ScreenContainer is from <a href="https://github.com/kmagiera/react-native-screens" target="_blank" rel="noopener">react-native-screens</a> “This project aims to expose native navigation container components to React Native”. Below is how tab navigator works.</p>
<pre><code>render() {
  const { navigation, renderScene, lazy } = this.props;
  const { routes } = navigation.state;
  const { loaded } = this.state
  return (
    &lt;View style={styles.container}&gt;
      &lt;ScreenContainer style={styles.pages}&gt;
        {routes.map((route, index) =&gt; {
          if (lazy &amp;&amp; !loaded.includes(index)) {
            // Don&apos;t render a screen if we&apos;ve never navigated to it
            return null;

          const isFocused = navigation.state.index === index
          return (
            &lt;ResourceSavingScene
              key={route.key}
              style={StyleSheet.absoluteFill}
              isVisible={isFocused}
            &gt;
              {renderScene({ route })}
            &lt;/ResourceSavingScene&gt;
          );
        })}
      &lt;/ScreenContainer&gt;
      {this._renderTabBar()}
    &lt;/View&gt;
  );
}</code></pre><p>Tab bar is rendered using <a href="https://github.com/react-navigation/react-navigation-tabs/blob/master/src/views/BottomTabBar.js" target="_blank" rel="noopener">BottomTabBar</a> in _renderTabBar function. Looking at the code, the whole tab navigator has nothing to do with ScrollView .</p>
<p>So there is only <a href="https://github.com/react-navigation/react-navigation-tabs/blob/master/src/navigators/createMaterialTopTabNavigator.js" target="_blank" rel="noopener">createMaterialTopTabNavigator</a> left on the suspecting list. I use it in the app with swipeEnabled: true . And by looking at the imports, top tab navigator has</p>
<pre><code>import MaterialTopTabBar, {  type TabBarOptions,} from &apos;../views/MaterialTopTabBar&apos;;</code></pre><p><a href="https://github.com/react-navigation/react-navigation-tabs/blob/master/src/views/MaterialTopTabBar.js" target="_blank" rel="noopener">MaterialTopTabBar</a> has import from <a href="https://github.com/react-native-community/react-native-tab-view/blob/master/src/TabBar.js" target="_blank" rel="noopener">react-native-tab-view</a></p>
<pre><code>import { TabBar } from &apos;react-native-tab-view&apos;;</code></pre><p>which has ScrollView</p>
<pre><code>&lt;View style={styles.scroll}&gt;
  &lt;Animated.ScrollView
    horizontal
    keyboardShouldPersistTaps=&quot;handled&quot;</code></pre><p>The property keyboardShouldPersistTaps was initial set to always , then set back to <a href="https://github.com/react-native-community/react-native-tab-view/commit/e00bd021158a9ca6ad6f1ad0578303f0fdedb9e6#diff-9c1d42ef76323a8c67bd25bccfea6132" target="_blank" rel="noopener">handled</a> to avoid the bug that we can’t press any button in tab bar while keyboard is open <a href="https://github.com/react-native-community/react-native-tab-view/issues/375" target="_blank" rel="noopener">https://github.com/react-native-community/react-native-tab-view/issues/375</a></p>
<p>But this TabBar has nothing with our problem, because it’s just for containing tab bar buttons.</p>
<h2 id="Swiping-in-createMaterialTopTabNavigator"><a href="#Swiping-in-createMaterialTopTabNavigator" class="headerlink" title="Swiping in createMaterialTopTabNavigator"></a>Swiping in createMaterialTopTabNavigator</h2><p>Taking another look at <a href="https://github.com/react-navigation/react-navigation-tabs/blob/master/src/navigators/createMaterialTopTabNavigator.js" target="_blank" rel="noopener">createMaterialTopTabNavigator</a> we see more imports from react-native-tab-view</p>
<pre><code>import { TabView, PagerPan } from &apos;react-native-tab-view&apos;;</code></pre><p>TabView has swipeEnabled passed in</p>
<pre><code>return (
  &lt;TabView
    {...rest}
    navigationState={navigation.state}
    animationEnabled={animationEnabled}
    swipeEnabled={swipeEnabled}
    onAnimationEnd={this._handleAnimationEnd}
    onIndexChange={this._handleIndexChange}
    onSwipeStart={this._handleSwipeStart}
    renderPager={renderPager}
    renderTabBar={this._renderTabBar}
    renderScene={
      /* $FlowFixMe */
      this._renderScene
    }
  /&gt;
);</code></pre><p>and it renders <a href="https://github.com/react-native-community/react-native-tab-view/blob/8b463fc31d/src/PagerDefault.js" target="_blank" rel="noopener">PagerDefault</a>, which in turn uses PagerScroll for iOS</p>
<pre><code>import { Platform } from &apos;react-native&apos;;

let Pager;

switch (Platform.OS) {
  case &apos;android&apos;:
    Pager = require(&apos;./PagerAndroid&apos;).default;
    break;
  case &apos;ios&apos;:
    Pager = require(&apos;./PagerScroll&apos;).default;
    break;
  default:
    Pager = require(&apos;./PagerPan&apos;).default;
    break;
}

export default Pager;</code></pre><p>So <a href="https://github.com/react-native-community/react-native-tab-view/blob/8b463fc31d/src/PagerScroll.js" target="_blank" rel="noopener">PagerScroll</a> uses ScrollView to handle scrolling to match material style that user can scroll between pages, and it has keyboardShouldPersistTaps=”always” which should be correct.</p>
<pre><code>return (
  &lt;ScrollView
    horizontal
    pagingEnabled
    directionalLockEnabled
    keyboardDismissMode=&quot;on-drag&quot;
    keyboardShouldPersistTaps=&quot;always&quot;</code></pre><p>So nothing looks suspicious in react-navigation , which urges me to look at code from my project.</p>
<h2 id="Debugging-FlatList-SectionList-and-ScrollView"><a href="#Debugging-FlatList-SectionList-and-ScrollView" class="headerlink" title="Debugging FlatList, SectionList and ScrollView"></a>Debugging FlatList, SectionList and ScrollView</h2><p>Like I stated in the beginning of this article, the root problem is that we need to declare keyboardShouldPersistTaps for all parent ScrollView in the hierarchy. That means to look out for any FlatList, SectionList and ScrollView</p>
<p>Luckily, there is react-devtools that shows tree of all rendered components in react app, and that is also guided in <a href="https://facebook.github.io/react-native/docs/debugging.html" target="_blank" rel="noopener">Debugging</a> section of react native.</p>
<p>You can use <a href="https://github.com/facebook/react-devtools/tree/master/packages/react-devtools" target="_blank" rel="noopener">the standalone version of React Developer Tools</a> to debug the React component hierarchy. To use it, install the react-devtools package globally:</p>
<pre><code>npm install -g react-devtools</code></pre><p>So after searching I found out that there is a SectionList up the hierarchy that should have keyboardShouldPersistTaps=’always’ while it didn’t.</p>
<p><img src="https://cdn-images-1.medium.com/max/7168/1*RDNnY3yKYpgxdaXi4bGUTg.png" alt></p>
<p>Taking a thorough look at the code, I found out that the Modal is trigged from a SectionList item. We already know that triggering Modal in react native means that to embed that Modal inside the view hierarchy and control its visibility via a state. So in terms of view and component, that Modal is inside a SectionList . And for your interest, if you dive deep into react native code, SectionList in my case is just VirtualizedSectionList , which is VirtualizedList, which uses ScrollView</p>
<p>So after I declare keyboardShouldPersistTaps=’always’ in that SectionList , the problem is solved. User can now just enters some values in the text inputs, then press once on the submit button to submit data. The button now captures touch events first instead of scrollview.</p>
<h2 id="Where-to-go-from-here"><a href="#Where-to-go-from-here" class="headerlink" title="Where to go from here"></a>Where to go from here</h2><p>The solution for this is fortunately simple as it involves fixing our code without having to alter react-navigation code. But it’s good to look at the library code to know what it does, and to trace where the problem originates. Thanks for following such long exploring and hope you learn something.</p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/">javascript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/react-native/">react native</a></li></ul>

      
            
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/blog/How-to-Make-Linear-Gradient-View-with-Bridging-in-React-Native/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          How to Make Linear Gradient View with Bridging in React Native
        
      </div>
    </a>
  
  
    <a href="/blog/How-to-structure-your-project-and-manage-static-resources-in-React-Native/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">How to structure your project and manage static resources in React Native</div>
    </a>
  
</nav>

  
</article>

<!-- Table of Contents -->

  <aside id="sidebar">
    <div id="toc" class="toc-article" style="overflow-y: scroll; max-width: 28%;">
    <strong class="toc-title">Contents</strong>
    
      <ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#The-built-in-TextInput-component"><span class="nav-number">1.</span> <span class="nav-text">The built in TextInput component</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#TextInput-inside-ScrollView"><span class="nav-number">2.</span> <span class="nav-text">TextInput inside ScrollView</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ScrollView-cares-about-keyboard"><span class="nav-number">3.</span> <span class="nav-text">ScrollView cares about keyboard</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ScrollView-inside-a-Modal"><span class="nav-number">4.</span> <span class="nav-text">ScrollView inside a Modal</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Spelunking-react-navigation"><span class="nav-number">5.</span> <span class="nav-text">Spelunking react-navigation</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Swiping-in-createMaterialTopTabNavigator"><span class="nav-number">6.</span> <span class="nav-text">Swiping in createMaterialTopTabNavigator</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Debugging-FlatList-SectionList-and-ScrollView"><span class="nav-number">7.</span> <span class="nav-text">Debugging FlatList, SectionList and ScrollView</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Where-to-go-from-here"><span class="nav-number">8.</span> <span class="nav-text">Where to go from here</span></a></li></ol>
    
    </div>
  </aside>
</section>
        
      </div>
      <footer id="footer" class="site-footer">
  

  <div class="clearfix container">
      <div class="site-info">
	      &copy; 2019 onmyway133 All Rights Reserved.
          
      </div>
      <div class="site-credit">
        Theme by <a href="https://github.com/iTimeTraveler/hexo-theme-hiero" target="_blank">hiero</a>
      </div>
  </div>
</footer>


<!-- min height -->

<script>
    var contentdiv = document.getElementById("content");

    contentdiv.style.minHeight = document.body.offsetHeight - document.getElementById("allheader").offsetHeight - document.getElementById("footer").offsetHeight + "px";
</script>

<!-- Custome JS -->
<script src="/js/my.js"></script>
    </div>
    <!-- <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/about/" class="mobile-nav-link">About</a>
  
    <a href="/writing/" class="mobile-nav-link">Writing</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/speaking/" class="mobile-nav-link">Speaking</a>
  
    <a href="/opensource/" class="mobile-nav-link">Open Source</a>
  
    <a href="/projects/" class="mobile-nav-link">Projects</a>
  
    <a href="/news/" class="mobile-nav-link">News</a>
  
    <a href="/gumroad/" class="mobile-nav-link">Gumroad</a>
  
    <a href="/atom.xml" class="mobile-nav-link">RSS</a>
  
</nav> -->
    

<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>



  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.js"></script>


<script src="/js/scripts.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script src="/js/main.js"></script>













  </div>

  <a id="rocket" href="#top" class=""></a>
  <script type="text/javascript" src="/js/totop.js" async=""></script>
</body>
</html>
