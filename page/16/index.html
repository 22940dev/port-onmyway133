<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="generator" content="Hexo 4.2.0"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>onmyway133</title><meta description="What you don&amp;#39;t know is what you haven&amp;#39;t learned"><meta property="og:type" content="blog"><meta property="og:title" content="onmyway133"><meta property="og:url" content="https://onmyway133.github.io/"><meta property="og:site_name" content="onmyway133"><meta property="og:description" content="What you don&amp;#39;t know is what you haven&amp;#39;t learned"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://onmyway133.github.io/img/og_image.png"><meta property="article:author" content="Khoa Pham"><meta property="article:tag" content="ios"><meta property="article:tag" content=" android"><meta property="article:tag" content="javascript"><meta property="article:tag" content=" react"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/img/og_image.png"><meta property="twitter:creator" content="@onmyway133"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://onmyway133.github.io"},"headline":"onmyway133","image":["https://onmyway133.github.io/img/og_image.png"],"author":{"@type":"Person","name":"Khoa Pham"},"description":"What you don&#39;t know is what you haven&#39;t learned"}</script><link rel="alternative" href="/atom.xml" title="onmyway133" type="application/atom+xml"><link rel="icon" href="/img/favicon.ico"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><script src="https://www.googletagmanager.com/gtag/js?id=UA-40119591-5" async></script><script>window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
    
        gtag('config', 'UA-40119591-5');</script><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><script data-ad-client="ca-pub-3656459401405265" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js" async></script></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/z.png" alt="onmyway133" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/apps">Apps</a><a class="navbar-item" href="/gumroad">Gumroad</a><a class="navbar-item" href="/about">About</a><a class="navbar-item" href="/opensource">Open Source</a><a class="navbar-item" href="/writing">Writing</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/speaking">Speaking</a><a class="navbar-item" href="/news">News</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/onmyway133"><i class="fab fa-github"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-06-13T11:29:10.000Z" title="2019-06-13T11:29:10.000Z">2019-06-13</time><span class="level-item">a minute read (About 177 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-make-convenient-touch-handler-for-UIButton-in-iOS/">How to make convenient touch handler for UIButton in iOS</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/308">#308</a></strong></p>
<p>If you don’t want to use <a href="https://github.com/onmyway133/EasyClosure">https://github.com/onmyway133/EasyClosure</a> yet, it’s easy to roll out a closure based <code>UIButton</code>. The cool thing about closure is it captures variables</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">ClosureButton</span>: <span class="title">UIButton</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> didTouch: (() -&gt; <span class="type">Void</span>)?</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="keyword">init</span>(frame: <span class="type">CGRect</span>) &#123;</span><br><span class="line">        <span class="keyword">super</span>.<span class="keyword">init</span>(frame: frame)</span><br><span class="line"></span><br><span class="line">        addTarget(<span class="keyword">self</span>, action: #selector(buttonTouched(<span class="number">_</span>:)), <span class="keyword">for</span>: .touchUpInside)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">required</span> <span class="keyword">init</span>?(coder aDecoder: <span class="type">NSCoder</span>) &#123;</span><br><span class="line">        <span class="built_in">fatalError</span>()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@objc</span> <span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">buttonTouched</span><span class="params">(<span class="number">_</span>: UIButton)</span></span> &#123;</span><br><span class="line">        didTouch?()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Then in <code>cellForItem</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">collectionView</span><span class="params">(<span class="number">_</span> collectionView: UICollectionView, cellForItemAt indexPath: IndexPath)</span></span> -&gt; <span class="type">UICollectionViewCell</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> cell: <span class="type">UserCell</span> = collectionView.dequeue(<span class="keyword">for</span>: indexPath)!</span><br><span class="line">    <span class="keyword">let</span> user = users[indexPath.item]</span><br><span class="line">    cell.powerButton.didTouch = &#123; [<span class="keyword">weak</span> <span class="keyword">self</span>] <span class="keyword">in</span></span><br><span class="line">        <span class="keyword">self</span>?.openPowerView(user)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> cell</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>With this we can even forward touch event to another button</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">forwardTouchEvent</span><span class="params">(button: ClosureButton)</span></span> &#123;</span><br><span class="line">    didTouch = &#123; [<span class="keyword">weak</span> button] <span class="keyword">in</span></span><br><span class="line">        button?.didTouch?()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Another benefit is that we can apply <a href="https://onmyway133.github.io/blog/How-to-do-throttle-and-debounce-using-DispatchWorkItem-in-Swift/">debouncing</a> to avoid successive tap on button</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> debouncer = <span class="type">Debouncer</span>(timeInterval: <span class="number">0.2</span>)</span><br><span class="line"><span class="meta">@objc</span> <span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">buttonTouched</span><span class="params">(<span class="number">_</span>: UIButton)</span></span> &#123;</span><br><span class="line">    debouncer.run &#123; [<span class="keyword">weak</span> <span class="keyword">self</span>] <span class="keyword">in</span></span><br><span class="line">        <span class="keyword">self</span>?.didTouch?() </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-06-13T09:49:44.000Z" title="2019-06-13T09:49:44.000Z">2019-06-13</time><span class="level-item">a few seconds read (About 27 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-format-distance-in-iOS/">How to format distance in iOS</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/307">#307</a></strong></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> MapKit</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> formatter = <span class="type">MKDistanceFormatter</span>()</span><br><span class="line">formatter.unitStyle = .abbreviated</span><br><span class="line">formatter.units = .metric</span><br><span class="line">distanceLabel.text = formatter.string(fromDistance: <span class="built_in">distance</span>) <span class="comment">// 700m, 1.7km</span></span><br></pre></td></tr></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-06-13T06:03:11.000Z" title="2019-06-13T06:03:11.000Z">2019-06-13</time><span class="level-item">a few seconds read (About 75 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-mock-grpc-model-in-Swift/">How to mock grpc model in Swift</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/306">#306</a></strong></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> json: [<span class="type">String</span>: <span class="type">Any</span>] = [</span><br><span class="line">    <span class="string">"id"</span>: <span class="string">"123"</span>,</span><br><span class="line">    <span class="string">"name"</span>: <span class="string">"Thor"</span>,</span><br><span class="line">    <span class="string">"isInMarvel"</span>: <span class="literal">true</span></span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> data = <span class="keyword">try</span> <span class="type">JSONSerialization</span>.data(withJSONObject: json, options: [])</span><br><span class="line"><span class="keyword">let</span> string = <span class="type">String</span>(data: data, encoding: .utf8)!</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">try</span> <span class="type">Hero</span>(jsonString: string)</span><br></pre></td></tr></table></figure>

<p>If we use <code>withValue</code> from <a href="https://github.com/onmyway133/blog/issues/354">How to simplify struct mutating in Swift</a> then we can mock easily</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Hero</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="function"><span class="keyword">func</span> <span class="title">mock</span><span class="params">()</span></span> -&gt; <span class="type">Hero</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> withValue(<span class="type">Hero</span>()) &#123;</span><br><span class="line">            $<span class="number">0</span>.id = <span class="string">"123"</span></span><br><span class="line">            $<span class="number">0</span>.name = <span class="string">"Thor"</span></span><br><span class="line">            $<span class="number">0</span>.isInMarvel = <span class="literal">true</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-06-12T20:12:46.000Z" title="2019-06-12T20:12:46.000Z">2019-06-12</time><span class="level-item">12 minutes read (About 1763 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/Favorite-WWDC-2019-sessions/">Favorite WWDC 2019 sessions</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/305">#305</a></strong></p>
<p><img src="https://user-images.githubusercontent.com/2284279/59388887-40d28180-8d6d-11e9-9a02-582ce19d6f81.jpeg" alt="w1"></p>
<p>This year I’m lucky enough to get the ticket to WWDC and I couldn’t be more satisfied. 5 conference days full of awesomeness, talks, labs and networking, all make WWDC special and memorial conference for every attendee.</p>
<p>As predicted by many, Marzipan (now officially called Project Catalyst) a technology that could allow iOS apps to be ported to macOS, would be the main topic for this year. But WWDC went more spectacular than that, with dark mode on iOS, independent watchOS apps, and SwiftUI being the star of the show. With over 150 sessions and extra videos, it can be a bit overwhelming to catch up, so I sum up 10 essential sessions to get started. It’s good to catch up with the latest technology, but be aware that frameworks and APIs come and get deprecated very often. It’s better to understand why they are introduced, how to learn the skills and mindset so we can apply them in our apps to delight user experience.</p>
<p>Firstly, a little tip to get the most of WWDC videos. Although you can watch on <a href="https://developer.apple.com/videos/wwdc2019">Apple developer website</a>, there’s <a href="https://wwdc.io/">WWDC for macOS app</a> that allows much more comfortable watching experience. There we can tweak playing speed, picture in picture view mode, favorite and download videos for offline watching. </p>
<p>Secondly, for those of you who want to search some texts in the talks, there is <a href="https://asciiwwdc.com/">ASCIIwwdc</a> that provides full transcripts of all the talks.</p>
<h2 id="1-Platform-State-of-the-Union"><a href="#1-Platform-State-of-the-Union" class="headerlink" title="1. Platform State of the Union"></a>1. <a href="https://developer.apple.com/videos/play/wwdc2019/103/">Platform State of the Union</a></h2><p>If you only have time for 1 video, this is it. Right after the <a href="https://developer.apple.com/videos/play/wwdc2019/101/">Keynote</a>, Platform State of the Union is like keynote for developers as it highlights important development changes.</p>
<ul>
<li>macOS 10.15, iOS 13, watchOS 6 and tvOS 13: As usual we get version bumps on all major platforms, which brings lots of new features and enhancement. macOS 10.15 is caleld Catalina and there’s a whole new platform for iPad called iPadOS.</li>
<li>Security and Privacy: Adding to security enhancement from last year, this year shows how Apple really commits into this. There are one-time location permission, signing with Apple, security protocol for HomeKit, new crypto framework which marks MD5 as insecure. Also, apps that target kids can’t display ad or include analytics.</li>
<li>tvOS 13 gets multiple user support</li>
<li>watchOS 6 makes way for independent watch apps, which does not require accompanying iOS apps. There’s also dedicated watch appstore.</li>
<li>iOS 13 now can live in the dark, but dropping support for iPhone 5S, 6 and below. Also, there is ability to toggle language setting per app only.</li>
<li>iPadOS is a spinoff version of iOS for now, they look the same but they are expected to take different paths. It includes mouse support and requires iPad Air 2 and newer devices.</li>
<li>macOS 10.15 introduces a replacement of bash with zsh. It also supports SideCar which allows iPad as an external display. Last but not least, there is Project Catalyst that enables iPad apps to run on the mac.</li>
<li>Xcode 11 includes Swift 5.1 that can target latest SDKs. It brings a new look and feel with tons of features like minimap, Xcode preview, official support for Swift Package Manager, source control enhancement and test plan.</li>
</ul>
<h2 id="2-What’s-New-in-Swift"><a href="#2-What’s-New-in-Swift" class="headerlink" title="2. What’s New in Swift"></a>2. <a href="https://developer.apple.com/videos/play/wwdc2019/402/">What’s New in Swift</a></h2><p>Although <a href="https://github.com/apple/swift">Swift is developed in the open</a>, it’s easy to lose track of in tons of proposals and changes. Swift 5.1 brings lots of cool features that power SwiftUI and Combine, so it’s a prerequisite. </p>
<ul>
<li>Module stability: This looks unimportant but this may be the most key feature of Swift 5.1. Unlike ABI stability we get in Swift 5, module stability helps resolves differences at compile time. In other words, this ensures a Swift 5 library will work with the future Swift compilers.</li>
</ul>
<img width="682" alt="a1" src="https://user-images.githubusercontent.com/2284279/59390812-a8d79680-8d72-11e9-8503-1266788e9177.png">

<ul>
<li>A single expression can be declared without return keyword</li>
<li>Function builder, with marker <code>@_functionBuilder</code> which works pretty much like function with receiver in Kotlin, allows for some very neat DSL syntax.</li>
<li>Property wrapper, a counterpart of Kotlin delegated property, allows property accessors to be used in a convenient way. Shipped with Swift 5.1, we can use that with <code>@propertyWrapper</code> annotation.</li>
<li>Opaque return type with <code>some</code> keyword remedies limitation of Swift protocol with Self or associcated types requirements.</li>
<li>Among other things, there are other cool features like universal <code>Self</code>, static subscripts, collection diffing and matching against optional.</li>
</ul>
<h2 id="3-Introducing-SwiftUI-Building-Your-First-App"><a href="#3-Introducing-SwiftUI-Building-Your-First-App" class="headerlink" title="3. Introducing SwiftUI: Building Your First App"></a>3. <a href="https://developer.apple.com/videos/play/wwdc2019/204/">Introducing SwiftUI: Building Your First App</a></h2><p>Welcome to the spotlight of WWDC 2019, SwiftUI. It may be the most exciting announcement since Swift was introduced in 2014. SwiftUI is not just a new framework, it’s a complete paradigm shift from imperative programming with UIKit/AppKit to a declarative world. I was amazed by how quickly React and Flutter allows fast prototyping and developing, so I’m very happy Apple finally makes this available natively on all platforms.</p>
<img width="1063" alt="w2" src="https://user-images.githubusercontent.com/2284279/59391590-0a990000-8d75-11e9-90bd-3926f7fbc1b9.png">

<p>The cool thing about SwiftUI is that it is expressive and has consistent syntax across platforms. So it is a learn once, write anywhere concept. Together with hot reloading of Xcode Preview, this ends the long debate among iOS community about whether to write UI in code or Storyboard, as the source of truth is now the concise code, but users are free to change any UI details via interactive Preview.</p>
<p>Not only SwiftUI handles consistent UI according to Apple design guideline, it also provides many features for free like accessibility, dark mode and other bookkeeping.</p>
<p>SwiftUI supports latest platform versions and no backward compatibility, so some of us have to wait 1 or 2 more years until iOS 13 is widely adopted. To learn more about SwiftUI, there are other advanced sesions like </p>
<ul>
<li><a href="https://developer.apple.com/videos/play/wwdc2019/216/">SwiftUI Essentials</a></li>
<li><a href="https://developer.apple.com/videos/play/wwdc2019/237/">Building Custom Views with SwiftUI</a></li>
<li><a href="https://developer.apple.com/videos/play/wwdc2019/226/">Data Flow Through SwiftUI</a> </li>
<li><a href="https://developer.apple.com/videos/play/wwdc2019/240/">SwiftUI On All Devices</a></li>
<li><a href="https://developer.apple.com/videos/play/wwdc2019/231/">Integrating SwiftUI</a></li>
</ul>
<h2 id="4-Implementing-Dark-Mode-on-iOS"><a href="#4-Implementing-Dark-Mode-on-iOS" class="headerlink" title="4. Implementing Dark Mode on iOS"></a>4. <a href="https://developer.apple.com/videos/play/wwdc2019/214/">Implementing Dark Mode on iOS</a></h2><p>As much as I was excited about Dark theme in Android Q, Dark Mode in iOS is something that eases my eyes. Some apps also support Dark theme by their owns, but with iOS 13, supporting Dark mode to our apps is not a daunting task. There are more vibrancy materials, system colors that adapts automatically to dark and light modes. We can also select images for each mode in Asset Catalog easily.</p>
<img width="1110" alt="w4" src="https://user-images.githubusercontent.com/2284279/59392111-c9a1eb00-8d76-11e9-8083-6ba6e9054410.png">

<h2 id="5-Introducing-Combine-and-Advances-in-Foundation"><a href="#5-Introducing-Combine-and-Advances-in-Foundation" class="headerlink" title="5. Introducing Combine and Advances in Foundation"></a>5. <a href="https://developer.apple.com/videos/play/wwdc2019/711/">Introducing Combine and Advances in Foundation</a></h2><p>Combine is a unified declarative framework for processing values over time. As a huge fan of Rx, Combine looks like home. It was thrilled to see this finnaly get supported official by Apple. This simplifying asyncrhonous programming a lot, also streamline other communication patterns like KVO and notification center.</p>
<img width="1159" alt="w5" src="https://user-images.githubusercontent.com/2284279/59392379-be02f400-8d77-11e9-8daa-923cbb20caa0.png">

<p>Combine is the force the powers reactive nature in SwiftUI with <code>Binding</code> and <code>BindableObject</code>. There’s also lots of improvements to Foundation like collection diffing, new list and relative formatters, and notably Combine syntax for <code>URLSession</code>, which makes networking a breeze.</p>
<p>To learn more about Combine, there’s <a href="https://developer.apple.com/videos/play/wwdc2019/721/">Combine in Practice</a> where we can learn more about error handling, schedule work and many operators on streams.</p>
<img width="1001" alt="w6" src="https://user-images.githubusercontent.com/2284279/59392558-55684700-8d78-11e9-8c52-27e2ecd18d89.png">


<h2 id="6-Modernizing-Your-UI-for-iOS-13"><a href="#6-Modernizing-Your-UI-for-iOS-13" class="headerlink" title="6. Modernizing Your UI for iOS 13"></a>6. <a href="https://developer.apple.com/videos/play/wwdc2019/224/">Modernizing Your UI for iOS 13</a></h2><p>Take a look at this talk to learn about new features in iOS 13 that we should be aware in our apps. Newly in iOS 13, we can take advantage of card style modal presentation that is very cumbersome to replicate ourselves. There’s also new <code>UISearchBarTextField</code> with advanced customizations for token and inputs. Lastly, the new <code>UIMenu</code> makes showing context menu trivial and make way for iPad apps to behave like native on the mac.</p>
<img width="996" alt="w8" src="https://user-images.githubusercontent.com/2284279/59392862-7c734880-8d79-11e9-9281-0c164b0876bb.png">

<h2 id="7-Modern-Swift-API-Design"><a href="#7-Modern-Swift-API-Design" class="headerlink" title="7. Modern Swift API Design"></a>7. <a href="https://developer.apple.com/videos/play/wwdc2019/415/">Modern Swift API Design</a></h2><p>If you’re developing iOS apps, chances are that you have already stumbled upon <a href="https://swift.org/documentation/api-design-guidelines/">API Design Guidelines</a> which contains valuable guides to structuring our Swift code.</p>
<img width="933" alt="w7" src="https://user-images.githubusercontent.com/2284279/59392647-b263fd00-8d78-11e9-9c70-ec3d4686f98c.png">

<p>This highlights my most favorite programming advice “Clarity at the point of use”, because things we declare are written only once, but read many many times, so we should make those concise and clear. There’s also mention of preferring generic over protocol which reminds me of protocol witness technique.</p>
<p>This talk details how Apple engineers themselves design Swift code in their RealityKit and SwiftUI frameworks.</p>
<h2 id="8-Optimizing-App-Launch"><a href="#8-Optimizing-App-Launch" class="headerlink" title="8. Optimizing App Launch"></a>8. <a href="https://developer.apple.com/videos/play/wwdc2019/423/">Optimizing App Launch</a></h2><p>The launch time of your app can be decisive in user experience, it needs to be fast and do just the necessary things. With enhancements via shared and cached frameworks, apps now load faster on iOS 13. But there’s more thing we can do to improve this, thanks to the new App Launch profiler in Xcode 11, together with app launch time measurement in XCTests. The 3 words we can take away from this talk is minimize, prioritize, and optimize work at this critical launch time.</p>
<img width="887" alt="w9" src="https://user-images.githubusercontent.com/2284279/59392966-d96efe80-8d79-11e9-98ab-eecaaf363db2.png">

<h2 id="9-Introducing-iPad-Apps-for-Mac"><a href="#9-Introducing-iPad-Apps-for-Mac" class="headerlink" title="9. Introducing iPad Apps for Mac"></a>9. <a href="https://developer.apple.com/videos/play/wwdc2019/205/">Introducing iPad Apps for Mac</a></h2><p>Starting with iOS 13 with Project Catalyst, there’s a new target environment check called UIKitForMac, which allows iPad apps to target the mac while using the same code base. Most of the UI after porting have the correct look and feel like a native macOS app with many features provided for free like window management. There are, kind of obviously, some frameworks that are designed specifically for phone and tablet experience, can’t be supported in macOS.</p>
<img width="1147" alt="w11" src="https://user-images.githubusercontent.com/2284279/59393110-729e1500-8d7a-11e9-9ed8-f6b91ccd03f1.png">

<p>There are other sesions like <a href="https://developer.apple.com/videos/play/wwdc2019/235/">Taking iPad Apps for Mac to the Next Level</a> where we can learn more about this.</p>
<h2 id="10-Creating-Independent-Watch-Apps"><a href="#10-Creating-Independent-Watch-Apps" class="headerlink" title="10. Creating Independent Watch Apps"></a>10. <a href="https://developer.apple.com/videos/play/wwdc2019/208/">Creating Independent Watch Apps</a></h2><img width="1088" alt="w13" src="https://user-images.githubusercontent.com/2284279/59393274-21daec00-8d7b-11e9-8ddf-0fd809b0570c.png">

<p>watchOS finally gets its own Appstore and the ability to run independent watchOS apps without a companying iOS app. With the introduction of URLSession and streaming APIs for the watch, together with enhancements in push notifications, Apple sign in, debugging, this can’t be a better time to start developing for the watch.</p>
<hr>
<p>It is stunning to see how Apple comes up with so many cool announcements this year while keeping innovation and quality high. There are more sessions to explore, head over to <a href="https://developer.apple.com/videos/wwdc2019">WWDC 2019 developer website</a> to learn more.</p>
<hr>
<p><strong>Updated at</strong> 2021-01-01 23:27:16</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-06-12T19:33:28.000Z" title="2019-06-12T19:33:28.000Z">2019-06-12</time><span class="level-item">8 minutes read (About 1228 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/Support-IP-handover-in-rtpproxy-for-VoIP-applications/">Support IP handover in rtpproxy for VoIP applications</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/304">#304</a></strong></p>
<p>If you do <a href="https://github.com/onmyway133/blog/issues/284">VoIP applications</a>, especially with open sources like pjsip, you may encounter <a href="https://www.kamailio.org/w/">kamalio</a> and <a href="http://www.rtpproxy.org/">rtpproxy</a> to serve SIP requests. Due to limitation of NAT traversals, rtpproxy is needed to work around NAT. All SIP handshake requests go through a proxy server, but rtpproxy can also relay voice, video or any RTP stream of data. When I played with rtpproxy, it was before version <a href="http://www.rtpproxy.org/post/v2release/">2.0</a> and I need to handle IP handover. This refers to the scenario when user switches between different network, for example from Wifi to 4G and they get new IP. Normally this means ending in the SIP call, but the expectation is that we can retry and continue the call if possible for users.</p>
<p>That’s why I forked rtpproxy and add IP handover support. You can check the GitHub repo at <a href="https://github.com/onmyway133/rtpproxy">rtpproxy</a>.</p>
<p>Use src_cnt to track the number of consecutive packets from different address. When this number exceeds THRESHOLD (10 for RTP and 2 for RTCP), I switch to this new address</p>
<p>This way</p>
<ul>
<li><p>Client can ALWAYS change IP when he switches from 3G to Wifi, or from this Wifi hotspot to another</p>
</li>
<li><p>There’s no chance for attack, unless attacker sends &gt; 10 (RTP THRESHOLD) packets in 20ms (supposed my client sends packets every 20ms)</p>
</li>
</ul>
<p>This idea is borrowed from <a href="http://www.pjsip.org/pjmedia/docs/html/group__PJMEDIA__CONFIG.htm">http://www.pjsip.org/pjmedia/docs/html/group__PJMEDIA__CONFIG.htm</a></p>
<p>There is a macro PJMEDIA_RTP_NAT_PROBATION_CNT. Basically, it is</p>
<blockquote>
<p><em>“See if source address of RTP packet is different than the configured address, and switch RTP remote address to source packet address after several consecutive packets have been received.”</em></p>
</blockquote>
<p>Mobile clients now change IP frequently, from these hotspots to those. So if rtpproxy can support this feature, it would be nicer.</p>
<p>Take a look at <a href="https://github.com/onmyway133/rtpproxy/blob/master/rtpp_session.h">https://github.com/onmyway133/rtpproxy/blob/master/rtpp_session.h</a></p>
<pre><code>// IP Handover Count how many consecutive different packets are received, 0 is for callee, 1 is for caller    unsigned int src_count[2];</code></pre><p>And how it actions in <a href="https://github.com/onmyway133/rtpproxy/blob/master/main.c">https://github.com/onmyway133/rtpproxy/blob/master/main.c</a></p>
<pre><code>static void
rxmit_packets(struct cfg *cf, struct rtpp_session *sp, int ridx,
  double dtime)
{
    int ndrain, i, port;
    struct rtp_packet *packet = NULL;

/* Repeat since we may have several packets queued on the same socket */
    for (ndrain = 0; ndrain &lt; 5; ndrain++) {
 if (packet != NULL)
     rtp_packet_free(packet);

packet = rtp_recv(sp-&gt;fds[ridx]);
 if (packet == NULL)
     break;
 packet-&gt;laddr = sp-&gt;laddr[ridx];
 packet-&gt;rport = sp-&gt;ports[ridx];
 packet-&gt;rtime = dtime;

i = 0;
 // IP Handover do not need canupdate
 // Use src_count
 if (sp-&gt;addr[ridx] != NULL) {
     /* Check that the packet is authentic, drop if it isn&apos;t */
     if (sp-&gt;asymmetric[ridx] == 0) {
  /*
  if (memcmp(sp-&gt;addr[ridx], &amp;packet-&gt;raddr, packet-&gt;rlen) != 0) {
      if (sp-&gt;canupdate[ridx] == 0) {
   //
   // Continue, since there could be good packets in
   // queue.
   //
   continue;
      }

      // Signal that an address has to be updated
      rtpp_log_write(RTPP_LOG_ERR, cf-&gt;glog, &quot;IP Handover Set i 1st ridx %d&quot;,ridx);
      i = 1;
  } else if (sp-&gt;canupdate[ridx] != 0 &amp;&amp;
    sp-&gt;last_update[ridx] != 0 &amp;&amp;
    dtime - sp-&gt;last_update[ridx] &gt; UPDATE_WINDOW) 
  {
      sp-&gt;canupdate[ridx] = 0;
      rtpp_log_write(RTPP_LOG_ERR, cf-&gt;glog, &quot;IP Handover Set canupdate to 0 1st ridx %d&quot;,ridx);
  }
  */

  if (memcmp(sp-&gt;addr[ridx], &amp;packet-&gt;raddr, packet-&gt;rlen) == 0) { 
   sp-&gt;src_count[ridx] = 0;
  } 
  else {
   sp-&gt;src_count[ridx]++;
   // IP Handover RTCP packet sends at larger interval, so must use smaller THRESHOLD
   // Check to see if port is odd or even
   if(sp-&gt;ports[ridx] % 2 == 0) {
    if(sp-&gt;src_count[ridx] &gt;= 10) {
     i = 1;
    } 
   }
   else {
    if(sp-&gt;src_count[ridx] &gt;= 2) {
     i = 1;
    }
   }

  }

} else {
  /*
   * For asymmetric clients don&apos;t check
   * source port since it may be different.
   */
  rtpp_log_write(RTPP_LOG_ERR, cf-&gt;glog, &quot;IP Handover We are in asymmetric ridx %d&quot;,ridx);
  if (!ishostseq(sp-&gt;addr[ridx], sstosa(&amp;packet-&gt;raddr)))
      /*
       * Continue, since there could be good packets in
       * queue.
       */
      continue;
     }
     sp-&gt;pcount[ridx]++;
 } else {
     sp-&gt;pcount[ridx]++;
     sp-&gt;addr[ridx] = malloc(packet-&gt;rlen);
     if (sp-&gt;addr[ridx] == NULL) {
  sp-&gt;pcount[3]++;
  rtpp_log_write(RTPP_LOG_ERR, sp-&gt;log,
    &quot;can&apos;t allocate memory for remote address - &quot;
    &quot;removing session&quot;);
  remove_session(cf, GET_RTP(sp));
  /* Break, sp is invalid now */
  break;
     }
     /* Signal that an address have to be updated. */
     rtpp_log_write(RTPP_LOG_ERR, cf-&gt;glog, &quot;IP Handover Set i 2nd ridx %d&quot;,ridx); 
     i = 1;
 }

/*
  * Update recorded address if it&apos;s necessary. Set &quot;untrusted address&quot;
  * flag in the session state, so that possible future address updates
  * from that client won&apos;t get address changed immediately to some
  * bogus one.
  */
 if (i != 0) {
     sp-&gt;untrusted_addr[ridx] = 1;
     memcpy(sp-&gt;addr[ridx], &amp;packet-&gt;raddr, packet-&gt;rlen);

     // IP Handover Do not use canupdate
     // After update, reset src_count
     /*
     if (sp-&gt;prev_addr[ridx] == NULL || memcmp(sp-&gt;prev_addr[ridx],
       &amp;packet-&gt;raddr, packet-&gt;rlen) != 0) 
     {
         sp-&gt;canupdate[ridx] = 0;
  if(sp-&gt;prev_addr[ridx] == NULL)
  {
     rtpp_log_write(RTPP_LOG_ERR, cf-&gt;glog, &quot;IP Handover prev_addr NULL ridx %d&quot;,ridx); 
  }
  rtpp_log_write(RTPP_LOG_ERR, cf-&gt;glog, &quot;IP Handover Set canupdate to 0 2nd ridx %d&quot;,ridx);
     }
     */

sp-&gt;src_count[ridx] = 0;

port = ntohs(satosin(&amp;packet-&gt;raddr)-&gt;sin_port);

rtpp_log_write(RTPP_LOG_INFO, sp-&gt;log,
       &quot;%s&apos;s address filled in: %s:%d (%s)&quot;,
       (ridx == 0) ? &quot;callee&quot; : &quot;caller&quot;,
       addr2char(sstosa(&amp;packet-&gt;raddr)), port,
       (sp-&gt;rtp == NULL) ? &quot;RTP&quot; : &quot;RTCP&quot;);

/*
      * Check if we have updated RTP while RTCP is still
      * empty or contains address that differs from one we
      * used when updating RTP. Try to guess RTCP if so,
      * should be handy for non-NAT&apos;ed clients, and some
      * NATed as well.
      */
     if (sp-&gt;rtcp != NULL &amp;&amp; (sp-&gt;rtcp-&gt;addr[ridx] == NULL ||
       !ishostseq(sp-&gt;rtcp-&gt;addr[ridx], sstosa(&amp;packet-&gt;raddr)))) {
  if (sp-&gt;rtcp-&gt;addr[ridx] == NULL) {
      sp-&gt;rtcp-&gt;addr[ridx] = malloc(packet-&gt;rlen);
      if (sp-&gt;rtcp-&gt;addr[ridx] == NULL) {
   sp-&gt;pcount[3]++;
   rtpp_log_write(RTPP_LOG_ERR, sp-&gt;log,
     &quot;can&apos;t allocate memory for remote address - &quot;
     &quot;removing session&quot;);
   remove_session(cf, sp);
   /* Break, sp is invalid now */
   break;
      }
  }
  memcpy(sp-&gt;rtcp-&gt;addr[ridx], &amp;packet-&gt;raddr, packet-&gt;rlen);
  satosin(sp-&gt;rtcp-&gt;addr[ridx])-&gt;sin_port = htons(port + 1);
  /* Use guessed value as the only true one for asymmetric clients */
  sp-&gt;rtcp-&gt;canupdate[ridx] = NOT(sp-&gt;rtcp-&gt;asymmetric[ridx]);
  rtpp_log_write(RTPP_LOG_INFO, sp-&gt;log, &quot;guessing RTCP port &quot;
    &quot;for %s to be %d&quot;,
    (ridx == 0) ? &quot;callee&quot; : &quot;caller&quot;, port + 1);
     }
 }

if (sp-&gt;resizers[ridx].output_nsamples &gt; 0)
     rtp_resizer_enqueue(&amp;sp-&gt;resizers[ridx], &amp;packet);
 if (packet != NULL)
     send_packet(cf, sp, ridx, packet);
    }

if (packet != NULL)
 rtp_packet_free(packet);
}</code></pre><p>Here are some useful resources that I read</p>
<ul>
<li><a href="http://stackoverflow.com/questions/18200089/how-does-rtpproxy-handle-handover">http://stackoverflow.com/questions/18200089/how-does-rtpproxy-handle-handover</a></li>
<li><a href="http://lists.sip-router.org/pipermail/sr-users/2008-March/062795.html">http://lists.sip-router.org/pipermail/sr-users/2008-March/062795.html</a></li>
<li><a href="http://sourceforge.net/p/sippy/rtpproxy/ci/c71201d897ee7c5620d88bb7d56412cd9dc3362a/tree//main.c?diff=5d030295ce90f2f6ff292b0d65bae1d4318db02a">http://sourceforge.net/p/sippy/rtpproxy/ci/c71201d897ee7c5620d88bb7d56412cd9dc3362a/tree//main.c?diff=5d030295ce90f2f6ff292b0d65bae1d4318db02a</a></li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-06-12T09:11:26.000Z" title="2019-06-12T09:11:26.000Z">2019-06-12</time><span class="level-item">a few seconds read (About 89 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-test-drive-view-in-iOS/">How to test drive view in iOS</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/303">#303</a></strong></p>
<p>Instead of setting up custom framework and Playground, we can just display that specific view as root view controller</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">window.rootViewController = makeTestPlayground()</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">makeTestPlayground</span><span class="params">()</span></span> -&gt; <span class="type">UIViewController</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> content = <span class="type">UserCell</span>()</span><br><span class="line">    content.nameLabel.text = <span class="string">"Thor"</span></span><br><span class="line">    content.streetLabel.text = <span class="string">"Asgard"</span></span><br><span class="line">    content.weaponLabel.text = <span class="string">"Hammer"</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> viewController = <span class="type">UIViewController</span>()</span><br><span class="line">    viewController.view.backgroundColor = .white</span><br><span class="line">    viewController.view.addSubview(content)</span><br><span class="line"></span><br><span class="line">    <span class="type">NSLayoutConstraint</span>.on([</span><br><span class="line">        content.centerXAnchor.constraint(equalTo: viewController.view.centerXAnchor),</span><br><span class="line">        content.centerYAnchor.constraint(equalTo: viewController.view.centerYAnchor),</span><br><span class="line">        content.widthAnchor.constraint(equalTo: viewController.view.widthAnchor, multiplier0.<span class="number">9</span>),</span><br><span class="line">        content.heightAnchor.constraint(equalToConstant: <span class="number">200</span>)</span><br><span class="line">    ]</span><br><span class="line">    <span class="keyword">return</span> viewController</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-06-12T08:35:42.000Z" title="2019-06-12T08:35:42.000Z">2019-06-12</time><span class="level-item">4 minutes read (About 566 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-make-carousel-layout-for-UICollectionView-in-iOS/">How to make carousel layout for UICollectionView in iOS</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/302">#302</a></strong></p>
<h3 id="Based-on-AnimatedCollectionViewLayout"><a href="#Based-on-AnimatedCollectionViewLayout" class="headerlink" title="Based on AnimatedCollectionViewLayout"></a>Based on <a href="https://github.com/KelvinJin/AnimatedCollectionViewLayout">AnimatedCollectionViewLayout</a></h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">CarouselLayout</span>: <span class="title">UICollectionViewFlowLayout</span> </span>&#123;</span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">layoutAttributesForElements</span><span class="params">(<span class="keyword">in</span> rect: CGRect)</span></span> -&gt; [<span class="type">UICollectionViewLayoutAttributes</span>]? &#123;</span><br><span class="line">        <span class="keyword">guard</span> <span class="keyword">let</span> attributes = <span class="keyword">super</span>.layoutAttributesForElements(<span class="keyword">in</span>: rect) <span class="keyword">else</span> &#123; <span class="keyword">return</span> <span class="literal">nil</span> &#125;</span><br><span class="line">        <span class="keyword">guard</span> <span class="keyword">let</span> collectionView = collectionView <span class="keyword">else</span> &#123; <span class="keyword">return</span> <span class="literal">nil</span> &#125;</span><br><span class="line">        <span class="keyword">return</span> attributes.<span class="built_in">map</span>(&#123; transform(collectionView: collectionView, attribute: $<span class="number">0</span>) &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">shouldInvalidateLayout</span><span class="params">(forBoundsChange newBounds: CGRect)</span></span> -&gt; <span class="type">Bool</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">transform</span><span class="params">(collectionView: UICollectionView, attribute: UICollectionViewLayoutAttributes)</span></span> -&gt; <span class="type">UICollectionViewLayoutAttributes</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> a = attribute</span><br><span class="line">        <span class="keyword">let</span> width = collectionView.frame.size.width</span><br><span class="line">        <span class="keyword">let</span> itemOffset = a.center.x - collectionView.contentOffset.x</span><br><span class="line">        <span class="keyword">let</span> middleOffset = (itemOffset / width) - <span class="number">0.5</span></span><br><span class="line"></span><br><span class="line">        change(</span><br><span class="line">            width: collectionView.frame.size.width,</span><br><span class="line">            attribute: attribute,</span><br><span class="line">            middleOffset: middleOffset</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> attribute</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">change</span><span class="params">(width: CGFloat, attribute: UICollectionViewLayoutAttributes, middleOffset: CGFloat)</span></span> &#123;</span><br><span class="line">        <span class="keyword">let</span> alpha: <span class="type">CGFloat</span> = <span class="number">0.8</span></span><br><span class="line">        <span class="keyword">let</span> itemSpacing: <span class="type">CGFloat</span> = <span class="number">0.21</span></span><br><span class="line">        <span class="keyword">let</span> scale: <span class="type">CGFloat</span> = <span class="number">1.0</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> scaleFactor = scale - <span class="number">0.1</span> * <span class="built_in">abs</span>(middleOffset)</span><br><span class="line">        <span class="keyword">let</span> scaleTransform = <span class="type">CGAffineTransform</span>(scaleX: scaleFactor, y: scaleFactor)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> translationX = -(width * itemSpacing * middleOffset)</span><br><span class="line">        <span class="keyword">let</span> translationTransform = <span class="type">CGAffineTransform</span>(translationX: translationX, y: <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">        attribute.alpha = <span class="number">1.0</span> - <span class="built_in">abs</span>(middleOffset) + alpha</span><br><span class="line">        attribute.transform = translationTransform.concatenating(scaleTransform)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>How to use</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> layout = <span class="type">CarouselLayout</span>()</span><br><span class="line"></span><br><span class="line">layout.scrollDirection = .horizontal</span><br><span class="line">layout.sectionInset = .zero</span><br><span class="line">layout.minimumInteritemSpacing = <span class="number">0</span></span><br><span class="line">layout.minimumLineSpacing = <span class="number">0</span></span><br></pre></td></tr></table></figure>

<p>We can inset cell content and use <code>let scale: CGFloat = 1.0</code> to avoid scaling down center cell</p>
<h3 id="Based-on-CityCollectionViewFlowLayout"><a href="#Based-on-CityCollectionViewFlowLayout" class="headerlink" title="Based on CityCollectionViewFlowLayout"></a>Based on <a href="https://github.com/appcoda/Interactive-Animation/blob/master/CityGuide/Layout/CityCollectionViewFlowLayout.swift">CityCollectionViewFlowLayout</a></h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> UIKit</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CityCollectionViewFlowLayout</span>: <span class="title">UICollectionViewFlowLayout</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">fileprivate</span> <span class="keyword">var</span> lastCollectionViewSize: <span class="type">CGSize</span> = <span class="type">CGSize</span>.zero</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> scaleOffset: <span class="type">CGFloat</span> = <span class="number">200</span></span><br><span class="line">    <span class="keyword">var</span> scaleFactor: <span class="type">CGFloat</span> = <span class="number">0.9</span></span><br><span class="line">    <span class="keyword">var</span> alphaFactor: <span class="type">CGFloat</span> = <span class="number">0.3</span></span><br><span class="line">    <span class="keyword">var</span> lineSpacing: <span class="type">CGFloat</span> = <span class="number">25.0</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">required</span> <span class="keyword">init</span>?(coder <span class="number">_</span>: <span class="type">NSCoder</span>) &#123;</span><br><span class="line">        <span class="built_in">fatalError</span>()</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">init</span>(itemSize: <span class="type">CGSize</span>) &#123;</span><br><span class="line">        <span class="keyword">super</span>.<span class="keyword">init</span>()</span><br><span class="line">        <span class="keyword">self</span>.itemSize = itemSize</span><br><span class="line">        minimumLineSpacing = lineSpacing</span><br><span class="line">        scrollDirection = .horizontal</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">setItemSize</span><span class="params">(itemSize: CGSize)</span></span> &#123;</span><br><span class="line">        <span class="keyword">self</span>.itemSize = itemSize</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">invalidateLayout</span><span class="params">(with context: UICollectionViewLayoutInvalidationContext)</span></span> &#123;</span><br><span class="line">        <span class="keyword">super</span>.invalidateLayout(with: context)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">guard</span> <span class="keyword">let</span> collectionView = <span class="keyword">self</span>.collectionView <span class="keyword">else</span> &#123; <span class="keyword">return</span> &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> collectionView.bounds.size != lastCollectionViewSize &#123;</span><br><span class="line">            configureContentInset()</span><br><span class="line">            lastCollectionViewSize = collectionView.bounds.size</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">targetContentOffset</span><span class="params">(forProposedContentOffset proposedContentOffset: CGPoint, withScrollingVelocity velocity: CGPoint)</span></span> -&gt; <span class="type">CGPoint</span> &#123;</span><br><span class="line">        <span class="keyword">guard</span> <span class="keyword">let</span> collectionView = <span class="keyword">self</span>.collectionView <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> proposedContentOffset</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">let</span> proposedRect = <span class="type">CGRect</span>(x: proposedContentOffset.x, y: <span class="number">0</span>, width: collectionView.bounds.width, height: collectionView.bounds.height)</span><br><span class="line">        <span class="keyword">guard</span> <span class="keyword">let</span> layoutAttributes = <span class="keyword">self</span>.layoutAttributesForElements(<span class="keyword">in</span>: proposedRect) <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> proposedContentOffset</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">var</span> candidateAttributes: <span class="type">UICollectionViewLayoutAttributes?</span></span><br><span class="line">        <span class="keyword">let</span> proposedContentOffsetCenterX = proposedContentOffset.x + collectionView.bounds.width / <span class="number">2</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> attributes <span class="keyword">in</span> layoutAttributes &#123;</span><br><span class="line">            <span class="keyword">if</span> attributes.representedElementCategory != .cell &#123;</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span> candidateAttributes == <span class="literal">nil</span> &#123;</span><br><span class="line">                candidateAttributes = attributes</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">abs</span>(attributes.center.x - proposedContentOffsetCenterX) &lt; <span class="built_in">abs</span>(candidateAttributes!.center.x - proposedContentOffsetCenterX) &#123;</span><br><span class="line">                candidateAttributes = attributes</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">guard</span> <span class="keyword">let</span> aCandidateAttributes = candidateAttributes <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> proposedContentOffset</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">var</span> newOffsetX = aCandidateAttributes.center.x - collectionView.bounds.size.width / <span class="number">2</span></span><br><span class="line">        <span class="keyword">let</span> offset = newOffsetX - collectionView.contentOffset.x</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> (velocity.x &lt; <span class="number">0</span> &amp;&amp; offset &gt; <span class="number">0</span>) || (velocity.x &gt; <span class="number">0</span> &amp;&amp; offset &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">let</span> pageWidth = itemSize.width + minimumLineSpacing</span><br><span class="line">            newOffsetX += velocity.x &gt; <span class="number">0</span> ? pageWidth : -pageWidth</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> <span class="type">CGPoint</span>(x: newOffsetX, y: proposedContentOffset.y)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">shouldInvalidateLayout</span><span class="params">(forBoundsChange <span class="number">_</span>: CGRect)</span></span> -&gt; <span class="type">Bool</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">layoutAttributesForElements</span><span class="params">(<span class="keyword">in</span> rect: CGRect)</span></span> -&gt; [<span class="type">UICollectionViewLayoutAttributes</span>]? &#123;</span><br><span class="line">        <span class="keyword">guard</span> <span class="keyword">let</span> collectionView = <span class="keyword">self</span>.collectionView,</span><br><span class="line">            <span class="keyword">let</span> superAttributes = <span class="keyword">super</span>.layoutAttributesForElements(<span class="keyword">in</span>: rect) <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">super</span>.layoutAttributesForElements(<span class="keyword">in</span>: rect)</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">let</span> contentOffset = collectionView.contentOffset</span><br><span class="line">        <span class="keyword">let</span> size = collectionView.bounds.size</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">let</span> visibleRect = <span class="type">CGRect</span>(x: contentOffset.x, y: contentOffset.y, width: size.width, height: size.height)</span><br><span class="line">        <span class="keyword">let</span> visibleCenterX = visibleRect.midX</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">guard</span> <span class="keyword">case</span> <span class="keyword">let</span> newAttributesArray <span class="keyword">as</span> [<span class="type">UICollectionViewLayoutAttributes</span>] = <span class="type">NSArray</span>(array: superAttributes, copyItems: <span class="literal">true</span>) <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        newAttributesArray.forEach &#123;</span><br><span class="line">            <span class="keyword">let</span> distanceFromCenter = visibleCenterX - $<span class="number">0</span>.center.x</span><br><span class="line">            <span class="keyword">let</span> absDistanceFromCenter = <span class="built_in">min</span>(<span class="built_in">abs</span>(distanceFromCenter), <span class="keyword">self</span>.scaleOffset)</span><br><span class="line">            <span class="keyword">let</span> scale = absDistanceFromCenter * (<span class="keyword">self</span>.scaleFactor - <span class="number">1</span>) / <span class="keyword">self</span>.scaleOffset + <span class="number">1</span></span><br><span class="line">            $<span class="number">0</span>.transform3D = <span class="type">CATransform3DScale</span>(<span class="type">CATransform3DIdentity</span>, scale, scale, <span class="number">1</span>)</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">let</span> alpha = absDistanceFromCenter * (<span class="keyword">self</span>.alphaFactor - <span class="number">1</span>) / <span class="keyword">self</span>.scaleOffset + <span class="number">1</span></span><br><span class="line">            $<span class="number">0</span>.alpha = alpha</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> newAttributesArray</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">configureContentInset</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">guard</span> <span class="keyword">let</span> collectionView = <span class="keyword">self</span>.collectionView <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">let</span> inset = collectionView.bounds.size.width / <span class="number">2</span> - itemSize.width / <span class="number">2</span></span><br><span class="line">        collectionView.contentInset = <span class="type">UIEdgeInsets</span>.<span class="keyword">init</span>(top: <span class="number">0</span>, <span class="keyword">left</span>: inset, bottom: <span class="number">0</span>, <span class="keyword">right</span>: inset)</span><br><span class="line">        collectionView.contentOffset = <span class="type">CGPoint</span>(x: -inset, y: <span class="number">0</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">resetContentInset</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">guard</span> <span class="keyword">let</span> collectionView = <span class="keyword">self</span>.collectionView <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        collectionView.contentInset = <span class="type">UIEdgeInsets</span>.<span class="keyword">init</span>(top: <span class="number">0</span>, <span class="keyword">left</span>: <span class="number">0</span>, bottom: <span class="number">0</span>, <span class="keyword">right</span>: <span class="number">0</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-06-12T06:30:14.000Z" title="2019-06-12T06:30:14.000Z">2019-06-12</time><span class="level-item">2 minutes read (About 336 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-make-simple-pan-to-dismiss-view-in-iOS/">How to make simple pan to dismiss view in iOS</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/301">#301</a></strong></p>
<p>Make it more composable using <code>UIViewController</code> subclass and <code>ThroughView</code> to pass hit events to underlying views.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PanViewController</span>: <span class="title">UIViewController</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> animator = <span class="type">UIViewPropertyAnimator</span>(duration: <span class="number">0</span>, curve: .easeOut)</span><br><span class="line">    <span class="built_in">lazy</span> <span class="keyword">var</span> panGR = <span class="type">UIPanGestureRecognizer</span>(target: <span class="keyword">self</span>, action: #selector(handlePan(<span class="number">_</span>: )))</span><br><span class="line">    <span class="keyword">let</span> slideView = <span class="type">UIView</span>()</span><br><span class="line">    <span class="keyword">let</span> gripView = <span class="type">UIView</span>()</span><br><span class="line">    <span class="keyword">var</span> options: <span class="type">Options</span> = <span class="type">Options</span>()</span><br><span class="line">    <span class="keyword">var</span> didHide: (() -&gt; <span class="type">Void</span>)?</span><br><span class="line">    <span class="keyword">let</span> pullDownVelocity: <span class="type">CGFloat</span> = <span class="number">70</span></span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Options</span> </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> contentView: <span class="type">UIView</span> = <span class="type">UIView</span>()</span><br><span class="line">        <span class="keyword">var</span> percentHeight: <span class="type">CGFloat</span> = <span class="number">0.24</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">loadView</span><span class="params">()</span></span> &#123;</span><br><span class="line">        view = <span class="type">ThroughView</span>()</span><br><span class="line">        view.translatesAutoresizingMaskIntoConstraints = <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">super</span>.viewDidLoad()</span><br><span class="line"></span><br><span class="line">        setup()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">setup</span><span class="params">()</span></span> &#123;</span><br><span class="line">        slideView.layer.cornerRadius = <span class="number">10</span></span><br><span class="line">        slideView.clipsToBounds = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">        gripView.backgroundColor = <span class="type">UIColor</span>.yellow</span><br><span class="line">        gripView.layer.cornerRadius = <span class="number">1</span></span><br><span class="line"></span><br><span class="line">        view.addSubview(slideView)</span><br><span class="line">        slideView.addSubview(gripView)</span><br><span class="line">        slideView.addGestureRecognizer(panGR)</span><br><span class="line"></span><br><span class="line">        <span class="type">NSLayoutConstraint</span>.on([</span><br><span class="line">            slideView.leftAnchor.constraint(equalTo: view.leftAnchor),</span><br><span class="line">            slideView.rightAnchor.constraint(equalTo: view.rightAnchor),</span><br><span class="line">            slideView.heightAnchor.constraint(equalTo: view.heightAnchor),</span><br><span class="line">            slideView.topAnchor.constraint(equalTo: view.bottomAnchor)</span><br><span class="line">        ])</span><br><span class="line"></span><br><span class="line">        <span class="type">NSLayoutConstraint</span>.on([</span><br><span class="line">            gripView.centerXAnchor.constraint(equalTo: slideView.centerXAnchor),</span><br><span class="line">            gripView.topAnchor.constraint(equalTo: slideView.topAnchor, constant: <span class="number">16</span>),</span><br><span class="line">            gripView.widthAnchor.constraint(equalToConstant: <span class="number">30</span>),</span><br><span class="line">            gripView.heightAnchor.constraint(equalToConstant: <span class="number">2</span>)</span><br><span class="line">        ])</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">apply</span><span class="params">(options: Options)</span></span> &#123;</span><br><span class="line">        <span class="keyword">self</span>.options.contentView.removeFromSuperview()</span><br><span class="line">        slideView.insertSubview(options.contentView, at: <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">        <span class="type">NSLayoutConstraint</span>.on([</span><br><span class="line">            options.contentView.leftAnchor.constraint(equalTo: slideView.leftAnchor),</span><br><span class="line">            options.contentView.rightAnchor.constraint(equalTo: slideView.rightAnchor),</span><br><span class="line">            options.contentView.topAnchor.constraint(equalTo: slideView.topAnchor),</span><br><span class="line">            options.contentView.heightAnchor.constraint(equalTo: slideView.heightAnchor, multiplier: options.percentHeight)</span><br><span class="line">        ])</span><br><span class="line"></span><br><span class="line">        <span class="keyword">self</span>.options = options</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@objc</span> <span class="function"><span class="keyword">func</span> <span class="title">handlePan</span><span class="params">(<span class="number">_</span> gr: UIPanGestureRecognizer)</span></span> &#123;</span><br><span class="line">        <span class="keyword">switch</span> gr.state &#123;</span><br><span class="line">        <span class="keyword">case</span> .began:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">case</span> .changed:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">case</span> .ended:</span><br><span class="line">            <span class="keyword">let</span> velocity = gr.velocity(<span class="keyword">in</span>: slideView)</span><br><span class="line">            <span class="keyword">if</span> velocity.y &gt; pullDownVelocity &#123;</span><br><span class="line">                hide()</span><br><span class="line">            &#125;</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">show</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">guard</span> <span class="keyword">let</span> parentView = view.superview <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        animator = <span class="keyword">self</span>.makeAnimator()</span><br><span class="line">        animator.addAnimations &#123;</span><br><span class="line">            <span class="keyword">self</span>.slideView.transform = <span class="type">CGAffineTransform</span>(</span><br><span class="line">                translationX: <span class="number">0</span>,</span><br><span class="line">                y: -parentView.bounds.height * <span class="keyword">self</span>.options.percentHeight - parentView.safeAreaInsets.bottom</span><br><span class="line">            )</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        animator.startAnimation()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">hide</span><span class="params">()</span></span> &#123;</span><br><span class="line">        animator = <span class="keyword">self</span>.makeAnimator()</span><br><span class="line">        animator.addAnimations &#123;</span><br><span class="line">            <span class="keyword">self</span>.slideView.transform = <span class="type">CGAffineTransform</span>.identity</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        animator.addCompletion(&#123; <span class="number">_</span> <span class="keyword">in</span></span><br><span class="line">            <span class="keyword">self</span>.didHide?()</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">        animator.startAnimation()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">makeAnimator</span><span class="params">()</span></span> -&gt; <span class="type">UIViewPropertyAnimator</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="type">UIViewPropertyAnimator</span>(duration: <span class="number">0.25</span>, dampingRatio: <span class="number">1.0</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ThroughView</span>: <span class="title">UIView</span> </span>&#123;</span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">didMoveToSuperview</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">super</span>.didMoveToSuperview()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">guard</span> <span class="keyword">let</span> superview = superview <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">NSLayoutConstraint</span>.on([pinEdges(view: superview)])</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">point</span><span class="params">(inside point: CGPoint, with event: UIEvent?)</span></span> -&gt; <span class="type">Bool</span> &#123;</span><br><span class="line">        <span class="keyword">guard</span> <span class="keyword">let</span> slideView = subviews.first <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> slideView.hitTest(convert(point, to: slideView), with: event) != <span class="literal">nil</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-06-11T07:34:21.000Z" title="2019-06-11T07:34:21.000Z">2019-06-11</time><span class="level-item">4 minutes read (About 540 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/Getting-started-with-WWDC-2019/">Getting started with WWDC 2019</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/300">#300</a></strong></p>
<h2 id="WWDC"><a href="#WWDC" class="headerlink" title="WWDC"></a>WWDC</h2><ul>
<li><a href="https://ios-goodies.com/post/185370134786/week-2845-wwdc-special">WWDC special</a></li>
<li><a href="https://wwdcbysundell.com/">WWDC by Sundell</a></li>
<li><a href="https://nshipster.com/wwdc-2019/">NSHipster WWDC 2019</a></li>
<li><a href="https://patrickbalestra.com/blog/2019/06/07/wwdc-2019-the-things-you-may-have-missed.html">WWDC 2019 - The Things You May Have Missed</a></li>
<li><a href="https://wwdcbysundell.com/2019/essential-session-videos/">7 essential WWDC session videos for iOS developers</a></li>
<li><a href="https://www.hackingwithswift.com/articles/190/the-best-wwdc-videos-of-all-time">The 15 Best WWDC Videos of All Time</a></li>
<li><a href="https://github.com/Blackjacx/WWDC">WWDC</a> Extracted gists</li>
<li><a href="https://github.com/onmyway133/blog/issues/305">Favorite WWDC 2019 sessions</a></li>
</ul>
<h2 id="Swift-5-1"><a href="#Swift-5-1" class="headerlink" title="Swift 5.1"></a>Swift 5.1</h2><ul>
<li><a href="https://www.avanderlee.com/swift/property-wrappers/">Property wrappers to remove boilerplate code in Swift</a></li>
<li><a href="https://swiftrocks.com/understanding-opaque-return-types-in-swift.html">Understanding Opaque Return Types in Swift</a></li>
<li><a href="https://www.swiftbysundell.com/posts/the-swift-51-features-that-power-swiftuis-api">The Swift 5.1 features that power SwiftUI’s API</a></li>
<li><a href="https://www.hackingwithswift.com/articles/182/whats-new-in-swift-5-1">What’s new in Swift 5.1</a></li>
<li><a href="https://jeroenscode.com/swift-opaque-result-types/">Swift Opaque Result Types</a></li>
<li><a href="https://github.com/guillermomuntaner/Burritos">Burritos</a> A collection of Swift Property Wrappers</li>
<li><a href="https://medium.com/flawless-app-stories/how-can-property-wrappers-and-function-builders-be-leveraged-d43160de338f">How can Property Wrappers and Function Builders be leveraged?</a></li>
</ul>
<h2 id="SwiftUI"><a href="#SwiftUI" class="headerlink" title="SwiftUI"></a>SwiftUI</h2><ul>
<li><a href="https://developer.apple.com/xcode/swiftui/">SwiftUI</a></li>
<li><a href="https://github.com/Juanpe/About-SwiftUI">About-SwiftUI</a></li>
<li><a href="https://www.hackingwithswift.com/quick-start/swiftui/">Swift UI by example</a></li>
<li><a href="https://swiftrocks.com/inside-swiftui-compiler-magic.html">Inside SwiftUI’s Declarative Syntax’s Compiler Magic</a></li>
<li><a href="https://wwdcbysundell.com/2019/swiftui-common-questions/">Answers to the most common questions about SwiftUI</a></li>
<li><a href="https://www.raywenderlich.com/3715234-swiftui-getting-started">SwiftUI: Getting Started</a></li>
<li><a href="https://github.com/SimpleBoilerplates/SwiftUI-Cheat-Sheet">SwiftUI-Cheat-Sheet</a></li>
<li><a href="https://mecid.github.io/2019/06/12/understanding-property-wrappers-in-swiftui/">Understanding Property Wrappers in SwiftUI</a></li>
<li><a href="https://github.com/Jinxiansen/SwiftUI">SwiftUI</a> Framework Learning and Usage Guide</li>
<li><a href="https://github.com/unixzii/SwiftUI-2048">SwiftUI-2048</a></li>
<li><a href="https://fuckingswiftui.com/">Fucking SwiftUI</a></li>
<li><a href="https://github.com/anandabits/SwiftUI-Processing">SwiftUI-Processing</a></li>
<li><a href="http://www.alwaysrightinstitute.com/swiftwebui/">SwiftWebUI</a></li>
<li><a href="https://mecid.github.io/2019/06/19/building-forms-with-swiftui/">Building forms with SwiftUI</a></li>
<li><a href="https://mecid.github.io/2019/06/26/animations-in-swiftui/">Animations in SwiftUI</a></li>
<li><a href="https://www.youtube.com/playlist?list=PLDaHCLWmCcQLL-3YDxnPgG8VENNUiJ0Nv">SwiftUI DesignCode</a></li>
</ul>
<p>Good to know</p>
<ul>
<li><a href="https://www.objc.io/blog/2019/10/29/swiftui-environment/">SwiftUI: Setting Environment Values</a></li>
<li><a href="https://kean.github.io/post/swiftui-layout-system">SwiftUI Layout System</a></li>
</ul>
<p>Code</p>
<ul>
<li><a href="https://github.com/xtabbas/calculator-checklist">https://github.com/xtabbas/calculator-checklist</a></li>
<li><a href="https://github.com/alfianlosari/SwiftUI-MovieDB">https://github.com/alfianlosari/SwiftUI-MovieDB</a></li>
<li><a href="https://github.com/unixzii/SwiftUI-2048">https://github.com/unixzii/SwiftUI-2048</a></li>
</ul>
<h2 id="Combine"><a href="#Combine" class="headerlink" title="Combine"></a>Combine</h2><ul>
<li><a href="https://medium.com/gett-engineering/rxswift-to-apples-combine-cheat-sheet-e9ce32b14c5b">RxSwift to Apple’s Combine Cheat Sheet</a></li>
<li><a href="https://medium.com/flawless-app-stories/will-combine-kill-rxswift-64780a150d89">Will Combine kill RxSwift?</a></li>
<li><a href="https://github.com/broadwaylamb/OpenCombine">OpenCombine</a> Open-source implementation of Apple’s Combine framework for processing values over time.</li>
<li><a href="https://github.com/AvdLee/CombineSwiftPlayground">CombineSwiftPlayground</a></li>
<li><a href="https://medium.com/snowdog-labs/combine-framework-in-action-part-2-63c7d652b32f">Combine framework in action — Part 2</a></li>
<li><a href="https://heckj.github.io/swiftui-notes/">Using Combine</a> 🚀 </li>
</ul>
<h2 id="Dark-Mode"><a href="#Dark-Mode" class="headerlink" title="Dark Mode"></a>Dark Mode</h2><ul>
<li><a href="https://www.fivestars.blog/code/ios-dark-mode-how-to.html">How To Adopt Dark Mode In Your iOS App </a></li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-05-31T05:29:23.000Z" title="2019-05-31T05:29:23.000Z">2019-05-31</time><span class="level-item">a minute read (About 134 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-style-NSButton-in-AppKit/">How to style NSButton in AppKit</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/297">#297</a></strong></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> button = <span class="type">NSButton</span>()</span><br><span class="line">button.wantsLayer = <span class="literal">true</span></span><br><span class="line">button.isBordered = <span class="literal">false</span></span><br><span class="line">button.setButtonType(.momentaryChange)</span><br><span class="line">button.attributedTitle = <span class="type">NSAttributedString</span>(</span><br><span class="line">    string: <span class="string">"Click me"</span>,</span><br><span class="line">    attributes: [</span><br><span class="line">        <span class="type">NSAttributedString</span>.<span class="type">Key</span>.foregroundColor: <span class="type">NSColor</span>.white,</span><br><span class="line">        <span class="type">NSAttributedString</span>.<span class="type">Key</span>.font: <span class="type">NSFont</span>.labelFont(ofSize: <span class="number">13</span>)</span><br><span class="line">    ]</span><br><span class="line">button.layer?.backgroundColor = <span class="type">NSColor</span>.orange.cgColor</span><br><span class="line">button.layer?.cornerRadius = <span class="number">12</span></span><br><span class="line"></span><br><span class="line">activate(</span><br><span class="line">    button.anchor.height.<span class="built_in">equal</span>.to(<span class="number">32</span>),</span><br><span class="line">    button.anchor.width.<span class="built_in">equal</span>.to(<span class="number">100</span>)</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>To make it have native rounded rect</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">button.imageScaling = .scaleProportionallyDown</span><br><span class="line">button.setButtonType(.momentaryPushIn)</span><br><span class="line">button.bezelStyle = .rounded</span><br><span class="line">button.isBordered = <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> AppKit</span><br><span class="line"><span class="keyword">import</span> Omnia</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">NSButton</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">style</span><span class="params">(imageName: String)</span></span> &#123;</span><br><span class="line">        image = <span class="type">NSImage</span>(named: <span class="type">NSImage</span>.<span class="type">Name</span>(imageName))</span><br><span class="line">        isBordered = <span class="literal">false</span></span><br><span class="line">        imageScaling = .scaleProportionallyDown</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">styleAction</span><span class="params">(title: String)</span></span> &#123;</span><br><span class="line">        attributedTitle = <span class="type">NSAttributedString</span>(string: title, attributes: [</span><br><span class="line">            <span class="type">NSAttributedString</span>.<span class="type">Key</span>.foregroundColor: <span class="type">NSColor</span>(hex: <span class="string">"008B80"</span>),</span><br><span class="line">            <span class="type">NSAttributedString</span>.<span class="type">Key</span>.font: <span class="type">NSFont</span>.boldSystemFont(ofSize: <span class="number">13</span>)</span><br><span class="line">        ])</span><br><span class="line"></span><br><span class="line">        isBordered = <span class="literal">false</span></span><br><span class="line">        setButtonType(.momentaryChange)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Read-more"><a href="#Read-more" class="headerlink" title="Read more"></a>Read more</h2><ul>
<li><a href="https://mackuba.eu/2014/10/06/a-guide-to-nsbutton-styles">https://mackuba.eu/2014/10/06/a-guide-to-nsbutton-styles</a></li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-05-30T15:26:24.000Z" title="2019-05-30T15:26:24.000Z">2019-05-30</time><span class="level-item">a few seconds read (About 77 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-debounce-action-in-Flutter/">How to debounce action in Flutter</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/293">#293</a></strong></p>
<p>Answer <a href="https://stackoverflow.com/a/55119208/1418457">https://stackoverflow.com/a/55119208/1418457</a></p>
<hr>
<p>This is useful to throttle TextField change event. You can make Debouncer class using Timer</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/foundation.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'dart:async'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Debouncer</span> </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">int</span> milliseconds;</span><br><span class="line">  VoidCallback action;</span><br><span class="line">  Timer _timer;</span><br><span class="line"></span><br><span class="line">  Debouncer(&#123; <span class="keyword">this</span>.milliseconds &#125;);</span><br><span class="line"></span><br><span class="line">  run(VoidCallback action) &#123;</span><br><span class="line">    <span class="keyword">if</span> (_timer != <span class="keyword">null</span>) &#123;</span><br><span class="line">      _timer.cancel();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    _timer = Timer(<span class="built_in">Duration</span>(milliseconds: milliseconds), action);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Declare and trigger</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> _debouncer = Debouncer(milliseconds: <span class="number">500</span>);</span><br><span class="line"></span><br><span class="line">onTextChange(<span class="built_in">String</span> text) &#123;</span><br><span class="line">  _debouncer.run(() =&gt; <span class="built_in">print</span>(text));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-05-27T06:44:05.000Z" title="2019-05-27T06:44:05.000Z">2019-05-27</time><span class="level-item">3 minutes read (About 386 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-add-indicator-under-tab-bar-buttons-in-iOS/">How to add indicator under tab bar buttons in iOS</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/288">#288</a></strong></p>
<h2 id="selectionIndicatorImage"><a href="#selectionIndicatorImage" class="headerlink" title="selectionIndicatorImage"></a>selectionIndicatorImage</h2><ul>
<li><a href="https://developer.apple.com/documentation/uikit/uitabbar/1623456-selectionindicatorimage">https://developer.apple.com/documentation/uikit/uitabbar/1623456-selectionindicatorimage</a></li>
<li>Should design image with enough height, transparent background and indicator at the bottom</li>
</ul>
<blockquote>
<p>Use this property to specify a custom selection image. Your image is rendered on top of the tab bar but behind the contents of the tab bar item itself. The default value of this property is nil, which causes the tab bar to apply a default highlight to the selected item</p>
</blockquote>
<h2 id="Custom-UITabBar-or-UITabBarController"><a href="#Custom-UITabBar-or-UITabBarController" class="headerlink" title="Custom UITabBar or UITabBarController"></a>Custom UITabBar or UITabBarController</h2><ul>
<li>Hide existing <code>tabBar</code> <code>tabBar.isHidden = true</code></li>
<li>Position custom buttons</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> UIKit</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CustomTabBarController</span>: <span class="title">UITabBarController</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">let</span> bar = <span class="type">UIView</span>()</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> buttons = [<span class="type">UIButton</span>]()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="keyword">var</span> viewControllers: [<span class="type">UIViewController</span>]? &#123;</span><br><span class="line">        <span class="keyword">didSet</span> &#123;</span><br><span class="line">        	populate(viewControllers: viewControllers)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">super</span>.viewDidLoad()</span><br><span class="line"></span><br><span class="line">        setup()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">setup</span><span class="params">()</span></span> &#123;</span><br><span class="line">        tabBar.isHidden = <span class="literal">true</span></span><br><span class="line">        bar.backgroundColor = <span class="type">R</span>.color.background</span><br><span class="line">        view.addSubview(bar)</span><br><span class="line">        <span class="type">NSLayoutConstraint</span>.on([</span><br><span class="line">            bar.leftAnchor.constraint(equalTo: view.leftAnchor),</span><br><span class="line">            bar.rightAnchor.constraint(equalTo: view.rightAnchor),</span><br><span class="line">            bar.bottomAnchor.constraint(equalTo: view.bottomAnchor),</span><br><span class="line">			bar.topAnchor.constraint(equalTo: tabBar.topAnchor)</span><br><span class="line">        ])</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">populate</span><span class="params">(viewControllers: [UIViewController])</span></span> &#123;</span><br><span class="line">        buttons.forEach &#123;</span><br><span class="line">            $<span class="number">0</span>.removeFromSuperview()</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        buttons = viewControllers.<span class="built_in">map</span>(&#123;</span><br><span class="line">            <span class="keyword">let</span> button = <span class="type">UIButton</span>()</span><br><span class="line">            button.setImage($<span class="number">0</span>.tabBarItem.image, <span class="keyword">for</span>: .normal)</span><br><span class="line">            bar.addSubview(button)</span><br><span class="line">            <span class="keyword">return</span> button</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">        view.setNeedsLayout()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidLayoutSubviews</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">super</span>.viewDidLayoutSubviews()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> padding: <span class="type">CGFloat</span> = <span class="number">20</span></span><br><span class="line">        <span class="keyword">let</span> buttonSize = <span class="type">CGSize</span>(width: <span class="number">30</span>, height: <span class="number">44</span>)</span><br><span class="line">        <span class="keyword">let</span> width = view.bounds.width - padding * <span class="number">20</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (index, button) <span class="keyword">in</span> buttons.enumerated() &#123;</span><br><span class="line">            button.center = <span class="type">CGPoint</span>(x: bar.center.x, y: bar.frame.height/<span class="number">2</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Handle-UITabBarControllerDelegate"><a href="#Handle-UITabBarControllerDelegate" class="headerlink" title="Handle UITabBarControllerDelegate"></a>Handle UITabBarControllerDelegate</h2><ul>
<li>Override <code>func tabBar(_ tabBar: UITabBar, didSelect item: UITabBarItem)</code></li>
<li><code>tabBar.subviews</code> contains 1 private <code>UITabBarBackground</code> and many private <code>UITabBarButton</code></li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> UIKit</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CustomTabBarController</span>: <span class="title">UITabBarController</span> </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> indicator: <span class="type">UIView</span> = &#123;</span><br><span class="line">        <span class="keyword">let</span> view = <span class="type">UIView</span>()</span><br><span class="line">        view.backgroundColor = <span class="type">R</span>.color.primary</span><br><span class="line">        view.frame.size = <span class="type">CGSize</span>(width: <span class="number">32</span>, height: <span class="number">2</span>)</span><br><span class="line">        view.layer.cornerRadius = <span class="number">1</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> view</span><br><span class="line">    &#125;()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">super</span>.viewDidLoad()</span><br><span class="line"></span><br><span class="line">        tabBar.addSubview(indicator)</span><br><span class="line">        <span class="keyword">self</span>.delegate = <span class="keyword">self</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">animate</span><span class="params">(index: Int)</span></span> &#123;</span><br><span class="line">        <span class="keyword">let</span> buttons = tabBar.subviews</span><br><span class="line">            .<span class="built_in">filter</span>(&#123; <span class="type">String</span>(describing: $<span class="number">0</span>).<span class="built_in">contains</span>(<span class="string">"Button"</span>) &#125;)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">guard</span> index &lt; buttons.<span class="built_in">count</span> <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> selectedButton = buttons[index]</span><br><span class="line">        <span class="type">UIView</span>.animate(</span><br><span class="line">            withDuration: <span class="number">0.25</span>,</span><br><span class="line">            delay: <span class="number">0</span>,</span><br><span class="line">            options: .curveEaseInOut,</span><br><span class="line">            animations: &#123;</span><br><span class="line">                <span class="keyword">let</span> point = <span class="type">CGPoint</span>(</span><br><span class="line">                    x: selectedButton.center.x,</span><br><span class="line">                    y: selectedButton.frame.maxY - <span class="number">1</span></span><br><span class="line">                )</span><br><span class="line"></span><br><span class="line">                <span class="keyword">self</span>.indicator.center = point</span><br><span class="line">            &#125;,</span><br><span class="line">            completion: <span class="literal">nil</span></span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidLayoutSubviews</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">super</span>.viewDidLayoutSubviews()</span><br><span class="line"></span><br><span class="line">        animate(index: selectedIndex)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">CustomTabBarController</span>: <span class="title">UITabBarControllerDelegate</span> </span>&#123;</span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">tabBar</span><span class="params">(<span class="number">_</span> tabBar: UITabBar, didSelect item: UITabBarItem)</span></span> &#123;</span><br><span class="line">        <span class="keyword">guard</span></span><br><span class="line">            <span class="keyword">let</span> items = tabBar.items,</span><br><span class="line">            <span class="keyword">let</span> index = items.firstIndex(of: item)</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        animate(index: index)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>In iOS 13, we need to use <code>viewDidAppear</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidAppear</span><span class="params">(<span class="number">_</span> animated: Bool)</span></span> &#123;</span><br><span class="line">    <span class="keyword">super</span>.viewDidAppear(animated)</span><br><span class="line"></span><br><span class="line">    moveIndicator(index: selectedIndex, animated: <span class="literal">false</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-05-25T14:12:06.000Z" title="2019-05-25T14:12:06.000Z">2019-05-25</time><span class="level-item">7 minutes read (About 997 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/Understanding-socket-and-port-in-TCP/">Understanding socket and port in TCP</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/287">#287</a></strong></p>
<p>When digging into the world of TCP, I get many terminologies I don’t know any misconceptions. But with the help of those geeks on SO, the problems were demystified. Now it’s time to sum up and share with others :D</p>
<h2 id="What-defines-a-unique-connection"><a href="#What-defines-a-unique-connection" class="headerlink" title="What defines a unique connection ?"></a>What defines a unique connection ?</h2><p>There are 5 elements that identify a connection. They call them 5-tuple</p>
<ol>
<li><p>Protocol. This is often omitted as it is understood that we are talking about TCP, which leaves 4.</p>
</li>
<li><p>Source IP address.</p>
</li>
<li><p>Source port.</p>
</li>
<li><p>Target P address.</p>
</li>
<li><p>Target port.</p>
</li>
</ol>
<h2 id="Does-TCP-listen-on-one-port-and-talk-on-another-port"><a href="#Does-TCP-listen-on-one-port-and-talk-on-another-port" class="headerlink" title="Does TCP listen on one port and talk on another port ?"></a>Does TCP listen on one port and talk on another port ?</h2><p>No. This is a common misconception. TCP listens on 1 port and talk on that same port. If clients make multiple TCP connection to server. It’s the client OS that must generate different random source ports, so that server can see them as unique connections</p>
<h2 id="What-is-the-maximum-number-of-concurrent-TCP-connections-that-a-server-can-handle-in-theory"><a href="#What-is-the-maximum-number-of-concurrent-TCP-connections-that-a-server-can-handle-in-theory" class="headerlink" title="What is the maximum number of concurrent TCP connections that a server can handle, in theory ?"></a>What is the maximum number of concurrent TCP connections that a server can handle, in theory ?</h2><p>A single listening port can accept more than one connection simultaneously.There is a ‘64K’ limit that is often cited, but that is per client per server port, and needs clarifying.</p>
<p>If a client has many connections to the same port on the same destination, then three of those fields will be the same — only source_port varies to differentiate the different connections. Ports are 16-bit numbers, therefore the maximum number of connections any given client can have to any given host port is 64K.</p>
<p>However, multiple clients can each have up to 64K connections to some server’s port, and if the server has multiple ports or either is multi-homed then you can multiply that further</p>
<p>So the real limit is file descriptors. Each individual socket connection is given a file descriptor, so the limit is really the number of file descriptors that the system has been configured to allow and resources to handle. The maximum limit is typically up over 300K, but is configurable e.g. with sysctl</p>
<h2 id="Concurrent-connection-request-vs-Concurrent-open-connection"><a href="#Concurrent-connection-request-vs-Concurrent-open-connection" class="headerlink" title="Concurrent connection request vs Concurrent open connection"></a>Concurrent connection request vs Concurrent open connection</h2><p>When clients want to make TCP connection with server, this request will be queued in server ‘s backlog queue. This backlog queue size is small (about 5–10), and this size limits the number of concurrent connection requests. However, server quickly pick connection request from that queue and accept it. Connection request which is accepted are called open connection. The number of concurrent open connections is limited by server ‘s resources allocated for file descriptor.</p>
<h2 id="Why-connection-is-rejected-after-successful-TCP-handshake"><a href="#Why-connection-is-rejected-after-successful-TCP-handshake" class="headerlink" title="Why connection is rejected after successful TCP handshake ?"></a>Why connection is rejected after successful TCP handshake ?</h2><p>It’s normal. When server receive connection request from client (by receiving SYN), it will then response with SYN, ACK, hence cause successful TCP handshake. But this request are stills in backlog queue.</p>
<p>But, if the application process exceeds the limit of max file descriptors it can use, then when server calls accept, then it realizes that there are no file descriptors available to be the allocated for the socket and fails the accept call and the TCP connection sending a FIN to other side</p>
<h2 id="What-are-active-and-passive-socket"><a href="#What-are-active-and-passive-socket" class="headerlink" title="What are active and passive socket ?"></a>What are active and passive socket ?</h2><p>Sockets come in two primary flavors. An active socket is con­nect­ed to a remote active socket via an open data con­nec­tion… A passive socket is not con­nect­ed, but rather awaits an in­com­ing con­nec­tion, which will spawn a new active socket once a con­nec­tion is es­tab­lished</p>
<p>Each port can have a single passive socket binded to it, await­ing in­com­ing con­nec­tions, and mul­ti­ple active sockets, each cor­re­spond­ing to an open con­nec­tion on the port. It’s as if the factory worker is waiting for new mes­sages to arrive (he rep­re­sents the passive socket), and when one message arrives from a new sender, he ini­ti­ates a cor­re­spon­dence (a con­nec­tion) with them by del­e­gat­ing someone else (an active socket) to ac­tu­al­ly read the packet and respond back to the sender if nec­es­sary. This permits the factory worker to be free to receive new packets</p>
<h2 id="Where-to-go-from-here"><a href="#Where-to-go-from-here" class="headerlink" title="Where to go from here"></a>Where to go from here</h2><p>Here are some more links to help you explore further</p>
<ul>
<li><a href="http://stackoverflow.com/questions/152457/what-is-the-difference-between-a-port-and-a-socket">What is the difference between a port and a socket?</a></li>
<li><a href="http://stackoverflow.com/questions/4696812/passive-and-active-sockets">Passive and active sockets</a></li>
<li><a href="http://stackoverflow.com/questions/3870260/why-will-a-tcp-server-send-a-fin-immediately-after-accepting-a-connection">Why will a TCP Server send a FIN immediately after accepting a connection?</a></li>
<li><a href="http://stackoverflow.com/questions/2332741/what-is-the-theoretical-maximum-number-of-open-tcp-connections-that-a-modern-lin">What is the theoretical maximum number of open TCP connections that a modern Linux box can have</a></li>
<li><a href="http://stackoverflow.com/questions/114874/socket-listen-backlog-parameter-how-to-determine-this-value">socket listen backlog parameter, how to determine this value?</a></li>
<li><a href="http://stackoverflow.com/questions/4253454/question-about-listening-and-backlog-for-sockets">Question about listening and backlog for sockets</a></li>
<li><a href="http://stackoverflow.com/questions/1752219/rejecting-a-tcp-connection-before-its-being-accepted">Rejecting a TCP connection before it’s being accepted?</a></li>
<li><a href="http://stackoverflow.com/questions/6590181/best-way-to-generate-million-tcp-connection">Best way to generate million tcp connection</a></li>
<li><a href="http://stackoverflow.com/questions/985431/max-parallel-http-connections-in-a-browser">Max parallel http connections in a browser?</a></li>
<li><a href="http://stackoverflow.com/questions/2831434/how-to-retain-one-million-simultaneous-tcp-connections">How to retain one million simultaneous TCP connections?</a></li>
<li><a href="http://stackoverflow.com/questions/7735618/tcp-rst-packet-details">TCP RST packet details</a></li>
<li><a href="http://stackoverflow.com/questions/15761436/how-many-tuples-are-there-in-a-connection">How many tuples are there in a connection?</a></li>
<li><a href="http://stackoverflow.com/questions/15761776/does-tcp-use-another-port-for-sending-data">Does TCP use another port for sending data?</a></li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-05-24T09:38:15.000Z" title="2019-05-24T09:38:15.000Z">2019-05-24</time><span class="level-item">3 minutes read (About 441 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-use-Gradle-Kotlin-DSL-in-Android/">How to use Gradle Kotlin DSL in Android</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/285">#285</a></strong></p>
<h2 id="kts"><a href="#kts" class="headerlink" title="kts"></a>kts</h2><p>settings.gradle.kts</p>
<figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">include(<span class="string">":app"</span>)</span><br></pre></td></tr></table></figure>

<p>build.gradle.kts</p>
<figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.gradle.kotlin.dsl.apply</span><br><span class="line"><span class="keyword">import</span> org.gradle.kotlin.dsl.dependencies</span><br><span class="line"><span class="keyword">import</span> org.gradle.kotlin.dsl.kotlin</span><br><span class="line"><span class="keyword">import</span> org.gradle.kotlin.dsl.*</span><br><span class="line"><span class="keyword">import</span> org.jetbrains.kotlin.config.KotlinCompilerVersion</span><br><span class="line"></span><br><span class="line">plugins &#123;</span><br><span class="line">    id(<span class="string">"com.android.application"</span>)</span><br><span class="line">    kotlin(<span class="string">"android"</span>)</span><br><span class="line">    kotlin(<span class="string">"android.extensions"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//apply &#123;</span></span><br><span class="line"><span class="comment">//    from("$rootDir/tools/grgit.gradle")</span></span><br><span class="line"><span class="comment">//    from("$rootDir/buildSrc/quality.gradle.kts")</span></span><br><span class="line"><span class="comment">//    from("$rootDir/tools/ktlint.gradle")</span></span><br><span class="line"><span class="comment">//    from("$rootDir/tools/detekt.gradle")</span></span><br><span class="line"><span class="comment">//&#125;</span></span><br><span class="line"></span><br><span class="line">android &#123;</span><br><span class="line">    compileSdkVersion(<span class="number">28</span>)</span><br><span class="line">    flavorDimensions(<span class="string">"default"</span>)</span><br><span class="line"></span><br><span class="line">    defaultConfig &#123;</span><br><span class="line">        applicationId = <span class="string">"com.onmyway133.myapp"</span></span><br><span class="line">        minSdkVersion(<span class="number">26</span>)</span><br><span class="line">        targetSdkVersion(<span class="number">28</span>)</span><br><span class="line"><span class="comment">//        versionCode = ext.get("gitCommitCount") as? Int</span></span><br><span class="line">        versionCode = <span class="number">1</span></span><br><span class="line">        versionName = <span class="string">"1.0"</span></span><br><span class="line">        testInstrumentationRunner = <span class="string">"androidx.test.runner.AndroidJUnitRunner"</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    signingConfigs &#123;</span><br><span class="line">        create(<span class="string">"release"</span>) &#123;</span><br><span class="line">            keyAlias = <span class="string">"keyalias"</span></span><br><span class="line">            keyPassword = <span class="string">"keypassword"</span></span><br><span class="line">            storePassword = <span class="string">"storepassword"</span></span><br><span class="line">            storeFile = file(<span class="string">"/Users/khoa/Android/Key/keystore"</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    buildTypes &#123;</span><br><span class="line">        getByName(<span class="string">"debug"</span>) &#123;</span><br><span class="line">            signingConfig = signingConfigs.getByName(<span class="string">"debug"</span>)</span><br><span class="line">            isMinifyEnabled = <span class="literal">true</span></span><br><span class="line">            proguardFiles(getDefaultProguardFile(<span class="string">"proguard-android-optimize.txt"</span>), <span class="string">"<span class="variable">$project</span>.rootDir/tools/proguard-rules-debug.pro"</span>)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        getByName(<span class="string">"release"</span>) &#123;</span><br><span class="line">            signingConfig = signingConfigs.getByName(<span class="string">"release"</span>)</span><br><span class="line">            isMinifyEnabled = <span class="literal">true</span></span><br><span class="line">            isShrinkResources = <span class="literal">true</span></span><br><span class="line">            proguardFiles(getDefaultProguardFile(<span class="string">"proguard-android-optimize.txt"</span>), <span class="string">"<span class="variable">$project</span>.rootDir/tools/proguard-rules.pro"</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    productFlavors &#123;</span><br><span class="line">        create(<span class="string">"staging"</span>) &#123;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        create(<span class="string">"production"</span>) &#123;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    lintOptions &#123;</span><br><span class="line">        lintConfig = file(<span class="string">"<span class="variable">$project</span>.rootDir/tools/lint-rules.xml"</span>)</span><br><span class="line">        htmlOutput = file(<span class="string">"<span class="variable">$project</span>.buildDir/outputs/lint/lint.html"</span>)</span><br><span class="line">        xmlReport = <span class="literal">false</span></span><br><span class="line">        htmlReport = <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">dependencies &#123;</span><br><span class="line">    implementation(fileTree(mapOf(<span class="string">"dir"</span> to <span class="string">"libs"</span>, <span class="string">"include"</span> to listOf(<span class="string">"*.jar"</span>))))</span><br><span class="line">    implementation(kotlin(<span class="string">"stdlib-jdk7"</span>, KotlinCompilerVersion.VERSION))</span><br><span class="line">    implementation(<span class="string">"androidx.appcompat:appcompat:1.0.2"</span>)</span><br><span class="line">    implementation(<span class="string">"androidx.core:core-ktx:1.0.2"</span>)</span><br><span class="line">    implementation(<span class="string">"androidx.constraintlayout:constraintlayout:1.1.3"</span>)</span><br><span class="line">    implementation(<span class="string">"com.google.android.material:material:1.0.0"</span>)</span><br><span class="line">    testImplementation(<span class="string">"junit:junit:4.12"</span>)</span><br><span class="line">    androidTestImplementation(<span class="string">"androidx.test:runner:1.1.1"</span>)</span><br><span class="line">    androidTestImplementation(<span class="string">"androidx.test.espresso:espresso-core:3.1.1"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">tasks.getByName(<span class="string">"check"</span>).dependsOn(<span class="string">"lint"</span>)</span><br></pre></td></tr></table></figure>

<p>tools/quality.gradle.kts</p>
<figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">plugins &#123;</span><br><span class="line">    id(<span class="string">"findbugs"</span>)</span><br><span class="line">    id(<span class="string">"pmd"</span>)</span><br><span class="line">    id(<span class="string">"checkstyle"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">tasks &#123;</span><br><span class="line">    <span class="keyword">val</span> findbugs <span class="keyword">by</span> registering(FindBugs::<span class="class"><span class="keyword">class</span>) </span>&#123;</span><br><span class="line">        ignoreFailures = <span class="literal">false</span></span><br><span class="line">        effort = <span class="string">"max"</span></span><br><span class="line">        reportLevel = <span class="string">"low"</span></span><br><span class="line">        classes = files(<span class="string">"<span class="variable">$project</span>.buildDir/intermediates/javac"</span>)</span><br><span class="line"></span><br><span class="line">        setExcludeFilter(file(<span class="string">"<span class="variable">$rootProject</span>.rootDir/tools/findbugs-exclude.xml"</span>))</span><br><span class="line"></span><br><span class="line">        source = fileTree(<span class="string">"src/main/java/"</span>)</span><br><span class="line">        classpath = files()</span><br><span class="line"></span><br><span class="line">        reports &#123;</span><br><span class="line">            xml.isEnabled = <span class="literal">false</span></span><br><span class="line">            html.isEnabled = <span class="literal">true</span></span><br><span class="line">            html.destination = file(<span class="string">"<span class="variable">$project</span>.buildDir/outputs/findbugs/findbugs-output.html"</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> pmd <span class="keyword">by</span> registering(Pmd::<span class="class"><span class="keyword">class</span>) </span>&#123;</span><br><span class="line">        ruleSetFiles = files(<span class="string">"<span class="subst">$&#123;project.rootDir&#125;</span>/tools/pmd-rules.xml"</span>)</span><br><span class="line">        ignoreFailures = <span class="literal">false</span></span><br><span class="line">        ruleSets = listOf&lt;String&gt;()</span><br><span class="line"></span><br><span class="line">        fileTree()</span><br><span class="line">        source(fileTree(baseDir = <span class="string">"src/main/java"</span>))</span><br><span class="line">        include(<span class="string">"**/*.kt"</span>)</span><br><span class="line">        exclude(<span class="string">"**/gen/**"</span>)</span><br><span class="line"></span><br><span class="line">        reports &#123;</span><br><span class="line">            xml.isEnabled = <span class="literal">false</span></span><br><span class="line">            html.isEnabled = <span class="literal">true</span></span><br><span class="line">            html.destination = file(<span class="string">"<span class="variable">$project</span>.buildDir/outputs/pmd/pmd.html"</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> checkstyle <span class="keyword">by</span> registering(Checkstyle::<span class="class"><span class="keyword">class</span>) </span>&#123;</span><br><span class="line">        description = <span class="string">"Check code standard"</span></span><br><span class="line">        group = <span class="string">"verification"</span></span><br><span class="line"></span><br><span class="line">        configFile = file(<span class="string">"<span class="variable">$project</span>.rootDir/tools/checkstyle.xml"</span>)</span><br><span class="line">        source(fileTree(baseDir = <span class="string">"src"</span>))</span><br><span class="line">        include(<span class="string">"**/*.kt"</span>)</span><br><span class="line">        exclude(<span class="string">"**/gen/**"</span>)</span><br><span class="line"></span><br><span class="line">        classpath = files()</span><br><span class="line">        ignoreFailures = <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://guides.gradle.org/migrating-build-logic-from-groovy-to-kotlin">https://guides.gradle.org/migrating-build-logic-from-groovy-to-kotlin</a></li>
<li><a href="https://github.com/gradle/kotlin-dsl/blob/master/samples/hello-android/app/build.gradle.kts">https://github.com/gradle/kotlin-dsl/blob/master/samples/hello-android/app/build.gradle.kts</a></li>
</ul>
<h2 id="About-Gradle"><a href="#About-Gradle" class="headerlink" title="About Gradle"></a>About Gradle</h2><ul>
<li><a href="https://medium.com/@wasyl/understanding-android-gradle-build-files-e4b45b73cc4c">Understanding Android Gradle build files</a></li>
<li><a href="https://developer.android.com/studio/build/index.html">Configure your build</a></li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-05-23T16:29:00.000Z" title="2019-05-23T16:29:00.000Z">2019-05-23</time><span class="level-item">42 minutes read (About 6277 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/Learning-VoIP-RTP-and-SIP-(aka-awesome-pjsip)/">Learning VoIP, RTP and SIP (aka awesome pjsip)</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/284">#284</a></strong></p>
<p>Before working with Windows Phone and iOS, my life involved researching VoIP. That was to build a C library for voice over IP functionality for a very popular app, and that was how I got started in open source.</p>
<p>The library I was working with were <a href="https://www.linphone.org/">Linphone</a> and <a href="http://pjsip.org/">pjsip</a>. I learn a lot of UDP and SIP protocol, how to build C library for consumption in iOS, Android and Windows Phone, how challenging it is to support C++ component and thread pool in Windows Phone 8, how to tweak entropy functionality in OpenSSL to make it compile in Windows Phone 8, how hard it was to debug C code with Android NDK. It was time when I needed to open Visual Studio, Xcode and Eclipse IDE at the same time, joined <a href="https://www.google.no/search?q=lists.pjsip.org+onmyway133&oq=lists.pjsip.org+onmyway133">mailing list</a> and followed <a href="http://dir.gmane.org/gmane.comp.voip.pjsip">gmane</a>. Lots of good memories.</p>
<p>Today I find that those bookmarks I made are still available on Safari, so I think I should share here. I need to remove many articles because they are outdated or not available anymore. These are the resources that I actually read and used, not some random links. Hopefully you can find something useful.</p>
<p>This post focuses more about resources for pjsip on client and how to talk directly and with/without a proxy server.</p>
<h2 id="First-of-all"><a href="#First-of-all" class="headerlink" title="First of all"></a>First of all</h2><p>Here are some of the articles and open sources made by me regarding VoIP, hope you find it useful</p>
<ul>
<li><p><a href="https://github.com/onmyway133/rtpproxy">rtpproxy</a>: I forked from <a href="http://www.rtpproxy.org/">http://www.rtpproxy.org/</a> and changed code to make it support for IP handover. It means the proxy can handle when IP changes from 3G, 4G to Wifi and to reduce chances of attacks</p>
</li>
<li><p><a href="https://github.com/onmyway133/blog/issues/157">Jitter buffer in VoIP</a></p>
</li>
<li><p><a href="https://github.com/onmyway133/blog/issues/155">How to calculate packet size in VoIP</a></p>
</li>
</ul>
<h2 id="VoIP-overview"><a href="#VoIP-overview" class="headerlink" title="VoIP overview"></a>VoIP overview</h2><blockquote>
<p><strong>Voice over Internet Protocol</strong> (also <strong>voice over IP</strong>, <strong>VoIP</strong> or <strong>IP telephony</strong>) is a methodology and group of technologies for the delivery of <a href="https://en.wikipedia.org/wiki/Voice_communication">voice communications</a> and <a href="https://en.wikipedia.org/wiki/Multimedia">multimedia</a> sessions over <a href="https://en.wikipedia.org/wiki/Internet_Protocol">Internet Protocol</a> (IP) networks, such as the <a href="https://en.wikipedia.org/wiki/Internet">Internet</a></p>
</blockquote>
<ul>
<li><p><a href="http://toncar.cz/Tutorials/VoIP/index.html">Voice over IP Overview</a>: introduction to VoIP concepts, H.323 and SIP protocol</p>
</li>
<li><p><a href="https://en.wikipedia.org/wiki/Voice_over_IP">Voice over Internet Protocol</a> the wikipedia article contains very foundation knowledge</p>
</li>
<li><p><a href="https://www.voip-info.org/open-source-voip-software">Open Source VOIP Software</a>: this is a must read. Lots of foundation articles about client and server functionalities, SIP, TURN, RTP, and many open sources framworks</p>
</li>
<li><p><a href="https://planetcalc.com/3144/">VOIP call bandwidth</a>: a very key factor in VoIP application is bandwidth consumption, it’s good to not going far beyond the accepted limit</p>
</li>
<li><p><a href="https://www.voip-info.org/routers-sip-alg">Routers SIP ALG</a>: this is the most annoying, because there is NAT and many types of NAT, also router with SIP ALG</p>
</li>
<li><p><a href="http://sipsimpleclient.org/projects/sipsimpleclient/wiki/SipCoreApiDocumentation">SIP SIMPLE Client SDK</a>: introduction to SIP core library, but it gives an overview of how</p>
</li>
</ul>
<h2 id="SIP"><a href="#SIP" class="headerlink" title="SIP"></a>SIP</h2><blockquote>
<p>The <strong>Session Initiation Protocol</strong> (<strong>SIP</strong>) is a <a href="https://en.wikipedia.org/wiki/Communications_protocol">communications protocol</a> for <a href="https://en.wikipedia.org/wiki/Signaling_(telecommunications)">signaling</a> and controlling multimedia <a href="https://en.wikipedia.org/wiki/Communication_session">communication sessions</a> in applications of <a href="https://en.wikipedia.org/wiki/Internet_telephony">Internet telephony</a> for voice and video calls, in private IP telephone systems, as well as in <a href="https://en.wikipedia.org/wiki/Instant_messaging">instant messaging</a> over <a href="https://en.wikipedia.org/wiki/Internet_Protocol">Internet Protocol</a> (IP) networks.</p>
</blockquote>
<p><img src="https://cdn-images-1.medium.com/max/2000/0*QBmsgWtKc5q30xgb.jpeg" alt=""></p>
<ul>
<li><p><a href="https://en.wikipedia.org/wiki/Session_Initiation_Protocol">Session Initiation Protocol</a></p>
</li>
<li><p><a href="https://www.ietf.org/rfc/rfc3261.txt">RFC 3261</a>: to understand SIP, we need to read its standard. I don’t know how many times I read this RFC.</p>
</li>
<li><p><a href="http://www.opensips.org">OpenSIPS</a>: OpenSIPS is a multi-functional, multi-purpose signaling SIP server</p>
</li>
<li><p><a href="http://www.tech-invite.com/fo-sip/tinv-fo-sip-archi.html">SIP protocol structure through an example</a>: this is a must read, it shows very basic but necessary knowledge</p>
</li>
<li><p><a href="http://www.siptutorial.net/SIP/relation.html">Relation among Call, Dialog, Transaction &amp; Message</a>: basic concepts about call, dialog, transaction and message</p>
</li>
<li><p><a href="https://www.microsip.org">microSIP</a>: Open source portable SIP softphone for Windows based on PJSIP stack. I used to use this to test my pjsip tweaked library before building it for mobile</p>
</li>
<li><p><a href="https://code.google.com/archive/p/csipsimple/wikis/WhatIsSIP.wiki">What is SIP</a>: introduction to SIP written by the author of CSipSimple</p>
</li>
<li><p><a href="https://www.onsip.com/blog/sip-proxy-server">What is SIP proxy server</a></p>
</li>
<li><p><a href="https://wiki.wireshark.org/SIP">SIP by Wireshack</a>: introduction to SIP written by Wireshack. I used Wireshack a lot to intercept and debug SIP sessions</p>
</li>
<li><p><a href="http://www.ingate.com/files/Solving_Firewall-NAT_Traversal.pdf">Solving the Firewall/NAT Traversal Issue of SIP</a>: this shows how NAT can be a problem to SIP applications and how NAT traversal works</p>
</li>
<li><p><a href="https://www.codeproject.com/Articles/97657/Introduction-to-SIP-for-Java-C-and-VB-Developers">Introduction to SIP for Java, C#, and VB Developers</a></p>
</li>
<li><p><a href="https://www.doubango.org/sipml5/">SipML5</a> SIP client written in Javascript</p>
</li>
<li><p><a href="https://wiki.asterisk.org/wiki/display/AST/SIP+Retransmissions">SIP Retransmissions</a>: what and how to handle retransmission</p>
</li>
<li><p><a href="https://tools.ietf.org/html/draft-ietf-sipping-dialogusage-06">draft-ietf-sipping-dialogusage-06</a>: this is a draft about Multiple Dialog Usages in the Session Initiation Protocol</p>
</li>
<li><p><a href="https://docs.switzernet.com/people/emin-gabrielyan/070403-sip-invite-cancel/">Creating and sending INVITE and CANCEL SIP text messages</a>: SIP also supports sending text message, not just audio and video packages. This isa good for chat application</p>
</li>
</ul>
<h2 id="SIP-server"><a href="#SIP-server" class="headerlink" title="SIP server"></a>SIP server</h2><ul>
<li><a href="https://www.voip-info.org/kamailio">Kamailio</a>: this is the server that I used, and it plays well with lots of standard SIP clients, including pjsip. Debugging on this server was also a fun story</li>
</ul>
<p><img src="https://cdn-images-1.medium.com/max/2000/0*2bnrKUxdiJMuqO1D.png" alt=""></p>
<ul>
<li><p><a href="http://nil.uniza.sk/sip/nat-fw/configuring-nat-traversal-using-kamailio-31-and-rtpproxy-server">Configuring NAT traversal using Kamailio 3.1 and the Rtpproxy server</a>: I don’t know how many times I had read this post</p>
</li>
<li><p><a href="http://www.thewindowsclub.com/set-up-sip-server-windows">How to set up and use SIP Server on Windows</a>: I used this to test a working SIP server on Windows</p>
</li>
<li><p><a href="https://www.sipwise.org/news/technical/byov-system-spce-as-sbc/">Build your own VoIP System</a></p>
</li>
<li><p><a href="https://puck.nether.net/pipermail/voiceops/2011-May/002512.html">OpenSIPS/Kamailio serving far end nat traversal</a>: discussion about how Kamailio deals with NAT traversal</p>
</li>
<li><p><a href="http://kamailio.org/docs/modules/3.0.x/modules_k/nat_traversal.html">NAT Traversal Module</a>: how NAT traversal works in Kamailio as a module</p>
</li>
</ul>
<h2 id="RFC"><a href="#RFC" class="headerlink" title="RFC"></a>RFC</h2><p>RTP, SIP clients and server need to conform to some predefined protocols to meet standard and to be able to talk with each other. You need to read <a href="https://en.wikipedia.org/wiki/Request_for_Comments">RFC</a> a lot, besides you need to read some drafts.</p>
<ul>
<li><p><a href="https://tools.ietf.org/html/rfc3550">RFC 3550 - RTP: A Transport Protocol for Real-Time Applications</a></p>
</li>
<li><p><a href="https://tools.ietf.org/html/rfc3261">RFC 3261 - SIP: Session Initiation Protocol</a></p>
</li>
<li><p><a href="https://tools.ietf.org/id/draft-takeda-symmetric-nat-traversal-00.txt">Symmetric NAT Traversal using STUN</a></p>
</li>
<li><p><a href="https://tools.ietf.org/html/rfc3842">RFC 3842 - A Message Summary and Message Waiting Indication Event Package for the Session Initiation Protocol (SIP)</a></p>
</li>
</ul>
<h2 id="NAT"><a href="#NAT" class="headerlink" title="NAT"></a>NAT</h2><p>NAT solves the problem with lack of IP, but it causes lots of problem for SIP applications, and for me as well 😂</p>
<p><img src="https://cdn-images-1.medium.com/max/2000/0*CyseeMdKG6RWTsoM.gif" alt=""></p>
<ul>
<li><p><a href="https://en.wikipedia.org/wiki/Network_address_translation">Network address translation</a>: Network address translation (NAT) is a method of remapping one IP address space into another by modifying network address information in the IP header of packets while they are in transit across a traffic routing device</p>
</li>
<li><p><a href="https://kb.smartvox.co.uk/voip-sip/sip-nat-problem/">SIP and NAT: Why is it a problem?</a></p>
</li>
<li><p><a href="http://www.freeccnaworkbook.com/workbooks/ccna/configuring-port-address-translation-pat-many-to-one">Configuring Port Address Translation (PAT)</a>: how to configure port forwarding</p>
</li>
<li><p><a href="http://www.think-like-a-computer.com/2011/09/16/types-of-nat/">Types Of NAT Explained (Port Restricted NAT, etc)</a>: This is a must read. I didn’t expect there’s many kinds of NAT in real life, and how each type affects SIP application in its own way</p>
</li>
<li><p><a href="http://www.think-like-a-computer.com/2011/03/14/one-way-audio-voip/">One Way Audio SIP Fix</a>: sometimes we get the problem that only 1 person can speak, this talks about why</p>
</li>
<li><p><a href="http://freshmeat.sourceforge.net/articles/nat-traversal-for-the-sip-protocol">NAT traversal for the SIP protocol</a>: explains RTP, SIP and NAT</p>
</li>
<li><p><a href="http://www.goto.info.waseda.ac.jp/~wei/file/wei-apan-v10.pdf">A New Method for Symmetric NAT Traversal in UDP and TCP</a></p>
</li>
<li><p><a href="https://voipstudio.com/sip-nat-traversal/">SIP NAT Traversal</a>: This is a must read. How to make SIP work under NAT</p>
</li>
<li><p><a href="http://www.viagenie.ca/publications/2008-09-24-astricon-stun-turn-ice.pdf">NAT and Firewall Traversal with STUN / TURN / ICE</a>: pjsip and Kamailio actually supports STUN, TURN and ICE protocol. Learn about these concepts and how to make it work</p>
</li>
<li><p><a href="http://www.pjsip.org/pjnath/docs/html/group__nat__intro.htm">Introduction to Network Address Translation (NAT) and NAT Traversal</a></p>
</li>
</ul>
<h2 id="TCP"><a href="#TCP" class="headerlink" title="TCP"></a>TCP</h2><p>Learn how TCP helps SIP in initiating session and to turn in TCP mode for package sending</p>
<p><img src="https://cdn-images-1.medium.com/max/2826/0*OKLXqTzL1z4-OhZO.png" alt=""></p>
<ul>
<li><p><a href="https://en.wikipedia.org/wiki/Transmission_Control_Protocol">Transmission Control Protocol</a>: The Transmission Control Protocol (TCP) is one of the main protocols of the Internet protocol suite. It originated in the initial network implementation in which it complemented the Internet Protocol (IP)</p>
</li>
<li><p><a href="https://en.wikipedia.org/wiki/Network_socket#Datagram_socket">Datagram socket</a>: A datagram socket is a type of network socket which provides a connectionless point for sending or receiving data packets.[2] Each packet sent or received on a datagram socket is individually addressed and routed</p>
</li>
<li><p><a href="https://stackoverflow.com/questions/7735618/tcp-rst-packet-details">TCP RST packet details</a>: learn the important of RST bit</p>
</li>
<li><p><a href="https://stackoverflow.com/questions/11410754/rst-packet-sent-from-application-when-tcp-connection-not-getting-closed-properly?rq=1">RST packet sent from application when TCP connection not getting closed properly</a></p>
</li>
<li><p><a href="https://stackoverflow.com/questions/3870260/why-will-a-tcp-server-send-a-fin-immediately-after-accepting-a-connection">Why will a TCP Server send a FIN immediately after accepting a connection?</a></p>
</li>
<li><p><a href="https://blogs.technet.microsoft.com/networking/2009/08/12/where-do-resets-come-from-no-the-stork-does-not-bring-them/">Where do resets come from? (No, the stork does not bring them.)</a>: learn about 3 ways handshake in TCP connection</p>
</li>
<li><p><a href="http://www.linuxjournal.com/files/linuxjournal.com/linuxjournal/articles/023/2333/2333s2.html">TCP listen() Backlog</a></p>
</li>
<li><p><a href="http://www.freesoft.org/CIE/Course/Section4/6.htm">Sockets and Ports</a>: Do not confuse between socket and port</p>
</li>
<li><p><a href="http://www.pasieronen.com/publications/NRCTR2008002.pdf">TCP Wake-Up: Reducing Keep-Alive Traffic in Mobile IPv4 and IPsec NAT Traversal</a></p>
</li>
<li><p><a href="https://code.google.com/archive/p/csipsimple/issues/1582">failed to register using tcp only</a></p>
</li>
<li><p><a href="https://code.google.com/archive/p/csipsimple/issues/705">TCP vs UDP</a></p>
</li>
</ul>
<h2 id="TLS"><a href="#TLS" class="headerlink" title="TLS"></a>TLS</h2><p>Learn about <a href="https://en.wikipedia.org/wiki/Transport_Layer_Security">Transport Layer Security</a> and SSL, especially openSSL for how to secure SIP connection. The interesting thing is to read code in pjsip about how it uses openSSL to encrypt messages</p>
<ul>
<li><p><a href="https://trac.pjsip.org/repos/wiki/TLS">Configuring PJSIP with TLS</a></p>
</li>
<li><p><a href="https://stackoverflow.com/questions/8178963/why-tls-for-sip">Why TLS for SIP</a></p>
</li>
<li><p><a href="http://excelsupport.dialogic.com/imgpubs/webhelp/sip_over_tls_ov.htm">SIP Signaling Over TLS</a></p>
</li>
<li><p><a href="https://www.techrepublic.com/blog/data-center/ssl-tls-certificates-what-you-need-to-know/">SSL/TLS certificates: What you need to know</a></p>
</li>
<li><p><a href="http://nil.uniza.sk/network-security/tls/configuring-tls-support-kamailio-31-howto">Configuring TLS support in Kamailio 3.1 — Howto</a>: learn how to enable TLS mode in Kamailio</p>
</li>
<li><p><a href="https://www.voip-info.org/sip-tls">SIP TLS</a>: how to configure TLS in Asterisk</p>
</li>
</ul>
<h2 id="ICE"><a href="#ICE" class="headerlink" title="ICE"></a>ICE</h2><p>Learn about <a href="https://en.wikipedia.org/wiki/Interactive_Connectivity_Establishment">Interactive Connectivity Establishment</a>, another way to workaround NAT</p>
<ul>
<li><p><a href="https://www.slideshare.net/oej/sip-2012-ice-nat-traversal-for-media">SIP 2012:: ICE — NAT traversal for media</a></p>
</li>
<li><p><a href="https://blog.pjsip.org/2007/04/06/introducing-pjnath-open-source-ice-stun-and-turn/">Introducing pjnath — Open Source ICE, STUN, and TURN for NAT Traversal</a></p>
</li>
<li><p><a href="http://www.pjsip.org/pjmedia/docs/html/group__PJMEDIA__TRANSPORT__ICE.htm">ICE Media Transport</a></p>
</li>
</ul>
<h2 id="STUN-and-TURN"><a href="#STUN-and-TURN" class="headerlink" title="STUN and TURN"></a>STUN and TURN</h2><p>Learn about <a href="https://en.wikipedia.org/wiki/STUN">Session Traversal Utilities for NAT</a> and <a href="https://en.wikipedia.org/wiki/Traversal_Using_Relays_around_NAT">Traversal Using Relays around NAT</a>, another way to workaround NAT</p>
<ul>
<li><p><a href="https://www.voip-info.org/stun">STUN</a>: STUN (Simple Traversal of UDP through NATs (Network Address Translation)) is a protocol for assisting devices behind a NAT firewall or router with their packet routing. RFC 5389 redefines the term STUN as ‘Session Traversal Utilities for NAT’.</p>
</li>
<li><p><a href="https://stackoverflow.com/questions/13501288/what-is-stun-and-does-it-need-a-port-forwarded-server">What is STUN and does it need a port-forwarded server?</a></p>
</li>
<li><p><a href="http://turnserver.sourceforge.net">TURN server</a></p>
</li>
</ul>
<h2 id="ALG"><a href="#ALG" class="headerlink" title="ALG"></a>ALG</h2><p>Learn about [Application Layer Gateway](<a href="http://Application">http://Application</a> Layer Gateway) and how it affects your SIP application. This component knows how to deal and modify your SIP message, so it might introduce unexpected behaviours.</p>
<ul>
<li><p><a href="https://support.gradwell.com/hc/en-gb/articles/215553503">What is SIP ALG and why does Gradwell recommend that I turn it off?</a></p>
</li>
<li><p><a href="https://www.juniper.net/documentation/software/junos-security/junos-security95/junos-security-swconfig-security/sip-alg-understanding.html">Understanding the SIP ALG</a></p>
</li>
<li><p><a href="http://www.voiptuts.com/2011/02/what-is-sip-alg-application-layer.html">What Is Sip ALG (Application Layer Gateway) Voip firewall</a></p>
</li>
<li><p><a href="http://www.watchguard.com/help/docs/wsm/11/en-us/content/en-us/proxies/sip/sip_proxy_about_c.html">About the SIP ALG</a></p>
</li>
<li><p><a href="https://www.juniper.net/documentation/software/junos-security/junos-security96/junos-security-swconfig-security/id-60290.html">Understanding SIP with Network Address Translation (NAT)</a>: This is a must read, a very thorough document</p>
</li>
</ul>
<h2 id="Voice-quality"><a href="#Voice-quality" class="headerlink" title="Voice quality"></a>Voice quality</h2><p>Learn about voice quality, bandwidth and fixing delay in audio</p>
<p><img src="https://cdn-images-1.medium.com/max/2000/1*Gst1j53g8PaqkBuP6RbZZg.png" alt=""></p>
<ul>
<li><p><a href="https://www.voipmechanic.com/phoneandvoicequality_2.htm">VoIP — fixing voice quality</a></p>
</li>
<li><p><a href="https://www.lifewire.com/delay-in-voip-3426312">What is Delay in VoIP?</a></p>
</li>
<li><p><a href="https://www.cisco.com/c/en/us/support/docs/voice/voice-quality/5125-delay-details.html">Understanding Delay in Packet Voice Networks</a></p>
</li>
<li><p><a href="https://hubpages.com/technology/Reducing-the-SIP-Packet-Size-in-VoIP">Reducing the SIP Packet Size in VoIP</a></p>
</li>
<li><p><a href="https://www.lifewire.com/what-affects-voice-quality-in-voip-calls-3426724">What Affects Voice Quality in VoIP Calls</a></p>
</li>
<li><p><a href="https://www.voip-info.org/5-curable-causes-of-poor-voip-call-quality">5 Curable Causes of Poor VoIP Call Quality</a></p>
</li>
<li><p><a href="https://kb.smartvox.co.uk/voip-sip/rtp-jitter-audio-quality-voip/">RTP, Jitter and audio quality in VoIP</a>: learn about the important of jitter and RTP</p>
</li>
<li><p><a href="https://www.comsys.rwth-aachen.de/fileadmin/papers/2012/2012-aktas-new2an-codecswitching.pdf">An Adaptive Codec Switching Scheme for SIP-based VoIP</a>: explain codec switching during call in SIP based VoIP</p>
</li>
<li><p><a href="https://searchunifiedcommunications.techtarget.com/tutorial/VoIP-bandwidth-fundamentals">How to master VoIP bandwidth fundamentals</a></p>
</li>
<li><p><a href="https://www.cisco.com/c/en/us/support/docs/voice/voice-quality/7934-bwidth-consume.html">Voice Over IP — Per Call Bandwidth Consumption</a></p>
</li>
</ul>
<h2 id="Echo"><a href="#Echo" class="headerlink" title="Echo"></a>Echo</h2><p>This is a very common problem in VoIP, sometimes we hear voice from the other and also from us. Learn how echo is made, and how to effectively do echo cancellation</p>
<p><img src="https://cdn-images-1.medium.com/max/2000/0*GyZHcz0TKL_UHdYJ.png" alt=""></p>
<ul>
<li><p><a href="https://www.cisco.com/c/en/us/td/docs/ios/solutions_docs/voip_solutions/EA_ISD.html">Echo Analysis for Voice over IP</a></p>
</li>
<li><p><a href="https://www.speex.org/docs/manual/speex-manual/node7.html#SECTION00740000000000000000">Echo Cancellation</a>: How to use Speex to cancel echo</p>
</li>
<li><p><a href="https://en.wikipedia.org/wiki/Echo_suppression_and_cancellation">Echo suppression and cancellation</a></p>
</li>
<li><p><a href="https://www.voip-info.org/echo-and-sidetone">Echo and Sidetone</a>: A telephone is a duplex device, meaning it is both transmitting and receiving on the same pair of wires. The phone network must ensure that not too much of the caller’s voice is fed back into his or her receiver</p>
</li>
<li><p><a href="https://www.voipmechanic.com/echo-technical.htm">VoIP Echo and how to correct it</a></p>
</li>
<li><p><a href="https://www.voip-info.org/causes-of-echo">Causes of Echo</a></p>
</li>
<li><p><a href="https://stackoverflow.com/questions/18870124/how-software-echo-canceller-works">How software echo canceller works?</a>: I asked about how we use software to do echo cancellation</p>
</li>
</ul>
<h2 id="Dual-Tone"><a href="#Dual-Tone" class="headerlink" title="Dual Tone"></a>Dual Tone</h2><p>Learn how to generate dual tone to make signal in telecommunication</p>
<ul>
<li><p><a href="https://www.mediacollege.com/audio/tone/dtmf.html">DTMF (Dual-Tone Multi-Frequency)</a></p>
</li>
<li><p><a href="https://www.3cx.com/blog/voip-howto/dtmf-rfc2833/">The dance of DTMF, SIP &amp; RFC 2833 — An introduction</a></p>
</li>
<li><p><a href="https://trac.pjsip.org/repos/wiki/FAQ#dtmf">How can I send inband DTMF tones?</a></p>
</li>
</ul>
<h2 id="pjsip"><a href="#pjsip" class="headerlink" title="pjsip"></a>pjsip</h2><blockquote>
<p>PJSIP is a free and <a href="http://www.pjsip.org/about.htm#opensource">open source</a> multimedia communication library written in C language implementing standard based protocols such as SIP, SDP, RTP, STUN, TURN, and ICE. It combines signaling protocol (SIP) with rich multimedia framework and NAT traversal functionality into high level API that is portable and suitable for almost any type of systems ranging from desktops, embedded systems, to mobile handsets.</p>
</blockquote>
<p><img src="https://cdn-images-1.medium.com/max/2000/0*E82pcZW_6lhy8l1H.jpg" alt=""></p>
<ul>
<li><p><a href="http://www.pjsip.org/pjsip/docs/html/group__PJSUA__LIB.htm">PJSUA API — High Level Softphone API</a>: high level usage of pjsip</p>
</li>
<li><p><a href="https://www.scribd.com/document/55939030/Suresh-Report-Voip1">pjsip library architecture</a></p>
</li>
<li><p><a href="https://trac.pjsip.org/repos/">pjsip documentation</a></p>
</li>
</ul>
<p><img src="https://cdn-images-1.medium.com/max/2000/0*e4Lr7TxJlSdQhA-b.png" alt=""></p>
<ul>
<li><p><a href="http://www.pjsip.org/pjsip/docs/html/group__PJSIP__TRANSACT__UTIL.htm">Stateful Operations</a>: common functions to send request statefully</p>
</li>
<li><p><a href="http://www.pjsip.org/pjsip/docs/html/group__PJSIP__ENDPT__STATELESS.htm">Message Creation and Stateless Operations</a>: functions related to send and receive messages</p>
</li>
<li><p><a href="https://trac.pjsip.org/repos/wiki/media-flow#IncomingRTPRTCPPackets">Understanding Media Flow</a>: this is a must read. The media layer is so important, it controls sound, codec and conference bridge.</p>
</li>
</ul>
<p><img src="https://cdn-images-1.medium.com/max/2000/1*oEs7lMDuaSG-En-R7ig-og.png" alt=""></p>
<ul>
<li><p><a href="http://www.pjsip.org/using.htm">Getting Started: Building and Using PJSIP and PJMEDIA</a>: This article describes how to download, customize, build, and use the open source PJSIP and PJMEDIA SIP and media stack</p>
</li>
<li><p><a href="http://www.pjsip.org/pjmedia/docs/html/group__PJMEDIA__CODEC.htm">Codec Framework</a>: pjsip supports multiple codec</p>
</li>
<li><p><a href="http://www.pjsip.org/pjmedia/docs/html/group__PJMED__JBUF.htm">Adaptive jitter buffer</a>: this takes sometime to understand, but it plays an important part in making pjsip work properly regarding buffer handling</p>
</li>
<li><p><a href="http://www.pjsip.org/pjsip/docs/html/group__PJSUA__LIB__ACC.htm">PJSUA-API Accounts Management</a>: how to register account in pjsua</p>
</li>
<li><p><a href="http://www.pjsip.org/pjlib/docs/html/group__pj__dll__target.htm">Building Dynamic Link Libraries (DLL/DSO)</a>: how to build pjsip as a dynamic library</p>
</li>
<li><p><a href="http://www.pjsip.org/pjmedia/docs/html/group__PJMEDIA__CONFIG.htm">Compile time configuration</a>: lots of configuration we can apply to pjsip</p>
</li>
<li><p><a href="http://www.pjsip.org/pjlib/docs/html/group__PJ__POOL__GROUP.htm">Fast Memory Pool</a>: pjsip has its own memory pool. It’s very interesting to look at the source code and learn something new</p>
</li>
<li><p><a href="http://www.pjsip.org/sip_media_features.htm">SIP and Media Features</a></p>
</li>
<li><p><a href="https://trac.pjsip.org/repos/wiki/Using_SIP_TCP">Using SIP TCP Transport</a>: How to enable TCP mode in SIP and to initiate SIP session</p>
</li>
<li><p><a href="http://www.pjsip.org/pjmedia/docs/html/group__PJMEDIA__STEREO.htm">Monochannel and multichannel audio frame converter</a>: interesting read about mono and multi channel</p>
</li>
<li><p><a href="http://www.pjsip.org/pjlib/docs/html/group__PJ__IOQUEUE.htm">IOQueue: I/O Event Dispatching with Proactor Pattern</a>: the code for this is very interesting and plays a fundamental in how pjsip handles events</p>
</li>
<li><p><a href="http://www.pjsip.org/pjlib-util/docs/html/group__PJ__DNS__RESOLVER.htm">DNS Asynchronous/Caching Resolution Engine</a>: how pjsip handles DNS resolution by itself</p>
</li>
</ul>
<p><img src="https://cdn-images-1.medium.com/max/2000/0*VBotMl-b9232q1JL.png" alt=""></p>
<ul>
<li><p><a href="http://www.pjsip.org/pjlib/docs/html/group__PJ__SSL__SOCK.htm">Secure socket I/O</a>: the code for this is important if you want to learn how to use SSL under the hood</p>
</li>
<li><p><a href="http://www.pjsip.org/pjmedia/docs/html/group__PJMEDIA__MF__DTMF__TONE__GENERATOR.htm">Multi-frequency tone generator</a>: I learn a lot how pjsip uses sin wave to generate tone</p>
</li>
<li><p><a href="http://www.pjsip.org/pjsip/docs/html/group__PJSIP__RESOLVE.htm">SIP SRV Server Resolution (RFC 3263 — Locating SIP Servers)</a>: learn the mechanism for how pjsip finds a particular SIP server</p>
</li>
<li><p><a href="http://www.pjsip.org/pjlib/docs/html/group__PJ__EXCEPT.htm">Exception Handling</a>: how to do Try Catch in C</p>
</li>
<li><p><a href="https://trac.pjsip.org/repos/wiki/PJSUA_Locks">Mutex Locks Order in PJSUA-LIB</a>: how multiple locks at each layer helps ensure correction and avoid deadlocks. I had lots of nightmare debugging deadlocks with pjsip 😱</p>
</li>
</ul>
<h2 id="Threading"><a href="#Threading" class="headerlink" title="Threading"></a>Threading</h2><p>pjsip uses <a href="https://en.wikipedia.org/wiki/Thread-local_storage">Local Thread Storage</a> which introduces very cool behaviors</p>
<p><img src="https://cdn-images-1.medium.com/max/2000/0*rD0iy3joZsBXsMYo.png" alt=""></p>
<ul>
<li><p><a href="http://www.pjsip.org/pjlib/docs/html/group__PJ__THREAD.htm">Thread — Operating System Dependent Functionality</a></p>
</li>
<li><p><a href="http://lists.pjsip.org/pipermail/pjsip_lists.pjsip.org/2009-April/006997.html">Threads question</a>: how pjlib handles thread</p>
</li>
<li><p><a href="https://msdn.microsoft.com/en-us/library/windows/desktop/ms686991(v=vs.85).aspx">Using Thread Local Storage</a>: how to use TlsAlloc and TlsFree in Windows</p>
</li>
<li><p><a href="http://www.installsetupconfig.com/win32programming/windowsthreadsprocessapis7_7.html">The Windows Processes and Threads 8</a></p>
</li>
<li><p><a href="https://www.ibm.com/support/knowledgecenter/ssw_ibm_i_61/rzahw/rzahwex1.htm">Example: Thread local storage in a Pthread program</a>: how Pthread works</p>
</li>
<li><p><a href="http://www.pjsip.org/pjlib/docs/html/group__PJ__TLS.htm">Thread Local Storage</a>: learn about pj_thread</p>
</li>
</ul>
<h2 id="Resampling"><a href="#Resampling" class="headerlink" title="Resampling"></a>Resampling</h2><p>How to work with sample rate of the media stream</p>
<p><img src="https://cdn-images-1.medium.com/max/2000/0*DkP_SZQGZaSdvZAF.jpg" alt=""></p>
<ul>
<li><p><a href="http://www.pjsip.org/pjmedia/docs/html/group__PJMEDIA__RESAMPLE__PORT.htm">Resample Port</a>: how to perform resampling in pjmedia</p>
</li>
<li><p>Resampling Algorithm: code to perform resampling</p>
</li>
<li><p><a href="http://www.pjsip.org/pjmedia/docs/html/page_pjmedia_samples_resampleplay_c.htm">Samples: Using Resample Port</a>: very straightforward example to change sample rate of the media stream</p>
</li>
</ul>
<h2 id="Memory-and-Performance"><a href="#Memory-and-Performance" class="headerlink" title="Memory and Performance"></a>Memory and Performance</h2><ul>
<li><p><a href="http://comments.gmane.org/gmane.comp.voip.pjsip/14219">Memory allocation strategy</a></p>
</li>
<li><p><a href="http://www.pjsip.org/high-performance-sip.htm">PJSIP — High Performance Open Source SIP Stack</a></p>
</li>
</ul>
<h2 id="Audio"><a href="#Audio" class="headerlink" title="Audio"></a>Audio</h2><ul>
<li><p><a href="https://trac.pjsip.org/repos/wiki/audio-how-to-record">How to Record Audio with pjsua</a>: how to use pjsua to record audio.</p>
</li>
<li><p><a href="http://www.pjsip.org/pjmedia/docs/html/group__PJMEDIA__MEM__CAPTURE.htm">Memory/Buffer-based Capture Port</a>: believe me, you will jump into pjmedia_mem_capture_create a lot</p>
</li>
<li><p><a href="http://www.pjsip.org/pjmedia/docs/html/group__PJMEDIA__FILE__REC.htm">File Writer (Recorder)</a>: record audio to .wav file</p>
</li>
<li><p><a href="http://lists.pjsip.org/pipermail/pjsip_lists.pjsip.org/2008-February/001838.html">Using pjsua to create a mp3 stream</a></p>
</li>
<li><p><a href="https://www.codeproject.com/Articles/332109/AMR-Audio-Encoding">AMR Audio Encoding</a>: understands AMR encoding</p>
</li>
<li><p><a href="http://www.pjsip.org/pjmedia/docs/html/group__audio__device__api.htm">Audio Device API</a>: how pjsip detects and use Audio device</p>
</li>
<li><p><a href="http://www.pjsip.org/pjmedia/docs/html/group__PJMED__SND__PORT.htm">Sound Device Port</a>: Media Port Connection Abstraction to the Sound Device</p>
</li>
<li><p><a href="http://lists.pjsip.org/pipermail/pjsip_lists.pjsip.org/2009-December/009719.html">audio bursting</a></p>
</li>
<li><p><a href="http://comments.gmane.org/gmane.comp.voip.pjsip/11623">Buffer problem</a></p>
</li>
<li><p><a href="http://lists.pjsip.org/pipermail/pjsip_lists.pjsip.org/2009-March/006783.html">Problem with PJMEDIA’s play callback</a></p>
</li>
<li><p><a href="http://www.pjsip.org/pjmedia/docs/html/group__PJMEDIA__FRAME__OP.htm">Audio Manipulation Algorithms</a>: lots of cool algorithm written in C for audio manipulation. The hardest and most imporant one is probably <a href="http://www.pjsip.org/pjmedia/docs/html/group__PJMED__JBUF.htm">Adaptive jitter buffer</a></p>
</li>
<li><p><a href="http://lists.pjsip.org/pipermail/pjsip_lists.pjsip.org/2010-January/010167.html">bad quality on iphone 2G with os 3.0</a>: No one would use iPhone 2G now, but it’s good to be aware of older phones</p>
</li>
<li><p><a href="http://lists.pjsip.org/pipermail/pjsip_lists.pjsip.org/2009-April/007265.html">getting Underflow, buf_cnt=0, will generate 1 frame continuessly</a>: how to handle underflow in pjmedia</p>
</li>
<li><p><a href="https://trac.pjsip.org/repos/wiki/MeasuringSoundLatency">Measuring Sound Latency</a>: This article describes how to measure both sound device latency and overall (end-to-end) latency of ​pjsua</p>
</li>
<li><p><a href="https://trac.pjsip.org/repos/wiki/audio-check-packet-loss">Checking for Network Impairments of Incoming RTP Packets</a></p>
</li>
<li><p><a href="http://lists.pjsip.org/pipermail/pjsip_lists.pjsip.org/2013-January/015647.html">Master/sound</a>: How master sound works and deal with no sound on the mic input port</p>
</li>
</ul>
<h2 id="Video"><a href="#Video" class="headerlink" title="Video"></a>Video</h2><p>I learn a lot regarding video capture, ffmpeg and color space, especially YUV</p>
<ul>
<li><p><a href="https://code.google.com/archive/p/siphon/wikis/VIdeoSupport.wiki">siphon — VIdeoSupport.wiki</a>: How siphon deals with video before pjsip 2.0</p>
</li>
<li><p><a href="http://www.pjsip.org/pjmedia/docs/html/group__video__device__api.htm">Video Device API</a>; PJMEDIA Video Device API is a cross-platform video API appropriate for use with VoIP applications and many other types of video streaming applications.</p>
</li>
<li><p><a href="http://www.pjsip.org/pjsip/docs/html/group__PJSUA__LIB__VIDEO.htm">PJSUA-API Video</a>: Uses video APIs in pjsua with pjsip 2.1.0</p>
</li>
<li><p><a href="https://trac.pjsip.org/repos/wiki/Video_Users_Guide">PJSIP Video User’s Guide</a>: all you need to know about video support in pjsip</p>
</li>
<li><p><a href="http://www.pjsip.org/pjmedia/docs/html/group__PJMED__VID__STRM.htm">Video streams</a>: I can’t never forget pjmedia_vid_stream_create</p>
</li>
<li><p><a href="http://www.pjsip.org/pjmedia/docs/html/group__PJMEDIA__VID__TEE.htm">Video source duplicator</a>: duplicate video data in the stream.</p>
</li>
<li><p><a href="http://www.pjsip.org/pjmedia/docs/html/group__PJMEDIA__FILE__PLAY.htm">AVI File Player</a>: Video and audio playback from AVI file</p>
</li>
<li><p><a href="https://trac.pjsip.org/repos/wiki/ReleaseNotes-2.0">PJSIP Version 2.0 Release Notes</a>: starting with 2.0, pjsip supports video. Good to read</p>
</li>
<li><p><a href="https://trac.pjsip.org/repos/ticket/1263">Video API for PJSUA-LIB</a></p>
</li>
<li><p><a href="http://lists.pjsip.org/pipermail/pjsip_lists.pjsip.org/2012-July/014959.html">How to make a loopback video call with AVI file?</a></p>
</li>
<li><p><a href="https://stackoverflow.com/questions/3367187/what-is-lib-swscale-used-for-by-ffmpeg-programers">What is lib Swscale used for by ffmpeg programers?</a></p>
</li>
<li><p><a href="https://github.com/dmcrodrigues/FFmpeg-iOS-build-script">FFmpeg-iOS-build-script</a>: details how to build ffmpeg for iOS</p>
</li>
</ul>
<h2 id="CSipSimple"><a href="#CSipSimple" class="headerlink" title="CSipSimple"></a>CSipSimple</h2><p>There are many SIP client for mobile and desktop, <a href="https://www.microsip.org/">microSIP</a>, <a href="https://jitsi.org/">Jitsi</a>, <a href="https://www.linphone.org/technical-corner/linphone/overview">Linphone</a>, <a href="https://www.doubango.org/">Doubango</a>, … They all follow strictly SIP standard and may have their own SIP core, for example microSIP uses pjsip, Linphone uses liblinphone, …</p>
<p>Among that, I learn a lot from the Android client, <a href="https://code.google.com/archive/p/csipsimple/">CSipSimple</a>, which offers very nice interface and have good functionalities. Unfortunately <a href="https://github.com/r3gis3r/CSipSimple/issues/6">Google Code was closed</a>, so I don’t know if the author has plan to do development on GitHub.</p>
<p>I also participated a lot on the Google forum for <a href="https://groups.google.com/forum/#!searchin/csipsimple-users/onmyway133%7Csort:date">user</a> and <a href="https://groups.google.com/forum/#!searchin/csipsimple-dev/onmyway133%7Csort:date">dev</a>. Thanks for Regis, I learn a lot about open source and that made me interested in open source.</p>
<p>You can read <a href="https://groups.google.com/forum/#!topic/csipsimple-dev/ihZN8s_-g_4">What is a branded version</a></p>
<blockquote>
<p>I don’t make any money from csipsimple at all. It’s a pure opensource and free as in speech project.<br>I develop it on my free time and just so that it benefit users.<br>That’s the reason why the project is released under GPL license terms. I advise you to read carefully the license (you’ll learn a lot of things on the spirit of the license and the project) : <a href="http://www.gnu.org/licenses/gpl.html">http://www.gnu.org/licenses/gpl.html</a><br>To sump up, the spirit of the GPL is that users should be always allowed to see the source code of the software they use, to use it the way they want and to redistribute it.</p>
</blockquote>
<h2 id="RTP-Proxy"><a href="#RTP-Proxy" class="headerlink" title="RTP Proxy"></a>RTP Proxy</h2><p>Because of NAT or in case users want to talk via a proxy, then a <a href="http://www.rtpproxy.org/">RTP proxy</a> is needed. RTPProxy follows standard and works well with Kamailio</p>
<ul>
<li><p><a href="https://saevolgo.blogspot.no/2012/03/making-rtpproxy-work.html">Making RTPproxy work</a></p>
</li>
<li><p><a href="https://sourceforge.net/p/sippy/rtpproxy/ci/master/tree/">Sippy B2BUA and RFC3261 SIP Stack</a></p>
</li>
<li><p><a href="https://linux.die.net/man/8/rtpproxy">rtpproxy(8) — Linux man page</a></p>
</li>
<li><p><a href="https://lists.kamailio.org//pipermail/sr-users/2008-April/062814.html">rtpproxy address filling</a></p>
</li>
</ul>
<h2 id="Other-related-articles"><a href="#Other-related-articles" class="headerlink" title="Other related articles"></a>Other related articles</h2><ul>
<li><p><a href="https://thestereobus.com/2008/01/12/sample-rate-and-bitrate-the-guts-of-digital-audio/">Sample Rate and Bitrate: The Guts of Digital Audio</a></p>
</li>
<li><p><a href="http://webcache.googleusercontent.com/search?q=cache:http://www.techexams.net/forums/ccnp/48768-voip-packet-size.html">VoIP Packet Size</a></p>
</li>
<li><p><a href="https://lists.freedesktop.org/archives/gstreamer-devel/2012-August/036865.html">How to measure brandwith consumption of an rtp stream?</a></p>
</li>
<li><p><a href="https://docs.microsoft.com/en-us/previous-versions/office/developer/communication-server-2007/bb759215(v=office.12)">Sending Reliable Provisional Responses</a></p>
</li>
<li><p><a href="https://trac.pjsip.org/repos/ticket/1586">SILK audio codec wrapper implementation</a></p>
</li>
<li><p><a href="http://lists.pjsip.org/pipermail/pjsip_lists.pjsip.org/2008-July/003843.html">conference bridge questions</a></p>
</li>
<li><p><a href="http://lists.pjsip.org/pipermail/pjsip_lists.pjsip.org/2012-January/014037.html">multiple audio devices, multiple calls, conferencing, recording and mix all of the above</a></p>
</li>
<li><p><a href="http://lists.pjsip.org/pipermail/pjsip_lists.pjsip.org/2010-January/010089.html">How to Know Offline Call</a></p>
</li>
<li><p><a href="http://lists.pjsip.org/pipermail/pjsip_lists.pjsip.org/2008-May/002857.html">Symmetric RTP</a></p>
</li>
<li><p><a href="https://trac.pjsip.org/repos/ticket/1412">Account specific NAT settings: STUN, ICE, and TURN</a></p>
</li>
<li><p><a href="https://technfun.wordpress.com/2008/11/06/sip-stories-part-3-invite-retransmission/">SIP stories, part 3: INVITE retransmission</a></p>
</li>
<li><p><a href="http://lists.pjsip.org/pipermail/pjsip_lists.pjsip.org/2010-February/010329.html">TCP/TLS reconnect</a></p>
</li>
<li><p><a href="https://lists.kamailio.org//pipermail/sr-users/2010-May/063880.html">Configuring TCP keep alive and connection lifetime</a></p>
</li>
<li><p><a href="http://lists.opensips.org/pipermail/users/2012-September/023057.html">Max TCP connections</a></p>
</li>
<li><p><a href="http://comments.gmane.org/gmane.comp.voip.pjsip/836">VAD detection scenario</a></p>
</li>
<li><p><a href="https://trac.pjsip.org/repos/ticket/1340">Handle native capture preview</a></p>
</li>
<li><p><a href="https://trac.pjsip.org/repos/ticket/1360">Video orientation support</a></p>
</li>
<li><p><a href="https://trac.pjsip.org/repos/ticket/95">Keep-alive mechanism for TCP and TLS transports</a></p>
</li>
<li><p><a href="https://trac.pjsip.org/repos/ticket/56">Periodically transmit RTP packet on silence</a></p>
</li>
<li><p><a href="https://trac.pjsip.org/repos/ticket/87">Conference bridge should transmit silence frame when level is zero</a></p>
</li>
<li><p><a href="https://trac.pjsip.org/repos/ticket/883">Add user defined NAT hole-punching and keep-alive mechanism to media stream</a></p>
</li>
</ul>
<h2 id="IP-change"><a href="#IP-change" class="headerlink" title="IP change"></a>IP change</h2><p>IP change during call can cause problem, such as when user goes from Wifi to 4G mode</p>
<ul>
<li><p><a href="http://comments.gmane.org/gmane.comp.voip.pjsip/16134">Proper way to handle Ip address changes in Android</a></p>
</li>
<li><p><a href="https://code.google.com/archive/p/csipsimple/issues/1423">support WiFi and 3G simultaneously</a></p>
</li>
</ul>
<h2 id="RTP-and-RTCP"><a href="#RTP-and-RTCP" class="headerlink" title="RTP and RTCP"></a>RTP and RTCP</h2><p>Learn about [Realtime transport control protocol](<a href="http://Real-time">http://Real-time</a> Transport Protocol) and how that works with RTP</p>
<ul>
<li><p><a href="http://disi.unitn.it/locigno/didattica/AdNet/10-11/05-5_VoIP-RTP_H.pdf">Voice over IP: RTP/RTCP — The transport layer</a></p>
</li>
<li><p><a href="http://www.networksorcery.com/enp/protocol/rtcp.htm">RTCP, RTP Control Protocol</a></p>
</li>
<li><p><a href="http://www.netlab.tkk.fi/opetus/s38130/k99/presentations/4.pdf">Protocol overview: RTP and RTCP</a></p>
</li>
<li><p><a href="http://www.cs.odu.edu/~cs778/jeffay/Lecture6.pdf">The Multimedia Control Protocol RTCP</a></p>
</li>
<li><p><a href="http://www.pjsip.org/pjmedia/docs/html/page_pjmedia_samples_confsample_c.htm">Using Conference Bridge</a></p>
</li>
<li><p><a href="http://docs.huihoo.com/telecom/sip_rtp_stack.html">SIP and RTP Stack</a></p>
</li>
<li><p><a href="http://www.pjsip.org/pjmedia/docs/html/group__PJMEDIA__TRANSPORT.htm">Media Transport</a></p>
</li>
<li><p><a href="http://www.pjsip.org/pjmedia/docs/html/group__PJMED__RTP.htm">RTP Session and Encapsulation (RFC 3550)</a></p>
</li>
</ul>
<h2 id="Codec"><a href="#Codec" class="headerlink" title="Codec"></a>Codec</h2><p>To reduce payload size, we need to encode and decode the audio and video package. We usually use <a href="https://www.speex.org/">Speex</a> and <a href="https://opus-codec.org/">Opus</a>. Also, it’s good to understand the .wav format</p>
<ul>
<li><p><a href="http://www.topherlee.com/software/pcm-tut-wavformat.html">Digital Audio — Creating a WAV (RIFF) file</a></p>
</li>
<li><p><a href="https://docs.microsoft.com/en-us/previous-versions/windows/xna/ff827591(v=xnagamestudio.41)">Streaming Data from a WAV File</a></p>
</li>
<li><p><a href="https://www.speex.org/docs/manual/speex-manual/node7.html">Programming with Speex (the libspeex API)</a></p>
</li>
<li><p><a href="https://www.speex.org/docs/manual/speex-manual/node10.html">Speex narrowband mode</a></p>
</li>
<li><p><a href="http://www.opus-codec.org/docs/">Developing with libopus (API reference)</a></p>
</li>
</ul>
<h2 id="Building-pjsip-for-Windows-Phone-8"><a href="#Building-pjsip-for-Windows-Phone-8" class="headerlink" title="Building pjsip for Windows Phone 8"></a>Building pjsip for Windows Phone 8</h2><p>Windows Phone 8 introduces C++ component , changes in threading, VoIP and audio background mode. To do this I need to find another threadpool component and tweak openSSL a bit to make it compile on Windows Phone 8. I lost the source code so can’t upload the code to GitHub 😢. Also many links broke because Nokia was not here any more</p>
<ul>
<li><p><a href="https://trac.pjsip.org/repos/wiki/Getting-Started/Other-Platforms">Building for Other Platforms</a></p>
</li>
<li><p><a href="https://trac.pjsip.org/repos/wiki/Getting-Started/Windows-Phone">Getting Started: Building for UWP and Windows Phone 8.x</a></p>
</li>
<li><p><a href="http://www.pjsip.org/docs/latest/pjlib/docs/html/porting_pjlib_pg.htm">Porting to New CPU Architecture</a>: pjlib is the foundation of pjsip. Learn how to port it to another platform</p>
</li>
<li><p><a href="https://docs.microsoft.com/en-us/previous-versions/windows/desktop/apps/jj206983(v=vs.105)">VoIP apps for Windows Phone 8</a></p>
</li>
<li><p><a href="https://docs.microsoft.com/en-us/previous-versions/windows/desktop/apps/jj207046(v=vs.105)">How to implement audio streaming for VoIP calls for Windows Phone 8</a></p>
</li>
<li><p><a href="http://docs.embarcadero.com/products/rad_studio/delphiAndcpp2009/HelpUpdate2/EN/html/devwin32/oocinprocessoutofprocessandremoteservers_xml.html">In-process, Out-of-process, and Remote Servers</a></p>
</li>
<li><p><a href="https://www.codeproject.com/Articles/19605/Basics-of-an-IDL-file">Basics of an IDL file</a></p>
</li>
</ul>
<h2 id="Porting-OpenSSL-to-Windows-Phone-8"><a href="#Porting-OpenSSL-to-Windows-Phone-8" class="headerlink" title="Porting OpenSSL to Windows Phone 8"></a>Porting OpenSSL to Windows Phone 8</h2><p>Firstly, learn how to compile, use OpenSSL. How to call it from pjsip, and how to make it compile in Visual Studio for Windows Phone 8. I also learn the important of Winsock, how to port a library. I struggled a lot with porting openSSL to Windows RT, then to Windows Phone 8</p>
<p>A lot of links were broken 😢 so I can’t paste them all here.</p>
<ul>
<li><p><a href="https://www.linuxjournal.com/article/4822">An Introduction to OpenSSL Programming</a></p>
</li>
<li><p><a href="https://mikaelkoskinen.net/post/ssl-socket-support-in-windows-phone">SSL Socket support in Windows Phone</a></p>
</li>
<li><p><a href="http://www.markarteaga.com/building-secure-windows-phone-8-apps-apis-and-techniques/">Building Secure Windows Phone 8 Apps — APIs and Techniques</a></p>
</li>
<li><p><a href="https://social.msdn.microsoft.com/forums/windowsapps/en-US/8f3c82e6-3b42-4138-9342-f9d687ee6466/is-winsock-available-on-windows-phone-8">Is Winsock available on Windows Phone 8?</a></p>
</li>
<li><p><a href="https://social.msdn.microsoft.com/Forums/windowsapps/en-US/2662cac1-fbb6-4ac4-8553-06375d798720/why-i-am-not-been-able-to-use-all-the-header-files-egsslh-under-open-source-openssl-library-">Why i am not been able to use all the header files (eg-&gt;ssl.h) under open source openssl library</a></p>
</li>
<li><p><a href="https://msdn.microsoft.com/en-us/library/windows/desktop/ms738545(v=vs.85).aspx">Getting Started with Winsock</a></p>
</li>
<li><p><a href="http://developer.covenanteyes.com/building-openssl-for-visual-studio/">Building OpenSSL for Visual Studio</a></p>
</li>
<li><p><a href="http://eran.geek.co.il/wp/archives/3897">How to Compile OpenSSL for Visual Studio 2010/2012</a></p>
</li>
<li><p><a href="http://www.blogcompiler.com/2011/12/21/openssl-for-windows/">OpenSSL for Windows</a></p>
</li>
<li><p><a href="https://forum.xda-developers.com/showthread.php?t=2113595">OpenSSL for Windows RT</a></p>
</li>
<li><p><a href="https://rt.openssl.org/Ticket/Display.html?id=2911&user=guest&pass=guest">2911: enhancement request: Windows RT support</a></p>
</li>
<li><p><a href="https://stackoverflow.com/questions/1640258/need-a-fast-random-generator-for-c">Need a fast random generator for c++</a></p>
</li>
<li><p><a href="https://stackoverflow.com/questions/4796590/window-c-c-crypto-api-examples-and-tips">Window C/C++ Crypto API Examples and tips</a></p>
</li>
<li><p><a href="https://msdn.microsoft.com/en-us/library/windows/desktop/aa379942(v=vs.85).aspx">CryptGenRandom function</a></p>
</li>
<li><p><a href="http://egd.sourceforge.net">EGD: The Entropy Gathering Daemon</a></p>
</li>
</ul>
<h2 id="C-and-C"><a href="#C-and-C" class="headerlink" title="C and C++"></a>C and C++</h2><p>Since pjsip, rtpproxy and kamailio are all C and C++ code. I needed to have a good understanding about them, especially pointer and memory handling. We also needed to learn about compile flags for debug and release builds, how to use Make, how to make static and dynamic libraries.</p>
<ul>
<li><p><a href="https://stackoverflow.com/questions/336585/what-does-a-const-pointer-to-pointer-mean-in-c-and-in-c">What does a const pointer-to-pointer mean in C and in C++?</a></p>
</li>
<li><p><a href="http://c-faq.com/index.html">comp.lang.c Frequently Asked Questions</a>: there’s lot of things about C we haven’t known about</p>
</li>
<li><p><a href="https://stackoverflow.com/questions/1358400/what-is-external-linkage-and-internal-linkage">What is external linkage and internal linkage?</a></p>
</li>
<li><p><a href="http://graphics.stanford.edu/~seander/bithacks.html">Bit Twiddling Hacks</a>: how to apply clever hacks with bit operators. Really really good reading here</p>
</li>
<li><p><a href="https://www.cprogramming.com/c++11/c++11-nullptr-strongly-typed-enum-class.html">Better types in C++11 — nullptr, enum classes (strongly typed enumerations) and cstdint</a></p>
</li>
<li><p><a href="https://www.codeproject.com/Articles/85391/Microsoft-Visual-C-Static-and-Dynamic-Libraries">Microsoft Visual C++ Static and Dynamic Libraries</a></p>
</li>
<li><p><a href="https://www.codeproject.com/Articles/11634/Managed-C-Learn-by-Example-Part-1">Managed C++ — Learn by Example</a></p>
</li>
<li><p><a href="http://www.cplusplus.com/doc/tutorial/preprocessor/">Preprocessor directives</a></p>
</li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-05-23T16:28:14.000Z" title="2019-05-23T16:28:14.000Z">2019-05-23</time><span class="level-item">4 minutes read (About 603 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-deal-with-CSS-responsiveness-in-Wordpress/">How to deal with CSS responsiveness in Wordpress</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/283">#283</a></strong></p>
<p>Original post <a href="https://medium.com/fantageek/dealing-with-css-responsiveness-in-wordpress-5ad24b088b8b">https://medium.com/fantageek/dealing-with-css-responsiveness-in-wordpress-5ad24b088b8b</a></p>
<hr>
<p>During the alpha test of <a href="https://medium.com/swlh/introducing-learn-talks-awesome-conference-and-meetup-talks-e97c8cf7e0f">LearnTalks</a>, some of my friends reported that the screen is completely blank in search page, and this happened in mobile only. This article is how I identify the problem and found a workaround for the issue, it may not be the solution, but at least the screen does not appear blank anymore.</p>
<p>As someone who likes to keep up with tech via watching conference videos, I thought it might be a good idea to collect all of these to better search and explore later. So I built a web app with React and Firebase, it is a work in progress for now. Due to time constraints, I decided to go first with Wordpress to quickly play with the idea. So there is <a href="http://learntalks.com/">LearnTalks</a>.</p>
<p>The theme Marinate that I used didn’t want to render the search page correctly. So I head over to <a href="https://developers.google.com/web/tools/chrome-devtools/device-mode/">Chrome Dev Tool</a> for Responsive Viewport Mode and Safari for <a href="https://webdesign.tutsplus.com/articles/quick-tip-using-web-inspector-to-debug-mobile-safari--webdesign-8787">Web Inspector</a></p>
<p><img src="https://cdn-images-1.medium.com/max/3880/0*PfnFpNU4mXD6MoH3.png" alt=""></p>
<p><img src="https://cdn-images-1.medium.com/max/2000/0*DMJqF2scPbxwABx3.png" alt=""></p>
<p>The tests showed that the problem only happened on certain screen resolutions. This must be due to <a href="https://en.support.wordpress.com/custom-design/custom-css-media-queries/">CSS @media query</a> which display different layouts for different screen sizes. And somehow it didn’t work for some sizes.</p>
<pre><code>[@media](http://twitter.com/media) screen and (max-width: 800px) {
 #site-header {
 display: none;
 }
}</code></pre><h2 id="A-bit-about-the-rules"><a href="#A-bit-about-the-rules" class="headerlink" title="A bit about the rules"></a>A bit about the <a href="https://www.w3schools.com/cssref/css3_pr_mediaquery.asp">rules</a></h2><p>The @media rule is used in media queries to apply different styles for different media types/devices.</p>
<p>Media queries can be used to check many things, such as:</p>
<ul>
<li><p>width and height of the viewport</p>
</li>
<li><p>width and height of the device</p>
</li>
<li><p>orientation (is the tablet/phone in landscape or portrait mode?)</p>
</li>
<li><p>resolution</p>
</li>
</ul>
<p>Using media queries are a popular technique for delivering a tailored style sheet (responsive web design) to desktops, laptops, tablets, and mobile phones.</p>
<p>So I go to Wordpress Dashboard -&gt; Appearance -&gt; Editor to examine CSS files. Unsurprisingly, there are a bunch of media queries</p>
<pre><code>[@media](http://twitter.com/media) (min-width: 600px) and (max-width: 767px) {
 .main-navigation {
 padding: 0;
 }
 .site-header .pushmenu {
 margin-top:0px; 
 } 
 .social-networks li a {
 line-height:2.1em !Important; 
 } 
 .search {
 display: none !important;
 }
 .customer blockquote {
 padding: 10px;
 text-align: justify;
 }
}</code></pre><p>The .search selector is suspicious display: none !important;</p>
<p>The important directive is, well, quite <a href="https://stackoverflow.com/questions/9245353/what-does-important-mean-in-css">important</a></p>
<blockquote>
<p>It means, essentially, what it says; that ‘this is important, ignore subsequent rules, and any usual specificity issues, apply <em>this</em> rule!’<br>In normal use a rule defined in an external stylesheet is overruled by a style defined in the head of the document, which, in turn, is overruled by an in-line style within the element itself (assuming equal specificity of the selectors). Defining a rule with the !important ‘attribute’ (?) discards the normal concerns as regards the ‘later’ rule overriding the ‘earlier’ ones.</p>
</blockquote>
<p>Luckily, this theme allows the ability to Edit CSS , so I can override that to a block attribute to always show search page</p>
<p><img src="https://cdn-images-1.medium.com/max/5400/1*lBuQOg5RE0vhzTOaFkgDcg.png" alt=""></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-05-23T16:27:08.000Z" title="2019-05-23T16:27:08.000Z">2019-05-23</time><span class="level-item">4 minutes read (About 553 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-use-One-Dark-theme-and-Fira-Code-font-for-IDEs/">How to use One Dark theme and Fira Code font for IDEs</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/281">#281</a></strong></p>
<p>A good theme and font can increase your development happiness a lot. Ever since using <a href="https://atom.io/">Atom</a>, I liked its One Dark theme. The background and text colors are just elegant and pleasant to the eyes.</p>
<h3 id="One-Dark"><a href="#One-Dark" class="headerlink" title="One Dark"></a>One Dark</h3><p>Original designed for Atom, <a href="https://atom.io/themes/one-dark-ui">one-dark-ui</a> that claims to adapt to most syntax themes, used together with <a href="https://github.com/mozilla/Fira">Fira</a> Mono font from mozilla.</p>
<p><img src="https://cdn-images-1.medium.com/max/3552/0*03uqfI0DFKADizkR" alt=""></p>
<p>There is also <a href="https://draculatheme.com/">Dracula</a> which is popular, but the contrast seem too high for my eyes.</p>
<h3 id="Fira"><a href="#Fira" class="headerlink" title="Fira"></a>Fira</h3><p>I like <a href="https://github.com/tonsky/FiraCode">FiraCode</a> font the most, it is just beautiful and supports ligatures.</p>
<p><img src="https://cdn-images-1.medium.com/max/3408/1*4iJo0-L4cS1OYl_jd3SSXw.png" alt=""></p>
<p>Alternatively, you can browse <a href="https://github.com/ProgrammingFonts/ProgrammingFonts">ProgrammingFonts</a> or other ligature fonts like <a href="https://github.com/i-tu/Hasklig">Hasklig</a> to see which font suits you.</p>
<p>Theme and font are completely personal taste, but if you like me, please give One Dark and Fira a try, here is how to do that in Xcode, Android Studio and Visual Studio Code, which are editors that I use daily.</p>
<h2 id="Xcode"><a href="#Xcode" class="headerlink" title="Xcode"></a>Xcode</h2><p>Firstly, you need to install the latest compiled font of <a href="https://github.com/tonsky/FiraCode/releases">FiraCode</a></p>
<p>I used to have my own replication of One Dark, called <a href="https://github.com/onmyway133/DarkSide">DarkSide</a>, this was how I learned how to make Xcode theme. For now, I find <a href="https://github.com/bojan/xcode-one-dark">xcode-one-dark</a> good enough. Xcode theme is just xml file with .xccolortheme extension and is placed into ~/Library/Developer/Xcode/UserData/FontAndColorThemes</p>
<p>After installing the theme, you should be able to select it from Preferences -&gt; Fonts &amp; Colors</p>
<p><img src="https://cdn-images-1.medium.com/max/3648/1*72XHQXThGhqTVpoOcYmF-g.png" alt=""></p>
<p>And it looks like below.</p>
<p><img src="https://cdn-images-1.medium.com/max/7168/1*Yk1GRdW7ALnU6UcaPyWvRA.png" alt=""></p>
<h2 id="Android-Studio"><a href="#Android-Studio" class="headerlink" title="Android Studio"></a>Android Studio</h2><p>Android Studio defaults to have only Default and Dracula theme. Let’s choose Darcula for now. I hope there will be One Dark support.</p>
<p><img src="https://cdn-images-1.medium.com/max/4548/1*SVS1CaXxXH3MvxTLLr4i0w.png" alt=""></p>
<p>Also, Android Studio can preferably selects Fira Code, which we should have already installed. Remember to select Enable font ligatures to stay cool</p>
<p><img src="https://cdn-images-1.medium.com/max/4548/1*iwKiy_uzCRT5iG9V5luWKQ.png" alt=""></p>
<p>It looks like this</p>
<p><img src="https://cdn-images-1.medium.com/max/7168/1*MXOaGXuT30B4TNvX4xgGEg.png" alt=""></p>
<h2 id="Visual-Studio-Code"><a href="#Visual-Studio-Code" class="headerlink" title="Visual Studio Code"></a>Visual Studio Code</h2><p>Installing theme in VSCode is easy with extensions. There is this <a href="https://marketplace.visualstudio.com/items?itemName=zhuangtongfa.Material-theme">One Dark Pro</a> that we can install directly from Extensions panel in VS Code. Alternatively, you can also choose <a href="https://marketplace.visualstudio.com/items?itemName=akamud.vscode-theme-onedark">Atom One Dark Theme</a></p>
<p><img src="https://cdn-images-1.medium.com/max/7168/1*Q5L_3MNaJlp1Yz6IpmotEQ.png" alt=""></p>
<p>Then go to Preferences -&gt; Settings to specify Fira Code . Remember to check for Font Ligatures</p>
<p><img src="https://cdn-images-1.medium.com/max/6720/1*uVRSZOTCkm1i2VK6CCgXEA.png" alt=""></p>
<p>The result should look like this</p>
<p><img src="https://cdn-images-1.medium.com/max/7168/1*zqgMt0v_FEGydm67VuUT5w.png" alt=""></p>
<h2 id="Read-more"><a href="#Read-more" class="headerlink" title="Read more"></a>Read more</h2><ul>
<li>Original post <a href="https://medium.com/fantageek/one-dark-theme-and-fira-code-font-for-ides-d67bbe2ac8cb">https://medium.com/fantageek/one-dark-theme-and-fira-code-font-for-ides-d67bbe2ac8cb</a></li>
</ul>
<hr>
<p><strong>Updated at</strong> 2020-12-05 05:33:52</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-05-23T16:26:31.000Z" title="2019-05-23T16:26:31.000Z">2019-05-23</time><span class="level-item">5 minutes read (About 686 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-fix-wrong-status-bar-orientation-in-iOS/">How to fix wrong status bar orientation in iOS</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/280">#280</a></strong></p>
<p>Original post <a href="https://medium.com/fantageek/how-to-fix-wrong-status-bar-orientation-in-ios-f044f840b9ed">https://medium.com/fantageek/how-to-fix-wrong-status-bar-orientation-in-ios-f044f840b9ed</a></p>
<hr>
<p>When I first started iOS, it was iOS 8 at that time, I had a bug that took my nearly a day to figure out. The issue was that the status bar always orients to device orientation despite I already locked my main ViewController to portrait. This was why I started <a href="https://github.com/onmyway133/notes">notes</a> project on GitHub detailing what issues I ‘ve been facing.<br><a href="https://github.com/onmyway133/notes/issues/2"><strong>ViewController is locked to portrait but the status bar rotates when device rotates · Issue #2 ·…</strong><br><em>PROBLEM The rootViewController is locked to portrait. When I rotates, the view controller is portrait, but the status…</em>github.com</a></p>
<p>Now it is iOS 12, and to my surprise people still have this issues. Today I will revise this issue in iOS 12 project and use Swift.</p>
<p><img src="https://cdn-images-1.medium.com/max/2000/1*kcHatZeSPOe939JafbdixA.png" alt=""></p>
<h2 id="Supported-interface-orientations"><a href="#Supported-interface-orientations" class="headerlink" title="Supported interface orientations"></a>Supported interface orientations</h2><p>Most apps only support portrait mode, with 1 or 2 screens being in landscape for image viewing or video player. So we usually declare Portrait, Landscape Left and Landscape Right.</p>
<p><img src="https://cdn-images-1.medium.com/max/3008/1*mfb71QV7FBufjo3fVm8cuw.png" alt=""></p>
<p>Since iOS 7, apps have simple design with focus on content. UIViewController was given bigger role in appearance specification.</p>
<p>Supposed that we have a MainViewController as the rootViewController and we want this to be locked in portrait mode.</p>
<pre><code>[@UIApplicationMain](http://twitter.com/UIApplicationMain)
class AppDelegate: UIResponder, UIApplicationDelegate {
 var window: UIWindow?
 func application(_ application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplication.LaunchOptionsKey: Any]?) -&gt; Bool {
   window = UIWindow(frame: UIScreen.main.bounds)
   window?.rootViewController = MainViewController()
   window?.makeKeyAndVisible()
   return true
 }
}</code></pre><p>There is a property called <a href="https://developer.apple.com/documentation/bundleresources/information_property_list/uiviewcontrollerbasedstatusbarappearance">UIViewControllerBasedStatusBarAppearance</a> that we can specify in Info.plist to assert that we want UIViewController to dynamically control status bar appearance.</p>
<blockquote>
<p>A Boolean value indicating whether the status bar appearance is based on the style preferred for the current view controller.</p>
</blockquote>
<p>Start by declaring in Info.plist</p>
<pre><code>&lt;key&gt;UIViewControllerBasedStatusBarAppearance&lt;/key&gt;
&lt;true/&gt;</code></pre><p>And in MainViewController , lock status bar to portrait</p>
<pre><code>import UIKit

class MainViewController: UIViewController {

let label = UILabel()

override func viewDidLoad() {
    super.viewDidLoad()

view.backgroundColor = .yellow

label.textColor = .red
    label.text = &quot;MainViewController&quot;
    label.font = UIFont.preferredFont(forTextStyle: .headline)
    label.sizeToFit()

view.addSubview(label)
  }

override func viewDidLayoutSubviews() {
    super.viewDidLayoutSubviews()

label.center = CGPoint(x: view.bounds.size.width/2, y: view.bounds.size.height/2)
  }

override var supportedInterfaceOrientations: UIInterfaceOrientationMask {
    return .portrait
  }
}</code></pre><p>The idea is that no matter orientation the device is, the status bar always stays in portrait mode, the same as our MainViewController .</p>
<p>But to my surprise, this is not the case !!! As you can see in the screenshot below, the MainViewController is in portrait, but the status bar is not.</p>
<p><img src="https://cdn-images-1.medium.com/max/3588/1*UFfkghJFiLN1nxnxX7Qr6g.png" alt=""></p>
<h2 id="Stop-mixing-code-and-Storyboard"><a href="#Stop-mixing-code-and-Storyboard" class="headerlink" title="Stop mixing code and Storyboard"></a>Stop mixing code and Storyboard</h2><p>It took me a while to figure out that while I declare UIWindow in code, I also have MainStoryboard that configures UIWindow</p>
<pre><code>&lt;key&gt;UIMainStoryboardFile&lt;/key&gt;
&lt;string&gt;Main&lt;/string&gt;</code></pre><p>And this UIWindow from Storyboard has a default root ViewController</p>
<pre><code>import UIKit

class ViewController: UIViewController {

override func viewDidLoad() {
    super.viewDidLoad()

  }
}</code></pre><h2 id="The-meaning-of-UIViewControllerBasedStatusBarAppearance"><a href="#The-meaning-of-UIViewControllerBasedStatusBarAppearance" class="headerlink" title="The meaning of UIViewControllerBasedStatusBarAppearance"></a>The meaning of UIViewControllerBasedStatusBarAppearance</h2><p>In iOS, the status bar is hidden in landscape by default.</p>
<ul>
<li><p>Setting UIViewControllerBasedStatusBarAppearance to false means that we want this default behaviour</p>
</li>
<li><p>Setting UIViewControllerBasedStatusBarAppearance to true means we want to have control over the status bar appearance. So to hide the status bar, we must override prefersStatusBarHidden in the rootViewController, the presented view controller or the full screen view controller</p>
</li>
</ul>
<p>As you can see, the problem is that the ViewController from UIWindow in Storyboard clashes with our MainViewController in code, hence a lot of confusion.</p>
<p>The solution is simple, remove Main.storyboard and don’t use that in project</p>
<pre><code>&lt;key&gt;UIMainStoryboardFile&lt;/key&gt;
&lt;string&gt;Main&lt;/string&gt;</code></pre><p>Now we get our desired behaviour, status bar and view controllers are always locked to portrait regardless of the device orientation.</p>
<p><img src="https://cdn-images-1.medium.com/max/3588/1*cLVlNzcn3ryJNd5xjxXUoQ.png" alt=""></p>
<p>If you use code like me to setup UI, remember to clean up the generated storyboard and ViewController that comes default when project was generated by Xcode.</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-05-23T16:25:54.000Z" title="2019-05-23T16:25:54.000Z">2019-05-23</time><span class="level-item">9 minutes read (About 1409 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/What-is-create-react-native-app/">What is create-react-native-app</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/279">#279</a></strong></p>
<p>Original post <a href="https://medium.com/fantageek/what-is-create-react-native-app-9f3bc5a6c2a3">https://medium.com/fantageek/what-is-create-react-native-app-9f3bc5a6c2a3</a></p>
<hr>
<p>As someone who comes to React Native from iOS and Android background, I like React and Javascript as much as I like Swift and Kotlin. React Native is a cool concept, but things that sound good in theory may not work well in practice.</p>
<h2 id="Another-layer-of-abstraction"><a href="#Another-layer-of-abstraction" class="headerlink" title="Another layer of abstraction"></a>Another layer of abstraction</h2><p>Up until now, I still don’t get why big companies choose React Native over native ones, as in the end what we do is to deliver good experience to the end user, not the easy development for developers. I have seen companies saying <a href="https://medium.com/airbnb-engineering/react-native-at-airbnb-f95aa460be1c">goodbye</a> to React Native and people saying that React Native is just React philosophy <a href="https://ashfurrow.com/blog/airbnb-and-react-native-expectations/">learn once, write anywhere</a>, that they choose React Native mainly for the React style, not for cross platform development. But the fact can’t be denied that people choose React Native mostly for cross platform development. Write once, deploy many places is so compelling. We still of course need to tweak a bit for each platform, but most of the code is reuse.</p>
<p>I have to confess that I myself spend less time developing than digging into compiling and bundling issues. Nothing comes for free. To be successful with React Native, not only we need strong understanding on both iOS and Android, but also ready to step into solving issues. We can’t just open issues, pray and wait and hope someone solves it. We can’t just use other dependencies blindly and call it a day. A trivial bug can be super hard to fix in React Native, and our projects can’t wait. Big companies have, of course, enough resource to solve issues, but for small teams, React Native is a trade off decision to consider.</p>
<h2 id="A-wrapper-for-a-wrapper"><a href="#A-wrapper-for-a-wrapper" class="headerlink" title="A wrapper for a wrapper"></a>A wrapper for a wrapper</h2><p>Enough about that. Let’s go to official React Native <a href="https://facebook.github.io/react-native/docs/getting-started.html">getting started guide</a>. It recommend <a href="https://github.com/react-community/create-react-native-app">create-react-native-app</a>. As someone who made electron.js apps and used <a href="https://github.com/facebook/create-react-app">create-react-app</a>, I choose <a href="https://github.com/react-community/create-react-native-app">create-react-native-app</a> right away, as I think it is the equivalent in terms of creating React Native apps. I know there is react-native init and though that it must have some problems, otherwise people don’t introduce <a href="https://github.com/react-community/create-react-native-app">create-react-native-app</a>.</p>
<p>After playing with <a href="https://github.com/react-community/create-react-native-app">create-react-native-app</a> and eject, and after that read carefully through its <a href="https://facebook.github.io/react-native/docs/getting-started.html#caveats">caveats</a>, I know it’s time to use just react-native init . In the end I just need a quick way to bootstrap React Native app with enough tooling (Babel, JSX, Hot reloading), however <a href="https://github.com/react-community/create-react-native-app">create-react-native-app</a> is just a limited experience in Expo with opinionated services like Expo push notification <a href="https://docs.expo.io/versions/latest/guides/push-notifications.html">docs.expo.io/versions/latest/guides/push-notifications.html</a> and connectivity to Google Cloud Platform and AWS. I know every thing has its use case, but in this case it’s not the tool for me. Dependencies are the root of all evils, and React Native already has a lot, I don’t want more unnecessary things.</p>
<p>The concept of Expo is actually nice, in that it allows newbie to step into React Native fast with recommended tooling already set up, and the ability to reject later. It also useful in sharing Snack to help reproduce issues. But the name of the repo create-react-native-app is a bit <a href="https://github.com/react-community/create-react-native-app/issues/742">misleading</a>.</p>
<p>Maybe it’s just me, or …</p>
<ul>
<li><p><a href="https://dev.to/kylessg/ive-released-over-100-apps-in-react-native-since-2015-ask-me-anything-1m9g">dev.to/kylessg/ive-released-over-100-apps-in-react-native-since-2015-ask-me-anything-1m9g</a></p>
<blockquote>
<p><em>No, I would never use Expo for a serious project. I imagine what ends up happening in most projects is they reach a point where they have to ultimately eject the app (e.g. needing a native module) which sounds very painful.</em></p>
</blockquote>
</li>
<li><p><a href="https://dev.to/gaserd/why-i-do-not-use-expo-for-react-native-dont-panic-1bp">dev.to/gaserd/why-i-do-not-use-expo-for-react-native-dont-panic-1bp</a></p>
<blockquote>
<p><em>If you use EXPO, you use wrapper-wrapper.</em></p>
</blockquote>
</li>
<li><p><a href="https://hackernoon.com/understanding-expo-for-react-native-7bf23054bbcd">hackernoon.com/understanding-expo-for-react-native-7bf23054bbcd</a></p>
<blockquote>
<p><em>Expo is a great tool for getting started quickly with React Native. However, it’s not always something that can get you to the finish line. From what I’ve seen, the Expo team is making a lot of great decisions with their product roadmap. But their rapid pace of development has often led to bugs in new features.</em></p>
</blockquote>
</li>
<li><p><a href="https://docs.expo.io/versions/latest/introduction/why-not-expo">docs.expo.io/versions/latest/introduction/why-not-expo</a></p>
<blockquote>
<p><em>JS and assets managed by Expo require connectivity to Google Cloud Platform and AWS</em></p>
</blockquote>
</li>
<li><p><a href="https://github.com/react-community/create-react-native-app/issues/516">#516</a></p>
</li>
<li><p><a href="http://www.albertgao.xyz/2018/05/30/24-tips-for-react-native-you-probably-want-to-know/">http://www.albertgao.xyz/2018/05/30/24-tips-for-react-native-you-probably-want-to-know</a></p>
<blockquote>
<p><em>If you are coming from web world, you need to know that create-react-native-app is not the create-react-app equivalent</em><br><em>But if you want more control over your project, something like tweaking your react native Android and iOS project, I highly suggest you use the official react-native-cli. Still, one simple command, react-native init ProjectName, and you are good to go.</em></p>
</blockquote>
</li>
<li><p><a href="https://medium.com/@paulsc/react-native-first-impressions-expo-vs-native-9565cce44c92">medium.com/@paulsc/react-native-first-impressions-expo-vs-native-9565cce44c92</a></p>
<blockquote>
<p><em>I wish I would have used “Native” from the get go, instead I wasted quite a bit of time with Expo</em><br><em>Maybe the biggest one for me is that the whole thing feels like adding another layer of indirection and complexity to an already complicated stack</em><br><em>I wish Expo would get removed from the react-native Getting Started guide to avoid confusing new arrivals</em></p>
</blockquote>
</li>
<li><p><a href="https://levelup.gitconnected.com/how-i-ditched-expo-for-pure-react-native-fc0375361307">levelup.gitconnected.com/how-i-ditched-expo-for-pure-react-native-fc0375361307</a></p>
<blockquote>
<p><em>The Expo dev team did a lot of good stuff there, and they are all doing it for free, so I definitely want to thank all of them for providing a smoother entrance to this world. If they ever manage to solve this issue of custom native code somehow, it may become my platform of choice again.</em></p>
</blockquote>
</li>
<li><p><a href="https://medium.com/@aswinmohanme/how-i-reduced-the-size-of-my-react-native-app-by-86-27be72bba640">https://medium.com/@aswinmohanme/how-i-reduced-the-size-of-my-react-native-app-by-86-27be72bba640</a></p>
<blockquote>
<p>I love everything about Expo except the size of the binaries. Each binary weighs around 25 MB regardless of your app.<br>So the first thing I did was to migrate my existing Expo app to React Native.</p>
</blockquote>
</li>
<li><p><a href="https://medium.com/react-native-training/best-practices-for-creating-react-native-apps-part-1-66311c746df3">https://medium.com/react-native-training/best-practices-for-creating-react-native-apps-part-1-66311c746df3</a></p>
<blockquote>
<p>If you are new to React Native and you think this is the “must” way to go. Check if it meets your needs first.<br>If you are planning to use third party RN packages that have custom native modules. Expo does not support this functionality and in that case, you will have to <a href="https://docs.expo.io/versions/v30.0.0/expokit/eject">eject Expo-Kit</a>. In my opinion, if you are going to eject any kit, don’t use it in the first place. It will probably make things harder than if you hadn’t used the kit at all.</p>
</blockquote>
</li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-05-23T16:25:01.000Z" title="2019-05-23T16:25:01.000Z">2019-05-23</time><span class="level-item">10 minutes read (About 1512 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/Best-places-to-learn-iOS-development/">Best places to learn iOS development</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/278">#278</a></strong></p>
<p>Original post <a href="https://medium.com/fantageek/best-places-to-learn-ios-development-85ebebe890cf">https://medium.com/fantageek/best-places-to-learn-ios-development-85ebebe890cf</a></p>
<hr>
<p>It’s good to be software engineers, when you get paid to do what you like best. The good thing about software development is it ‘s changing fast, and challenging. This is also the not good thing, when you need to continuously learn and adapt to keep up with the trends.</p>
<p>This is for those who have been iOS developers for some time. If you have a lot of free time to spend, then congratulations. If you do not, you know the luxury of free time, then it’s time to learn wisely, by selecting only the good resources. But where should I learn from?</p>
<p>Welcome to the technology age, where there are tons to things to keep track of, iOS releases, SDK, 3rd frameworks, build tools, patterns, … Here are my list that I tend to open very often. It is opinionated and date aware. If it was several years ago, then <a href="http://nshipster.com/">http://nshipster.com/</a>, <a href="https://www.objc.io/">https://www.objc.io/</a> should be in the top of the list.</p>
<p>I like to keep track of stuff, via my lists <a href="https://github.com/onmyway133/fantastic-ios">https://github.com/onmyway133/fantastic-ios</a>, <a href="https://github.com/onmyway133/fantastic-ios-architecture">https://github.com/onmyway133/fantastic-ios-architecture</a>, <a href="https://github.com/onmyway133/fantastic-ios-animation">https://github.com/onmyway133/fantastic-ios-animation</a>. Also you should use services like <a href="https://feedly.com/">https://feedly.com/</a> to organise your subscription feed.</p>
<p>The point of this is for continuous learning, so it should be succinct. There is no particular order.</p>
<h2 id="1-Raywenderlich"><a href="#1-Raywenderlich" class="headerlink" title="1. Raywenderlich"></a>1. Raywenderlich</h2><p><a href="https://www.raywenderlich.com/"><strong>Ray Wenderlich | High quality programming tutorials: iOS, Android, Swift, Kotlin, Unity, and more</strong><br><em>Password Autofill allows our apps to automatically populate the username and password and believe it or not, it only…</em>www.raywenderlich.com</a></p>
<p>This is probably one of the most visited site for learning iOS development. All the tutorials are well designed and easy to follow. If you can, you can subscribe to videos <a href="https://videos.raywenderlich.com/courses">https://videos.raywenderlich.com/courses</a>. I myself find watching video much more relaxing. And the team is reviving its Podcast <a href="https://www.raywenderlich.com/rwpodcast">https://www.raywenderlich.com/rwpodcast</a> which I really recommend</p>
<h2 id="2-Swift-Talk"><a href="#2-Swift-Talk" class="headerlink" title="2. Swift Talk"></a>2. Swift Talk</h2><p><a href="https://talk.objc.io/"><strong>Swift Talk · objc.io</strong><br><em>We use the child view controller we created last time to factor out more code from the large view controller.</em>talk.objc.io</a></p>
<p>The people behind objc.io started their swift talks last year. I’m a fan of clean code, so these talks are really helpful when they show how to organise and write code. Also, they have awesome guests from some companies too.</p>
<h2 id="3-NSScreencast"><a href="#3-NSScreencast" class="headerlink" title="3. NSScreencast"></a>3. NSScreencast</h2><p>If you have less time, then this is great option. These covers many aspects of the iOS SDKs, and the videos are weekly.<br><a href="http://nsscreencast.com/episodes"><strong>NSScreencast: Bite-sized Screencasts for iOS Development</strong><br><em>Quality videos on iOS development, released each week.</em>nsscreencast.com</a></p>
<h2 id="4-Swift-By-Sundell"><a href="#4-Swift-By-Sundell" class="headerlink" title="4. Swift By Sundell"></a>4. Swift By Sundell</h2><p>I actually learn a lot from reading John ‘s blog. He shows various tips on iOS programming and the Swift language. Also his podcast is a must subscribe <a href="https://www.swiftbysundell.com/podcast/">https://www.swiftbysundell.com/podcast/</a>. I’ve listened to many podcasts, but I like this best.<br><a href="https://www.swiftbysundell.com"><strong>All posts</strong><br><em>Like many abstractions and patterns in programming, the goal of the builder pattern is to reduce the need to keep…</em>www.swiftbysundell.com</a></p>
<h2 id="5-AppCoda"><a href="#5-AppCoda" class="headerlink" title="5. AppCoda"></a>5. AppCoda</h2><p>I like this because the content is short, and focused. I can easily follow and grasp the gist immediately. And it has large collection of various contents.<br><a href="https://www.appcoda.com/"><strong>AppCoda - Learn Swift &amp; iOS Programming by Doing</strong><br><em>AppCoda is an educational startup that focuses on teaching people how to learn Swift &amp; iOS programming blog. Our…</em>www.appcoda.com</a></p>
<h2 id="6-Use-Your-Loaf"><a href="#6-Use-Your-Loaf" class="headerlink" title="6. Use Your Loaf"></a>6. Use Your Loaf</h2><p>This has updated posts for every new SDK features. Also, the content is short and to the points. It’s like wikipedia for iOS development.<br><a href="https://useyourloaf.com/"><strong>Use Your Loaf</strong><br><em>If you are upgrading to Xcode 10 and migrating to Swift 4.2 you are likely to see a number of errors because Swift 4.2…</em>useyourloaf.com</a></p>
<h2 id="7-iOS-Goodies"><a href="#7-iOS-Goodies" class="headerlink" title="7. iOS Goodies"></a>7. iOS Goodies</h2><p>The number of newsletters now is like stars on the sky. Among them I like iOS Goodies the best. It is driven by community <a href="https://github.com/iOS-Goodies/iOS-Goodies">https://github.com/iOS-Goodies/iOS-Goodies</a> and contains lots of new awesome stuff each week.<br><a href="http://ios-goodies.com/"><strong>iOS Goodies</strong><br><em>weekly iOS newsletter curated by Marius Constantinescu logo by José Torre founded by Rui Peres and Tiago Almeida</em>ios-goodies.com</a></p>
<h2 id="8-Erica-Sadun"><a href="#8-Erica-Sadun" class="headerlink" title="8. Erica Sadun"></a>8. Erica Sadun</h2><p>This is a bit advanced where it discusses Swift languages. But it’s good to read if you want to get yourself to know more about hidden language features.<br><a href="http://ericasadun.com/"><strong>Erica Sadun</strong><br><em>Recently, some of my simulators launched and loaded just fine. Others simply went black. It didn’t seem to matter which…</em>ericasadun.com</a></p>
<h2 id="9-Swifting"><a href="#9-Swifting" class="headerlink" title="9. Swifting"></a>9. Swifting</h2><p>I just discovered this recently, but I kinda like the blog. The number of posts are growing, and those are good reads about iOS SDKs.<br><a href="https://swifting.io/"><strong>swifting.io</strong><br><em>Our dear friend and a founder of swifting.io - Michał, had an accident two months ago. He had a bad luck and got hit by…</em>swifting.io</a></p>
<h2 id="10-Khanlou"><a href="#10-Khanlou" class="headerlink" title="10. Khanlou"></a>10. Khanlou</h2><p>I learn many good patterns and clean code from reading this blog. He suggests many ideas on refactoring code. Really recommend.<br><a href="http://khanlou.com/"><strong>Khanlou</strong><br><em>To convert this into an infinite collection, we need to think about a few things. First, how will we represent an index…</em>khanlou.com</a></p>
<h2 id="11-Ole-Begemann"><a href="#11-Ole-Begemann" class="headerlink" title="11. Ole Begemann"></a>11. Ole Begemann</h2><p>This has been in my favorite list for a long time. Although this is a bit advanced, it is good to dive deep into Swift.<br><a href="https://oleb.net/blog/"><strong>Articles - Ole Begemann</strong><br><em>Edit description</em>oleb.net</a></p>
<h2 id="12-Krzysztof-Zablocki"><a href="#12-Krzysztof-Zablocki" class="headerlink" title="12. Krzysztof Zabłocki"></a>12. Krzysztof Zabłocki</h2><p>This is my favorite, too. This shows many practical advices for iOS development. He also talks about build tool that I really like.<br><a href="http://merowing.info/post/"><strong>Posts</strong><br><em>Have you ever written tests? Usually, they use equality asserts, e.g. XCTAssertEqual, what happens if the object isn’t…</em>merowing.info</a></p>
<h2 id="13-Realm-News"><a href="#13-Realm-News" class="headerlink" title="13. Realm News"></a>13. Realm News</h2><p>Realm collects a huge collection of iOS videos from conferences and meet ups, and it has transcripts too. It’s more than enough to fill your free time.<br><a href="https://academy.realm.io/"><strong>Realm Academy - Expert content from the mobile experts</strong><br><em>Developer videos, articles and tutorials from top conferences, top authors, and community leaders.</em>academy.realm.io</a></p>
<h2 id="14-Big-Nerd-Ranch"><a href="#14-Big-Nerd-Ranch" class="headerlink" title="14. Big Nerd Ranch"></a>14. Big Nerd Ranch</h2><p>This has posts in both iOS and Android. But I really like the contents, very good.<br><a href="https://www.bignerdranch.com/blog/"><strong>App Development and Design Blog | Big Nerd Ranch</strong><br><em>Our blog offers app development and design tutorials, tips and tricks for software engineering and insights for team…</em>www.bignerdranch.com</a></p>
<h2 id="15-Cocoa-with-Love"><a href="#15-Cocoa-with-Love" class="headerlink" title="15. Cocoa with Love"></a>15. Cocoa with Love</h2><p>This is very advanced, and suitable for hardcore fans. I feel small when reading the posts.<br><a href="http://www.cocoawithlove.com/"><strong>Cocoa with Love</strong><br><em>The upcoming CwlViews library offers a syntax for constructing views that has a profound effect on the Cocoa…</em>www.cocoawithlove.com</a></p>
<h2 id="16-Atomic-Spin"><a href="#16-Atomic-Spin" class="headerlink" title="16. Atomic Spin"></a>16. Atomic Spin</h2><p>I really enjoy reading blog posts from Atomic Object. There are posts for many platforms, and about life, so you need to filter for iOS development.<br><a href="https://spin.atomicobject.com/"><strong>Atomic Spin</strong><br><em>More and more studies have shown that the most effective teams are the ones whose members trust each other and feel…</em>spin.atomicobject.com</a></p>
<h2 id="17-Raizlabs"><a href="#17-Raizlabs" class="headerlink" title="17. Raizlabs"></a>17. Raizlabs</h2><p>This has very good articles about iOS. Highly recommend.<br><a href="https://www.raizlabs.com/dev/"><strong>React Native Animations: Part 2 - RaizException - Raizlabs Developer Blog</strong><br><em>When we build apps for our clients, beautiful designs and interactions are important. But equally important is…</em>www.raizlabs.com</a></p>
<h2 id="18-Invasive-Code"><a href="#18-Invasive-Code" class="headerlink" title="18. Invasive Code"></a>18. Invasive Code</h2><p>This has topics for many iOS features. All the contents are good and succinct.<br><a href="https://www.invasivecode.com/weblog/"><strong>iOS Development - <em>Computer Vision iOS Apps</em></strong><br>Computer Vision iOS Appswww.invasivecode.com</a></p>
<h2 id="19-Think-and-Build"><a href="#19-Think-and-Build" class="headerlink" title="19. Think and Build"></a>19. Think and Build</h2><p>I like posts about animation and replicating app features. This has all of them.</p>
<p><a href="http://www.thinkandbuild.it/">http://www.thinkandbuild.it/</a></p>
<h2 id="20-Little-Bites-of-Cocoa"><a href="#20-Little-Bites-of-Cocoa" class="headerlink" title="20. Little Bites of Cocoa"></a>20. Little Bites of Cocoa</h2><p>This has a series of small tips, on how to use iOS SDKs and other 3rd frameworks. Good to know.<br><a href="https://littlebitesofcocoa.com/"><strong>Little Bites of Cocoa - Tips and techniques for iOS and Mac development - Weekday mornings at 9:42…</strong><br><em>Tips and techniques for iOS and Mac development - Weekday mornings at 9:42 AM. The goal of each of these ‘bites’ is to…</em>littlebitesofcocoa.com</a></p>
<h2 id="21-Samwize"><a href="#21-Samwize" class="headerlink" title="21. Samwize ()"></a>21. Samwize ()</h2><p>All the posts are good, short and to the points. Really like this.<br><a href="http://samwize.com/"><strong>@samwize</strong><br><em>¯_(ツ)_/¯</em>samwize.com</a></p>
<p>I think that’s enough. Feel free to share and suggest other awesome blogs that I might miss. Also, it’s good to contribute back to community by writing your blog posts. You will learn a lot by sharing.</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-05-23T16:24:21.000Z" title="2019-05-23T16:24:21.000Z">2019-05-23</time><span class="level-item">10 minutes read (About 1503 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-use-Bitrise-CI-for-React-Native-apps/">How to use Bitrise CI for React Native apps</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/277">#277</a></strong></p>
<p>Original post <a href="https://codeburst.io/using-bitrise-ci-for-react-native-apps-b9e7b2722fe5">https://codeburst.io/using-bitrise-ci-for-react-native-apps-b9e7b2722fe5</a></p>
<hr>
<p>After trying Travis, <a href="https://medium.com/fantageek/using-circleci-2-0-in-ios-apps-7641424ba388">CircleCI</a> and <a href="https://medium.com/fantageek/buddybuild-and-gradle-properties-in-android-apps-4590d17a2203">BuddyBuild</a>, I now choose <a href="https://hackernoon.com/using-bitrise-ci-for-android-apps-fa9c48e301d8">Bitrise</a> for my mobile applications. The many cool steps and workflows make Bitrise an ideal CI to try. Like any other CIs, the learning steps and configurations can be intimidating at first. Things that work locally can fail on CI, and how to send things that are marked as git ignore to be used in CI builds are popular issues.</p>
<p>In this post I will show how to deploy React Native apps for both iOS and Android. The key thing to remember is to have the same setup on CI as you have locally. They are to ensure exact same versions for packages and tools, to be aware of file patterns in gitignore as those changes won’t be there on CI, and how to property use environment variables and secured files.</p>
<p>This post tried to be intuitive with lots of screenshots. Hope you learn something and avoid the wasted hours that I have been too.</p>
<h2 id="Support-for-React-Native"><a href="#Support-for-React-Native" class="headerlink" title="Support for React Native"></a>Support for React Native</h2><p>In its simplest sense, React Native is just Javascript code with native iOS and Android projects, and Bitrise has a very good <a href="https://blog.bitrise.io/how-to-set-up-a-react-native-app-on-bitrise">support</a> for React Native. It scans ios and android folder, and give suggestion about scheme and build variants to build.</p>
<p>Another good thing about Bitrise is its various useful steps and workflows. Unlike other CIs where we have to spend days on how to property edit the configuration file, Bitrise has a pretty good UI to add and edit steps. Steps are just custom scripts, and we can write pretty much what we like. Most of the predefined steps are open source. Here are a few</p>
<ul>
<li><p><a href="https://github.com/bitrise-io/steps-certificate-and-profile-installer">Certificate and Profile Installer</a></p>
</li>
<li><p><a href="https://github.com/bitrise-io/steps-cocoapods-install">Install CocoaPods</a></p>
</li>
<li><p><a href="https://github.com/bitrise-io/steps-slack-message">Slack message</a></p>
</li>
<li><p><a href="https://github.com/bitrise-io/steps-gradle-runner">Gradle Runner</a></p>
</li>
</ul>
<h2 id="Building-for-iOS"><a href="#Building-for-iOS" class="headerlink" title="Building for iOS"></a>Building for iOS</h2><p>Unless you use the step Build with Simulator , you will need provisioning profile and certificates with private keys in order to build for devices.</p>
<h3 id="Install-React-Native-amp-npm-install"><a href="#Install-React-Native-amp-npm-install" class="headerlink" title="Install React Native &amp; npm install"></a>Install React Native &amp; npm install</h3><p>React Native moves fast and break things. If you don’t have same version of React Native, you will have hard time figuring out why the builds constantly fail on CI.</p>
<p>Currently I use React Native 0.57.0, so I enter install <a href="mailto:react-native@0.57.0">react-native@0.57.0</a> to let Bitrise install the same version. But normally you just need to npm install as versions should be explicitly defined in package.json file.</p>
<p><img src="https://cdn-images-1.medium.com/max/5148/1*7dalPt_TWrxQM1Fy0pVV6Q.png" alt=""></p>
<p>Also, we need to make sure we have the same version of react-native-cli with Install React Native step</p>
<p><img src="https://cdn-images-1.medium.com/max/5376/1*0geJx4BeLCRigAZaWRRbhQ.png" alt=""></p>
<h3 id="Install-CocoaPods"><a href="#Install-CocoaPods" class="headerlink" title="Install CocoaPods"></a>Install CocoaPods</h3><p>It’s safe to have the same CocoaPods version. For Xcode 10, we need at least CocoaPods 1.6.0.beta-1 to avoid the bug <a href="https://stackoverflow.com/questions/52332207/xcode-10-warning-skipping-code-signing-because-the-target-does-not-have-an-info">Skipping code signing because the target does not have an Info.plist file</a>. Note that our Xcode project is inside ios folder, so we specify ./ios/Podfile for Podfile path</p>
<p><img src="https://cdn-images-1.medium.com/max/6276/1*9igBlR1u4HkVIisVJ8n9jg.png" alt=""></p>
<h3 id="Code-signing"><a href="#Code-signing" class="headerlink" title="Code signing"></a>Code signing</h3><p>Under Workflow -&gt; Code Signing we can upload provisioning profiles and certificates.</p>
<p><img src="https://cdn-images-1.medium.com/max/6244/1*-U8eExDeUtiQIQr737JOXw.png" alt=""></p>
<p>Then we need to use Certificate and profile install step to make use of the profiles and certificates we uploaded.</p>
<p><img src="https://cdn-images-1.medium.com/max/6100/1*D87n4E2d-zst11qItGIF3w.png" alt=""></p>
<h3 id="iOS-Auto-Provision"><a href="#iOS-Auto-Provision" class="headerlink" title="iOS Auto Provision"></a>iOS Auto Provision</h3><p>Another option is to use the <a href="https://blog.bitrise.io/ios-auto-provision-step">iOS Auto Provision</a> step, but it requires that we need to have an account in team that has connected Apple Developer Account. This way Bitrise can autogenerate profiles for us.</p>
<p><img src="https://cdn-images-1.medium.com/max/4768/1*qvapzygIiXp8-Zi_K2CZ0A.png" alt=""></p>
<p>Sometimes you need to set Should the step try to generate Provisioning Profiles even if Xcode managed signing is enabled in the Xcode project? to yes</p>
<p>Under Xcode Archive &amp; Export for iOS -&gt; Debug -&gt; Additional options for xcodebuild call We need to pass -allowProvisioningUpdates to make auto provisioning profile update happen.</p>
<h3 id="Recreate-user-scheme"><a href="#Recreate-user-scheme" class="headerlink" title="Recreate user scheme"></a>Recreate user scheme</h3><p>Bitrise can autogenerate schemes with the <a href="https://github.com/bitrise-steplib/steps-recreate-user-schemes">Recreate user scheme</a> step, but it’s good to mark our scheme as Shared in Xcode. This ensures consistence between local and CI builds.</p>
<h3 id="Archive"><a href="#Archive" class="headerlink" title="Archive"></a>Archive</h3><p>To archive project, we need to add Xcode Archive &amp; Export . For React Native, iOS project is inside ios folder, so we need to specify ./ios/MyApp.xcworkspace for Project path. Note that I use xcworkspace because I have CocoaPods</p>
<p><img src="https://cdn-images-1.medium.com/max/5760/1*XSKuNPL53OnlOwU3gKybeg.png" alt=""></p>
<p>Right now, as of React Native 0.57.0, it has problem running with the new build system in <a href="https://github.com/facebook/react-native/issues/21168">Xcode 10</a>, so the quick fix is to use legacy build system. Under Xcode Archive &amp; Export step there are fields to add additional options for xcodebuild call. Enter -UseModernBuildSystem=NO</p>
<p><img src="https://cdn-images-1.medium.com/max/5172/1*xB6yCWhHpJ0LCbwu7pDIOQ.png" alt=""></p>
<p>You can read more <a href="https://developer.apple.com/documentation/xcode_release_notes/xcode_10_release_notes/build_system_release_notes_for_xcode_10">Build System Release Notes for Xcode 10</a></p>
<blockquote>
<p>Xcode 10 uses a new build system. The new build system provides improved reliability and build performance, and it catches project configuration problems that the legacy build system does not.</p>
</blockquote>
<h2 id="Building-for-Android"><a href="#Building-for-Android" class="headerlink" title="Building for Android"></a>Building for Android</h2><p>For Android, the most troublesome task is to give keystore files to Bitrise as it is something we would keep privately from GitHub. Bitrise allows us to upload keystore file, but we also need to specify key alias and key password. One solution is to use Secrets and Environment variables</p>
<p><img src="https://cdn-images-1.medium.com/max/5800/1*meeAqXnpIc04MntoW7OOPQ.png" alt=""></p>
<p>But as we often use gradle.properties to specify custom variables for Gradle, it’s convenient to upload this file. Under Workflow -&gt; Code Signing is where we can upload keystore, as well as secured files</p>
<p><img src="https://cdn-images-1.medium.com/max/5588/1*j1vER_HvSgJsrGjibT2hhg.png" alt=""></p>
<p>The generated URL variables are path to our uploaded files. We can use curl to download them. Bitrise has also Generic File Storage step to download all secured files.</p>
<p><img src="https://cdn-images-1.medium.com/max/5000/1*VG56m0wXDGA9lE9VPFMm2Q.png" alt=""></p>
<p>The downloaded files is located at GENERIC_FILE_STORAGE , so we add another Custom Script step to copy those files into ./android folder</p>
<p><img src="https://cdn-images-1.medium.com/max/5692/1*8gkV4dl_jYmNYXmv-t8YNw.png" alt=""></p>
<pre><code>#!/usr/bin/env bash

cp $GENERIC_FILE_STORAGE/gradle.properties ./android/gradle.properties
cp $GENERIC_FILE_STORAGE/my_app_android.keystore ./android/my_app_android.keystore</code></pre><p>Note that the name of the files are the same of when we uploaded, and we use cp command to copy to folders.</p>
<h3 id="Android-Build"><a href="#Android-Build" class="headerlink" title="Android Build"></a>Android Build</h3><p>By default, Bitrise has 2 workflows: primary for quick start, and deploy for archiving and deploying. In the deploy workflow there is Android Build step. We can overwrite module and build variant here.</p>
<p><img src="https://cdn-images-1.medium.com/max/5732/1*EIXwjn91bFYh-L6MCt0wzQ.png" alt=""></p>
<h2 id="If-all-go-well"><a href="#If-all-go-well" class="headerlink" title="If all go well"></a>If all go well</h2><p>In Bitrise we can mark a step to continue regardless of the previous step. I use this to make sure iOS build independently from Android</p>
<p><img src="https://cdn-images-1.medium.com/max/6092/1*y-Gl4Ggpd3D6aWHXl_b_lA.png" alt=""></p>
<p>If both iOS and Android build are successful, we should see the below summary</p>
<p><img src="https://cdn-images-1.medium.com/max/3028/1*XLv8ga9NrNDxoOQbc4kzbQ.png" alt=""></p>
<p>Although Bitrise has a good UI to configure workflows and steps, we have fine grained control every parameters in the bitrise.yml file. It’s good to reason here as we get familiar with all the steps.</p>
<p><img src="https://cdn-images-1.medium.com/max/5156/1*6PW6EVGZeDqKSMP9sHiziQ.png" alt=""></p>
<h2 id="Where-to-go-from-here"><a href="#Where-to-go-from-here" class="headerlink" title="Where to go from here"></a>Where to go from here</h2><p>I hope you learn something and have a happy deploy. Since you are here, below articles may be of your interest</p>
<ul>
<li><p><a href="https://medium.com/fantageek/buddybuild-and-gradle-properties-in-android-apps-4590d17a2203">BuddyBuild and gradle.properties in Android apps</a></p>
</li>
<li><p><a href="https://medium.com/react-native-training/fixing-react-native-issues-and-happy-deploy-to-bitrise-fabric-circleci-44da4ab1487b">Deploying React Native to Bitrise, Fabric, CircleCI</a></p>
</li>
<li><p><a href="https://medium.com/hyperoslo/dealing-with-updated-pod-in-buddybuild-d6a128603e4f">Dealing with updated pod in BuddyBuild</a></p>
</li>
<li><p><a href="https://medium.com/fantageek/using-circleci-2-0-in-ios-apps-7641424ba388">Using CircleCI 2.0 in iOS apps</a></p>
</li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-05-23T16:21:36.000Z" title="2019-05-23T16:21:36.000Z">2019-05-23</time><span class="level-item">6 minutes read (About 828 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-make-Unity-games-in-pure-C/">How to make Unity games in pure C#</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/275">#275</a></strong></p>
<p>Original post <a href="https://codeburst.io/making-unity-games-in-pure-c-2b1723cdc71f">https://codeburst.io/making-unity-games-in-pure-c-2b1723cdc71f</a></p>
<hr>
<p>As an iOS engineers, I ditched Storyboard to avoid all possible hassles and write UI components in pure Swift code. I did XAML in Visual Studio for Windows Phone apps and XML in Android Studio for Android apps some time ago, and I had good experience. However since I’m used to writing things in code, I like to do the same for Unity games, although the Unity editor and simulator are pretty good. Besides being comfortable declaring things in code, I find that code is easy to diff and organise. I also learn more how components work, because in Unity editor, most of important the components and properties are already wired and set up for us, so there’s some very obvious things that we don’t know.</p>
<p>All the things we can do in the editor, we can express in code. Things like setting up components, transform anchor, animation, sound, … are all feasible in code and you only need to using the correct namespace. There’s lots of info at <a href="https://docs.unity3d.com/ScriptReference/">Welcome to the Unity Scripting Reference</a>. Unity 2018 has Visual Studio Community so that’s pretty comfortable to write code.</p>
<h2 id="Javascript-and-C"><a href="#Javascript-and-C" class="headerlink" title="Javascript and C"></a>Javascript and C</h2><p>I would be extremely happy if Unity supports Kotlin or Swift, but for now only <a href="https://unity3d.com/learn/tutorials/topics/scripting/c-vs-js-syntax">Javascript and C#</a> are supported. I’m also a huge fan of pure Javascript, but I choose C# because of type safety, and also because C# was the language I studied at university for XNA and ASP.NET projects.</p>
<p><img src="https://cdn-images-1.medium.com/max/2000/1*_c-Ytv_IVI2Q7xJtfw0GIQ.png" alt=""></p>
<h2 id="Indentation"><a href="#Indentation" class="headerlink" title="Indentation"></a>Indentation</h2><p>If you like 2 spaces indentation like me, you can go to Preferences in Visual Studio to change the editor settings</p>
<p><img src="https://cdn-images-1.medium.com/max/2854/1*r3ihnAstxkZnDFG6qNrtvg.png" alt=""></p>
<h2 id="GameObject-and-Canvas"><a href="#GameObject-and-Canvas" class="headerlink" title="GameObject and Canvas"></a>GameObject and Canvas</h2><p>In the Unity editor, try dragging an arbitrary UI element onto the screen, you can see that a Canvas and EventSystem are also created. These are GameObject that has a bunch of predefined Component .</p>
<p><img src="https://cdn-images-1.medium.com/max/2894/1*QojuK8XV5FfWqs7bt-79uw.png" alt=""></p>
<p>If we were to write this in code, we just need to follow the what is on the screen. In the beginning, we must use the editor to learn objects and properties, but later if we are familiar with Unity and its many GameObject , we can just code. Bear with me, it can be a hassle with code at first, but you surely learn a lot.</p>
<p>I usually organise reusable code into files, let’s create a C# file and name it Sugar . For EventSystemand UI we need UnityEngine.EventSystems and using UnityEngine.UI namespaces.</p>
<p>Here’s how to create EventSystem</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Sugar</span> &#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> GameObject <span class="title">makeEventSystem</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">		GameObject systemEventObject = <span class="keyword">new</span> GameObject(<span class="string">"EventSystem"</span>);</span><br><span class="line"></span><br><span class="line">		EventSystem system = systemEventObject.AddComponent&lt;EventSystem&gt;();</span><br><span class="line">		system.sendNavigationEvents = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">		StandaloneInputModule module = systemEventObject.AddComponent&lt;StandaloneInputModule&gt;();</span><br><span class="line">		module.horizontalAxis = <span class="string">"Horizontal"</span>;</span><br><span class="line">		module.verticalAxis = <span class="string">"Vertical"</span>;</span><br><span class="line">		module.submitButton = <span class="string">"Submit"</span>;</span><br><span class="line">		module.cancelButton = <span class="string">"Cancel"</span>;</span><br><span class="line">		module.inputActionsPerSecond = <span class="number">10</span>;</span><br><span class="line">		module.repeatDelay = <span class="number">0.5f</span>;</span><br><span class="line">		module.forceModuleActive = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">return</span> systemEventObject;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>and Canvas</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> GameObject <span class="title">makeCanvas</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">	GameObject canvasObject= <span class="keyword">new</span> GameObject(<span class="string">"Canvas"</span>);</span><br><span class="line"></span><br><span class="line">	Canvas canvas = canvasObject.AddComponent&lt;Canvas&gt;();</span><br><span class="line">	canvas.renderMode = RenderMode.WorldSpace;</span><br><span class="line"></span><br><span class="line">	CanvasScaler scaler = canvasObject.AddComponent&lt;CanvasScaler&gt;();</span><br><span class="line">	scaler.scaleFactor = <span class="number">10.0f</span>;</span><br><span class="line">	scaler.dynamicPixelsPerUnit = <span class="number">10.0f</span>;</span><br><span class="line"></span><br><span class="line">	GraphicRaycaster graphic = canvasObject.AddComponent&lt;GraphicRaycaster&gt;();</span><br><span class="line"></span><br><span class="line">	canvasObject.GetComponent&lt;RectTransform&gt;().SetSizeWithCurrentAnchors(RectTransform.Axis.Horizontal, <span class="number">3.0f</span>);</span><br><span class="line">	canvasObject.GetComponent&lt;RectTransform&gt;().SetSizeWithCurrentAnchors(RectTransform.Axis.Vertical, <span class="number">3.0f</span>);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> canvasObject;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>and how to make some common UI elements</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> GameObject <span class="title">makeBackground</span>(<span class="params">GameObject canvasObject</span>)</span> &#123;</span><br><span class="line">	GameObject backgroundObject = <span class="keyword">new</span> GameObject(<span class="string">"Background"</span>);</span><br><span class="line">	backgroundObject.AddComponent&lt;CanvasRenderer&gt;();</span><br><span class="line"></span><br><span class="line">	Image image = backgroundObject.AddComponent&lt;Image&gt;();</span><br><span class="line">	image.color = Color.green;</span><br><span class="line"></span><br><span class="line">	backgroundObject.transform.SetParent(canvasObject.transform, <span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> backgroundObject;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> GameObject <span class="title">makeLogo</span>(<span class="params">GameObject parentObject</span>)</span> &#123;</span><br><span class="line">	GameObject logoObject = <span class="keyword">new</span> GameObject(<span class="string">"Logo"</span>);</span><br><span class="line">	logoObject.AddComponent&lt;CanvasRenderer&gt;();</span><br><span class="line"></span><br><span class="line">	Image image = logoObject.AddComponent&lt;Image&gt;();</span><br><span class="line">	image.color = Color.red;</span><br><span class="line"></span><br><span class="line">	logoObject.transform.SetParent(parentObject.transform, <span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> logoObject;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> GameObject <span class="title">makeButton</span>(<span class="params">String title, GameObject parentObject</span>)</span> &#123;</span><br><span class="line">	GameObject buttonObject = <span class="keyword">new</span> GameObject(title + <span class="string">" Button"</span>);</span><br><span class="line">	buttonObject.AddComponent&lt;CanvasRenderer&gt;();</span><br><span class="line"></span><br><span class="line">	GameObject textObject = <span class="keyword">new</span> GameObject(<span class="string">"Text"</span>);</span><br><span class="line">	textObject.AddComponent&lt;CanvasRenderer&gt;();</span><br><span class="line"></span><br><span class="line">	Text text = textObject.AddComponent&lt;Text&gt;();</span><br><span class="line">	text.text = title;</span><br><span class="line"></span><br><span class="line">	textObject.transform.SetParent(buttonObject.transform, <span class="literal">false</span>);</span><br><span class="line">	buttonObject.transform.SetParent(parentObject.transform, <span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> buttonObject;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Now create an empty GameObject in your Scene and add a Script component to this GameObject . You can reference code in your Sugar.cs without any problem</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">MenuScript</span> : <span class="title">MonoBehaviour</span> &#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Use this for initialization</span></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">Start</span> (<span class="params"></span>)</span> &#123;</span><br><span class="line">		setup();</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// Update is called once per frame</span></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">Update</span> (<span class="params"></span>)</span> &#123;</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">setup</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">		Sugar sugar = <span class="keyword">new</span> Sugar();</span><br><span class="line">		GameObject canvasObject = sugar.makeCanvas();</span><br><span class="line">		GameObject eventSystemObject = sugar.makeEventSystem();</span><br><span class="line">		GameObject backgroundObject = sugar.makeBackground(canvasObject);</span><br><span class="line"></span><br><span class="line">		GameObject startButton = sugar.makeButton(<span class="string">"Start"</span>, canvasObject);</span><br><span class="line">		GameObject highScoresButton = sugar.makeButton(<span class="string">"High Scores"</span>, canvasObject);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Where-to-go-from-here"><a href="#Where-to-go-from-here" class="headerlink" title="Where to go from here"></a>Where to go from here</h2><ul>
<li><p><a href="https://docs.unity3d.com/Manual/HOWTO-UICreateFromScripting.html">Creating UI elements from scripting</a>: another way is to use Prefabs and Instantiate function in C# to easily reference and construct elements</p>
</li>
<li><p><a href="https://unity3d.com/learn/tutorials/s/2d-game-creation">2D Game Creation</a>: official Unity tutorials for making 2D games.</p>
</li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-05-23T16:21:05.000Z" title="2019-05-23T16:21:05.000Z">2019-05-23</time><span class="level-item">12 minutes read (About 1825 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/20-recommended-utility-apps-for-macOS/">20 recommended utility apps for macOS</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/274">#274</a></strong></p>
<p>Original post <a href="https://hackernoon.com/20-recommended-utility-apps-for-macos-in-2018-ea494b4db72b">https://hackernoon.com/20-recommended-utility-apps-for-macos-in-2018-ea494b4db72b</a></p>
<hr>
<p>Depending on the need, we have different apps on the mac. As someone who worked mostly with development, below are my indispensable apps. They are like suits to Tony Stark. Since I love open source apps, they have higher priority in the list.</p>
<h2 id="Open-source-apps"><a href="#Open-source-apps" class="headerlink" title="Open source apps"></a>Open source apps</h2><h3 id="iTerm-2-https-www-iterm2-com"><a href="#iTerm-2-https-www-iterm2-com" class="headerlink" title="iTerm 2 https://www.iterm2.com/"></a>iTerm 2 <a href="https://www.iterm2.com/">https://www.iterm2.com/</a></h3><blockquote>
<p>iTerm2 is a replacement for Terminal and the successor to iTerm. It works on Macs with macOS 10.10 or newer. iTerm2 brings the terminal into the modern age with features you never knew you always wanted.</p>
</blockquote>
<p><img src="https://cdn-images-1.medium.com/max/2728/1*-U-N-4151szNzxebapR45w.png" alt=""></p>
<p>iTerm2 has good integration with tmux and supports <a href="https://www.iterm2.com/documentation/2.1/documentation-one-page.html">Split Panes</a></p>
<blockquote>
<p>Term2 allows you to divide a tab into many rectangular “panes”, each of which is a different terminal session. The shortcuts cmd-d and cmd-shift-d divide an existing session vertically or horizontally, respectively. You can navigate among split panes with cmd-opt-arrow or cmd-[ and cmd-]. You can “maximize” the current pane — hiding all others in that tab — with cmd-shift-enter. Pressing the shortcut again restores the hidden panes.</p>
</blockquote>
<p>There’s <a href="https://github.com/ggreer/the_silver_searcher">the_silver_searcher</a> with ag command to quickly search for files</p>
<h3 id="oh-my-zsh-https-github-com-robbyrussell-oh-my-zsh"><a href="#oh-my-zsh-https-github-com-robbyrussell-oh-my-zsh" class="headerlink" title="oh-my-zsh https://github.com/robbyrussell/oh-my-zsh"></a>oh-my-zsh <a href="https://github.com/robbyrussell/oh-my-zsh">https://github.com/robbyrussell/oh-my-zsh</a></h3><blockquote>
<p>A delightful community-driven (with 1,200+ contributors) framework for managing your zsh configuration. Includes 200+ optional plugins (rails, git, OSX, hub, capistrano, brew, ant, php, python, etc), over 140 themes to spice up your morning, and an auto-update tool so that makes it easy to keep up with the latest updates from the community.</p>
</blockquote>
<p>I use z shell with oh-my-zsh plugins. I also use <a href="https://github.com/zsh-users/zsh-autosuggestions">zsh-autocompletions</a> to have autocompletion like fish shell and <a href="https://github.com/robbyrussell/oh-my-zsh/tree/master/plugins/z">z</a> to track and quickly navigate to the most used directories.</p>
<h3 id="spectacle-https-github-com-eczarny-spectacle"><a href="#spectacle-https-github-com-eczarny-spectacle" class="headerlink" title="spectacle https://github.com/eczarny/spectacle"></a>spectacle <a href="https://github.com/eczarny/spectacle">https://github.com/eczarny/spectacle</a></h3><blockquote>
<p>Spectacle allows you to organize your windows without using a mouse.</p>
</blockquote>
<p><img src="https://cdn-images-1.medium.com/max/2426/1*0TFgBiAif9VBl6Xv4D6EtQ.png" alt=""></p>
<p>With spectable, I can organise windows easily with just Cmd+Option+F or Cmd+Option+Left</p>
<h3 id="insomnia-https-github-com-getinsomnia-insomnia"><a href="#insomnia-https-github-com-getinsomnia-insomnia" class="headerlink" title="insomnia https://github.com/getinsomnia/insomnia"></a>insomnia <a href="https://github.com/getinsomnia/insomnia">https://github.com/getinsomnia/insomnia</a></h3><blockquote>
<p>Insomnia is a cross-platform <em>REST client</em>, built on top of <a href="http://electron.atom.io/">Electron</a>.</p>
</blockquote>
<p>Regardless if you like electron.js apps or not. This is a great tool for testing REST requets</p>
<p><img src="https://cdn-images-1.medium.com/max/7168/1*To2QSXpMbFryyO50hwR_9w.png" alt=""></p>
<h3 id="Visual-Studio-Code-https-github-com-Microsoft-vscode"><a href="#Visual-Studio-Code-https-github-com-Microsoft-vscode" class="headerlink" title="Visual Studio Code https://github.com/Microsoft/vscode"></a>Visual Studio Code <a href="https://github.com/Microsoft/vscode">https://github.com/Microsoft/vscode</a></h3><blockquote>
<p><a href="https://code.visualstudio.com/">VS Code</a> is a new type of tool that combines the simplicity of a code editor with what developers need for their core edit-build-debug cycle. Code provides comprehensive editing and debugging support, an extensibility model, and lightweight integration with existing tools.</p>
</blockquote>
<p>This seems to be the most popular for front end development, and many other things. There’s bunch of extensions that make the experience to a new level.</p>
<h3 id="IconGenerator-https-github-com-onmyway133-IconGenerator"><a href="#IconGenerator-https-github-com-onmyway133-IconGenerator" class="headerlink" title="IconGenerator https://github.com/onmyway133/IconGenerator"></a>IconGenerator <a href="https://github.com/onmyway133/IconGenerator">https://github.com/onmyway133/IconGenerator</a></h3><p>Built by me. When developing iOS, Android and macOS applications, I need a quick way to generate icons in different sizes. You can simply drag the generated asset into Xcode and that’s it.</p>
<p><img src="https://cdn-images-1.medium.com/max/2000/0*JmfHsO-lmN1aWX6J.png" alt=""></p>
<h3 id="vmd-https-github-com-yoshuawuyts-vmd"><a href="#vmd-https-github-com-yoshuawuyts-vmd" class="headerlink" title="vmd https://github.com/yoshuawuyts/vmd"></a>vmd <a href="https://github.com/yoshuawuyts/vmd">https://github.com/yoshuawuyts/vmd</a></h3><blockquote>
<p>Preview markdown files in a separate window. Markdown is formatted exactly the same as on GitHub.</p>
</blockquote>
<p><img src="https://cdn-images-1.medium.com/max/2880/0*LnE9wGaCRvd90FkQ.png" alt=""></p>
<h3 id="colorpicker-https-github-com-Toinane-colorpicker"><a href="#colorpicker-https-github-com-Toinane-colorpicker" class="headerlink" title="colorpicker https://github.com/Toinane/colorpicker"></a>colorpicker <a href="https://github.com/Toinane/colorpicker">https://github.com/Toinane/colorpicker</a></h3><blockquote>
<p>A mininal but complete colorpicker desktop app</p>
</blockquote>
<p>I used to use <a href="https://sipapp.io/">Sip</a> but I often get the problem of losing focus.</p>
<p><img src="https://cdn-images-1.medium.com/max/2000/0*nBZsnnHC5AJ_Ha0X" alt=""></p>
<h3 id="GifCapture-https-github-com-onmyway133-GifCapture"><a href="#GifCapture-https-github-com-onmyway133-GifCapture" class="headerlink" title="GifCapture https://github.com/onmyway133/GifCapture"></a>GifCapture <a href="https://github.com/onmyway133/GifCapture">https://github.com/onmyway133/GifCapture</a></h3><p>I built this as a native macOS app to capture screen and save to gif file. It works like <a href="https://www.cockos.com/licecap/">Licecap</a> but open source. There’s also an open source tool called <a href="https://github.com/wulkano/kap">kap</a> that is slick.</p>
<p><img src="https://cdn-images-1.medium.com/max/2000/0*UVNhL9otC1Of3h_I.png" alt=""></p>
<h3 id="Itsycal-https-github-com-sfsam-Itsycal"><a href="#Itsycal-https-github-com-sfsam-Itsycal" class="headerlink" title="Itsycal https://github.com/sfsam/Itsycal"></a>Itsycal <a href="https://github.com/sfsam/Itsycal">https://github.com/sfsam/Itsycal</a></h3><blockquote>
<p>Itsycal is a tiny calendar for your Mac’s menu bar.</p>
</blockquote>
<p><img src="https://cdn-images-1.medium.com/max/2152/1*3uo-HmuBIrOd5hrHlnHHyA.png" alt=""></p>
<p>The app is minimal and works very well. It can shows calendar for integrated accounts in the mac.</p>
<h3 id="PushNotifications-https-github-com-onmyway133-PushNotifications"><a href="#PushNotifications-https-github-com-onmyway133-PushNotifications" class="headerlink" title="PushNotifications https://github.com/onmyway133/PushNotifications"></a>PushNotifications <a href="https://github.com/onmyway133/PushNotifications">https://github.com/onmyway133/PushNotifications</a></h3><p>I often need to test push notification to iOS and Android apps. And I want to support both certificate and key p8 authentication for Apple Push Notification service, so I built this tool.</p>
<p><img src="https://cdn-images-1.medium.com/max/2000/0*zM9AWj2-C0-S4T29.png" alt=""></p>
<h3 id="Lyrics-https-github-com-onmyway133-Lyrics"><a href="#Lyrics-https-github-com-onmyway133-Lyrics" class="headerlink" title="Lyrics https://github.com/onmyway133/Lyrics"></a>Lyrics <a href="https://github.com/onmyway133/Lyrics">https://github.com/onmyway133/Lyrics</a></h3><blockquote>
<p>A menu bar app to show the lyric of the playing Spotify song</p>
</blockquote>
<p>When I listen to some songs in Spotify, I want to see the lyrics too. The lyrics is fetched from <a href="https://genius.com/">https://genius.com/</a> and displayed in a wonderful UI.</p>
<p><img src="https://cdn-images-1.medium.com/max/2000/0*IBFKvyfkdi5FPWsF.png" alt=""></p>
<h3 id="gitify-https-github-com-manosim-gitify"><a href="#gitify-https-github-com-manosim-gitify" class="headerlink" title="gitify https://github.com/manosim/gitify"></a>gitify <a href="https://github.com/manosim/gitify">https://github.com/manosim/gitify</a></h3><blockquote>
<p>GitHub Notifications on your desktop.</p>
</blockquote>
<p>I use this to get real time notification for issues and pull requests for projects on GitHub. I hope there is support for Bitbucket soon.</p>
<p><img src="https://cdn-images-1.medium.com/max/4000/0*IsCx4-yROD3DnT4B.jpg" alt=""></p>
<h3 id="FinderGo-https-github-com-onmyway133-FinderGo"><a href="#FinderGo-https-github-com-onmyway133-FinderGo" class="headerlink" title="FinderGo https://github.com/onmyway133/FinderGo"></a>FinderGo <a href="https://github.com/onmyway133/FinderGo">https://github.com/onmyway133/FinderGo</a></h3><p>FinderGo is both a native macOS app and a Finder extension. It has toolbar button that opens terminal right within Finder in the current directory. You can configure it to open either Terminal, iTerm2 or Hyper</p>
<p><img src="https://cdn-images-1.medium.com/max/4000/0*735x63KgINRN7ig8.gif" alt=""></p>
<h3 id="Atom-one-dark-theme"><a href="#Atom-one-dark-theme" class="headerlink" title="Atom one dark theme"></a>Atom one dark theme</h3><p>This is about theme. There is the very popular <a href="https://github.com/dracula/">dracular</a> themes, but I find it too strong for the eyes. I don’t use Atom, but I love its <a href="https://atom.io/themes/one-dark-ui">one dark UI</a>. I used to maintain my own theme for Xcode called <a href="https://github.com/onmyway133/DarkSide">DarkSide</a> but now I use <a href="https://github.com/bojan/xcode-one-dark">xcode-one-dark</a> for Xcode and <a href="https://marketplace.visualstudio.com/items?itemName=akamud.vscode-theme-onedark#qna">Atom One Dark Theme</a> for Visual Studio Code.</p>
<p><img src="https://cdn-images-1.medium.com/max/7168/1*nQxAFbU1qPUaGqn_GJ8OiQ.png" alt=""></p>
<p>I also use <a href="https://github.com/tonsky/FiraCode">Fira Code</a> font in Xcode, Visual Studio Code and Android Studio, which has beautiful ligatures.</p>
<h3 id="Chrome-extensions"><a href="#Chrome-extensions" class="headerlink" title="Chrome extensions"></a>Chrome extensions</h3><p>I use Chrome for its speed and wonderful support for extensions. The extensions I made are <a href="https://github.com/onmyway133/github-chat">github-chat</a> to enable chat within GitHub and <a href="https://github.com/onmyway133/github-extended">github-extended</a> to see more pinned repositories.</p>
<p>There are also <a href="https://github.com/sindresorhus/refined-github">refined github</a>, <a href="https://github.com/harshjv/github-repo-size">github-repo-size</a> and <a href="https://github.com/ovity/octotree">octotree</a> that are indispensable for me.</p>
<h3 id="caprine-https-github-com-sindresorhus-caprine"><a href="#caprine-https-github-com-sindresorhus-caprine" class="headerlink" title="caprine https://github.com/sindresorhus/caprine"></a>caprine <a href="https://github.com/sindresorhus/caprine">https://github.com/sindresorhus/caprine</a></h3><blockquote>
<p>Caprine is an unofficial and privacy focused Facebook Messenger app with many useful features.</p>
</blockquote>
<p><img src="https://cdn-images-1.medium.com/max/3384/0*09sP4yi4CFJIxSUb.png" alt=""></p>
<h2 id="Close-source-and-commercial-apps"><a href="#Close-source-and-commercial-apps" class="headerlink" title="Close source and commercial apps"></a>Close source and commercial apps</h2><h3 id="Sublime-Text-https-www-sublimetext-com"><a href="#Sublime-Text-https-www-sublimetext-com" class="headerlink" title="Sublime Text https://www.sublimetext.com/"></a>Sublime Text <a href="https://www.sublimetext.com/">https://www.sublimetext.com/</a></h3><blockquote>
<p><strong>Sublime Text</strong> is a sophisticated text editor for code, markup and prose. You’ll love the slick user interface, extraordinary features and amazing performance.</p>
</blockquote>
<p>Sublime Text is simply fast and the editing experience is very good. I’ve used Atom but it is too slow.</p>
<h3 id="Sublime-Merge-https-www-sublimemerge-com"><a href="#Sublime-Merge-https-www-sublimemerge-com" class="headerlink" title="Sublime Merge https://www.sublimemerge.com/"></a>Sublime Merge <a href="https://www.sublimemerge.com/">https://www.sublimemerge.com/</a></h3><blockquote>
<p><em>Meet a new Git client, from the makers of Sublime Text</em></p>
</blockquote>
<p>Sublime Merge never lets me down. The source control app is simply very quick. I used SourceTree in the past, but it is very slow and had problem with authentication to Bitbucket and GitHub, and it halts very often for React Native apps, which has lots of node modules committed.</p>
<p><img src="https://cdn-images-1.medium.com/max/4288/1*mpebCS0MyzWfaIolcMWstQ.png" alt=""></p>
<h3 id="1-Password-https-1password-com"><a href="#1-Password-https-1password-com" class="headerlink" title="1 Password https://1password.com/"></a>1 Password <a href="https://1password.com/">https://1password.com/</a></h3><blockquote>
<p>1Password remembers them all for you. Save your passwords and log in to sites with a single click. It’s that simple.</p>
</blockquote>
<p>Everyone need strong and unique passwords these day. This tool is indispensable</p>
<h3 id="Monosnap-https-monosnap-com-welcome"><a href="#Monosnap-https-monosnap-com-welcome" class="headerlink" title="Monosnap https://monosnap.com/welcome"></a>Monosnap <a href="https://monosnap.com/welcome">https://monosnap.com/welcome</a></h3><blockquote>
<p>Make screenshots. Draw on it. Shoot video and share your files. It’s fast, easy and free.</p>
</blockquote>
<p>I haven’t found a good open source alternative, this is good in capturing screen or portion of the screen.</p>
<p><img src="https://cdn-images-1.medium.com/max/2000/0*yQIOnlMbSNVhxcDX.png" alt=""></p>
<h3 id="VLC-https-www-videolan-org-index-nb-html"><a href="#VLC-https-www-videolan-org-index-nb-html" class="headerlink" title="VLC https://www.videolan.org/index.nb.html"></a>VLC <a href="https://www.videolan.org/index.nb.html">https://www.videolan.org/index.nb.html</a></h3><p>iTunes or Quick Time has problem with some video codecs. This app VLC can play all kinds of video types.</p>
<h3 id="Xcode-https-developer-apple-com-xcode"><a href="#Xcode-https-developer-apple-com-xcode" class="headerlink" title="Xcode https://developer.apple.com/xcode/"></a>Xcode <a href="https://developer.apple.com/xcode/">https://developer.apple.com/xcode/</a></h3><p>Xcode is the go to editor for iOS developer. The current version is Xcode 10. From Xcode 8, plugins are not supported. The way to go is Xcode extensions.</p>
<p>I have developed <a href="https://github.com/onmyway133/XcodeColorSense2">XcodeColorSense2</a> to easily recognise hex colors, and <a href="https://github.com/onmyway133/XcodeWay">XcodeWay</a> to easily navigate to many places right from Xcode</p>
<p><img src="https://cdn-images-1.medium.com/max/2000/0*iAvpNCUGjZR8YlbW.gif" alt=""></p>
<p><img src="https://cdn-images-1.medium.com/max/3016/1*TXOcxnsxfuxvY2MjPvzdZA.png" alt=""></p>
<h3 id="Sketch-https-www-sketchapp-com"><a href="#Sketch-https-www-sketchapp-com" class="headerlink" title="Sketch https://www.sketchapp.com/"></a>Sketch <a href="https://www.sketchapp.com/">https://www.sketchapp.com/</a></h3><blockquote>
<p>Sketch is a design toolkit built to help you create your best work — from your earliest ideas, through to final artwork.</p>
</blockquote>
<p>Sketch is the most favorite design tool these days. There are many cool plugins for it. I use <a href="https://github.com/onmyway133/Sketch-Action">Sketch-Action</a> and <a href="https://abynim.github.io/UserFlows/">User Flows</a></p>
<p><img src="https://cdn-images-1.medium.com/max/2992/1*XUNCJlgYzEsnMDEEF5k_iQ.png" alt=""></p>
<p><img src="https://cdn-images-1.medium.com/max/3916/1*1l7tpX0r6xZdLyqcCdK7cQ.png" alt=""></p>
<h2 id="Where-to-go-from-here"><a href="#Where-to-go-from-here" class="headerlink" title="Where to go from here"></a>Where to go from here</h2><p>I hope you find some new tools to try. If you know other awesome tools, feel free to make a comment. Here are some more links to discover further</p>
<ul>
<li><a href="https://electronjs.org/apps">Electron apps</a></li>
<li><a href="https://www.digitaltrends.com/computing/best-mac-apps/">The best Mac apps of 2018</a></li>
<li><a href="https://dev.to/sarthology/best-open-source-tools-for-developers--300f">Best Open Source Tools For Developers</a></li>
<li><a href="https://github.com/serhii-londar/open-source-mac-os-apps">open-source-mac-os-apps</a></li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-05-23T16:18:19.000Z" title="2019-05-23T16:18:19.000Z">2019-05-23</time><span class="level-item">10 minutes read (About 1436 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-run-Android-apps-in-Bitrise/">How to run Android apps in Bitrise</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/273">#273</a></strong></p>
<p>Original post <a href="https://hackernoon.com/using-bitrise-ci-for-android-apps-fa9c48e301d8">https://hackernoon.com/using-bitrise-ci-for-android-apps-fa9c48e301d8</a></p>
<hr>
<p>CI, short for Continuous Integration, is a good practice to move fast and confidently where code is integrated into shared repository many times a day. The ability to have pull requests get built, tested and release builds get distributed to testers allows team to verify automated build and identify problems quickly.</p>
<p>I ‘ve been using <a href="https://www.buddybuild.com/">BuddyBuild</a> for both iOS and Android apps and were very happy with it. The experience from creating new apps and deploying build is awesome. It works so well that <a href="https://www.buddybuild.com/blog/buddybuild-is-now-part-of-apple">Apple acquired it</a>, which then lead to the fact that Android apps are no longer supported and new customers can’t register.</p>
<p>We are one of <a href="https://github.com/GitHawkApp/GitHawk/issues/1330">those</a> <a href="https://stackoverflow.com/questions/48085134/alternative-to-buddy-build">who</a> are looking for new alternatives. We’ve been using TravisCI, CircleCI and Jenkins to deploy to Fabric. There is also <a href="https://www.jetbrains.com/teamcity/">TeamCity</a> that is promising. But after a quick survey with friends and people, <a href="https://www.bitrise.io/">Bitrise</a> is the most recommended. So maybe I should try that.</p>
<p>The thing I like about Bitrise is its wide range support of workflow. They are just scripts that execute certain actions, and most of them are <a href="https://github.com/bitrise-io/">open source</a>. There’s also yml config file, but all things can be done using web interface, so I don’t need to look into pages of documentation just to get the configuration right.</p>
<p>This post is not a promote for Bitrise, it is just about trying and adapting to new things. There is no eternal thing in tech, things come ad go fast. Below are some of the lessons I learn after using Bitrise, hope you find them useful.</p>
<h2 id="Variant-to-build"><a href="#Variant-to-build" class="headerlink" title="Variant to build"></a>Variant to build</h2><p>There is no Android Build step in the default ‘primary’ workflow, as primary is generally used for testing the code for every push. There is an Android Build step in the deploy workflow and the app gets built by running this workflow. However, I like to have the Android Build step in my primary workflow, so I added it there.</p>
<p>Usually I want app module and stagingRelease build variant as we need to deploy staging builds to internal testers.</p>
<p><img src="https://cdn-images-1.medium.com/max/2882/1*uJGkaQ0EvmDIM_T3ZTmuZw.png" alt=""></p>
<p>If you go to Bitrise.yml tab you can see that the configuration file has been updated. This is very handy. I’ve used some other CI services and I needed to lookup their documentation on how to make this yml work.</p>
<p><img src="https://cdn-images-1.medium.com/max/2836/1*z9eotS_Dyetx4ubtjWsnjg.png" alt=""></p>
<h2 id="Bump-version-code-automatically"><a href="#Bump-version-code-automatically" class="headerlink" title="Bump version code automatically"></a>Bump version code automatically</h2><p>I’ve used some other CI services before and the app version code surely does not start from 0. So it makes sense that Bitrise can auto bump version code from the current number. There are some predefined steps in Workflow but they don’t serve my need</p>
<p><img src="https://cdn-images-1.medium.com/max/2000/1*MsojdXPWw9WMzVa8SuOtDA.png" alt=""></p>
<p>For the Set Android Manifest Version code and name step, the source code is <a href="https://github.com/jamesmontemagno/steps-set-android-manifest-versions/blob/master/step.sh">here</a> so I understand what it does. It works by modify AndroidManifest.xml file using sed . This article <a href="https://blog.bitrise.io/adjust-your-build-numbers">Adjust your build number</a> is not clear enough.</p>
<p><img src="https://cdn-images-1.medium.com/max/2076/1*WDmvpUHp23a-jBjWVfN00Q.png" alt=""></p>
<pre><code>sed -i.bak “s/android:versionCode=”\”${VERSIONCODE}\””/android:versionCode=”\”${CONFIG_new_version_code}\””/” ${manifest_file}</code></pre><p>In our projects, the versionCode is from an environment variable BUILD_NUMBER in Jenkins, so we need look up the same thing in <a href="https://devcenter.bitrise.io/faq/available-environment-variables/">Available Environment Variables</a>, and it is BITRISE_BUILD_NUMBER , which is a build number of the build on bitrise.io.</p>
<p>This is how versionCode looks like in build.gradle</p>
<pre><code>versionCode (System.*getenv*(&quot;BITRISE_BUILD_NUMBER&quot;) as Integer ?: System.*getenv*(&quot;BUILD_NUMBER&quot;) as Integer ?: 243)</code></pre><p>243 is the current version code of this project, so let’s go to app’s Settings and change Your next build number will be</p>
<p><img src="https://cdn-images-1.medium.com/max/2254/1*xUOPh2zy6V6hMPPty_PMXg.png" alt=""></p>
<h2 id="Deploy-to-Fabric"><a href="#Deploy-to-Fabric" class="headerlink" title="Deploy to Fabric"></a>Deploy to Fabric</h2><p>I hope Bitrise has its own Crash reporting tool. For now I use Crashlytics in <a href="https://fabric.io/home">Fabric</a>. And despite that Bitrise can distribute builds to testers, I still need to cross deploy to Fabric for historial reasons.</p>
<p>There is only script <a href="https://github.com/bitrise-io/steps-fabric-crashlytics-beta-deploy">steps-fabric-crashlytics-beta-deploy</a> to deploy IPA file for iOS apps, so we need something for Android. Fortunately I can use the Fabric plugin for gradle.</p>
<h3 id="Add-Fabric-plugin"><a href="#Add-Fabric-plugin" class="headerlink" title="Add Fabric plugin"></a>Add Fabric plugin</h3><p>Follow <a href="https://fabric.io/kits/android/crashlytics/install">Install Crashlytics via Gradle</a> to add Fabric plugin. Basically you need to add these dependencies to your app ‘s build.gradle</p>
<pre><code>buildscript {
    repositories {
        google()
        maven { url &apos;https://maven.fabric.io/public&apos; }
    }

    dependencies {
        classpath &apos;io.fabric.tools:gradle:1.+&apos;
    }
}

apply plugin: &apos;io.fabric&apos;

dependencies {
    compile(&apos;com.crashlytics.sdk.android:crashlytics:2.9.4@aar&apos;) {
        transitive = true;
    }
}</code></pre><p>and API credentials in Manifest file</p>
<pre><code>&lt;meta-data
 android:name=”io.fabric.ApiKey”
 android:value=”67ffdb78ce9cd50af8404c244fa25df01ea2b5bc”
 /&gt;</code></pre><h3 id="Deploy-command"><a href="#Deploy-command" class="headerlink" title="Deploy command"></a>Deploy command</h3><p>Modern Android Studio usually includes a gradlew execution file in the root of your project. Run ./gradlew tasks for the list of tasks that you app can perform, look for Build tasks that start with assemble . Read more <a href="https://developer.android.com/studio/build/building-cmdline">Build your app from the command line</a></p>
<blockquote>
<p>You can execute all the build tasks available to your Android project using the <a href="https://docs.gradle.org/current/userguide/gradle_wrapper.html">Gradle wrapper</a> command line tool. It’s available as a batch file for Windows (gradlew.bat) and a shell script for Linux and Mac (gradlew.sh), and it’s accessible from the root of each project you create with Android Studio.</p>
</blockquote>
<p>For me, I want to deploy staging release build variant, so I run. Check that the build is on Fabric.</p>
<pre><code>./gradlew assembleStagingRelease crashlyticsUploadDistributionStagingRelease</code></pre><h3 id="Manage-tester-group"><a href="#Manage-tester-group" class="headerlink" title="Manage tester group"></a>Manage tester group</h3><p>Go to your app on Fabric.io and create group of testers. Note that alias that is generated for the group</p>
<p><img src="https://cdn-images-1.medium.com/max/2000/1*HMeW8VGqC6OWRizl0cC5BQ.png" alt=""></p>
<p>Go to your app’s build.gradle and add ext.betaDistributionGroupAliases=’my-internal-testers’ to your desired productFlavors or buildTypes . For me I add to staging under productFlavors</p>
<pre><code>productFlavors {
   staging {
     // …
     ext.betaDistributionGroupAliases=’hyper-internal-testers-1&apos;
   }
   production {
     // …
   }
}</code></pre><p>Now that the command is run correctly, let’s add that to Bitrise</p>
<h3 id="Gradle-Run-step"><a href="#Gradle-Run-step" class="headerlink" title="Gradle Run step"></a>Gradle Run step</h3><p>Go to Workflow tab and add a Gradle Run step and place it below Deploy to Bitrise.io step.</p>
<p><img src="https://cdn-images-1.medium.com/max/2782/1*oHUZoX-rdiqXjTV9SFFcKA.png" alt=""></p>
<p>Expand Config, and add assembleStagingRelease crashlyticsUploadDistributionStagingRelease to Gradle task to run .</p>
<p>Now start a new build in Bitrise manually or trigger new build by making pull request, you can see that the version code is increased for every build, crossed build gets deployed to Fabric to your defined tester groups.</p>
<p>As an alternative, you can also use <a href="https://github.com/bitrise-io/steps-fabric-crashlytics-beta-deploy">Fabric/Crashlytics deployer</a>, just update config with your apps key and secret found in <a href="https://fabric.io/settings">settings</a>.</p>
<h2 id="Where-to-go-from-here"><a href="#Where-to-go-from-here" class="headerlink" title="Where to go from here"></a>Where to go from here</h2><p>I hope those tips are useful to you. Here are some more links to help you explore further</p>
<ul>
<li><p><a href="https://medium.com/@bitrise/convert-old-android-workflows-and-configure-new-steps-based-on-the-old-gradle-tasks-on-bitrise-51a1adbfe78d">Convert old Android workflows and configure new steps based on the old Gradle tasks on Bitrise</a></p>
</li>
<li><p><a href="https://stackoverflow.com/questions/11245144/replace-whole-line-containing-a-string-using-sed">Replace whole line containing a string using Sed</a></p>
</li>
<li><p><a href="https://github.com/GitHawkApp/GitHawk/issues/1330">Alternatives to Buddybuild?</a></p>
</li>
<li><p><a href="https://engineering.udacity.com/simplifying-app-distribution-with-beta-by-crashlytics-6c8c24f4ab02">Simplifying Android app distribution with Beta by Crashlytics</a></p>
</li>
<li><p><a href="https://fabric.io/downloads/android-studio">Fabric app for Android Studio</a></p>
</li>
<li><p><a href="https://stackoverflow.com/questions/27383732/crashlytics-distribution-for-app-with-multiple-flavors">Crashlytics distribution for app with multiple flavors</a></p>
</li>
<li><p><a href="https://www.tutorialspoint.com/gradle/gradle_plugins.htm">Gradle plugins</a></p>
</li>
<li><p><a href="https://blog.danlew.net/2015/02/20/setting-up-a-new-app-in-crashlytics-without-the-plugin/">Setting up a new app in Crashlytics without the IDE plugin</a></p>
</li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-05-23T16:16:04.000Z" title="2019-05-23T16:16:04.000Z">2019-05-23</time><span class="level-item">9 minutes read (About 1347 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-make-tag-selection-view-in-React-Native/">How to make tag selection view in React Native</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/271">#271</a></strong></p>
<p>Original post <a href="https://hackernoon.com/how-to-make-tag-selection-view-in-react-native-b6f8b0adc891">https://hackernoon.com/how-to-make-tag-selection-view-in-react-native-b6f8b0adc891</a></p>
<hr>
<p>Besides React style programming, <a href="https://github.com/facebook/yoga">Yoga</a> is another cool feature of React Native. It is a cross-platform layout engine which implements Flexbox so we use the same layout code for both platforms.</p>
<p>As someone who uses Auto Layout in iOS and Constraint Layout in Android, I find Flexbox bit hard to use at first, but there are many tasks that Flexbox does very well, they are distribute elements in space and flow layout. In this post we will use Flexbox to build a tag selection view using just Javascript code. This is very easy to do so we don’t need to install extra dependencies.</p>
<p><img src="https://cdn-images-1.medium.com/max/2000/1*xLD0YbzaepgAuz7ED-lLGA.png" alt=""></p>
<p>Our tag view will support both multiple selection and exclusive selection. First, we need a custom Button .</p>
<h2 id="Button-with-Background"><a href="#Button-with-Background" class="headerlink" title="Button with Background"></a>Button with Background</h2><p><a href="https://facebook.github.io/react-native/docs/button">Button</a> is of the basic elements in React Native, but it is somewhat limited if we want to have custom content inside the button, for example texts, images and background</p>
<pre><code>import { Button } from &apos;react-native&apos;
...

&lt;Button
  onPress={onPressLearnMore}
  title=&quot;Learn More&quot;
  color=&quot;#841584&quot;
  accessibilityLabel=&quot;Learn more about this purple button&quot;
/&gt;</code></pre><h3 id="TouchableOpacity"><a href="#TouchableOpacity" class="headerlink" title="TouchableOpacity"></a><a href="https://facebook.github.io/react-native/docs/touchableopacity">TouchableOpacity</a></h3><p>Luckily we have <a href="https://facebook.github.io/react-native/docs/touchableopacity">TouchableOpacity</a>, which is a wrapper for making views respond properly to touches. On press down, the opacity of the wrapped view is decreased, dimming it.</p>
<p>To implement button in our tag view, we need to a button with background a check image. Create a file called BackgroundButton.js</p>
<pre><code>import React from &apos;react&apos;
import { TouchableOpacity, View, Text, StyleSheet, Image } from &apos;react-native&apos;
import R from &apos;res/R&apos;

export default class BackgroundButton extends React.Component {
  render() {
    const styles = this.makeStyles()
    return (
      &lt;TouchableOpacity style={styles.touchable} onPress={this.props.onPress}&gt;
        &lt;View style={styles.view}&gt;
          {this.makeImageIfAny(styles)}
          &lt;Text style={styles.text}&gt;{this.props.title}&lt;/Text&gt;
        &lt;/View&gt;
      &lt;/TouchableOpacity&gt;
    )
  }

makeImageIfAny(styles) {
    if (this.props.showImage) {
      return &lt;Image style={styles.image} source={R.images.check} /&gt;
    }
  }

makeStyles() {
    return StyleSheet.create({
      view: {
        flexDirection: &apos;row&apos;,
        borderRadius: 23,
        borderColor: this.props.borderColor,
        borderWidth: 2,
        backgroundColor: this.props.backgroundColor,
        height: 46,
        alignItems: &apos;center&apos;,
        justifyContent: &apos;center&apos;,
        paddingLeft: 16,
        paddingRight: 16
      },
      touchable: {
        marginLeft: 4,
        marginRight: 4,
        marginBottom: 8
      },
      image: {
        marginRight: 8
      },
      text: {
        fontSize: 18,
        textAlign: &apos;center&apos;,
        color: this.props.textColor,
        fontSize: 16
      }
    })
  }
}</code></pre><h3 id="Dynamic-styles"><a href="#Dynamic-styles" class="headerlink" title="Dynamic styles"></a>Dynamic styles</h3><p>Normally we use const styles = StyleSheet.create({}) but since we want our button to be configurable, we make styles into a function, so on every render we get a new styles with proper configurations. The properties we support are borderColor, textColor, backgroundColor and showImage</p>
<p>In the makeImageIfAny we only need to return Image if the view is selected. We don’t have the else case, so in if showImage is false, this returns undefined and React won’t render any element</p>
<pre><code>makeImageIfAny(styles) {
  if (this.props.showImage) {
    return &lt;Image style={styles.image} source={R.images.check} /&gt;
  }
}</code></pre><h3 id="padding-and-margin"><a href="#padding-and-margin" class="headerlink" title="padding and margin"></a>padding and margin</h3><p>To understand padding and margin, visit <a href="https://www.w3schools.com/css/css_boxmodel.asp">CSS Box Model</a>. Basically padding means clearing an area around the content and padding is transparent, while margin means clearing an area outside the border and the margin also is transparent.</p>
<p><img src="https://cdn-images-1.medium.com/max/4572/1*A98Em4msrGqOAWSRq3Njjw.png" alt=""></p>
<p>Pay attention to styles . We have margin for touchable so that each tag button have a little margin outside each other.</p>
<pre><code>touchable: {
  marginLeft: 4,
  marginRight: 4,
  marginBottom: 8
}</code></pre><p>In the view we need flexDirection as row because React Native has flexDirection as column by default. And a row means we have Image and Text side by side horizontally inside the button. We also use alignItems and justifyContent to align elements centeredly on both main and cross axises. The padding is used to have some spaces between the inner text and the view.</p>
<pre><code>view: {
  flexDirection: &apos;row&apos;,
  height: 46,
  alignItems: &apos;center&apos;,
  justifyContent: &apos;center&apos;,
  paddingLeft: 16,
  paddingRight: 16
}</code></pre><h2 id="Tag-View"><a href="#Tag-View" class="headerlink" title="Tag View"></a>Tag View</h2><p>Create a file called TagsView.js This is where we parse tags and show a bunch of BackgroundButton</p>
<pre><code>import React from &apos;react&apos;
import { View, StyleSheet, Button } from &apos;react-native&apos;
import R from &apos;res/R&apos;
import BackgroundButton from &apos;library/components/BackgroundButton&apos;
import addOrRemove from &apos;library/utils/addOrRemove&apos;

export default class TagsView extends React.Component {
  constructor(props) {
    super(props)
    this.state = {
      selected: props.selected
    }
  }

render() {
    return (
      &lt;View style={styles.container}&gt;
        {this.makeButtons()}
      &lt;/View&gt;
    )
  }

onPress = (tag) =&gt; {
    let selected
    if (this.props.isExclusive) {
      selected = [tag]
    } else {
      selected = addOrRemove(this.state.selected, tag)
    }

this.setState({
      selected
    })
  }

makeButtons() {
    return this.props.all.map((tag, i) =&gt; {
      const on = this.state.selected.includes(tag)
      const backgroundColor = on ? R.colors.on.backgroundColor : R.colors.off.backgroundColor
      const textColor = on ? R.colors.on.text : R.colors.off.text
      const borderColor = on ? R.colors.on.border : R.colors.off.border

return (
        &lt;BackgroundButton
          backgroundColor={backgroundColor}
          textColor={textColor}
          borderColor={borderColor}
          onPress={() =&gt; {
            this.onPress(tag)
          }}
          key={i}
          showImage={on}
          title={tag} /&gt;
      )
    })
  }
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    flexDirection: &apos;row&apos;,
    flexWrap: &apos;wrap&apos;,
    padding: 20
  }
})</code></pre><p>We parse an array of tags to build BackgroundButton . We keep the selected array in state because this is mutated inside the TagsView component. If it is isExclusive then the new selected contains just the new selected tag. If it is multiple selection, then we add the new selected tag into the selected array.</p>
<p>The addOrRemove is a our homegrown utility function to add an item into an array if it does not exists, or remove if it exists, using the high orderfilter function.</p>
<pre><code>const addOrRemove = (array, item) =&gt; {
  const exists = array.includes(item)

if (exists) {
    return array.filter((c) =&gt; { return c !== item })
  } else {
    const result = array
    result.push(item)
    return result
  }
}</code></pre><h3 id="Flex-wrap"><a href="#Flex-wrap" class="headerlink" title="Flex wrap"></a>Flex wrap</h3><p>Pay attention to styles</p>
<pre><code>const styles = StyleSheet.create({
  container: {
    flex: 1,
    flexDirection: &apos;row&apos;,
    flexWrap: &apos;wrap&apos;,
    padding: 20
  }
})</code></pre><p>The hero here is flexWrap which specifies whether the flexible items should wrap or not. Take a look at <a href="https://www.w3schools.com/cssref/css3_pr_flex-wrap.asp">CSS flex-wrap</a> property for other options. Since we have main axis as row , element will be wrapped to the next row if there are not enough space. That’s how we can achieve a beautiful tag view.</p>
<h3 id="Using-TagsView"><a href="#Using-TagsView" class="headerlink" title="Using TagsView"></a>Using TagsView</h3><p>Then consuming TagsView is as easy as declare it inside render</p>
<pre><code>const selected = [&apos;Swift&apos;, Kotlin]
const tags = [&apos;Swift&apos;, &apos;Kotlin&apos;, &apos;C#&apos;, &apos;Haskell&apos;, &apos;Java&apos;]

return (
  &lt;TagsView
    all={tags}
    selected={selected}
    isExclusive={false}
  /&gt;
)</code></pre><h3 id="Learning-Flexbox"><a href="#Learning-Flexbox" class="headerlink" title="Learning Flexbox"></a>Learning Flexbox</h3><p>Learning Flebox is crucial in using React and React Native effectively. The best places to learn it are <a href="https://www.w3schools.com/css/css3_flexbox.asp">w3school CSS Flexbox</a> and <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Flexible_Box_Layout/Basic_Concepts_of_Flexbox">Basic concepts of flexbox</a> by Mozzila.<br><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Flexible_Box_Layout/Basic_Concepts_of_Flexbox"><strong>Basic concepts of flexbox</strong><br><em>The Flexible Box Module, usually referred to as flexbox, was designed as a one-dimensional layout model, and as a…</em>developer.mozilla.org</a></p>
<p>There is a showcase of all possible Flexbox properties<br><a href="https://medium.com/@drorbiran/the-full-react-native-layout-cheat-sheet-a4147802405c"><strong>The Full React Native Layout Cheat Sheet</strong><br><em>A simple visual guide with live examples for all major React Native layout properties</em>medium.com</a></p>
<p>Yoga has its own YogaKit published on CocoaPods, you can learn it with native code in iOS<br><a href="https://www.raywenderlich.com/530-yoga-tutorial-using-a-cross-platform-layout-engine"><strong>Yoga Tutorial: Using a Cross-Platform Layout Engine</strong><br><em>Learn about Yoga, Facebook’s cross-platform layout engine that helps developers write more layout code in style akin to…</em>www.raywenderlich.com</a></p>
<p>And when we use flexbox, we should compose element instead of hardcoding values, for example we can use another View with justifyContent: flex-end to move a button down the screen. This follows flexbox style and prevent rigid code.<br><a href="https://medium.com/react-native-training/position-element-at-the-bottom-of-the-screen-using-flexbox-in-react-native-a00b3790ca42"><strong>Position element at the bottom of the screen using Flexbox in React Native</strong><br><em>React Native uses Yoga to achieve Flexbox style layout, which helps us set up layout in a declarative and easy way.</em>medium.com</a></p>
<h2 id="Where-to-go-from-here"><a href="#Where-to-go-from-here" class="headerlink" title="Where to go from here"></a>Where to go from here</h2><p>I hope you learn something useful in this post. For more information please consult the official guide <a href="https://facebook.github.io/react-native/docs/flexbox">Layout with Flexbox</a> and <a href="https://facebook.github.io/react-native/docs/layout-props">layout-props</a> for all the possible Flexbox properties.</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-05-23T16:15:30.000Z" title="2019-05-23T16:15:30.000Z">2019-05-23</time><span class="level-item">10 minutes read (About 1528 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/Getting-to-know-some-pragmatic-programming-language-features/">Getting to know some pragmatic programming language features</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/270">#270</a></strong></p>
<p>As you know, in the <a href="http://www.amazon.com/The-Pragmatic-Programmer-Journeyman-Master/dp/020161622X">Pragmatic Programmer</a>, section Your Knowledge Portfolio, it is said that</p>
<blockquote>
<p><em>Learn at least one new language every year. Different languages solve the same problems in different ways. By learning several different approaches, you can help broaden your thinking and avoid getting stuck in a rut. Additionally, learning many languages is far easier now, thanks to the wealth of freely available software on the Internet</em></p>
</blockquote>
<p>I see learning programming languages as a chance to open up my horizon and learn some new concepts. It also encourage good habit like immutability, composition, modulation, …</p>
<p>I’d like to review some of the features of all the languages I have played with. Some are useful, some just make me interested or say “wow”</p>
<h3 id="Curly-braces"><a href="#Curly-braces" class="headerlink" title="Curly braces"></a>Curly braces</h3><p>Each language can have its own style of grouping block of code, but I myself like the curly braces the most, which are cute :]</p>
<p>Some like C, Java, Swift, … use curly braces</p>
<p><strong>Swift</strong></p>
<pre><code>init(total: Double, taxPct: Double) {
  self.total = total
  self.taxPct = taxPct
  subtotal = total / (taxPct + 1)
}</code></pre><p>Some like Haskell, Python, … use indentation</p>
<p><strong>Haskell</strong></p>
<pre><code>bmiTell :: (RealFloat a) =&gt; a -&gt; String  
bmiTell bmi  
    | bmi &lt;= 18.5 = &quot;You&apos;re underweight, you emo, you!&quot;  
    | bmi &lt;= 25.0 = &quot;You&apos;re supposedly normal. Pffft, I bet you&apos;re ugly!&quot;  
    | bmi &lt;= 30.0 = &quot;You&apos;re fat! Lose some weight, fatty!&quot;  
    | otherwise   = &quot;You&apos;re a whale, congratulations!&quot;</code></pre><p>Some like Elixir use keyword list</p>
<p><strong>ELixir</strong></p>
<pre><code>if false, do: :this, else: :that</code></pre><h3 id="Named-parameter"><a href="#Named-parameter" class="headerlink" title="Named parameter"></a>Named parameter</h3><p>Language like Objective C, Swift offer named parameter, which make it easier to reason about a function call</p>
<pre><code>func sayHello(to person: String, and anotherPerson: String) -&gt; String {
    return &quot;Hello \(person) and \(anotherPerson)!&quot;
}</code></pre><h3 id="Explicit-type"><a href="#Explicit-type" class="headerlink" title="Explicit type"></a>Explicit type</h3><p>Language like C, Swift, Java, … have type information in parameter and in return, which make it easier to reason about a function call</p>
<p><strong>Swift</strong></p>
<pre><code>func sayHello(personName: String, alreadyGreeted: Bool) -&gt; String {
    if alreadyGreeted {
        return sayHelloAgain(personName)
    } else {
        return sayHello(personName)
    }
}</code></pre><h3 id="List-comprehension"><a href="#List-comprehension" class="headerlink" title="List comprehension"></a>List comprehension</h3><p>Languages like Haskell, Python, Elixir, support list comprehension</p>
<p><strong>Elixir</strong></p>
<pre><code>iex&gt; for n &lt;- [1, 2, 3, 4], do: n * n
[1, 4, 9, 16]</code></pre><h3 id="First-class-function"><a href="#First-class-function" class="headerlink" title="First class function"></a>First class function</h3><p>I enjoy functional programming, so first class function support in Javascript, Swift, Haskell, Elixir, … really make me happy</p>
<p><strong>Haskell</strong></p>
<pre><code>zipWith&apos; (*) (replicate 5 2) [1..]</code></pre><h3 id="Curry"><a href="#Curry" class="headerlink" title="Curry"></a>Curry</h3><blockquote>
<p><em>Currying is the technique of translating the evaluation of a function that takes multiple arguments (or a tuple of arguments) into evaluating a sequence of functions, each with a single argument (partial application)</em></p>
</blockquote>
<p>Language like Swift 2, Haskell, … have curry by default. Some like Javascript can use libraries (Lodash, …) to achieve this. In Haskell, every function officially only takes one parameter.</p>
<p>In Swift 3, curry was <a href="https://github.com/apple/swift-evolution/blob/master/proposals/0002-remove-currying.md">removed</a> :(</p>
<p>Haskell</p>
<figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">multThree</span> :: (<span class="type">Num</span> a) =&gt; a -&gt; a -&gt; a -&gt; a  </span><br><span class="line"><span class="title">multThree</span> x y z = x * y * z</span><br></pre></td></tr></table></figure>

<p>By calling functions with too few parameters, we’re creating new functions on the fly.</p>
<p><strong>Javascript</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> curry = <span class="built_in">require</span>(<span class="string">'lodash.curry'</span>);</span><br><span class="line"><span class="keyword">var</span> map = curry(<span class="function"><span class="keyword">function</span>(<span class="params">f, ary</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> ary.map(f);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">var</span> getChildren = <span class="function"><span class="keyword">function</span>(<span class="params">x</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> x.childNodes;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> allTheChildren = map(getChildren);</span><br></pre></td></tr></table></figure>

<h3 id="Pattern-matching"><a href="#Pattern-matching" class="headerlink" title="Pattern matching"></a>Pattern matching</h3><p>I find pattern matching as a better way around if else statement</p>
<p>Swift supports pattern matching in switch statement</p>
<p><strong>Swift</strong></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">Trades</span> </span>&#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="type">Buy</span>(stock: <span class="type">String</span>, amount: <span class="type">Int</span>, stockPrice: <span class="type">Float</span>)</span><br><span class="line">    <span class="keyword">case</span> <span class="type">Sell</span>(stock: <span class="type">String</span>, amount: <span class="type">Int</span>, stockPrice: <span class="type">Float</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> aTrade = <span class="type">Trades</span>.<span class="type">Buy</span>(stock: <span class="string">"APPL"</span>, amount: <span class="number">200</span>, stockPrice: <span class="number">115.5</span>)</span><br><span class="line"><span class="keyword">switch</span> aTrade &#123;</span><br><span class="line"><span class="keyword">case</span> .<span class="type">Buy</span>(<span class="keyword">let</span> stock, <span class="keyword">let</span> amount, <span class="number">_</span>):</span><br><span class="line">    process(stock, amount)</span><br><span class="line"><span class="keyword">case</span> .<span class="type">Sell</span>(<span class="keyword">let</span> stock, <span class="keyword">let</span> amount, <span class="number">_</span>):</span><br><span class="line">    process(stock, amount * -<span class="number">1</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Some like Haskell, Elixir, … also pattern matches on function name, which makes it work great for recursion</p>
<p><strong>Haskell</strong></p>
<pre><code>sayMe :: (Integral a) =&gt; a -&gt; String  
sayMe 1 = &quot;One!&quot;  
sayMe 2 = &quot;Two!&quot;  
sayMe 3 = &quot;Three!&quot;  
sayMe 4 = &quot;Four!&quot;  
sayMe 5 = &quot;Five!&quot;  
sayMe x = &quot;Not between 1 and 5&quot;  


map _ []     = []
map f (x:xs) = f x : map f xs</code></pre><p>In Elixir, the = operator is actually a match operator</p>
<p><strong>Elixir</strong></p>
<pre><code>iex&gt; x = 1
1
iex&gt; x
1
iex&gt; 1 = x
1
iex&gt; 2 = x
** (MatchError) no match of right hand side value: 1</code></pre><h3 id="Recursion"><a href="#Recursion" class="headerlink" title="Recursion"></a>Recursion</h3><p>Some language like Haskell, Elixir, … don’t use loop, they use recursion with performance in mind, no overflow.</p>
<p>Haskell</p>
<pre><code>length&apos; :: (Num b) =&gt; [a] -&gt; b  
length&apos; [] = 0  
length&apos; (_:xs) = 1 + length&apos; xs</code></pre><h3 id="Laziness"><a href="#Laziness" class="headerlink" title="Laziness"></a>Laziness</h3><p>Some languages support infinite collection, thanks to their laziness.</p>
<p>Haskell is lazy, if you map something over a list several times and filter it several times, it will only pass over the list once</p>
<p><strong>Haskell</strong></p>
<pre><code>largestDivisible :: (Integral a) =&gt; a  
largestDivisible = head (filter p [100000,99999..])  
    where p x = x `mod` 3829 == 0</code></pre><p>Elixir defines the concept of Eager with Enum and Lazy with Stream</p>
<p><strong>Elixir</strong></p>
<pre><code>1..100_000 |&gt; Enum.map(&amp;(&amp;1 * 3)) |&gt; Enum.filter(odd?) |&gt; Enum.sum</code></pre><h2 id="Custom-operator"><a href="#Custom-operator" class="headerlink" title="Custom operator"></a>Custom operator</h2><p>Elixir is famous for its pipe |&gt; operator</p>
<blockquote>
<p><em>The |&gt; symbol used in the snippet above is the pipe operator: it simply takes the output from the expression on its left side and passes it as the first argument to the function call on its right side</em></p>
</blockquote>
<p>Elixir</p>
<pre><code>1..100_000 |&gt; Enum.map(&amp;(&amp;1 * 3)) |&gt; Enum.filter(odd?) |&gt; Enum.sum</code></pre><p>Haskell often takes advantage of this custom -: operator Haskell</p>
<pre><code>x -: f = f x  

(0,0) -: landLeft 1 -: landRight 1 -: landLeft 2</code></pre><h3 id="Functor-Applicative-Functor-Monoid-Monad"><a href="#Functor-Applicative-Functor-Monoid-Monad" class="headerlink" title="Functor, Applicative Functor, Monoid, Monad"></a>Functor, Applicative Functor, Monoid, Monad</h3><p>I really like enjoy Haskell because of these typeclasses. It realizes common pattern (map, apply, join, bind, …) with comptutational context. It really enlightens me when I find that function is a Monad as well (you should read the Reader monad)</p>
<p><strong>Haskell</strong></p>
<pre><code>instance Monad Maybe where  
    return x = Just x  
    Nothing &gt;&gt;= f = Nothing  
    Just x &gt;&gt;= f  = f x  
    fail _ = Nothing  

landLeft :: Birds -&gt; Pole -&gt; Maybe Pole  
landLeft n (left,right)  
    | abs ((left + n) - right) &lt; 4 = Just (left + n, right)  
    | otherwise                    = Nothing  

landRight :: Birds -&gt; Pole -&gt; Maybe Pole  
landRight n (left,right)  
    | abs (left - (right + n)) &lt; 4 = Just (left, right + n)  
    | otherwise                    = Nothing

ghci&gt; return (0,0) &gt;&gt;= landLeft 1 &gt;&gt;= banana &gt;&gt;= landRight 1  
Nothing</code></pre><p>List comprehension in Haskell is just syntactic sugar for using lis as Monad <strong>Haskell</strong></p>
<pre><code>ghci&gt; [ (n,ch) | n &lt;- [1,2], ch &lt;- [&apos;a&apos;,&apos;b&apos;] ]  
[(1,&apos;a&apos;),(1,&apos;b&apos;),(2,&apos;a&apos;),(2,&apos;b&apos;)]</code></pre><p><strong>Swift</strong></p>
<pre><code>enum Result&lt;T&gt; {
    case Value(T)
    case Error(NSError)
}

extension Result {
    func map&lt;U&gt;(f: T -&gt; U) -&gt; Result&lt;U&gt; {
        switch self {
            case let .Value(value):
                return Result&lt;U&gt;.Value(f(value))
            case let .Error(error):
                return Result&lt;U&gt;.Error(error)
        }
    }
}

extension Result {
    static func flatten&lt;T&gt;(result: Result&lt;Result&lt;T&gt;&gt;) -&gt; Result&lt;T&gt; {
        switch result {
            case let .Value(innerResult):
                return innerResult
            case let .Error(error):
                return Result&lt;T&gt;.Error(error)
        }
    }
}

extension Result {
    func flatMap&lt;U&gt;(f: T -&gt; Result&lt;U&gt;) -&gt; Result&lt;U&gt; {
        return Result.flatten(map(f))
    }
}</code></pre><h3 id="Trait-and-mixin"><a href="#Trait-and-mixin" class="headerlink" title="Trait and mixin"></a>Trait and mixin</h3><p>Languages like Scala, … support trait</p>
<blockquote>
<p><em>Similar to interfaces in Java, traits are used to define object types by specifying the signature of the supported methods. Unlike Java, Scala allows traits to be partially implemented; i.e. it is possible to define default implementations for some methods</em></p>
</blockquote>
<p><strong>Scala</strong></p>
<pre><code>trait Similarity {
  def isSimilar(x: Any): Boolean
  def isNotSimilar(x: Any): Boolean = !isSimilar(x)
}

class Point(xc: Int, yc: Int) extends Similarity {
  var x: Int = xc
  var y: Int = yc
  def isSimilar(obj: Any) =
    obj.isInstanceOf[Point] &amp;&amp;
    obj.asInstanceOf[Point].x == x
}</code></pre><p>Swift can uses Protocol Extension to <a href="http://matthijshollemans.com/2015/07/22/mixins-and-traits-in-swift-2/">achieve trait</a></p>
<p><strong>Swift</strong></p>
<pre><code>protocol GunTrait {
    func shoot() -&gt; String {
        return &quot;Shoot&quot;
    }
}

protocol RenderTrait {
    func render() -&gt; String {
        return &quot;Render&quot;
    }
}

struct Player: GameObject, AITrait, GunTrait, RenderTrait, HealthTrait {

}</code></pre><p>Ruby supports Mixin via Module</p>
<p><strong>Ruby</strong></p>
<pre><code>module Greetings
  def hello
    puts &quot;Hello!&quot;
  end

  def bonjour
    puts &quot;Bonjour!&quot;
  end

  def hola
    puts &quot;Hola!&quot;
  end
end

class User
  include Greetings
end</code></pre><h3 id="Delegate-property"><a href="#Delegate-property" class="headerlink" title="Delegate property"></a>Delegate property</h3><p>There are certain common kinds of properties that would be very nice to implement once and for all like lazy, observable and storing. An example is in <strong>Kotlin</strong></p>
<pre><code>class Delegate {
    operator fun getValue(thisRef: Any?, property: KProperty&lt;*&gt;): String {
        return &quot;$thisRef, thank you for delegating &apos;${property.name}&apos; to me!&quot;
    }

    operator fun setValue(thisRef: Any?, property: KProperty&lt;*&gt;, value: String) {
        println(&quot;$value has been assigned to &apos;${property.name}&apos; in $thisRef.&quot;)
    }
}</code></pre><h2 id="Where-to-go-from-here"><a href="#Where-to-go-from-here" class="headerlink" title="Where to go from here"></a>Where to go from here</h2><p>Hope you find something interesting. Each language has its own pros and is designed for specific purpose. So no list will be enough to cover them all.</p>
<p>To take a quick peek into other programming languages, I find <a href="https://www.youtube.com/playlist?list=PLGLfVvz_LVvSX7fVd4OUFp_ODd86H0ZIY">Learn in One Video</a> by Derek very helpful.</p>
<p>There are things that intrigue us every day like Swift initialization rule make it explicit when using initializer, Go goroutine and channel for concurrent code, Elixir process for easy concurrent and message communication. You’ll be amazed by how process encapsulates state, Haskell data type encourages immutability and thread safe code, Elixir macro for great extension of the language. The best way to to learn is to use and dive into the languages often.</p>
<p>May your code continue to compile.</p>
<p>While you are here, you may like my other posts</p>
<ul>
<li><a href="https://hackernoon.com/next-to-first-next-to-nothing-b7b7b2ba8a34">Next to first, next to nothing</a></li>
<li><a href="https://hackernoon.com/20-recommended-utility-apps-for-macos-in-2018-ea494b4db72b">20 recommended utility apps for macOS in 2018</a></li>
<li><a href="https://hackernoon.com/how-to-make-tag-selection-view-in-react-native-b6f8b0adc891">How to make tag selection view in React Native</a></li>
<li><a href="https://hackernoon.com/8-ways-to-communicate-between-fragment-and-activity-in-android-apps-235b60005d04">8 ways to communicate between Fragment and Activity in Android apps</a></li>
<li>Original post <a href="https://hackernoon.com/do-you-know-these-interesting-programming-languages-features-1fab3fcb2118">https://hackernoon.com/do-you-know-these-interesting-programming-languages-features-1fab3fcb2118</a></li>
</ul>
<hr>
<p><strong>Updated at</strong> 2020-12-05 05:44:54</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-05-23T16:14:41.000Z" title="2019-05-23T16:14:41.000Z">2019-05-23</time><span class="level-item">3 minutes read (About 454 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/Introducing-Learn-Talks-Awesome-conference-and-meetup-talks/">Introducing Learn Talks — Awesome conference and meetup talks</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/269">#269</a></strong></p>
<p>Original post <a href="https://medium.com/swlh/introducing-learn-talks-awesome-conference-and-meetup-talks-e97c8cf7e0f">https://medium.com/swlh/introducing-learn-talks-awesome-conference-and-meetup-talks-e97c8cf7e0f</a></p>
<p>Product Hunt <a href="https://www.producthunt.com/posts/learn-talks">https://www.producthunt.com/posts/learn-talks</a></p>
<hr>
<p>Hi, it’s Khoa here. I’m so glad to finally launch <a href="https://learntalks.com/">LearnTalks</a>, in order to help others and myself to catch up with new conference and meetup talks.</p>
<p>Being one who is extremely passionate about <a href="https://github.com/onmyway133/blog">making things</a> and <a href="https://medium.com/@onmyway133">writing</a> , I also love to learn about every new thing in tech. Tech moves so fast, what we learn today may be deprecated very soon, and only continuous learning can keep us move forward. Tech conference and meetup are best places to learn about new things and tips, although there are some <a href="https://marco.org/2018/01/17/end-of-conference-era">rises and falls</a> …, they are still growing and provides valuable resources for lots of people. There are lots of conferences and meetups that one can’t go to all, this can give fear of missing out feeling.</p>
<p>Fortunately people are kind enough to always publish videos publicly so others can learn from. I have been for a long time curating a <a href="https://github.com/onmyway133/fantastic-conference-videos">list</a>… to keep track of all cool videos, but it get out of hand very quickly.</p>
<p><img src="https://cdn-images-1.medium.com/max/5128/1*1onBRUxSDQQzAcYpFbKkWg.png" alt=""></p>
<p>That’s why I make LearnTalks.com as a convenient place to search and explore new tech talks. The features include</p>
<ul>
<li>Easy search for talk, author and event</li>
<li>See upcoming events</li>
<li>Explore tags of topics and technologies</li>
<li>Mobile friendly</li>
</ul>
<p><img src="https://cdn-images-1.medium.com/max/4960/1*YxIG2a2xOyDgSer2RrRbsw.png" alt=""></p>
<p>Firstly, thanks to all the people who helped me alpha test the website and provided valuable feedback. I addressed and fixed many issues.<br>And thanks a lot to many conference organisers who gave me a yes, support and encouragement promptly after I sent emails. Thanks a lot for spending your free time organising cool events and sharing the videos to the community. I really appreciate.</p>
<p><img src="https://cdn-images-1.medium.com/max/5068/1*gNAAnxsa3zMtmJqaUjLK9A.png" alt=""></p>
<p>This website is just a curation to videos, it does not repost or claim copyright of any of the videos. And there are links back to conference and meetup pages. It is free to use and has no commercial purpose.</p>
<p>Hope you find the website useful as I do. There are of course many things needed to improve, I’m looking forward to receiving feedbacks and support from you ❤️ If there are any issues or copyright violations, please feel free to drop me a message.</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-05-23T16:09:18.000Z" title="2019-05-23T16:09:18.000Z">2019-05-23</time><span class="level-item">21 minutes read (About 3181 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-add-app-icons-and-splash-screens-to-a-React-Native-app-in-staging-and-production/">How to add app icons and splash screens to a React Native app in staging and production</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/268">#268</a></strong></p>
<p>React Native was designed to be “learn once, write anywhere,” and it is usually used to build cross platform apps for iOS and Android. And for each app that we build, there are times we need to reuse the same code, build and tweak it a bit to make it work for different environments. For example, we might need multiple skins, themes, a free and paid version, or more often different staging and production environments.</p>
<p>And the task that we can’t avoid is adding app icons and splash screens to our apps.</p>
<p>In fact, to add a staging and production environment, and to add app icons, requires us to use Xcode and Android Studio, and we do it the same way we do with native iOS or Android projects.</p>
<p>Let’s call our app MyApp and bootstrap it with react-native init MyApp . There will of course, be tons of <a href="https://github.com/thekevinbrown/react-native-schemes-manager">libraries</a> to help us with managing different environments.</p>
<p>In this post, we will do just like we did with native apps, so that we know the basic steps.</p>
<h2 id="Build-configuration-target-build-types-production-flavor-and-build-variant"><a href="#Build-configuration-target-build-types-production-flavor-and-build-variant" class="headerlink" title="Build configuration, target, build types, production flavor, and build variant"></a>Build configuration, target, build types, production flavor, and build variant</h2><p>There are some terminologies we needed to remember. In iOS, debug and releases are called <a href="https://developer.apple.com/library/archive/featuredarticles/XcodeConcepts/Concept-Build_Settings.html">build configurations</a>, and staging and production are called <a href="https://developer.apple.com/library/archive/featuredarticles/XcodeConcepts/Concept-Targets.html">targets</a>.</p>
<blockquote>
<h1 id="A-build-configuration-specifies-a-set-of-build-settings-used-to-build-a-target’s-product-in-a-particular-way-For-example-it-is-common-to-have-separate-build-configurations-for-debug-and-release-builds-of-a-product"><a href="#A-build-configuration-specifies-a-set-of-build-settings-used-to-build-a-target’s-product-in-a-particular-way-For-example-it-is-common-to-have-separate-build-configurations-for-debug-and-release-builds-of-a-product" class="headerlink" title="A build configuration specifies a set of build settings used to build a target’s product in a particular way. For example, it is common to have separate build configurations for debug and release builds of a product."></a>A build configuration specifies a set of build settings used to build a target’s product in a particular way. For example, it is common to have separate build configurations for debug and release builds of a product.</h1><h1 id="A-target-specifies-a-product-to-build-and-contains-the-instructions-for-building-the-product-from-a-set-of-files-in-a-project-or-work-space-A-target-defines-a-single-product-it-organizes-the-inputs-into-the-build-system-—-the-source-files-and-instructions-for-processing-those-source-files-—-required-to-build-that-product-Projects-can-contain-one-or-more-targets-each-of-which-produces-one-product"><a href="#A-target-specifies-a-product-to-build-and-contains-the-instructions-for-building-the-product-from-a-set-of-files-in-a-project-or-work-space-A-target-defines-a-single-product-it-organizes-the-inputs-into-the-build-system-—-the-source-files-and-instructions-for-processing-those-source-files-—-required-to-build-that-product-Projects-can-contain-one-or-more-targets-each-of-which-produces-one-product" class="headerlink" title="A target specifies a product to build and contains the instructions for building the product from a set of files in a project or work-space. A target defines a single product; it organizes the inputs into the build system — the source files and instructions for processing those source files — required to build that product. Projects can contain one or more targets, each of which produces one product"></a>A target specifies a product to build and contains the instructions for building the product from a set of files in a project or work-space. A target defines a single product; it organizes the inputs into the build system — the source files and instructions for processing those source files — required to build that product. Projects can contain one or more targets, each of which produces one product</h1></blockquote>
<p>In Android, debug and releases are called build types, and staging and production are called product flavors. Together they form <a href="https://developer.android.com/studio/build/build-variants">build variants</a>.</p>
<blockquote>
<h1 id="For-example-a-“demo”-product-flavor-can-specify-different-features-and-device-requirements-such-as-custom-source-code-resources-and-minimum-API-levels-while-the-“debug”-build-type-applies-different-build-and-packaging-settings-such-as-debug-options-and-signing-keys-The-resulting-build-variant-is-the-“demoDebug”-version-of-your-app-and-it-includes-a-combination-of-the-configurations-and-resources-included-in-the-“demo”-product-flavor-“debug”-build-type-and-main-source-set"><a href="#For-example-a-“demo”-product-flavor-can-specify-different-features-and-device-requirements-such-as-custom-source-code-resources-and-minimum-API-levels-while-the-“debug”-build-type-applies-different-build-and-packaging-settings-such-as-debug-options-and-signing-keys-The-resulting-build-variant-is-the-“demoDebug”-version-of-your-app-and-it-includes-a-combination-of-the-configurations-and-resources-included-in-the-“demo”-product-flavor-“debug”-build-type-and-main-source-set" class="headerlink" title="For example, a “demo” product flavor can specify different features and device requirements, such as custom source code, resources, and minimum API levels, while the “debug” build type applies different build and packaging settings, such as debug options and signing keys. The resulting build variant is the “demoDebug” version of your app, and it includes a combination of the configurations and resources included in the “demo” product flavor, “debug” build type, and main/ source set."></a>For example, a “demo” <em>product flavor</em> can specify different features and device requirements, such as custom source code, resources, and minimum API levels, while the “debug” <em>build type</em> applies different build and packaging settings, such as debug options and signing keys. The resulting build variant is the “demoDebug” version of your app, and it includes a combination of the configurations and resources included in the “demo” product flavor, “debug” build type, and main/ source set.</h1></blockquote>
<h2 id="Staging-and-production-targets-in-iOS"><a href="#Staging-and-production-targets-in-iOS" class="headerlink" title="Staging and production targets in iOS"></a>Staging and production targets in iOS</h2><p>Open MyApp.xcodeproj inside ios using Xcode. Here is what we get after bootstrapping:</p>
<p><img src="https://cdn-images-1.medium.com/max/2004/1*HMMS0zLAfLU_bvli-IESBg.png" alt=""></p>
<p>React Native creates iOS and tvOS apps, and two test targets. In Xcode, a project can contain many targets, and each target means a unique product with its own build settings — Info.plist and app icons.</p>
<h3 id="Duplicate-target"><a href="#Duplicate-target" class="headerlink" title="Duplicate target"></a>Duplicate target</h3><p>If we don’t need the tvOS app, we can delete the MyApp-tvOS and MyApp-tvOSTests . Let’s use MyApp target as our production environment, and right click -&gt; Duplicate to make another target. Let’s call it MyApp Staging.</p>
<p><img src="https://cdn-images-1.medium.com/max/2694/1*T2RDoSaQRJv8GRGkphUkGw.png" alt=""></p>
<p>Each target must have unique bundle id. Change the bundle id of MyApp to com.onmyway133.MyApp and MyApp Staging to com.onmyway133.MyApp.Staging.</p>
<p><img src="https://cdn-images-1.medium.com/max/3720/1*I3qdG0cgDrwc1bep76ckcA.png" alt=""></p>
<h3 id="Info-plist"><a href="#Info-plist" class="headerlink" title="Info.plist"></a>Info.plist</h3><p>When we duplicate MyApp target , Xcode also duplicates Info.plist into MyApp copy-Info.plist for the staging target. Change it to a more meaningful name Info-Staging.plist and drag it to the MyApp group in Xcode to stay organised. After dragging, MyApp Staging target can’t find the plist, so click Choose Info.plist File and point to the Info-Staging.plist.</p>
<p><img src="https://cdn-images-1.medium.com/max/4732/1*_FYFXy6NDHhSm5XwOPFDmQ.png" alt=""></p>
<h3 id="Scheme"><a href="#Scheme" class="headerlink" title="Scheme"></a>Scheme</h3><p>Xcode also duplicates the scheme when we duplicate the target, so we get MyApp copy:</p>
<p><img src="https://cdn-images-1.medium.com/max/5158/1*DW9wbUJWU1P4gXymv1LT8g.png" alt=""></p>
<p>Click Manage Schemes in the scheme drop-down to open Scheme manager:</p>
<p><img src="https://cdn-images-1.medium.com/max/3208/1*-bjXILHt-Y88etVJDlmyFQ.png" alt=""></p>
<p>I usually delete the generated MyApp copy scheme, then I create a new scheme again for the MyApp Staging target. You need to make sure that the scheme is marked as Shared so that it is tracked into git.</p>
<p><img src="https://cdn-images-1.medium.com/max/3208/1*VTXk1T-j9W-Yd24uU7Wmqg.png" alt=""></p>
<p>For some reason, the staging scheme does not have all the things set up like the production scheme. You can run into issues like ‘React/RCTBundleURLProvider.h’ file not found or <a href="https://github.com/onmyway133/notes/issues/380">RN: ‘React/RCTBridgeModule.h’ file not found</a> . It is because React target is not linked yet.</p>
<p>To solve it, we must disable Parallelise Build and add React target and move it above MyApp Staging.</p>
<p><img src="https://cdn-images-1.medium.com/max/3720/1*F7NF8BBg44H6AZHk_A7Jpg.png" alt=""></p>
<h3 id="Staging-and-production-product-flavors-in-Android"><a href="#Staging-and-production-product-flavors-in-Android" class="headerlink" title="Staging and production product flavors in Android"></a>Staging and production product flavors in Android</h3><p>Open the android folder in Android Studio. By default there are only debug and release build types:</p>
<p><img src="https://cdn-images-1.medium.com/max/3528/1*e362XxJHJpR0tn-ry86brA.png" alt=""></p>
<p>They are configured in the app module build.gradle:</p>
<pre><code>buildTypes {
    release {
        minifyEnabled enableProguardInReleaseBuilds
        proguardFiles getDefaultProguardFile(&quot;proguard-android.txt&quot;), &quot;proguard-rules.pro&quot;
    }
}</code></pre><p>First, let’s change application id to com.onmyway133.MyApp to match iOS. It is not required but I think it’s good to stay organised. Then create two product flavors for staging and production. For staging, let’s add .Staging to the application id.</p>
<p>From Android Studio 3, “all flavors must now belong to a named flavor dimension” — normally we just need default dimensions. Here is how it looks in build.gradle for our app module:</p>
<pre><code>android {
    compileSdkVersion rootProject.ext.compileSdkVersion
    buildToolsVersion rootProject.ext.buildToolsVersion
    flavorDimensions &quot;default&quot;

defaultConfig {
        applicationId &quot;com.onmyway133.MyApp&quot;
        minSdkVersion rootProject.ext.minSdkVersion
        targetSdkVersion rootProject.ext.targetSdkVersion
        versionCode 1
        versionName &quot;1.0&quot;
        ndk {
            abiFilters &quot;armeabi-v7a&quot;, &quot;x86&quot;
        }
    }
    splits {
        abi {
            reset()
            enable enableSeparateBuildPerCPUArchitecture
            universalApk false  // If true, also generate a universal APK
            include &quot;armeabi-v7a&quot;, &quot;x86&quot;
        }
    }
    buildTypes {
        release {
            minifyEnabled enableProguardInReleaseBuilds
            proguardFiles getDefaultProguardFile(&quot;proguard-android.txt&quot;), &quot;proguard-rules.pro&quot;
        }
    }

productFlavors {
        staging {
            applicationIdSuffix &quot;.Staging&quot;
        }

        production {

        }
    }
}</code></pre><p>Click Sync Now to let gradle do the syncing job. After that, we can see that we have four build variants:</p>
<p><img src="https://cdn-images-1.medium.com/max/5478/1*KxKqB-NdxtieuhFF-AUvwA.png" alt=""></p>
<h3 id="How-to-run-staging-and-production"><a href="#How-to-run-staging-and-production" class="headerlink" title="How to run staging and production"></a>How to run staging and production</h3><p>To run the Android app, we can specify a variant like react-native run-android — variant=productionDebug, but I prefer to go to Android Studio, select the variant, and run.</p>
<p>To run iOS app, we can specify the scheme like react-native run-ios — simulator=’iPhone X’ — scheme=”MyApp Staging” . As of react-native 0.57.0 this does not work. But it does not matter as I usually go to Xcode, select the scheme, and run.</p>
<h3 id="Add-app-icon-for-iOS"><a href="#Add-app-icon-for-iOS" class="headerlink" title="Add app icon for iOS"></a>Add app icon for iOS</h3><p>According to the <a href="https://developer.apple.com/design/human-interface-guidelines/ios/icons-and-images/app-icon/">Human Interface Guideline</a>, we need app icons of different sizes for different iOS versions, device resolutions, and situations (notification, settings, Spring Board). I’ve crafted a tool called <a href="https://github.com/onmyway133/IconGenerator">IconGenerator</a>, which was previously mentioned in <a href="https://dev.to/sarthology/best-open-source-tools-for-developers--300f">Best Open Source Tools For Developers</a>. Drag the icon that you want — I prefer those with 1024x1024 pixels for high resolution app icons — to the Icon Generator MacOS app.</p>
<p><img src="https://cdn-images-1.medium.com/max/2848/1*4uBuihDMn3nq3Y1NwVhJsA.png" alt=""></p>
<p>Click Generate and we get AppIcon.appiconset . This contains app icons of the required sizes that are ready to be used in Asset Catalog. Drag this to Asset Catalog in Xcode. That is for production.</p>
<p>For staging, it’s good practice to add a “Staging” banner so that testers know which is staging, and which is production. We can easily do this in Sketch.</p>
<p><img src="https://cdn-images-1.medium.com/max/4536/1*6uxkwnsGkDp0K12LXh_yiw.png" alt=""></p>
<p>Remember to set a background, so we don’t get a transparent background. For an app icon with transparent background, iOS shows the background as black which looks horrible.</p>
<p>After exporting the image, drag the staging icon to the IconGenerator the same way we did earlier. But this time, rename the generated appiconset to AppIcon-Staging.appiconset. Then drag this to Asset Catalog in Xcode.</p>
<p>For the staging target to use staging app icons, open MyApp Staging target and choose AppIcon-Staging as App Icon Source.</p>
<p><img src="https://cdn-images-1.medium.com/max/4908/1*oIGuaxyftwCD0_72Rnv9-g.png" alt=""></p>
<h3 id="Add-app-icon-for-Android"><a href="#Add-app-icon-for-Android" class="headerlink" title="Add app icon for Android"></a>Add app icon for Android</h3><p><img src="https://cdn-images-1.medium.com/max/6720/1*CS_tKOts1zz05PVJ5XEc9A.png" alt=""></p>
<p>I like to switch to Project view, as it is easier to change app icons. Click res -&gt; New -&gt; Image Asset to open Asset Studio. We can use the same app icons that we used in iOS:</p>
<p><img src="https://cdn-images-1.medium.com/max/4528/1*bzJZh1exxXGnrXw_j4AMgQ.png" alt=""></p>
<p>Android 8.0 (API level 26) introduced <a href="https://developer.android.com/guide/practices/ui_guidelines/icon_design_adaptive">Adaptive Icons</a> so we need to tweak the Resize slider to make sure our app icons look as nice as possible.</p>
<blockquote>
<h1 id="Android-8-0-API-level-26-introduces-adaptive-launcher-icons-which-can-display-a-variety-of-shapes-across-different-device-models-For-example-an-adaptive-launcher-icon-can-display-a-circular-shape-on-one-OEM-device-and-display-a-squircle-on-another-device-Each-device-OEM-provides-a-mask-which-the-system-then-uses-to-render-all-adaptive-icons-with-the-same-shape-Adaptive-launcher-icons-are-also-used-in-shortcuts-the-Settings-app-sharing-dialogs-and-the-overview-screen-—-Android-developers"><a href="#Android-8-0-API-level-26-introduces-adaptive-launcher-icons-which-can-display-a-variety-of-shapes-across-different-device-models-For-example-an-adaptive-launcher-icon-can-display-a-circular-shape-on-one-OEM-device-and-display-a-squircle-on-another-device-Each-device-OEM-provides-a-mask-which-the-system-then-uses-to-render-all-adaptive-icons-with-the-same-shape-Adaptive-launcher-icons-are-also-used-in-shortcuts-the-Settings-app-sharing-dialogs-and-the-overview-screen-—-Android-developers" class="headerlink" title="Android 8.0 (API level 26) introduces adaptive launcher icons, which can display a variety of shapes across different device models. For example, an adaptive launcher icon can display a circular shape on one OEM device, and display a squircle on another device. Each device OEM provides a mask, which the system then uses to render all adaptive icons with the same shape. Adaptive launcher icons are also used in shortcuts, the Settings app, sharing dialogs, and the overview screen. — Android developers"></a>Android 8.0 (API level 26) introduces adaptive launcher icons, which can display a variety of shapes across different device models. For example, an adaptive launcher icon can display a circular shape on one OEM device, and display a squircle on another device. Each device OEM provides a mask, which the system then uses to render all adaptive icons with the same shape. Adaptive launcher icons are also used in shortcuts, the Settings app, sharing dialogs, and the overview screen. — <a href="https://developer.android.com/guide/practices/ui_guidelines/icon_design_adaptive">Android developers</a></h1></blockquote>
<p>We are doing for production first, which means the main Res Directory. This step will replace the existing placeholder app icons generated by Android Studio when we bootstrapped React Native projects.</p>
<p><img src="https://cdn-images-1.medium.com/max/4528/1*kIYEWBrWMG_qOkY-LsWnxw.png" alt=""></p>
<p>Now that we have production app icons, let’s make staging app icons. Android manages code and assets via convention. Click on src -&gt; New -&gt; Directory and create a staging folder. Inside staging, create a folder called res . Anything we place in staging will replace the ones in main — this is called source sets.</p>
<p><img src="https://cdn-images-1.medium.com/max/3652/1*dAkYONFc86mHNXKnbPf2fA.png" alt=""></p>
<p>You can read more here: <a href="https://developer.android.com/studio/build/build-variants">Build with source sets</a>.</p>
<blockquote>
<p>You can use source set directories to contain the code and resources you want packaged only with certain configurations. For example, if you are building the “demoDebug” build variant, which is the crossproduct of a “demo” product flavor and “debug” build type, Gradle looks at these directories, and gives them the following priority:<br>src/demoDebug/ <em>(build variant source set)</em><br>src/debug/ <em>(build type source set)</em><br>src/demo/ <em>(product flavor source set)</em><br>src/main/ <em>(main source set)</em></p>
</blockquote>
<p>Right click on staging/res -&gt; New -&gt; Image Asset to make app icons for staging. We also use the same staging app icons like in iOS, but this time we choose staging as Res Directory. This way Android Studio knows how to generate different ic_launcher and put them into staging.</p>
<p><img src="https://cdn-images-1.medium.com/max/4528/1*jKI8Erm57SGwZI2ylLaJ0w.png" alt=""></p>
<h3 id="Add-launch-screen-for-iOS"><a href="#Add-launch-screen-for-iOS" class="headerlink" title="Add launch screen for iOS"></a>Add launch screen for iOS</h3><p>The splash screen is called a [Launch Screen](<a href="http://Launch">http://Launch</a> Screen) in iOS, and it is important.</p>
<blockquote>
<h1 id="A-launch-screen-appears-instantly-when-your-app-starts-up-The-launch-screen-is-quickly-replaced-with-the-first-screen-of-your-app-giving-the-impression-that-your-app-is-fast-and-responsive"><a href="#A-launch-screen-appears-instantly-when-your-app-starts-up-The-launch-screen-is-quickly-replaced-with-the-first-screen-of-your-app-giving-the-impression-that-your-app-is-fast-and-responsive" class="headerlink" title="A launch screen appears instantly when your app starts up. The launch screen is quickly replaced with the first screen of your app, giving the impression that your app is fast and responsive"></a>A launch screen appears instantly when your app starts up. The launch screen is quickly replaced with the first screen of your app, giving the impression that your app is fast and responsive</h1></blockquote>
<p>In the old days, we needed to use static launch images with different sizes for each device and orientation.</p>
<p><img src="https://cdn-images-1.medium.com/max/2912/1*gncLBHGa4ntt1a9NCLL_1g.png" alt=""></p>
<h3 id="Launch-Screen-storyboard"><a href="#Launch-Screen-storyboard" class="headerlink" title="Launch Screen storyboard"></a>Launch Screen storyboard</h3><p>For now the recommended way is to use Launch Screen storyboard . The iOS project from React Native comes with LaunchScreen.xib but xib is a thing of the past. Let’s delete it and create a file called Launch Screen.storyboard .</p>
<p>Right click on MyApp folder -&gt; New and chose Launch Screen, add it to both targets as usually we show the same splash screen for both staging and production.</p>
<p><img src="https://cdn-images-1.medium.com/max/5140/1*kfGNEVm_gJevBIziQ3iXbw.png" alt=""></p>
<p><img src="https://cdn-images-1.medium.com/max/2984/1*v0ZGfvbSFgljeW34PQsw7g.png" alt=""></p>
<h3 id="Image-Set"><a href="#Image-Set" class="headerlink" title="Image Set"></a>Image Set</h3><p>Open asset catalog, right click and select New Image Set . We can name it anything. This will be used in the Launch Screen.storyboard.</p>
<p><img src="https://cdn-images-1.medium.com/max/4496/1*WOAJ9Vr7fSqRSxwBwRb3qg.png" alt=""></p>
<p>Open Launch Screen.storyboard and add an UIImageView . If you are using Xcode 10, click the Library button in the upper right corner and choose Show Objects Library.</p>
<p><img src="https://cdn-images-1.medium.com/max/6720/1*I6hTPAW_L4fUbo8cTakXlg.png" alt=""></p>
<p>Set image for Image View, and make sure Content Mode is set to Aspect Filled, as this ensures that the image always covers the full screen (although it may be cropped). Then connect ImageView using constraints to the View, not the Safe Area. You do this by Control+drag from the Image View (splash) to the View.</p>
<p><img src="https://cdn-images-1.medium.com/max/5700/1*qdEg7IejnxG3Y0Uo1bpiCA.png" alt=""></p>
<h3 id="Constrains-without-margin"><a href="#Constrains-without-margin" class="headerlink" title="Constrains without margin"></a>Constrains without margin</h3><p>Click into each constraint and uncheck Relative to Margin. This makes our ImageView pin to the very edges of the view and with no margin at all.</p>
<p><img src="https://cdn-images-1.medium.com/max/6720/1*5AIBO-ZLXfiLGsk9P32nFw.png" alt=""></p>
<p>Now go to both targets and select Launch Screen.storyboard as Launch Screen File:</p>
<p><img src="https://cdn-images-1.medium.com/max/7168/1*SrrFr1lk7oIwc4QvdoJVxg.png" alt=""></p>
<p>On iOS, the launch screen is often cached, so you probably won’t see the changes. One way to avoid that is to delete the app and run it again.</p>
<h3 id="Add-a-launcher-theme-for-Android"><a href="#Add-a-launcher-theme-for-Android" class="headerlink" title="Add a launcher theme for Android"></a>Add a launcher theme for Android</h3><p>There are <a href="https://android.jlelse.eu/the-complete-android-splash-screen-guide-c7db82bce565">several</a> <a href="https://android.jlelse.eu/right-way-to-create-splash-screen-on-android-e7f1709ba154">ways</a> to add splash screen for Android, from using launcher themes, Splash Activity, and a timer. For me, a reasonable splash screen for Android should be a very minimal image.</p>
<p>As there are many Android devices with different ratios and resolutions, if you want to show a full screen splash image, it will probably not scale correctly for each device. This is just about UX.</p>
<p>For the splash screen, let’s use the launcher theme with splash_background.xml .</p>
<h3 id="Learn-about-Device-Metric"><a href="#Learn-about-Device-Metric" class="headerlink" title="Learn about Device Metric"></a>Learn about Device Metric</h3><p>There is no single splash image that suits all Android devices. A more logical approach is to create multiple splash images for all common resolutions in portrait and landscape. Or we can design a minimal splash image that works. You can find more info here: <a href="https://material.io/tools/devices/">Device Metric</a>.</p>
<p><img src="https://cdn-images-1.medium.com/max/2000/1*VY5n-nyMet5xlgQyr_fWWw.png" alt=""></p>
<p><img src="https://cdn-images-1.medium.com/max/5940/1*491dzlEkHT3FvIuuLosGKg.png" alt=""></p>
<p>Here is how to add splash screen in 4 easy steps:</p>
<h3 id="Add-splash-image"><a href="#Add-splash-image" class="headerlink" title="Add splash image"></a>Add splash image</h3><p>We usually need a common splash screen for both staging and production. Drag an image into main/res/drawble . Android Studio seems to have a problem with recognising some jpg images for the splash screen, so it’s best to choose png images.</p>
<h3 id="Add-splash-background-xml"><a href="#Add-splash-background-xml" class="headerlink" title="Add splash_background.xml"></a>Add splash_background.xml</h3><p>Right click on drawable -&gt; New -&gt; Drawable resource file . Name it whatever you want — I choose splash_background.xml . Choose the root element as layer-list:</p>
<p><img src="https://cdn-images-1.medium.com/max/4170/1*rEa10WkfXx9VCBX_0sQK3A.png" alt=""></p>
<p><img src="https://cdn-images-1.medium.com/max/2000/1*FwCOuThRAGCZSWvdhVrfCw.png" alt=""></p>
<p>A [Layer List](<a href="http://Layer">http://Layer</a> List) means “a Drawable that manages an array of other Drawables. These are drawn in array order, so the element with the largest index is drawn on top”. Here is how splash_background.xml looks like:</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;

&lt;!-- The android:opacity=”opaque” line — this is critical in preventing a flash of black as your theme transitions. --&gt;
&lt;layer-list xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    android:opacity=&quot;opaque&quot;&gt;

    &lt;!-- The background color, preferably the same as your normal theme --&gt;
    &lt;item android:drawable=&quot;@android:color/white&quot;/&gt;

    &lt;!-- Your splash image --&gt;
    &lt;item&gt;
        &lt;bitmap
            android:src=&quot;@drawable/iron_man&quot;
            android:gravity=&quot;center&quot;/&gt;

    &lt;/item&gt;

&lt;/layer-list&gt;</code></pre><p>Note that we point to our splash image we added earlier with android:src=”@drawable/iron_man”.</p>
<h3 id="Declare-style"><a href="#Declare-style" class="headerlink" title="Declare style"></a>Declare style</h3><p>Open styles.xml and add SplashTheme:</p>
<pre><code>&lt;style name=&quot;SplashTheme&quot; parent=&quot;Theme.AppCompat.NoActionBar&quot;&gt;
    &lt;item name=&quot;android:windowBackground&quot;&gt;@drawable/splash_background&lt;/item&gt;
&lt;/style&gt;</code></pre><h3 id="Use-SplashTheme"><a href="#Use-SplashTheme" class="headerlink" title="Use SplashTheme"></a>Use SplashTheme</h3><p>Go to Manifest.xml and change the theme of the the launcher activity, which has category android:name=”android.intent.category.LAUNCHER” . Change it to android:theme=”@style/SplashTheme” . For React Native, the launcher activity is usually MainActivity . Here is how Manifest.xml looks:</p>
<pre><code>&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    package=&quot;com.myapp&quot;&gt;

    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;
    &lt;uses-permission android:name=&quot;android.permission.SYSTEM_ALERT_WINDOW&quot;/&gt;

    &lt;application
      android:name=&quot;.MainApplication&quot;
      android:label=&quot;@string/app_name&quot;
      android:icon=&quot;@mipmap/ic_launcher&quot;
      android:allowBackup=&quot;false&quot;
      android:theme=&quot;@style/AppTheme&quot;&gt;
      &lt;activity
        android:name=&quot;.MainActivity&quot;
        android:label=&quot;@string/app_name&quot;
        android:configChanges=&quot;keyboard|keyboardHidden|orientation|screenSize&quot;
        android:theme=&quot;@style/SplashTheme&quot;
        android:windowSoftInputMode=&quot;adjustResize&quot;&gt;
        &lt;intent-filter&gt;
            &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;
            &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;
        &lt;/intent-filter&gt;
      &lt;/activity&gt;
      &lt;activity android:name=&quot;com.facebook.react.devsupport.DevSettingsActivity&quot; /&gt;
    &lt;/application&gt;

&lt;/manifest&gt;</code></pre><p>Run the app now and you should see the splash screen showing when the app starts.</p>
<h2 id="Managing-environment-configurations"><a href="#Managing-environment-configurations" class="headerlink" title="Managing environment configurations"></a>Managing environment configurations</h2><p>The differences between staging and production are just about app names, application ids, and app icons. We probably use different API keys, and backend URL for staging and production.</p>
<p>Right now the most popular library to handle these scenarios is <a href="https://github.com/luggit/react-native-config">react-native-config</a>, which is said to “bring some 12 factor love to your mobile apps”. It requires lots of steps to get started, and I hope there is a less verbose solution.</p>
<h3 id="Where-to-go-from-here"><a href="#Where-to-go-from-here" class="headerlink" title="Where to go from here"></a>Where to go from here</h3><p>In this post, we touched Xcode and Android Studio more than Visual Studio Code, but this was inevitable. I hope this post was useful to you. Here are some more links to read more about this topic:</p>
<ul>
<li><a href="https://medium.com/@scottianstewart/react-native-add-app-icons-and-launch-screens-onto-ios-and-android-apps-3bfbc20b7d4c">Add App Icons and Launch Screens to React Native Apps (iOS &amp; Android)</a></li>
<li><a href="https://medium.com/handlebar-labs/how-to-add-a-splash-screen-to-a-react-native-app-ios-and-android-30a3cec835ae">How to Add a Splash Screen to a React Native App (iOS and Android)</a></li>
<li><a href="https://medium.com/differential/managing-configuration-in-react-native-cd2dfb5e6f7b">Managing Configuration in React Native</a></li>
<li><a href="https://medium.com/@jacks205/adding-multiple-target-pipelines-for-react-native-apps-and-fastlane-circleci-deployment-pt-1-ae9590ae52f2">Adding multiple target pipelines for React Native Apps (and Fastlane CircleCI deployment) pt. 1</a></li>
<li><a href="https://android.jlelse.eu/the-complete-android-splash-screen-guide-c7db82bce565">The (Complete) Android Splash Screen Guide</a></li>
</ul>
<hr>
<h2 id="I-originally-published-on-Free-Code-Camp-https-medium-freecodecamp-org-how-to-add-app-icons-and-splash-screens-to-a-react-native-app-in-staging-and-production-d1dab615e7c6"><a href="#I-originally-published-on-Free-Code-Camp-https-medium-freecodecamp-org-how-to-add-app-icons-and-splash-screens-to-a-react-native-app-in-staging-and-production-d1dab615e7c6" class="headerlink" title="I originally published on Free Code Camp https://medium.freecodecamp.org/how-to-add-app-icons-and-splash-screens-to-a-react-native-app-in-staging-and-production-d1dab615e7c6"></a>I originally published on Free Code Camp <a href="https://medium.freecodecamp.org/how-to-add-app-icons-and-splash-screens-to-a-react-native-app-in-staging-and-production-d1dab615e7c6">https://medium.freecodecamp.org/how-to-add-app-icons-and-splash-screens-to-a-react-native-app-in-staging-and-production-d1dab615e7c6</a></h2><p><strong>Updated at</strong> 2021-01-13 09:14:18</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-05-23T16:08:37.000Z" title="2019-05-23T16:08:37.000Z">2019-05-23</time><span class="level-item">35 minutes read (About 5243 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-convert-your-Xcode-plugins-to-Xcode-extensions/">How to convert your Xcode plugins to Xcode extensions</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/267">#267</a></strong></p>
<p>Original post <a href="https://medium.freecodecamp.org/how-to-convert-your-xcode-plugins-to-xcode-extensions-ac90f32ae0e3">https://medium.freecodecamp.org/how-to-convert-your-xcode-plugins-to-xcode-extensions-ac90f32ae0e3</a></p>
<hr>
<p>Xcode is an indispensable IDE for iOS and macOS developers. From the early days, the ability to build and install custom plugins had given us a huge boost in productivity. It was not long before Apple introduced Xcode extension due to privacy concerns.</p>
<p>I have built a few Xcode plugins and extensions like <a href="https://github.com/onmyway133/XcodeWay">XcodeWay</a>, <a href="https://github.com/onmyway133/XcodeColorSense">XcodeColorSense</a>, <a href="https://github.com/onmyway133/XcodeColorSense2">XcodeColorSense2</a>, and <a href="https://github.com/onmyway133/Xmas">Xmas</a>. It was a rewarding experience. I learned a lot, and the productivity I gained was considerable. In this post I walkthrough how I converted my Xcode plugins to extensions, and the experience I had in doing so.</p>
<h2 id="My-first-Xcode-plugin-XcodeWay"><a href="#My-first-Xcode-plugin-XcodeWay" class="headerlink" title="My first Xcode plugin: XcodeWay"></a>My first Xcode plugin: XcodeWay</h2><blockquote>
<h1 id="I-choose-a-lazy-person-to-do-a-hard-job-Because-a-lazy-person-will-find-an-easy-way-to-do-it"><a href="#I-choose-a-lazy-person-to-do-a-hard-job-Because-a-lazy-person-will-find-an-easy-way-to-do-it" class="headerlink" title="I choose a lazy person to do a hard job. Because a lazy person will find an easy way to do it"></a>I choose a lazy person to do a hard job. Because a lazy person will find an easy way to do it</h1></blockquote>
<p>I really like the above <a href="https://www.goodreads.com/quotes/568877-i-choose-a-lazy-person-to-do-a-hard-job">quote from Bill Gates</a>. I try to avoid repetitive and boring tasks. Whenever I find myself doing the same tasks again, I write scripts and tools to automate that. Doing this takes some time, but I will be a bit lazier in the near future.</p>
<p>Besides the interest in building open source <a href="https://github.com/onmyway133/blog/issues/5">frameworks and tools</a>, I like to extend the IDE I’m using — mostly Xcode.</p>
<p>I first started iOS development in 2014. I wanted a quick way to navigate to many places right from Xcode with the context of the current project. There are many times we want to:</p>
<ul>
<li><p>open the current project folder in “Finder” to change some files</p>
</li>
<li><p>open Terminal to run some commands</p>
</li>
<li><p>open the current file in GitHub to quickly give the link to a workmate</p>
</li>
<li><p>or to open other folders like themes, plugins, code snippets, device logs.</p>
</li>
</ul>
<p>Every little bit of time we save each day counts.</p>
<p>I thought it would be cool idea to write an Xcode plugin that we can do all above things right inside Xcode. Instead of waiting for other people to do it, I pulled up my sleeve and wrote my first Xcode plugin — <a href="https://github.com/onmyway133/XcodeWay">XcodeWay</a>— and shared it as open source.</p>
<p><img src="https://cdn-images-1.medium.com/max/3732/1*yFFJ_Viy9t95dKt0ehGuFQ.png" alt="XcodeWay works by creating a menu under Editor with lots of options to navigate to other places right from Xcode. It looks simple but there was some hard work required."><em>XcodeWay works by creating a menu under Editor with lots of options to navigate to other places right from Xcode. It looks simple but there was some hard work required.</em></p>
<h2 id="What-are-Xcode-plugins"><a href="#What-are-Xcode-plugins" class="headerlink" title="What are Xcode plugins?"></a>What are Xcode plugins?</h2><p>Xcode plugins are not officially supported by Xcode or recommended by Apple. There are no documents about them. The best places we can learn about them are via existing plugins’ source code and a few tutorials.</p>
<p>An Xcode plugin is just a bundle of type xcplugin and is placed at ~/Library/Application Support/Developer/Shared/Xcode/Plug-ins . Xcode, when starting, will load any Xcode plugins present in this folder. Plugins are run in the same process as Xcode, so could do anything as Xcode. A bug in any plugin can cause Xcode to crash.</p>
<p>To make an Xcode plugin, create a macOS Bundle with one class that extends from NSObject , and have an initialiser that accepts NSBundle , for example in <a href="https://github.com/onmyway133/Xmas/blob/master/Xmas/Xmas.swift">Xmas</a>:</p>
<p><img src="https://cdn-images-1.medium.com/max/3104/1*00MyrPD8FnUCCCPZL8G8qg.png" alt=""></p>
<pre><code>class Xmas: NSObject {

  var bundle: NSBundle

  init(bundle: NSBundle) {
    self.bundle = bundle
    super.init()
  }
}</code></pre><p>Inside Info.plist, we need to:</p>
<ul>
<li><p>declare this class as the main entry class for the plugin, and</p>
</li>
<li><p>that this bundle has no UI, because we create UI controls and add to the Xcode interface during runtime</p>
<p>  <key>NSPrincipalClass</key><br>  <string>Xmas</string><br>  <key>XCPluginHasUI</key></p>
  <false/>

</li>
</ul>
<p>Another problem with Xcode plugins is that we have to continuously update DVTPluginCompatibilityUUIDs . This changes every time a new version of Xcode comes out. Without updating, Xcode will refuse to load the plugin.</p>
<h2 id="What-Xcode-plugins-can-do"><a href="#What-Xcode-plugins-can-do" class="headerlink" title="What Xcode plugins can do"></a>What Xcode plugins can do</h2><p>Many developers build Xcode plugins because they miss specific features found in other IDEs like Sublime Text, AppCode, or Atom.</p>
<p>Since Xcode plugins are loaded in the same process as Xcode, they can do everything that Xcode can. The only limit is our imagination. We can leverage Objective C Runtime to discover private frameworks and functions. Then LLDB and Symbolic breakpoint can be used further to inspect running code and alter their behaviors. We can also use swizzling to change implementation of any running code. Writing Xcode plugins is hard — lots of guessing, and sometimes a good knowledge of assembly is required.</p>
<p>In the golden age of plugins, there was a popular plugin manager, which itself was a plugin, called <a href="https://github.com/alcatraz/Alcatraz">Alcatraz</a>. It could install other plugins, which basically just downloads the xcplugin file and moves this to the Plug Ins folder.</p>
<p><img src="https://cdn-images-1.medium.com/max/3476/0*PJ2uoFz8fm7TLI6F.png" alt=""></p>
<p>To get a sense of what plugins can do, let’s take a look at some popular plugins.</p>
<h3 id="Xvim"><a href="#Xvim" class="headerlink" title="Xvim"></a>Xvim</h3><p>First in the list is <a href="https://github.com/XVimProject/XVim">Xvim</a>, which adds Vim keybindings right inside Xcode. It supports mostly all of the keybindings that we used to have in Terminal.</p>
<p><img src="https://cdn-images-1.medium.com/max/2584/1*mk9e6p3myodrOVbspovq-w.png" alt=""></p>
<h3 id="SCXcodeMiniMap"><a href="#SCXcodeMiniMap" class="headerlink" title="SCXcodeMiniMap"></a>SCXcodeMiniMap</h3><p>If you miss MiniMap mode in Sublime Text, you can use <a href="https://github.com/stefanceriu/SCXcodeMiniMap">SCXcodeMiniMap</a> to add a right map panel inside Xcode editor.</p>
<p><img src="https://cdn-images-1.medium.com/max/3360/0*2ceF-Oww_gKb8V65" alt=""></p>
<h3 id="FuzzyAutocompletePlugin"><a href="#FuzzyAutocompletePlugin" class="headerlink" title="FuzzyAutocompletePlugin"></a>FuzzyAutocompletePlugin</h3><p>Before version 9, Xcode didn’t have proper auto completion — it was just based on prefix. That was where <a href="https://github.com/FuzzyAutocomplete/FuzzyAutocompletePlugin">FuzzyAutocompletePlugin</a> shone. It performs fuzzy auto completion based on the hidden IDEOpenQuicklyPattern feature in Xcode.</p>
<p><img src="https://cdn-images-1.medium.com/max/2532/1*-DlTVNe370dbXNlxzOmH1g.png" alt=""></p>
<h3 id="KSImageNamed-Xcode"><a href="#KSImageNamed-Xcode" class="headerlink" title="KSImageNamed-Xcode"></a>KSImageNamed-Xcode</h3><p>To display a bundle image inside UIImageView, we often use the imageNamed method. But remembering exactly the name of the image file is hard. <a href="https://github.com/ksuther/KSImageNamed-Xcode">KSImageNamed-Xcode</a> is here to help. You will get a list of auto-suggested image names when you begin to type.</p>
<p><img src="https://cdn-images-1.medium.com/max/2556/1*oMRkzNj6881iK9Tsv3OGRA.png" alt=""></p>
<h3 id="ColorSense-for-Xcode"><a href="#ColorSense-for-Xcode" class="headerlink" title="ColorSense-for-Xcode"></a>ColorSense-for-Xcode</h3><p>Another itch during development is to work with UIColor , which uses RGBA color space. We don’t get a visual indicator of the color that we specify, and manually performing checking can be time consuming. Luckily there is <a href="https://github.com/omz/ColorSense-for-Xcode">ColorSense-for-Xcode</a> which shows the color being used and the color picker panel to easily select the right color.</p>
<p><img src="https://cdn-images-1.medium.com/max/2880/0*EZE4S-PiYPa3fmu4.png" alt=""></p>
<h3 id="LinkedConsole"><a href="#LinkedConsole" class="headerlink" title="LinkedConsole"></a>LinkedConsole</h3><p>In AppCode, we can jump to a specific line in the file that is logged inside the console. If you miss this feature in Xcode, you can use <a href="https://github.com/krzysztofzablocki/LinkedConsole">LinkedConsole</a>. This enables clickable links inside Xcode console so we can jump to that file instantly.</p>
<p><img src="https://cdn-images-1.medium.com/max/3740/1*1K4Ndh9cQiKHNjFq3FELkA.png" alt=""></p>
<h2 id="The-hard-work-behind-Xcode-plugins"><a href="#The-hard-work-behind-Xcode-plugins" class="headerlink" title="The hard work behind Xcode plugins"></a>The hard work behind Xcode plugins</h2><p>Making an Xcode plugin is not easy. Not only do we need to know macOS programming, but we also need to dive deep into Xcode view hierarchy. We need to explore private frameworks and APIs in order to inject the feature we want.</p>
<p>There are very few tutorials on how to make plugins but, luckily, most plugins are open source so we can understand how they work. Since I have made a few plugins, I can give some technical details about them.</p>
<p>Xcode plugins are done usually with two private frameworks: DVTKit and IDEKit . System frameworks are at /System/Library/PrivateFrameworks but the frameworks that Xcode uses exclusively are under /Applications/Xcode.app/Contents/ , there you can find Frameworks , OtherFrameworks and SharedFrameworks.</p>
<p>There is a tool <a href="https://github.com/nygard/class-dump">class-dump</a> that can generate headers from the Xcode app bundle. With the class names and methods, you can call NSClassFromString to get the class from the name.</p>
<h3 id="Swizzling-DVTBezelAlertPanel-framework-in-Xmas"><a href="#Swizzling-DVTBezelAlertPanel-framework-in-Xmas" class="headerlink" title="Swizzling DVTBezelAlertPanel framework in Xmas"></a>Swizzling DVTBezelAlertPanel framework in Xmas</h3><p>Christmas has always given me a special feeling, so I decided to make <a href="https://github.com/onmyway133/Xmas">Xmas</a>, which shows a random Christmas picture instead of the default alert view. The class used to render that view is <a href="https://github.com/luisobo/Xcode-RuntimeHeaders/blob/master/DVTKit/DVTBezelAlertPanel.h">DVTBezelAlertPanel</a> inside the DVTKit framework. <a href="https://medium.com/fantageek/xmas-9522c2c88db3">My article on building that plugin is here.</a></p>
<p><img src="https://cdn-images-1.medium.com/max/2880/0*rPYi7qKWFen5Oq5W.png" alt=""></p>
<p>With Objective C Runtime, there is a technique called swizzling, which can change and switch implementation and method signature of any running classes and methods.</p>
<p>Here, in order to change the content of that alert view, we need to swap the <a href="https://github.com/onmyway133/Xmas/blob/master/Xmas/Xmas.swift">initialiser</a> initWithIcon:message:parentWindow:duration: with our own method. We do that early by listening to NSApplicationDidFinishLaunchingNotification which is notified when a macOS plugin, in this case Xcode, launches.</p>
<pre><code>class func swizzleMethods() {
    guard let originalClass = NSClassFromString(&quot;DVTBezelAlertPanel&quot;) as? NSObject.Type else {
        return
    }

do {
        try originalClass.jr_swizzleMethod(&quot;initWithIcon:message:parentWindow:duration:&quot;,
            withMethod: &quot;xmas_initWithIcon:message:parentWindow:duration:&quot;)
    }
    catch {
        Swift.print(&quot;Swizzling failed&quot;)
    }
}</code></pre><p>I initially liked to do everything in Swift. But it’s tricky to use the s<a href="https://stackoverflow.com/questions/34317766/how-to-swizzle-init-in-swift">wizzle init method in Swift</a>, so the quickest way is to do that in <a href="https://github.com/onmyway133/xmas/blob/master/Xmas/NSObject%2BXmas.m">Objective C</a>. Then we simply traverse the view hierarchy to find the NSVisualEffectView inside NSPanel to update the image.</p>
<h3 id="Interacting-with-DVTSourceTextView-in-XcodeColorSense"><a href="#Interacting-with-DVTSourceTextView-in-XcodeColorSense" class="headerlink" title="Interacting with DVTSourceTextView in XcodeColorSense"></a>Interacting with DVTSourceTextView in XcodeColorSense</h3><p>I work mostly with hex colors and I want a quick way to see the color. So I built XcodeColorSense — it supports hex color, RGBA, and named color.</p>
<p><img src="https://cdn-images-1.medium.com/max/3772/1*Z-87Nylaul0qvQMVBo9JeA.png" alt=""></p>
<p>The idea is simple. Parse the string to see if the user is typing something related to UIColor, and show a small overlay view with that color as background. The text view that Xcode uses is of type DVTSourceTextView in DVTKit framework. We also need to listen to NSTextViewDidChangeSelectionNotification which is triggered whenever any NSTextView content is <a href="https://github.com/onmyway133/XcodeColorSense/blob/master/XcodeColorSense/XcodeColorSense.swift">changed</a>.</p>
<pre><code>func listenNotification() {
  NSNotificationCenter.defaultCenter().addObserver(self, selector: #selector(handleSelectionChange(_:)), name: NSTextViewDidChangeSelectionNotification, object: nil)
}

func handleSelectionChange(note: NSNotification) {
  guard let DVTSourceTextView = NSClassFromString(&quot;DVTSourceTextView&quot;) as? NSObject.Type,
    object = note.object where object.isKindOfClass(DVTSourceTextView.self),
    let textView = object as? NSTextView
  else { return }

self.textView = textView
}</code></pre><p>I had a Matcher architecture so we can detect different kinds of UIColor constructions — for example <a href="https://github.com/onmyway133/XcodeColorSense/blob/master/XcodeColorSense/Matcher/HexMatcher.swift">HexMatcher</a> .</p>
<pre><code>public struct HexMatcher: Matcher {

func check(line: String, selectedText: String) -&gt; (color: NSColor, range: NSRange)? {
    let pattern1 = &quot;\&quot;#?[A-Fa-f0-9]{6}\&quot;&quot;
    let pattern2 = &quot;0x[A-Fa-f0-9]{6}&quot;

let ranges = [pattern1, pattern2].flatMap {
      return Regex.check(line, pattern: $0)
    }

guard let range = ranges.first
      else { return nil }

let text = (line as NSString).substringWithRange(range).replace(&quot;0x&quot;, with: &quot;&quot;).replace(&quot;\&quot;&quot;, with: &quot;&quot;)
    let color = NSColor.hex(text)

return (color: color, range: range)
  }
}</code></pre><p>To render the overlay, we use NSColorWell which is good for showing a view with background. The position is determined by calling firstRectForCharacterRange and some point conversions with convertRectFromScreen and convertRect .</p>
<h3 id="Using-NSTask-and-IDEWorkspaceWindowController-in-XcodeWay"><a href="#Using-NSTask-and-IDEWorkspaceWindowController-in-XcodeWay" class="headerlink" title="Using NSTask and IDEWorkspaceWindowController in XcodeWay"></a>Using NSTask and IDEWorkspaceWindowController in XcodeWay</h3><p>Finally, my beloved <a href="https://github.com/onmyway133/XcodeWay/tree/1.0">XcodeWay</a>.</p>
<p>I found myself needing to go to different places from Xcode with the context of the current project. So I built XcodeWay as a plugin that adds lots of handy menu options under Window.</p>
<p><img src="https://cdn-images-1.medium.com/max/2880/0*f2mTvSC0HtdbcEZ6.png" alt=""></p>
<p>Since the plugin runs in the same Xcode process, it has access to the main menu NSApp.mainMenu?.itemWithTitle(“Window”) . There we can alter the menu. XcodeWay is designed to easily extend functionalities through its <a href="https://github.com/onmyway133/XcodeWay/blob/1.0/XcodeWay/Navigator/Navigator.swift">Navigator</a> protocol.</p>
<pre><code>[@objc](http://twitter.com/objc) protocol Navigator: NSObjectProtocol {
  func navigate()
  var title: String { get }
}</code></pre><p>For folders with a static path like Provisioning Profile ~/Library/MobileDevice/Provisioning Profiles or User data Developer/Xcode/UserData , we can just construct the URL and call NSWorkspace.sharedWorkspace().openURL . For dynamic folders that vary depending on the current project, more work needs to be done.</p>
<p>How do we open the folder for the current project in Finder? The information for the current project path is kept inside IDEWorkspaceWindowController . This is a class that manages workspace windows in Xcode. Take a look at <a href="https://github.com/onmyway133/XcodeWay/blob/1.0/XcodeWay/Helper/FTGEnvironmentManager.m">EnvironmentManager</a> where we use <a href="https://developer.apple.com/documentation/objectivec/1418952-objc_getclass?language=objc">objc_getClass</a> to get the class definition from a string.</p>
<pre><code>self.IDEWorkspaceWindowControllerClass = objc_getClass(&quot;IDEWorkspaceWindowController&quot;);

NSArray *workspaceWindowControllers = [self.IDEWorkspaceWindowControllerClass valueForKey:@&quot;workspaceWindowControllers&quot;];

id workSpace = nil;

for (id controller in workspaceWindowControllers) {
  if ([[controller valueForKey:@&quot;window&quot;] isEqual:[NSApp keyWindow]]) {
    workSpace = [controller valueForKey:@&quot;_workspace&quot;];
  }
}

NSString * path = [[workSpace valueForKey:@&quot;representingFilePath&quot;] valueForKey:@&quot;_pathString&quot;];</code></pre><p>Finally, we can utilise valueForKey to get the value for any property that we think exists. This way not only do we get the <a href="https://github.com/onmyway133/XcodeWay/blob/1.0/XcodeWay/Navigator/FTGProjectFolderNavigator.m">project path</a>, we also get the path to the opening file. So we can call activateFileViewerSelectingURLs on NSWorkspace to open Finder with that file selected. This is handy as users don’t need to look for that file in Finder.</p>
<p>Many times we want to execute some Terminal commands on the current project folder. To achieve that, we can use NSTask with launch pad /usr/bin/open and arguments [@”-a”, @”Terminal”, projectFolderPath] . iTerm, if configured probably, will open this in a new tab.</p>
<p>The documents for iOS 7 apps are placed in the fixed location iPhone Simulator inside Application Support. But, from iOS 8, every app has a unique UUID and their <a href="https://github.com/onmyway133/XcodeWay/blob/1.0/XcodeWay/Navigator/FTGSimulatorFolderNavigator.m">document folders</a> are hard to predict.</p>
<pre><code>~/Library/Developer/CoreSimulator/Devices/1A2FF360-B0A6-8127-95F3-68A6AB0BCC78/data/Container/Data/Application/</code></pre><p>We can build a map and perform tracking to find the generated ID for the current project, or to check the plist inside each folder to compare the bundle identifier.</p>
<p>The quick solution that I came up with was to search for the most recent updated folder. Every time we build the project, or make changes inside the app, their document folder is updated. That is where we can make use of NSFileModificationDate to find the folder for the current project.</p>
<p>There are many hacks when working with Xcode plugins, but the results are rewarding. Every few minutes we save each day end up saving a lot of time overall.</p>
<h2 id="Security-and-freedom"><a href="#Security-and-freedom" class="headerlink" title="Security and freedom"></a>Security and freedom</h2><p>With great power comes great responsibility. The fact that plugins can do whatever they want rings an alert to security. In late 2015, there was a malware attack by distributing a modified version of Xcode, called <a href="https://en.wikipedia.org/wiki/XcodeGhost">XcodeGhost</a>, which injects malicious code into any apps built with Xcode Ghost. The malware is believed to use the plugin mechanism among other things.</p>
<p>Like the iOS apps we download from the Appstore, macOS apps like Xcode are <a href="https://developer.apple.com/support/code-signing/">signed</a> by Apple when we download them from the Mac Appstore or through official Apple download links.</p>
<p><strong>Code signing your app</strong> assures users that it is from a known source and the app hasn’t been modified since it was last signed. Before your app can integrate app services, be installed on a device, or be submitted to the App Store, it must be signed with a <a href="https://developer.apple.com/support/technical/certificates/">certificate</a> issued by Apple</p>
<p>To avoid potential malware like this, at WWDC 2016 Apple announced the <a href="https://developer.apple.com/videos/play/wwdc2016/414/">Xcode Source Editor Extension</a> as the only way to load third party extensions into Xcode. This means that, from Xcode 8, plugins can’t be loaded.</p>
<h3 id="Source-Editor-Extension"><a href="#Source-Editor-Extension" class="headerlink" title="Source Editor Extension"></a>Source Editor Extension</h3><p><a href="https://developer.apple.com/app-extensions/">Extension</a> is the recommended approach to safely add functionalities in restricted ways.</p>
<p>App extensions give users access to your app’s functionality and content throughout iOS and macOS. For example, your app can now appear as a widget on the Today screen, add new buttons in the Action sheet, offer photo filters within the Photos app, or display a new system-wide custom keyboard.</p>
<p>For now, the only extension to Xcode is Source Editor, which allows us to read and modify contents of a source file, as well as read and modify the current text selection within the editor.</p>
<p>Extension is a new target and runs in a different process than Xcode. This is good in that it can’t alter Xcode in any ways other than conforming to XCSourceEditorCommand to modify the current document content.</p>
<pre><code>protocol XCSourceEditorCommand {

  func perform(with invocation: [XCSourceEditorCommandInvocation](https://developer.apple.com/documentation/xcodekit/xcsourceeditorcommandinvocation), 
completionHandler: @escaping ([Error](https://developer.apple.com/documentation/swift/error)?) -&gt; [Void](https://developer.apple.com/documentation/swift/void))
}</code></pre><p><img src="https://cdn-images-1.medium.com/max/2720/0*QfHcnpb6WZaMrMDi.png" alt=""></p>
<p>Xcode 8 has lots of improvements like the new code completion features, Swift image and color literals, and snippets. This led to the deprecation of many Xcode plugins. For some indispensable plugins like XVim, this is unbearable for some people. Some old plugin features can’t be achieved with the current Source Editor Extension system.</p>
<h3 id="Unless-you-resign-Xcode"><a href="#Unless-you-resign-Xcode" class="headerlink" title="Unless you resign Xcode"></a>Unless you resign Xcode</h3><p>A workaround to bypass the restriction from Xcode 8 for plugins, is to replace the existing Xcode signature by a technique called <a href="https://github.com/XVimProject/XVim2/blob/master/SIGNING_Xcode.md">resign</a>. Resigning is very easy — we just need to create a self-signed certificate and call the codesign command. After this, Xcode should be able to load plugins.</p>
<p><img src="https://cdn-images-1.medium.com/max/2000/0*9BeVwHROwO7ls9Z0.png" alt=""></p>
<pre><code>codesign -f -s MySelfSignedCertificate /Applications/Xcode.app</code></pre><p>It is, however, <strong>not possible</strong> to submit apps built with resigned Xcode as the signature does not match the official version of Xcode. One way is to use two Xcodes: one official for distribution and one resigned for development.</p>
<h2 id="Moving-to-Xcode-extension"><a href="#Moving-to-Xcode-extension" class="headerlink" title="Moving to Xcode extension"></a>Moving to Xcode extension</h2><p>Xcode extension is the way to go, so I started moving my plugins to extension. For Xmas, since it modifies view hierarchy, it can’t become an extension.</p>
<h3 id="Color-literal-in-XcodeColorSense2"><a href="#Color-literal-in-XcodeColorSense2" class="headerlink" title="Color literal in XcodeColorSense2"></a>Color literal in XcodeColorSense2</h3><p>For the color sense, I rewrote the extension from scratch, and called it <a href="https://github.com/onmyway133/XcodeColorSense2">XcodeColorSense2</a>. This, of course, can’t show an overlay over the current editor view. So I chose to utilize the new Color literal found in Xcode 8+.</p>
<p><img src="https://cdn-images-1.medium.com/max/3800/1*DWeJnAh6xu1-CLfaABornQ.png" alt=""></p>
<p>The color is shown in a small box. It may be hard to distinguish similar colors, so that’s why I also include the name. The code is simply about inspecting selections and parsing to find the color declaration.</p>
<pre><code>func perform(with invocation: XCSourceEditorCommandInvocation, completionHandler: [@escaping](http://twitter.com/escaping) (Error?) -&gt; Void ) -&gt; Void {
    guard let selection = invocation.buffer.selections.firstObject as? XCSourceTextRange else {
      completionHandler(nil)
      return
    }

let lineNumber = selection.start.line

guard lineNumber &lt; invocation.buffer.lines.count,
      let line = invocation.buffer.lines[lineNumber] as? String else {
      completionHandler(nil)
      return
    }

guard let hex = findHex(string: line) else {
      completionHandler(nil)
      return
    }

let newLine = process(line: line, hex: hex)

invocation.buffer.lines.replaceObject(at: lineNumber, with: newLine)

completionHandler(nil)
  }
}</code></pre><p>Most of the functionality is embedded inside my framework <a href="https://github.com/onmyway133/Farge">Farge</a>, but I can’t find a way to use the <a href="https://stackoverflow.com/questions/43673353/how-to-use-framework-in-xcode-source-editor-extension">framework inside Xcode extension</a>.</p>
<p>Since the extension feature is only accessible through the Editor menu, we can customise a key binding to invoke this menu item. For example I choose Cmd+Ctrl+S to show and hide color information.</p>
<p><img src="https://cdn-images-1.medium.com/max/2880/0*r080P3DKAy_-zvJu.png" alt=""></p>
<p>This is, of course, not intuitive compared to the original plugin, but it’s better than nothing.</p>
<h3 id="How-to-debug-Xcode-extensions"><a href="#How-to-debug-Xcode-extensions" class="headerlink" title="How to debug Xcode extensions"></a>How to debug Xcode extensions</h3><p>Working and debugging extensions is straightforward. We can use Xcode to debug Xcode. The debugged version of Xcode has a gray icon.</p>
<p><img src="https://cdn-images-1.medium.com/max/5580/1*-8Uw2DfLyJKt0cU4Ogcdvg.png" alt=""></p>
<h3 id="How-to-install-Xcode-extensions"><a href="#How-to-install-Xcode-extensions" class="headerlink" title="How to install Xcode extensions"></a>How to install Xcode extensions</h3><p>The extension must have an accompanying macOS app. This can be distributed to Mac Appstore or self-signed. <a href="https://medium.com/fantageek/install-xcode-8-source-editor-extension-10c9849e33b0">I’ve written an article on how to do this</a>.</p>
<p>All extensions for an app need to be explicitly enabled through “System Preferences”.</p>
<p><img src="https://cdn-images-1.medium.com/max/NaN/1*6SSRVpyiSoP_QRa9DOO4ew.png" alt=""></p>
<p>The Xcode extension only works with editor for now, so we must open a source file for the Editor menu to have effect.</p>
<h2 id="AppleScript-in-XcodeWay"><a href="#AppleScript-in-XcodeWay" class="headerlink" title="AppleScript in XcodeWay"></a>AppleScript in XcodeWay</h2><p>In Xcode extensions, NSWorkspace, NSTask and private class construction don’t work anymore. Since I have used Finder Sync Extension in <a href="https://github.com/onmyway133/FinderGo">FinderGo</a>, I thought I could try the same AppleScript scripting for Xcode extension.</p>
<p><a href="https://developer.apple.com/library/archive/documentation/AppleScript/Conceptual/AppleScriptLangGuide/introduction/ASLR_intro.html">AppleScript</a> is a scripting language created by Apple. It allows users to directly control scriptable Macintosh applications, as well as parts of macOS itself. You can create scripts — sets of written instructions — to automate repetitive tasks, combine features from multiple scriptable applications, and create complex workflows.</p>
<p>To try AppleScript, you can use the app Script Editor built inside macOS to write prototype functions. Function declaration starts with on and ends with end . To avoid potential conflicts with system functions, I usually use my as a prefix. Here is how I rely on System Events to get the home directory.</p>
<p><a href="https://developer.apple.com/library/archive/documentation/LanguagesUtilities/Conceptual/MacAutomationScriptingGuide/AutomatetheUserInterface.html">User interface scripting</a> terminology is found in the “Processes Suite” of the “System Events” scripting dictionary. This suite includes terminology for interacting with most types of user interface elements, including:</p>
<ul>
<li><p>windows</p>
</li>
<li><p>buttons</p>
</li>
<li><p>checkboxes</p>
</li>
<li><p>menus</p>
</li>
<li><p>radio buttons</p>
</li>
<li><p>text fields.</p>
</li>
</ul>
<p>In System Events, the process class represents a running app.</p>
<p><img src="https://cdn-images-1.medium.com/max/3248/1*xX3TnFjBX7uDh_Wpid7bzA.png" alt=""></p>
<p>Many good citizen apps support AppleScript by exposing some of their functionalities, so these can be used by other apps. Here is how I get the current song from Spotify in <a href="https://github.com/onmyway133/Lyrics">Lyrics</a>.</p>
<pre><code>tell application &quot;Spotify&quot;
  set trackId to id of current track as string
  set trackName to name of current track as string
  set artworkUrl to artwork url of current track as string
  set artistName to artist of current track as string
  set albumName to album of current track as string
  return trackId &amp; &quot;---&quot; &amp; trackName &amp; &quot;---&quot; &amp; artworkUrl &amp; &quot;---&quot; &amp; artistName &amp; &quot;---&quot; &amp; albumName
end tell</code></pre><p>To get all the possible commands of a certain app, we can open the dictionary in Script Editor. There we can learn about which functions and parameters are supported.</p>
<p><img src="https://cdn-images-1.medium.com/max/3664/1*s3c33Gtd9Hq5u1a0pBrkPQ.png" alt=""></p>
<p>If you think Objective C is hard, AppleScript is much harder. The syntax is verbose and error-prone. For your reference, here is the <a href="https://github.com/onmyway133/XcodeWay/blob/master/XcodeWayExtensions/Script/XcodeWayScript.scpt">whole script file</a> that powers XcodeWay.</p>
<p>To open a certain folder, tell Finder using POSIX file. I refactor every functionality into function for better code reuse.</p>
<pre><code>on myOpenFolder(myPath)
tell application &quot;Finder&quot;
activate
open myPath as POSIX file
end tell
end myOpenFolder</code></pre><p>Then, to run AppleScript inside a macOS app or extension, we need to construct an <a href="https://github.com/onmyway133/XcodeWay/blob/master/XcodeWayExtensions/Helper/ScriptRunner.swift">AppleScript descriptor</a> with the correct process serial number and event identifiers.</p>
<pre><code>func eventDescriptior(functionName: String) -&gt; NSAppleEventDescriptor {
  var psn = ProcessSerialNumber(highLongOfPSN: 0, lowLongOfPSN: UInt32(kCurrentProcess))
  let target = NSAppleEventDescriptor(
    descriptorType: typeProcessSerialNumber,
    bytes: &amp;psn,
    length: MemoryLayout&lt;ProcessSerialNumber&gt;.size
  )

let event = NSAppleEventDescriptor(
    eventClass: UInt32(kASAppleScriptSuite),
    eventID: UInt32(kASSubroutineEvent),
    targetDescriptor: target,
    returnID: Int16(kAutoGenerateReturnID),
    transactionID: Int32(kAnyTransactionID)
  )

let function = NSAppleEventDescriptor(string: functionName)
  event.setParam(function, forKeyword: AEKeyword(keyASSubroutineName))

return event
}</code></pre><p>Other tasks, like checking the current Git remote, are a bit trickier. Many times I want to share the link of the file I’m debugging to my remote teammate, so they know what file I’m referencing. This is doable by using shell script inside AppleScript .</p>
<pre><code>on myGitHubURL()
set myPath to myProjectPath()
set myConsoleOutput to (do shell script &quot;cd &quot; &amp; quoted form of myPath &amp; &quot;; git remote -v&quot;)
set myRemote to myGetRemote(myConsoleOutput)
set myUrl to (do shell script &quot;cd &quot; &amp; quoted form of myPath &amp; &quot;; git config --get remote.&quot; &amp; quoted form of myRemote &amp; &quot;.url&quot;)
set myUrlWithOutDotGit to myRemoveSubString(myUrl, &quot;.git&quot;)
end myGitHubURL</code></pre><p>We can use quoted and string concatenation to form strings. Luckily we can expose Foundation framework and certain classes. Here is how I expose NSString to take advantage of all existing functionalities. Writing string manipulation from scratch using plain AppleScript will take lots of time.</p>
<pre><code>use scripting additions
use framework &quot;Foundation&quot;
property NSString : a reference to current application&apos;s NSString</code></pre><p>With this we can build our other functions for string handling.</p>
<pre><code>on myRemoveLastPath(myPath)
set myString to NSString&apos;s stringWithString:myPath
set removedLastPathString to myString&apos;s stringByDeletingLastPathComponent
removedLastPathString as text
end myRemoveLastPath</code></pre><p>One cool feature that XcodeWay supports is the ability to go to the document directory for the current app in the simulator. This is handy when we need to inspect a document to check saved or cached data. The directory is dynamic so it’s hard to detect. We can, however, sort the directory for the most recently updated. Below is how we chain multiple shell scripts commands to find the folder.</p>
<pre><code>on myOpenDocument()
set command1 to &quot;cd ~/Library/Developer/CoreSimulator/Devices/;&quot;
set command2 to &quot;cd `ls -t | head -n 1`/data/Containers/Data/Application;&quot;
set command3 to &quot;cd `ls -t | head -n 1`/Documents;&quot;
set command4 to &quot;open .&quot;
do shell script command1 &amp; command2 &amp; command3 &amp; command4
end myOpenDocument</code></pre><p>This feature helped me a lot when developing <a href="https://github.com/hyperoslo/Gallery">Gallery</a> to check whether videos and downloaded images are saved in the correct place.</p>
<p>However, none of the scripts seem to work. Scripting has always been part of macOS since 1993. But, with the advent of the Mac Appstore and security concerns, AppleScript finally got restricted in mid 2012. That was when App Sandbox was enforced.</p>
<h3 id="App-Sandbox"><a href="#App-Sandbox" class="headerlink" title="App Sandbox"></a>App Sandbox</h3><p>App Sandbox is an access control technology provided in macOS, enforced at the kernel level. It is designed to contain damage to the system and the user’s data if an app becomes compromised. Apps distributed through the Mac App Store must adopt <a href="https://www.objc.io/issues/14-mac/sandbox-scripting/">App Sandbox</a>.</p>
<p><img src="https://cdn-images-1.medium.com/max/2000/0*3rbc5Xua7YWg4ouW.png" alt=""></p>
<p>For an Xcode extension to be loaded by Xcode, it must also support App Sandbox.</p>
<p><img src="https://cdn-images-1.medium.com/max/5588/1*aZe8ZgEI-KLIDb1vXgVKtw.png" alt=""></p>
<p>At the beginning of App Sandbox enforcement, we could use <a href="https://developer.apple.com/library/archive/documentation/Miscellaneous/Reference/EntitlementKeyReference/Chapters/AppSandboxTemporaryExceptionEntitlements.html">App Sandbox Temporary Exception</a> to temporarily grant our app access to Apple Script.</p>
<p>This is now not possible.</p>
<p>The only way for AppleScript to run is if it resides inside ~/Library/Application Scripts folder.</p>
<p><img src="https://cdn-images-1.medium.com/max/3956/1*_MnW2BezYsDlw7x6eQifQg.png" alt=""></p>
<h3 id="How-to-install-custom-scripts"><a href="#How-to-install-custom-scripts" class="headerlink" title="How to install custom scripts"></a>How to install custom scripts</h3><p>macOS apps or extensions can’t just install scripts into the Application Scripts by themselves. They need user consent.</p>
<p>One possible way to do that is to enable Read/Write and show a dialog using NSOpenPanel to ask user to select the folder to install our scripts.</p>
<p><img src="https://cdn-images-1.medium.com/max/3506/1*gpuztyyB9Z3-XDWOnHgn0w.png" alt=""></p>
<p>For XcodeWay, I choose to provide an <a href="https://github.com/onmyway133/XcodeWay/blob/master/install.sh">install shell script </a>so the user has a quick way to install scripts.</p>
<pre><code>#!/bin/bash

set -euo pipefail

DOWNLOAD_URL=[https://raw.githubusercontent.com/onmyway133/XcodeWay/master/XcodeWayExtensions/Script/XcodeWayScript.scpt](https://raw.githubusercontent.com/onmyway133/XcodeWay/master/XcodeWayExtensions/Script/XcodeWayScript.scpt)
SCRIPT_DIR=&quot;${HOME}/Library/Application Scripts/com.fantageek.XcodeWayApp.XcodeWayExtensions&quot;

mkdir -p &quot;${SCRIPT_DIR}&quot;
curl $DOWNLOAD_URL -o &quot;${SCRIPT_DIR}/XcodeWayScript.scpt&quot;</code></pre><p>AppleScript is very powerful. All of this is made explicit so the user has complete control over which things can be done.</p>
<p>Like an extension, a script is done asynchronously in a different process using <a href="https://www.objc.io/issues/14-mac/xpc/">XPC</a> for inter process communication. This enhances security as a script has no access to the address space to our app or extension.</p>
<h2 id="More-security-in-macOS-Mojave"><a href="#More-security-in-macOS-Mojave" class="headerlink" title="More security in macOS Mojave"></a>More security in macOS Mojave</h2><p>This year, at WWDC 2018, Apple introduced macOS Mojave which focuses on lots of security enhancements. In the <a href="https://developer.apple.com/videos/play/wwdc2018/702/">Your Apps and the Future of macOS Security</a> we can learn more about new security requirement for macOS apps. One of them is the usage description for AppleEvents.</p>
<blockquote>
<h1 id="unable-to-load-info-plist-exceptions-egpu-overrides"><a href="#unable-to-load-info-plist-exceptions-egpu-overrides" class="headerlink" title="unable to load info.plist exceptions (egpu overrides)"></a>unable to load info.plist exceptions (egpu overrides)</h1></blockquote>
<p>We used to declare usage description for many permissions in iOS, like photo library, camera, and push notifications. Now we need to declare the usage description for AppleEvents.</p>
<p><img src="https://cdn-images-1.medium.com/max/2000/0*EQW2d3wyAnC1WSui.jpg" alt="Source: [https://www.felix-schwarz.org/blog/2018/08/new-apple-event-apis-in-macos-mojave](https://www.felix-schwarz.org/blog/2018/08/new-apple-event-apis-in-macos-mojave)"><em>Source: <a href="https://www.felix-schwarz.org/blog/2018/08/new-apple-event-apis-in-macos-mojave">https://www.felix-schwarz.org/blog/2018/08/new-apple-event-apis-in-macos-mojave</a></em></p>
<p>The first time our extension tries to execute some AppleScript commands, the above dialog is shown to ask for user consent. User can grant or deny permission, but for Xcode please say yes 🙏</p>
<p>The fix for us is to declare NSAppleEventsUsageDescription in our app target. We only need to declare in the app target, not in the extension target.</p>
<pre><code>&lt;key&gt;NSAppleEventsUsageDescription&lt;/key&gt;
&lt;string&gt;Use AppleScript to open folders&lt;/string&gt;</code></pre><h2 id="Where-to-go-from-here"><a href="#Where-to-go-from-here" class="headerlink" title="Where to go from here"></a>Where to go from here</h2><p>Huff huff, whew! Thanks for following such a long journey. Making frameworks and tools take lots of time, especially plugins and extensions — we have to continuously change to adapt them to new operating systems and security requirements. But it is a rewarding process, as we’ve learned more and have some tools to save our precious time.</p>
<p>For your reference, here are my extensions which are fully open source.</p>
<ul>
<li><a href="https://github.com/onmyway133/XcodeWay">XcodeWay</a></li>
<li><a href="https://github.com/onmyway133/XcodeColorSense2">XcodeColorSense2</a></li>
</ul>
<p>I hope you find something useful in the post. Here are some resources to help explore Xcode extensions further:</p>
<ul>
<li><a href="https://nshipster.com/xcode-plugins/">Xcode Plugins by NSHipster</a></li>
<li><a href="http://merowing.info/2015/12/writing-xcode-plugin-in-swift/">Writing Xcode plugin in Swift</a></li>
<li><a href="https://medium.com/rocknnull/xcode-8-plugins-alcatraz-the-end-of-an-era-ea6e63617d14">Xcode 8 Plugins (Alcatraz) — The end of an era</a></li>
<li><a href="https://developer.apple.com/videos/play/wwdc2016/414/">Using and Extending the Xcode Source Editor</a></li>
<li><a href="https://github.com/XVimProject/XVim2/blob/master/why_resign_xcode.md">Why do I need to resign Xcode to use XVim2</a></li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-05-23T16:06:58.000Z" title="2019-05-23T16:06:58.000Z">2019-05-23</time><span class="level-item">8 minutes read (About 1219 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/Get-to-know-different-JavaScript-environments-in-React-Native/">Get to know different JavaScript environments in React Native</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/266">#266</a></strong></p>
<p>Original post <a href="https://medium.freecodecamp.org/get-to-know-different-javascript-environments-in-react-native-4951c15d61f5">https://medium.freecodecamp.org/get-to-know-different-javascript-environments-in-react-native-4951c15d61f5</a></p>
<hr>
<p>React Native can be very easy to <a href="https://facebook.github.io/react-native/docs/getting-started.html">get started</a> with, and then at some point problems occur and we need to dive deep into it.</p>
<p>The other day we had a strange bug that was only occurring in production build, and in iOS only. A long backtrace in the app revealed that it was due to Date constructor failure.</p>
<pre><code>const date = new Date(&quot;2019-01-18 12:00:00&quot;)</code></pre><p>This returns the correct Date object in debug mode, but yields Invalid Date in release. What’s special about Date constructor? Here I’m using react native 0.57.5 and no Date libraries.</p>
<h2 id="Date-constructor"><a href="#Date-constructor" class="headerlink" title="Date constructor"></a>Date constructor</h2><p>The best resource for learning Javascript is via Mozilla web docs, and entering <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date">Date</a>:</p>
<blockquote>
<p>Creates a JavaScript <strong>Date</strong> instance that represents a single moment in time. Date objects use a <a href="http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap04.html#tag_04_16">Unix Time Stamp</a>, an integer value that is the number of milliseconds since 1 January 1970 UTC.</p>
</blockquote>
<p>Pay attention to how Date can be constructed by dateString:</p>
<blockquote>
<p>dateStringString value representing a date. The string should be in a format recognized by the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/parse">Date.parse()</a> method (<a href="http://tools.ietf.org/html/rfc2822#page-14">IETF-compliant RFC 2822 timestamps</a> and also a <a href="http://www.ecma-international.org/ecma-262/5.1/#sec-15.9.1.15">version of ISO8601</a>).</p>
</blockquote>
<p>So Date constructor uses static method Date.parse under the hood. This has very specific requirement about the format of date string that it supports</p>
<blockquote>
<p>The standard string representation of a date time string is a simplification of the ISO 8601 calendar date extended format (see <a href="https://tc39.github.io/ecma262/#sec-date-time-string-format">Date Time String Format</a> section in the ECMAScript specification for more details). For example, “2011-10-10” (date-only form), “2011-10-10T14:48:00” (date-time form), or “2011-10-10T14:48:00.000+09:00” (date-time form with milliseconds and time zone) can be passed and will be parsed. When the time zone offset is absent, date-only forms are interpreted as a UTC time and date-time forms are interpreted as local time.<br>The ECMAScript specification states: If the String does not conform to the standard format the function may fall back to any implementation–specific heuristics or implementation–specific parsing algorithm. Unrecognizable strings or dates containing illegal element values in ISO formatted strings shall cause Date.parse() to return <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/NaN">NaN</a>.</p>
</blockquote>
<p>The reason that we get Invalid Date in iOS must be because the code was run in two different JavaScript environments and they somehow have different implementation of the Date parsing function.</p>
<h2 id="JavaScript-Environment"><a href="#JavaScript-Environment" class="headerlink" title="JavaScript Environment"></a>JavaScript Environment</h2><p>React Native guide has a dedicated section about <a href="https://facebook.github.io/react-native/docs/javascript-environment">JavaScript environments</a>.</p>
<p>When using React Native, you’re going to be running your JavaScript code in two environments:</p>
<ul>
<li><p>In most cases, React Native will use <a href="http://trac.webkit.org/wiki/JavaScriptCore">JavaScriptCore</a>, the JavaScript engine that powers Safari. Note that on iOS, JavaScriptCore does not use JIT due to the absence of writable executable memory in iOS apps.</p>
</li>
<li><p>When using Chrome debugging, all JavaScript code runs within Chrome itself, communicating with native code via WebSockets. Chrome uses <a href="https://code.google.com/p/v8/">V8</a> as its JavaScript engine.</p>
</li>
</ul>
<p>While both environments are very similar, you may end up hitting some inconsistencies. We’re likely going to experiment with other JavaScript engines in the future, so it’s best to avoid relying on specifics of any runtime.</p>
<p>React Native also uses Babel and some polyfills to have some nice syntax transformers, so some of the code that we write may not be necessarily supported natively by JavascriptCore.</p>
<p>Now it is clear that while we debug our app via Chrome debugger, it works because V8 engine handles that. Now try turning off Remote JS Debugging: we can see that the above Date constructor fails, which means it is using JavascriptCore.</p>
<p><img src="https://cdn-images-1.medium.com/max/2000/1*zICMkdSSmUkcPTDNnkCA7Q.png" alt=""></p>
<p>To confirm this issue, let’s run our app in Xcode and go to the Safari app on MacOS to enter Development menu. Select the active Simulator and choose JSContext on the current iOS app. Remember to turn off Remote JS Debugging so that the app uses JavascriptCore:</p>
<p><img src="https://cdn-images-1.medium.com/max/6720/1*TPzyCz-z45fbzYSaJ3dQGA.png" alt=""></p>
<p>Now open the Console in Safari dev tools, and we should have access to JavascriptCore inside our app. Try running the above Date constructor to confirm that it fails:</p>
<p><img src="https://cdn-images-1.medium.com/max/4448/1*gqswNAR8vpqHrzBiZKeqcg.png" alt=""></p>
<h2 id="What-are-legit-date-string-formats"><a href="#What-are-legit-date-string-formats" class="headerlink" title="What are legit date string formats?"></a>What are legit date string formats?</h2><p>Since 2016, <a href="https://webkit.org/blog/6756/es6-feature-complete/">JavascriptCore</a> supports most ES6 features:</p>
<blockquote>
<p>As of <a href="https://trac.webkit.org/changeset/202125">r202125</a>, JavaScriptCore supports all of the new features in the <a href="https://tc39.github.io/ecma262/#sec-integerindexedelementget">ECMAScript 6 (ES6) language specification</a></p>
</blockquote>
<p>And it was fully confirmed a year later in <a href="https://webkit.org/blog/7536/jsc-loves-es6/">JSC 💕 ES6</a></p>
<blockquote>
<p><a href="http://www.ecma-international.org/ecma-262/6.0/">ES2015</a> (also known as ES6), the version of the JavaScript specification ratified in 2015, is a huge improvement to the language’s expressive power thanks to features like <a href="http://www.2ality.com/2015/02/es6-classes-final.html">classes</a>, <a href="https://hacks.mozilla.org/2015/04/es6-in-depth-iterators-and-the-for-of-loop/">for-of</a>, <a href="http://www.2ality.com/2015/01/es6-destructuring.html">destructuring</a>, <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_operator">spread</a>, <a href="http://www.2ality.com/2015/06/tail-call-optimization.html">tail calls</a>, and <a href="http://kangax.github.io/compat-table/es6/">much more</a><br>WebKit’s JavaScript implementation, called JSC (JavaScriptCore), <a href="https://webkit.org/blog/6756/es6-feature-complete/">implements all of ES6</a></p>
</blockquote>
<p>For more details about JavaScript features supported by different JavaScript engines, visit this <a href="https://kangax.github.io/compat-table/es6/">ECMAScript comparison table</a>.</p>
<p>Now for the date string format, from <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/parse">Date.parse</a>, let’s visit ECMAScript 2015 specification to see what it says about <a href="https://www.ecma-international.org/ecma-262/6.0/#sec-date-time-string-format">date string format</a>:</p>
<p><img src="https://cdn-images-1.medium.com/max/4444/1*A8iKd3HZyq9ZmaH0ilm-AA.png" alt=""></p>
<p>ECMAScript defines a string interchange format for date-times based upon a simplification of the ISO 8601 Extended Format. The format is as follows: <strong>YYYY-MM-DDTHH:mm:ss.sss<em>Z</em></strong></p>
<p>Where the fields are as follows:</p>
<p><strong>“T”</strong> appears literally in the string, to indicate the beginning of the time element.</p>
<p>So JavascriptCore requires T specifier and V8 can work without it. The fix for now is to always include that T specifier. This way we always follow ECMAScript standards to make sure it works across different JavaScript environments.</p>
<pre><code>const date = new Date(&quot;2019-01-18 12:00:00&quot;.replace(&apos; &apos;, &apos;T&apos;))</code></pre><p>And now it returns correct Date object. There may be difference between JavascriptCore on iOS and macOS, and among different iOS versions. The lesson learned here is that we should always test our app thoroughly in production and on devices to make sure it works as expected.</p>
</div></article></div><nav class="pagination is-centered mt-4" role="navigation" aria-label="pagination"><div class="pagination-previous"><a href="/page/15/">Previous</a></div><div class="pagination-next"><a href="/page/17/">Next</a></div><ul class="pagination-list is-hidden-mobile"><li><a class="pagination-link" href="/">1</a></li><li><span class="pagination-ellipsis">&hellip;</span></li><li><a class="pagination-link" href="/page/15/">15</a></li><li><a class="pagination-link is-current" href="/page/16/">16</a></li><li><a class="pagination-link" href="/page/17/">17</a></li><li><span class="pagination-ellipsis">&hellip;</span></li><li><a class="pagination-link" href="/page/24/">24</a></li></ul></nav></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1"><div class="card widget"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="" src="https://avatars1.githubusercontent.com/u/2284279?s=460&amp;v=4" alt="onmyway133"></figure><p class="title is-size-4 is-block line-height-inherit">onmyway133</p><p class="is-size-6 is-block">iOS, macOS, Android, React. Serial maker. Writer. Speaker.</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Oslo, Norway</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Posts</p><a href="/archives"><p class="title">709</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Categories</p><a href="/categories"><p class="title">0</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Tags</p><a href="/tags"><p class="title">54</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/onmyway133" target="_blank" rel="noopener">Follow</a></div><div class="level is-mobile"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/onmyway133"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Twitter" href="https://twitter.com/onmyway133"><i class="fab fa-twitter"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Dribbble" href="https://dribbble.com"><i class="fab fa-dribbble"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/"><i class="fas fa-rss"></i></a></div></div></div><!--!--><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">Links</h3><ul class="menu-list"><li><a class="level is-mobile is-mobile" href="https://onmyway133.com/apps" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Apps</span></span><span class="level-right"><span class="level-item tag">onmyway133.com</span></span></a></li><li><a class="level is-mobile is-mobile" href="https://learntalks.com" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Learn Talks</span></span><span class="level-right"><span class="level-item tag">learntalks.com</span></span></a></li><li><a class="level is-mobile is-mobile" href="https://wwdctogether.com" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">WWDC Together</span></span><span class="level-right"><span class="level-item tag">wwdctogether.com</span></span></a></li></ul></div></div></div><!--!--><div class="card widget"><div class="card-content"><h3 class="menu-label">Recent</h3><article class="media"><div class="media-content size-small"><p><time dateTime="2021-01-26T05:33:34.000Z">2021-01-26</time></p><p class="title is-6"><a class="link-muted" href="/blog/How-to-use-Sparkle-for-macOS-app/">How to use Sparkle for macOS app</a></p><p class="is-uppercase"></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2021-01-21T12:31:00.000Z">2021-01-21</time></p><p class="title is-6"><a class="link-muted" href="/blog/How-to-use-ScrollViewReader-in-SwiftUI/">How to use ScrollViewReader in SwiftUI</a></p><p class="is-uppercase"></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2021-01-21T12:03:16.000Z">2021-01-21</time></p><p class="title is-6"><a class="link-muted" href="/blog/How-to-handle-keyDown-in-NSResponder/">How to handle keyDown in NSResponder</a></p><p class="is-uppercase"></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2021-01-21T11:22:33.000Z">2021-01-21</time></p><p class="title is-6"><a class="link-muted" href="/blog/How-to-use-built-in-NSImage-in-macos/">How to use built in NSImage in macos</a></p><p class="is-uppercase"></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2021-01-21T11:12:50.000Z">2021-01-21</time></p><p class="title is-6"><a class="link-muted" href="/blog/How-to-handle-NSSearchToolbarItem-in-macOS-11/">How to handle NSSearchToolbarItem in macOS 11</a></p><p class="is-uppercase"></p></div></article></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">Archives</h3><ul class="menu-list"><li><a class="level is-mobile is-marginless" href="/archives/2021/01/"><span class="level-start"><span class="level-item">January 2021</span></span><span class="level-end"><span class="level-item tag">29</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/12/"><span class="level-start"><span class="level-item">December 2020</span></span><span class="level-end"><span class="level-item tag">29</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/11/"><span class="level-start"><span class="level-item">November 2020</span></span><span class="level-end"><span class="level-item tag">15</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/10/"><span class="level-start"><span class="level-item">October 2020</span></span><span class="level-end"><span class="level-item tag">11</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/09/"><span class="level-start"><span class="level-item">September 2020</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/08/"><span class="level-start"><span class="level-item">August 2020</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/06/"><span class="level-start"><span class="level-item">June 2020</span></span><span class="level-end"><span class="level-item tag">14</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/05/"><span class="level-start"><span class="level-item">May 2020</span></span><span class="level-end"><span class="level-item tag">11</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/04/"><span class="level-start"><span class="level-item">April 2020</span></span><span class="level-end"><span class="level-item tag">13</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/03/"><span class="level-start"><span class="level-item">March 2020</span></span><span class="level-end"><span class="level-item tag">21</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/02/"><span class="level-start"><span class="level-item">February 2020</span></span><span class="level-end"><span class="level-item tag">20</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/01/"><span class="level-start"><span class="level-item">January 2020</span></span><span class="level-end"><span class="level-item tag">30</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2019/12/"><span class="level-start"><span class="level-item">December 2019</span></span><span class="level-end"><span class="level-item tag">36</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2019/11/"><span class="level-start"><span class="level-item">November 2019</span></span><span class="level-end"><span class="level-item tag">38</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2019/10/"><span class="level-start"><span class="level-item">October 2019</span></span><span class="level-end"><span class="level-item tag">49</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2019/09/"><span class="level-start"><span class="level-item">September 2019</span></span><span class="level-end"><span class="level-item tag">50</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2019/08/"><span class="level-start"><span class="level-item">August 2019</span></span><span class="level-end"><span class="level-item tag">39</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2019/07/"><span class="level-start"><span class="level-item">July 2019</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2019/06/"><span class="level-start"><span class="level-item">June 2019</span></span><span class="level-end"><span class="level-item tag">41</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2019/05/"><span class="level-start"><span class="level-item">May 2019</span></span><span class="level-end"><span class="level-item tag">50</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2019/04/"><span class="level-start"><span class="level-item">April 2019</span></span><span class="level-end"><span class="level-item tag">27</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2019/03/"><span class="level-start"><span class="level-item">March 2019</span></span><span class="level-end"><span class="level-item tag">24</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2019/02/"><span class="level-start"><span class="level-item">February 2019</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2018/12/"><span class="level-start"><span class="level-item">December 2018</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2018/05/"><span class="level-start"><span class="level-item">May 2018</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2018/04/"><span class="level-start"><span class="level-item">April 2018</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2018/02/"><span class="level-start"><span class="level-item">February 2018</span></span><span class="level-end"><span class="level-item tag">9</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2018/01/"><span class="level-start"><span class="level-item">January 2018</span></span><span class="level-end"><span class="level-item tag">14</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2017/12/"><span class="level-start"><span class="level-item">December 2017</span></span><span class="level-end"><span class="level-item tag">14</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2017/11/"><span class="level-start"><span class="level-item">November 2017</span></span><span class="level-end"><span class="level-item tag">12</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2017/10/"><span class="level-start"><span class="level-item">October 2017</span></span><span class="level-end"><span class="level-item tag">18</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2017/09/"><span class="level-start"><span class="level-item">September 2017</span></span><span class="level-end"><span class="level-item tag">10</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2017/08/"><span class="level-start"><span class="level-item">August 2017</span></span><span class="level-end"><span class="level-item tag">9</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2017/07/"><span class="level-start"><span class="level-item">July 2017</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2017/06/"><span class="level-start"><span class="level-item">June 2017</span></span><span class="level-end"><span class="level-item tag">12</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2017/05/"><span class="level-start"><span class="level-item">May 2017</span></span><span class="level-end"><span class="level-item tag">35</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2017/04/"><span class="level-start"><span class="level-item">April 2017</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">Tags</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/algorithm/"><span class="tag">algorithm</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/android/"><span class="tag">android</span><span class="tag is-grey-lightest">34</span></a></div><div class="control"><a class="tags has-addons" href="/tags/apple-script/"><span class="tag">apple script</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/catalyst/"><span class="tag">catalyst</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ci/"><span class="tag">ci</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/cloud/"><span class="tag">cloud</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/cocoapods/"><span class="tag">cocoapods</span><span class="tag is-grey-lightest">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/combine/"><span class="tag">combine</span><span class="tag is-grey-lightest">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/core-data/"><span class="tag">core data</span><span class="tag is-grey-lightest">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/csharp/"><span class="tag">csharp</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/css/"><span class="tag">css</span><span class="tag is-grey-lightest">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/dart/"><span class="tag">dart</span><span class="tag is-grey-lightest">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/database/"><span class="tag">database</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/design/"><span class="tag">design</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/electron/"><span class="tag">electron</span><span class="tag is-grey-lightest">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/featured/"><span class="tag">featured</span><span class="tag is-grey-lightest">8</span></a></div><div class="control"><a class="tags has-addons" href="/tags/firebase/"><span class="tag">firebase</span><span class="tag is-grey-lightest">7</span></a></div><div class="control"><a class="tags has-addons" href="/tags/flutter/"><span class="tag">flutter</span><span class="tag is-grey-lightest">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/git/"><span class="tag">git</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/github/"><span class="tag">github</span><span class="tag is-grey-lightest">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/go/"><span class="tag">go</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/google/"><span class="tag">google</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/iOS/"><span class="tag">iOS</span><span class="tag is-grey-lightest">171</span></a></div><div class="control"><a class="tags has-addons" href="/tags/javascript/"><span class="tag">javascript</span><span class="tag is-grey-lightest">51</span></a></div><div class="control"><a class="tags has-addons" href="/tags/kotlin/"><span class="tag">kotlin</span><span class="tag is-grey-lightest">27</span></a></div><div class="control"><a class="tags has-addons" href="/tags/layout/"><span class="tag">layout</span><span class="tag is-grey-lightest">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/life/"><span class="tag">life</span><span class="tag is-grey-lightest">14</span></a></div><div class="control"><a class="tags has-addons" href="/tags/links/"><span class="tag">links</span><span class="tag is-grey-lightest">9</span></a></div><div class="control"><a class="tags has-addons" href="/tags/macOS/"><span class="tag">macOS</span><span class="tag is-grey-lightest">130</span></a></div><div class="control"><a class="tags has-addons" href="/tags/machine-learning/"><span class="tag">machine learning</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/maps/"><span class="tag">maps</span><span class="tag is-grey-lightest">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/networking/"><span class="tag">networking</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/node/"><span class="tag">node</span><span class="tag is-grey-lightest">13</span></a></div><div class="control"><a class="tags has-addons" href="/tags/objc/"><span class="tag">objc</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/react/"><span class="tag">react</span><span class="tag is-grey-lightest">24</span></a></div><div class="control"><a class="tags has-addons" href="/tags/react-native/"><span class="tag">react native</span><span class="tag is-grey-lightest">14</span></a></div><div class="control"><a class="tags has-addons" href="/tags/realm/"><span class="tag">realm</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/rx/"><span class="tag">rx</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/script/"><span class="tag">script</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/spm/"><span class="tag">spm</span><span class="tag is-grey-lightest">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/swift/"><span class="tag">swift</span><span class="tag is-grey-lightest">343</span></a></div><div class="control"><a class="tags has-addons" href="/tags/swiftUI/"><span class="tag">swiftUI</span><span class="tag is-grey-lightest">88</span></a></div><div class="control"><a class="tags has-addons" href="/tags/tech/"><span class="tag">tech</span><span class="tag is-grey-lightest">14</span></a></div><div class="control"><a class="tags has-addons" href="/tags/terminal/"><span class="tag">terminal</span><span class="tag is-grey-lightest">9</span></a></div><div class="control"><a class="tags has-addons" href="/tags/testing/"><span class="tag">testing</span><span class="tag is-grey-lightest">17</span></a></div><div class="control"><a class="tags has-addons" href="/tags/tool/"><span class="tag">tool</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/tweet/"><span class="tag">tweet</span><span class="tag is-grey-lightest">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/unity/"><span class="tag">unity</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/voip/"><span class="tag">voip</span><span class="tag is-grey-lightest">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/watchOS/"><span class="tag">watchOS</span><span class="tag is-grey-lightest">11</span></a></div><div class="control"><a class="tags has-addons" href="/tags/web/"><span class="tag">web</span><span class="tag is-grey-lightest">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/work/"><span class="tag">work</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/wwdc/"><span class="tag">wwdc</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/xcode/"><span class="tag">xcode</span><span class="tag is-grey-lightest">24</span></a></div></div></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">Subscribe to Updates</h3><form action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open(&#039;https://feedburner.google.com/fb/a/mailverify?uri=c2r59mmt2n5k0o5dt5vv3nq4u4&#039;,&#039;popupwindow&#039;,&#039;scrollbars=yes,width=550,height=520&#039;);return true"><input type="hidden" value="c2r59mmt2n5k0o5dt5vv3nq4u4" name="uri"><input type="hidden" name="loc" value="en_US"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button is-primary" type="submit" value="Subscribe"></div></div></form></div></div></div><div class="card widget"><div class="card-content"><div class="notification is-danger">You need to set <code>client_id</code> and <code>slot_id</code> to show this AD unit. Please set it in <code>_config.yml</code>.</div></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/z.png" alt="onmyway133" height="28"></a><p class="size-small"><span>&copy; 2021 Khoa Pham</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/onmyway133"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            site: {
                url: 'https://onmyway133.github.io',
                external_link: {"enable":true,"exclude":[]}
            },
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to Top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>