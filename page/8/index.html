<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="generator" content="Hexo 4.2.0"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>onmyway133</title><meta description="What you don&amp;#39;t know is what you haven&amp;#39;t learned"><meta property="og:type" content="blog"><meta property="og:title" content="onmyway133"><meta property="og:url" content="https://onmyway133.github.io/"><meta property="og:site_name" content="onmyway133"><meta property="og:description" content="What you don&amp;#39;t know is what you haven&amp;#39;t learned"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://onmyway133.github.io/img/og_image.png"><meta property="article:author" content="Khoa Pham"><meta property="article:tag" content="ios"><meta property="article:tag" content=" android"><meta property="article:tag" content="javascript"><meta property="article:tag" content=" react"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/img/og_image.png"><meta property="twitter:creator" content="@onmyway133"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://onmyway133.github.io"},"headline":"onmyway133","image":["https://onmyway133.github.io/img/og_image.png"],"author":{"@type":"Person","name":"Khoa Pham"},"description":"What you don&#39;t know is what you haven&#39;t learned"}</script><link rel="alternative" href="/atom.xml" title="onmyway133" type="application/atom+xml"><link rel="icon" href="/img/favicon.ico"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><script src="https://www.googletagmanager.com/gtag/js?id=UA-40119591-5" async></script><script>window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
    
        gtag('config', 'UA-40119591-5');</script><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><script data-ad-client="ca-pub-3656459401405265" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js" async></script></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/z.png" alt="onmyway133" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/apps">Apps</a><a class="navbar-item" href="/gumroad">Gumroad</a><a class="navbar-item" href="/about">About</a><a class="navbar-item" href="/opensource">Open Source</a><a class="navbar-item" href="/writing">Writing</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/speaking">Speaking</a><a class="navbar-item" href="/news">News</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/onmyway133"><i class="fab fa-github"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2020-01-10T07:35:12.000Z" title="2020-01-10T07:35:12.000Z">2020-01-10</time><span class="level-item">a few seconds read (About 29 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-expression-cast-type-in-lldb-in-Swit/">How to expression cast type in lldb in Swit</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/574">#574</a></strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">expr -l Swift -- import UIKit</span><br><span class="line">expr -l Swift -- let $collectionView &#x3D; unsafeBitCast(0x7fddd8180000, to: UICollectionView.self)</span><br><span class="line">expr -l Swift -- $collectionView.safeAreaInsets</span><br></pre></td></tr></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2020-01-08T21:34:46.000Z" title="2020-01-08T21:34:46.000Z">2020-01-08</time><span class="level-item">a few seconds read (About 22 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-use-Applications-folder-in-macOS/">How to use Applications folder in macOS</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/573">#573</a></strong></p>
<p>There are 2 Applications folder</p>
<ul>
<li>/System/Applications: contains Notes, Books, Calculator, …</li>
<li>/Applications: contains Safari, Xcode, Keynote, …</li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2020-01-08T20:49:17.000Z" title="2020-01-08T20:49:17.000Z">2020-01-08</time><span class="level-item">a few seconds read (About 68 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-fix-library-not-found-with-SPM-and-CocoaPods-in-Xcode/">How to fix library not found with SPM and CocoaPods in  Xcode</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/572">#572</a></strong></p>
<p>After migrating a few pods to use SPM, some libraries fail to load. This is because the workspace now uses both SPM and cocoapods</p>
<blockquote>
<p>code signature in … not valid for use in process using Library Validation: mapped file has no Team ID and is not a platform binary (signed with custom identity or adhoc?)</p>
</blockquote>
<p>The workaround is to disable Library validation</p>
<img width="888" alt="Screenshot 2020-01-08 at 22 48 28" src="https://user-images.githubusercontent.com/2284279/72018966-fe244980-3268-11ea-8d60-5c3e49d39299.png">
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2020-01-06T14:12:19.000Z" title="2020-01-06T14:12:19.000Z">2020-01-06</time><span class="level-item">a few seconds read (About 14 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-make-rotation-in-same-direction-in-iOS/">How to make rotation in same direction in iOS</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/571">#571</a></strong></p>
<p>From <code>CGFloat.pi / 2</code> to <code>-CGFloat.pi / 2 + epsilon</code></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2020-01-06T12:30:09.000Z" title="2020-01-06T12:30:09.000Z">2020-01-06</time><span class="level-item">3 minutes read (About 431 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-get-updated-safeAreaInsets-in-iOS/">How to get updated safeAreaInsets in iOS</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/570">#570</a></strong></p>
<h1 id="Use-viewSafeArea"><a href="#Use-viewSafeArea" class="headerlink" title="Use viewSafeArea"></a>Use viewSafeArea</h1><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@available</span>(iOS <span class="number">11.0</span>, *)</span><br><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewSafeAreaInsetsDidChange</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">super</span>.viewSafeAreaInsetsDidChange()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">self</span>.collectionView.reloadData()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Use <a href="https://developer.apple.com/documentation/uikit/uiview/2891102-safearealayoutguide">https://developer.apple.com/documentation/uikit/uiview/2891102-safearealayoutguide</a></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">view.safeAreaLayoutGuide.layoutFrame</span><br></pre></td></tr></table></figure>

<p><a href="https://developer.apple.com/documentation/uikit/uiview/2891103-safeareainsets">https://developer.apple.com/documentation/uikit/uiview/2891103-safeareainsets</a></p>
<blockquote>
<p>For the view controller’s root view, the insets account for the status bar, other visible bars, and any additional insets that you specified using the additionalSafeAreaInsets property of your view controller. For other views in the view hierarchy, the insets reflect only the portion of the view that is covered. For example, if a view is entirely within the safe area of its superview, the edge insets in this property are 0.</p>
</blockquote>
<p>Use UICollectionView.contentInsetAdjustmentBehavior</p>
<h2 id="Nested-view"><a href="#Nested-view" class="headerlink" title="Nested view"></a>Nested view</h2><p>For UICollectionView inside Cell inside UICollectionView, its insets is 0, but its parent parent is correct, which is the original cell</p>
<p>UICollectionView -&gt; Cell -&gt; ContentView -&gt; UICollectionView</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">collectionView.superview?.superview?.safeAreaInsets</span><br></pre></td></tr></table></figure>

<p>viewWillAppear: safeAreaInsets is not set to collectionView<br>viewDidAppear: safeAreaInsets is set to collectionView and cells, but not to nested collectionView</p>
<p>In <code>viewSafeAreaInsetsDidChange</code>, invalidate outer and nested <code>collectionViewLayout</code></p>
<h2 id="Use-extendedLayoutIncludesOpaqueBars"><a href="#Use-extendedLayoutIncludesOpaqueBars" class="headerlink" title="Use extendedLayoutIncludesOpaqueBars"></a>Use extendedLayoutIncludesOpaqueBars</h2><p><a href="https://developer.apple.com/documentation/uikit/uiviewcontroller/1621404-extendedlayoutincludesopaquebars">https://developer.apple.com/documentation/uikit/uiviewcontroller/1621404-extendedlayoutincludesopaquebars</a></p>
<blockquote>
<p>A Boolean value indicating whether or not the extended layout includes opaque bars.</p>
</blockquote>
<p>Seems to affect left and right insets</p>
<ul>
<li><a href="https://stackoverflow.com/questions/18798792/explaining-difference-between-automaticallyadjustsscrollviewinsets-extendedlayo">https://stackoverflow.com/questions/18798792/explaining-difference-between-automaticallyadjustsscrollviewinsets-extendedlayo</a></li>
<li><a href="https://medium.com/@wailord/extended-layout-in-ios-pre-ios-11-5eff2debf28">https://medium.com/@wailord/extended-layout-in-ios-pre-ios-11-5eff2debf28</a></li>
</ul>
<h2 id="Seemingly-related-to-UIPresentationController"><a href="#Seemingly-related-to-UIPresentationController" class="headerlink" title="Seemingly related to UIPresentationController"></a>Seemingly related to UIPresentationController</h2><p>But it’s not, it is because of when safeAreaInsets is available, and how it is passed to nested view</p>
<p>When invalidating collection view layout with custom <code>UIPresentationController</code>, <code>alongsideTransition</code> is called twice, the first time with old <code>safeAreaInsets</code>, and the second time with latest <code>safeAreaInsets</code></p>
<p>And the layout invalidation uses the old insets.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewWillTransition</span><span class="params">(to size: CGSize, with coordinator: UIViewControllerTransitionCoordinator)</span></span> &#123;</span><br><span class="line">    <span class="keyword">super</span>.viewWillTransition(to: size, with: coordinator)</span><br><span class="line">    coordinator.animate(alongsideTransition: &#123; <span class="number">_</span> <span class="keyword">in</span></span><br><span class="line">        <span class="keyword">self</span>.collectionViewLayout.invalidateLayout()</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Dispatch</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// UIViewController subclass</span></span><br><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewWillTransition</span><span class="params">(to size: CGSize, with coordinator: UIViewControllerTransitionCoordinator)</span></span> &#123;</span><br><span class="line">    <span class="keyword">super</span>.viewWillTransition(to: size, with: coordinator)</span><br><span class="line">    coordinator.animate(alongsideTransition: &#123; <span class="number">_</span> <span class="keyword">in</span></span><br><span class="line">        <span class="type">DispatchQueue</span>.main.async &#123;</span><br><span class="line">            <span class="keyword">self</span>.collectionViewLayout.invalidateLayout()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Call layoutIfNeeded</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// UIPresentationController subclass</span></span><br><span class="line"><span class="keyword">override</span> <span class="keyword">var</span> frameOfPresentedViewInContainerView: <span class="type">CGRect</span> &#123;</span><br><span class="line">    <span class="keyword">guard</span> <span class="keyword">let</span> containerView = containerView <span class="keyword">else</span> &#123; <span class="keyword">return</span> .zero &#125;</span><br><span class="line">    </span><br><span class="line">    presentedView?.setNeedsLayout()</span><br><span class="line">    presentedView?.layoutIfNeeded()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> ...</span><br></pre></td></tr></table></figure>

<h2 id="Check"><a href="#Check" class="headerlink" title="Check"></a>Check</h2><p>Check that UICollectionView or the view you’re working on is in view hierarchy</p>
<ul>
<li><a href="https://stackoverflow.com/questions/46271186/safe-area-not-work-properly-on-iphone-x-when-subviews-are-not-in-the-view-area">https://stackoverflow.com/questions/46271186/safe-area-not-work-properly-on-iphone-x-when-subviews-are-not-in-the-view-area</a></li>
</ul>
<p>Check that you’re using code in viewDidLayoutSubviews when safeAreaInsets is known</p>
<h2 id="Read-more"><a href="#Read-more" class="headerlink" title="Read more"></a>Read more</h2><ul>
<li><a href="https://www.appcoda.com/presentation-controllers-tutorial/">https://www.appcoda.com/presentation-controllers-tutorial/</a></li>
<li><a href="https://fluffy.es/4-ios13-breaking-changes/">https://fluffy.es/4-ios13-breaking-changes/</a></li>
<li><a href="https://developer.apple.com/documentation/uikit/uiview/positioning_content_relative_to_the_safe_area">https://developer.apple.com/documentation/uikit/uiview/positioning_content_relative_to_the_safe_area</a></li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2020-01-06T12:01:57.000Z" title="2020-01-06T12:01:57.000Z">2020-01-06</time><span class="level-item">a minute read (About 194 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-disable-implicit-decoration-view-animation-in-UICollectionView/">How to disable implicit decoration view animation in UICollectionView</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/569">#569</a></strong></p>
<p>From documentation <a href="https://developer.apple.com/documentation/uikit/uicollectionviewlayout/1617726-initiallayoutattributesforappear">https://developer.apple.com/documentation/uikit/uicollectionviewlayout/1617726-initiallayoutattributesforappear</a></p>
<blockquote>
<p>This method is called after the prepare(forCollectionViewUpdates:) method and before the finalizeCollectionViewUpdates() method for any decoration views that are about to be inserted. Your implementation should return the layout information that describes the initial position and state of the view. The collection view uses this information as the starting point for any animations. (The end point of the animation is the view’s new location in the collection view.) If you return nil, the layout object uses the item’s final attributes for both the start and end points of the animation.</p>
</blockquote>
<blockquote>
<p>The default implementation of this method returns nil.</p>
</blockquote>
<p>Although the doc says “The default implementation of this method returns nil”, calling <code>super.initialLayoutAttributesForAppearingDecorationElement</code> gives somehow implicit animation. The workaround is to explicitly return nil</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">initialLayoutAttributesForAppearingDecorationElement</span><span class="params">(ofKind elementKind: String, at decorationIndexPath: IndexPath)</span></span> -&gt; <span class="type">UICollectionViewLayoutAttributes?</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">finalLayoutAttributesForDisappearingDecorationElement</span><span class="params">(ofKind elementKind: String, at decorationIndexPath: IndexPath)</span></span> -&gt; <span class="type">UICollectionViewLayoutAttributes?</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Decoration seems to be removed when all items are removed. Workaround is to check and only add decoration when there is preferred data or cell</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2020-01-04T06:57:49.000Z" title="2020-01-04T06:57:49.000Z">2020-01-04</time><span class="level-item">a minute read (About 188 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-make-simple-tracker-via-swizzling-in-Swift/">How to make simple tracker via swizzling in Swift</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/568">#568</a></strong></p>
<h2 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h2><ul>
<li><a href="https://github.com/onmyway133/EasyTracker">EasyTracker</a></li>
</ul>
<h2 id="Swizzle-viewDidAppear"><a href="#Swizzle-viewDidAppear" class="headerlink" title="Swizzle viewDidAppear"></a>Swizzle viewDidAppear</h2><ul>
<li><a href="https://github.com/onmyway133/EasyTracker/blob/master/Sources/Trackers.swift">https://github.com/onmyway133/EasyTracker/blob/master/Sources/Trackers.swift</a></li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> UIKit</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> mapping: [<span class="type">String</span>: (<span class="type">UIViewController</span>) -&gt; <span class="type">Void</span>] = [:]</span><br><span class="line"><span class="keyword">var</span> hasSwizzled = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">track</span>&lt;T: UIViewController&gt;<span class="params">(<span class="number">_</span> type: T.<span class="keyword">Type</span>, block: @escaping <span class="params">(T)</span></span></span> -&gt; <span class="type">Void</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> original = #selector(<span class="type">UIViewController</span>.viewDidAppear(<span class="number">_</span>:))</span><br><span class="line">  <span class="keyword">let</span> swizled = #selector(<span class="type">UIViewController</span>.trackers_viewDidAppear(<span class="number">_</span>:))</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> !hasSwizzled &#123;</span><br><span class="line">    swizzle(kClass: <span class="type">UIViewController</span>.<span class="keyword">self</span>, originalSelector: original, swizzledSelector: swizled)</span><br><span class="line">    hasSwizzled = <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  mapping[<span class="type">NSStringFromClass</span>(type)] = &#123; controller <span class="keyword">in</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">let</span> controller = controller <span class="keyword">as</span>? <span class="type">T</span> &#123;</span><br><span class="line">      block(controller)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">UIViewController</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">func</span> <span class="title">trackers_viewDidAppear</span><span class="params">(<span class="number">_</span> animated: Bool)</span></span> &#123;</span><br><span class="line">    trackers_viewDidAppear(animated)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> string = <span class="type">NSStringFromClass</span>(type(of: <span class="keyword">self</span>))</span><br><span class="line">    mapping[string]?(<span class="keyword">self</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">swizzle</span><span class="params">(kClass: AnyClass, originalSelector: Selector, swizzledSelector: Selector)</span></span> &#123;</span><br><span class="line">  <span class="keyword">let</span> originalMethod = class_getInstanceMethod(kClass, originalSelector)</span><br><span class="line">  <span class="keyword">let</span> swizzledMethod = class_getInstanceMethod(kClass, swizzledSelector)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> didAddMethod = class_addMethod(kClass, originalSelector, method_getImplementation(swizzledMethod), method_getTypeEncoding(swizzledMethod))</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> didAddMethod &#123;</span><br><span class="line">    class_replaceMethod(kClass, swizzledSelector, method_getImplementation(originalMethod), method_getTypeEncoding(originalMethod))</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    method_exchangeImplementations(originalMethod, swizzledMethod)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Track-in-a-declarative-way"><a href="#Track-in-a-declarative-way" class="headerlink" title="Track in a declarative way"></a>Track in a declarative way</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">track(<span class="type">ListController</span>.<span class="keyword">self</span>) &#123;</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">"list controller has appeared"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">track(<span class="type">DetailController</span>.<span class="keyword">self</span>) &#123;</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">"detail controller has appeared"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">track(<span class="type">CouponController</span>.<span class="keyword">self</span>) &#123; controller <span class="keyword">in</span></span><br><span class="line">  <span class="built_in">print</span>(<span class="string">"coupon controller has appeared with code \(controller.coupon.code)"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2020-01-04T06:46:50.000Z" title="2020-01-04T06:46:50.000Z">2020-01-04</time><span class="level-item">7 minutes read (About 988 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-make-simple-adapter-for-delegate-and-datasource-for-UICollectionView-and-UITableView/">How to make simple adapter for delegate and datasource for UICollectionView and UITableView</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/567">#567</a></strong></p>
<h2 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h2><ul>
<li><a href="https://github.com/onmyway133/Upstream/">Upstream</a></li>
</ul>
<h2 id="Make-open-Adapter"><a href="#Make-open-Adapter" class="headerlink" title="Make open Adapter"></a>Make open Adapter</h2><ul>
<li><a href="https://github.com/onmyway133/Upstream">https://github.com/onmyway133/Upstream</a></li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> UIKit</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">protocol</span> <span class="title">AdapterDelegate</span>: <span class="title">class</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// Apply model to view</span></span><br><span class="line">  <span class="function"><span class="keyword">func</span> <span class="title">configure</span><span class="params">(model: <span class="keyword">Any</span>, view: UIView, indexPath: IndexPath)</span></span></span><br><span class="line"></span><br><span class="line">  <span class="comment">/// Handle view selection</span></span><br><span class="line">  <span class="function"><span class="keyword">func</span> <span class="title">select</span><span class="params">(model: <span class="keyword">Any</span>)</span></span></span><br><span class="line"></span><br><span class="line">  <span class="comment">/// Size the view</span></span><br><span class="line">  <span class="function"><span class="keyword">func</span> <span class="title">size</span><span class="params">(model: <span class="keyword">Any</span>, containerSize: CGSize)</span></span> -&gt; <span class="type">CGSize</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/// Act as DataSource and Delegate for UICollectionView, UITableView</span></span><br><span class="line"><span class="keyword">open</span> <span class="class"><span class="keyword">class</span> <span class="title">Adapter</span>: <span class="title">NSObject</span>,</span></span><br><span class="line"><span class="class">  <span class="title">UICollectionViewDataSource</span>, <span class="title">UICollectionViewDelegateFlowLayout</span>,</span></span><br><span class="line"><span class="class"><span class="title">UITableViewDataSource</span>, <span class="title">UITableViewDelegate</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">var</span> sections: [<span class="type">Section</span>] = []</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">weak</span> <span class="keyword">var</span> collectionView: <span class="type">UICollectionView?</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">weak</span> <span class="keyword">var</span> tableView: <span class="type">UITableView?</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">weak</span> <span class="keyword">var</span> delegate: <span class="type">AdapterDelegate?</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> registryService = <span class="type">RegistryService</span>()</span><br><span class="line"></span><br><span class="line">  <span class="comment">// MARK: - Initialiser</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">required</span> <span class="keyword">init</span>(collectionView: <span class="type">UICollectionView</span>) &#123;</span><br><span class="line">    <span class="keyword">self</span>.collectionView = collectionView</span><br><span class="line">    <span class="keyword">super</span>.<span class="keyword">init</span>()</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">required</span> <span class="keyword">init</span>(tableView: <span class="type">UITableView</span>) &#123;</span><br><span class="line">    <span class="keyword">self</span>.tableView = tableView</span><br><span class="line">    <span class="keyword">super</span>.<span class="keyword">init</span>()</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// MARK: - UICollectionViewDataSource</span></span><br><span class="line">  <span class="keyword">open</span> <span class="function"><span class="keyword">func</span> <span class="title">numberOfSections</span><span class="params">(<span class="keyword">in</span> collectionView: UICollectionView)</span></span> -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> sections.<span class="built_in">count</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">open</span> <span class="function"><span class="keyword">func</span> <span class="title">collectionView</span><span class="params">(<span class="number">_</span> collectionView: UICollectionView,</span></span></span><br><span class="line"><span class="function"><span class="params">                           numberOfItemsInSection section: Int)</span></span> -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> sections[section].items.<span class="built_in">count</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">open</span> <span class="function"><span class="keyword">func</span> <span class="title">collectionView</span><span class="params">(<span class="number">_</span> collectionView: UICollectionView,</span></span></span><br><span class="line"><span class="function"><span class="params">                           cellForItemAt indexPath: IndexPath)</span></span> -&gt; <span class="type">UICollectionViewCell</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> item = sections[indexPath.section].items[indexPath.row]</span><br><span class="line">    <span class="keyword">let</span> cell = collectionView.dequeueReusableCell(</span><br><span class="line">      withReuseIdentifier: item.cellType.typeName,</span><br><span class="line">      <span class="keyword">for</span>: indexPath)</span><br><span class="line"></span><br><span class="line">    delegate?.configure(model: item.model, view: cell, indexPath: indexPath)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> cell</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">open</span> <span class="function"><span class="keyword">func</span> <span class="title">collectionView</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="number">_</span> collectionView: UICollectionView,</span></span></span><br><span class="line"><span class="function"><span class="params">    viewForSupplementaryElementOfKind kind: String,</span></span></span><br><span class="line"><span class="function"><span class="params">    at indexPath: IndexPath)</span></span> -&gt; <span class="type">UICollectionReusableView</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">let</span> header = sections[indexPath.section].header,</span><br><span class="line">      kind == <span class="type">UICollectionElementKindSectionHeader</span> &#123;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">let</span> view = collectionView.dequeueReusableSupplementaryView(</span><br><span class="line">        ofKind: <span class="type">UICollectionElementKindSectionHeader</span>,</span><br><span class="line">        withReuseIdentifier: header.viewType.typeName,</span><br><span class="line">        <span class="keyword">for</span>: indexPath</span><br><span class="line">      )</span><br><span class="line"></span><br><span class="line">      delegate?.configure(model: header.model, view: view, indexPath: indexPath)</span><br><span class="line">      <span class="keyword">return</span> view</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> <span class="keyword">let</span> footer = sections[indexPath.section].footer,</span><br><span class="line">      kind == <span class="type">UICollectionElementKindSectionFooter</span> &#123;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">let</span> view = collectionView.dequeueReusableSupplementaryView(</span><br><span class="line">        ofKind: <span class="type">UICollectionElementKindSectionFooter</span>,</span><br><span class="line">        withReuseIdentifier: footer.viewType.typeName,</span><br><span class="line">        <span class="keyword">for</span>: indexPath</span><br><span class="line">      )</span><br><span class="line"></span><br><span class="line">      delegate?.configure(model: footer.model, view: view, indexPath: indexPath)</span><br><span class="line">      <span class="keyword">return</span> view</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> view = <span class="type">DummyReusableView</span>()</span><br><span class="line">      view.isHidden = <span class="literal">true</span></span><br><span class="line">      <span class="keyword">return</span> view</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// MARK: - UICollectionViewDelegate</span></span><br><span class="line">  <span class="keyword">open</span> <span class="function"><span class="keyword">func</span> <span class="title">collectionView</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="number">_</span> collectionView: UICollectionView,</span></span></span><br><span class="line"><span class="function"><span class="params">    didSelectItemAt indexPath: IndexPath)</span></span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> item = sections[indexPath.section].items[indexPath.row]</span><br><span class="line">    delegate?.select(model: item.model)</span><br><span class="line">    collectionView.deselectItem(at: indexPath, animated: <span class="literal">true</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">open</span> <span class="function"><span class="keyword">func</span> <span class="title">collectionView</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="number">_</span> collectionView: UICollectionView,</span></span></span><br><span class="line"><span class="function"><span class="params">    layout collectionViewLayout: UICollectionViewLayout,</span></span></span><br><span class="line"><span class="function"><span class="params">    sizeForItemAt indexPath: IndexPath)</span></span> -&gt; <span class="type">CGSize</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> item = sections[indexPath.section].items[indexPath.row]</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">let</span> size = delegate?.size(model: item.model, containerSize: collectionView.frame.size) &#123;</span><br><span class="line">      <span class="keyword">return</span> size</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">let</span> size = (collectionViewLayout <span class="keyword">as</span>? <span class="type">UICollectionViewFlowLayout</span>)?.itemSize &#123;</span><br><span class="line">      <span class="keyword">return</span> size</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> collectionView.frame.size</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">open</span> <span class="function"><span class="keyword">func</span> <span class="title">collectionView</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="number">_</span> collectionView: UICollectionView,</span></span></span><br><span class="line"><span class="function"><span class="params">    layout collectionViewLayout: UICollectionViewLayout,</span></span></span><br><span class="line"><span class="function"><span class="params">    referenceSizeForHeaderInSection section: Int)</span></span> -&gt; <span class="type">CGSize</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">guard</span> <span class="keyword">let</span> header = sections[section].header <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> .zero</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">guard</span> <span class="keyword">let</span> size = delegate?.size(model: header.model, containerSize: collectionView.frame.size) <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> .zero</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> size</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">open</span> <span class="function"><span class="keyword">func</span> <span class="title">collectionView</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="number">_</span> collectionView: UICollectionView,</span></span></span><br><span class="line"><span class="function"><span class="params">    layout collectionViewLayout: UICollectionViewLayout,</span></span></span><br><span class="line"><span class="function"><span class="params">    referenceSizeForFooterInSection section: Int)</span></span> -&gt; <span class="type">CGSize</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">guard</span> <span class="keyword">let</span> footer = sections[section].footer <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> .zero</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">guard</span> <span class="keyword">let</span> size = delegate?.size(model: footer.model, containerSize: collectionView.frame.size) <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> .zero</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> size</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// MARK: - Reload</span></span><br><span class="line">  <span class="keyword">open</span> <span class="function"><span class="keyword">func</span> <span class="title">reload</span><span class="params">(sections: [Section])</span></span> &#123;</span><br><span class="line">    <span class="comment">// Registry</span></span><br><span class="line">    registryService.registerIfNeeded(</span><br><span class="line">      collectionView: collectionView,</span><br><span class="line">      tableView: tableView,</span><br><span class="line">      sections: sections</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    <span class="keyword">self</span>.sections = sections</span><br><span class="line">    collectionView?.reloadData()</span><br><span class="line">    tableView?.reloadData()</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// MARK: - UITableViewDataSource</span></span><br><span class="line">  <span class="keyword">open</span> <span class="function"><span class="keyword">func</span> <span class="title">numberOfSections</span><span class="params">(<span class="keyword">in</span> tableView: UITableView)</span></span> -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> sections.<span class="built_in">count</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">open</span> <span class="function"><span class="keyword">func</span> <span class="title">tableView</span><span class="params">(<span class="number">_</span> tableView: UITableView, numberOfRowsInSection section: Int)</span></span> -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> sections[section].items.<span class="built_in">count</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">open</span> <span class="function"><span class="keyword">func</span> <span class="title">tableView</span><span class="params">(<span class="number">_</span> tableView: UITableView, cellForRowAt indexPath: IndexPath)</span></span> -&gt; <span class="type">UITableViewCell</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> item = sections[indexPath.section].items[indexPath.row]</span><br><span class="line">    <span class="keyword">let</span> cell = tableView.dequeueReusableCell(</span><br><span class="line">      withIdentifier: item.cellType.typeName,</span><br><span class="line">      <span class="keyword">for</span>: indexPath</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    delegate?.configure(model: item.model, view: cell, indexPath: indexPath)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> cell</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// MARK: - UITableViewDelegate</span></span><br><span class="line">  <span class="keyword">open</span> <span class="function"><span class="keyword">func</span> <span class="title">tableView</span><span class="params">(<span class="number">_</span> tableView: UITableView, didSelectRowAt indexPath: IndexPath)</span></span> &#123;</span><br><span class="line">    <span class="keyword">let</span> item = sections[indexPath.section].items[indexPath.row]</span><br><span class="line">    delegate?.select(model: item.model)</span><br><span class="line">    tableView.deselectRow(at: indexPath, animated: <span class="literal">true</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">open</span> <span class="function"><span class="keyword">func</span> <span class="title">tableView</span><span class="params">(<span class="number">_</span> tableView: UITableView, heightForRowAt indexPath: IndexPath)</span></span> -&gt; <span class="type">CGFloat</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> item = sections[indexPath.section].items[indexPath.row]</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">let</span> size = delegate?.size(model: item.model, containerSize: tableView.frame.size) &#123;</span><br><span class="line">      <span class="keyword">return</span> size.height</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">open</span> <span class="function"><span class="keyword">func</span> <span class="title">tableView</span><span class="params">(<span class="number">_</span> tableView: UITableView, heightForHeaderInSection section: Int)</span></span> -&gt; <span class="type">CGFloat</span> &#123;</span><br><span class="line">    <span class="keyword">guard</span> <span class="keyword">let</span> header = sections[section].header <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">guard</span> <span class="keyword">let</span> size = delegate?.size(model: header.model, containerSize: tableView.frame.size) <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> size.height</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">open</span> <span class="function"><span class="keyword">func</span> <span class="title">tableView</span><span class="params">(<span class="number">_</span> tableView: UITableView, heightForFooterInSection section: Int)</span></span> -&gt; <span class="type">CGFloat</span> &#123;</span><br><span class="line">    <span class="keyword">guard</span> <span class="keyword">let</span> footer = sections[section].footer <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">guard</span> <span class="keyword">let</span> size = delegate?.size(model: footer.model, containerSize: tableView.frame.size) <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> size.height</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">open</span> <span class="function"><span class="keyword">func</span> <span class="title">tableView</span><span class="params">(<span class="number">_</span> tableView: UITableView, viewForHeaderInSection section: Int)</span></span> -&gt; <span class="type">UIView?</span> &#123;</span><br><span class="line">    <span class="keyword">guard</span> <span class="keyword">let</span> header = sections[section].header <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">guard</span> <span class="keyword">let</span> view = tableView.dequeueReusableHeaderFooterView(withIdentifier: header.viewType.typeName) <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    delegate?.configure(model: header.model, view: view, indexPath: <span class="type">IndexPath</span>(row: <span class="number">0</span>, section: section))</span><br><span class="line">    <span class="keyword">return</span> view</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">open</span> <span class="function"><span class="keyword">func</span> <span class="title">tableView</span><span class="params">(<span class="number">_</span> tableView: UITableView, viewForFooterInSection section: Int)</span></span> -&gt; <span class="type">UIView?</span> &#123;</span><br><span class="line">    <span class="keyword">guard</span> <span class="keyword">let</span> footer = sections[section].footer <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">guard</span> <span class="keyword">let</span> view = tableView.dequeueReusableHeaderFooterView(withIdentifier: footer.viewType.typeName) <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    delegate?.configure(model: footer.model, view: view, indexPath: <span class="type">IndexPath</span>(row: <span class="number">0</span>, section: section))</span><br><span class="line">    <span class="keyword">return</span> view</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Declare-data"><a href="#Declare-data" class="headerlink" title="Declare data"></a>Declare data</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> sections: [<span class="type">Section</span>] = [</span><br><span class="line">  <span class="type">Section</span>(</span><br><span class="line">    header: <span class="type">Header</span>(model: <span class="type">Model</span>.header(<span class="string">"Information"</span>), viewType: <span class="type">HeaderView</span>.<span class="keyword">self</span>),</span><br><span class="line">    items: [</span><br><span class="line">      <span class="type">Item</span>(model: <span class="type">Model</span>.avatar(avatarUrl), cellType: <span class="type">AvatarCell</span>.<span class="keyword">self</span>),</span><br><span class="line">      <span class="type">Item</span>(model: <span class="type">Model</span>.name(<span class="string">"Thor"</span>), cellType: <span class="type">NameCell</span>.<span class="keyword">self</span>),</span><br><span class="line">      <span class="type">Item</span>(model: <span class="type">Model</span>.location(<span class="string">"Asgard"</span>), cellType: <span class="type">NameCell</span>.<span class="keyword">self</span>)</span><br><span class="line">    ]</span><br><span class="line">  ),</span><br><span class="line">  <span class="type">Section</span>(</span><br><span class="line">    header: <span class="type">Header</span>(model: <span class="type">Model</span>.header(<span class="string">"Skills"</span>), viewType: <span class="type">HeaderView</span>.<span class="keyword">self</span>),</span><br><span class="line">    items: [</span><br><span class="line">      <span class="type">Item</span>(model: <span class="type">Model</span>.skill(<span class="string">"iOS"</span>), cellType: <span class="type">SkillCell</span>.<span class="keyword">self</span>),</span><br><span class="line">      <span class="type">Item</span>(model: <span class="type">Model</span>.skill(<span class="string">"Android"</span>), cellType: <span class="type">SkillCell</span>.<span class="keyword">self</span>)</span><br><span class="line">    ]</span><br><span class="line">  )</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">adapter.reload(sections: sections)</span><br></pre></td></tr></table></figure>

<h2 id="Configure-required-blocks"><a href="#Configure-required-blocks" class="headerlink" title="Configure required blocks"></a>Configure required blocks</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">ProfileViewController</span>: <span class="title">AdapterDelegate</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">func</span> <span class="title">configure</span><span class="params">(model: <span class="keyword">Any</span>, view: UIView, indexPath: IndexPath)</span></span> &#123;</span><br><span class="line">    <span class="keyword">guard</span> <span class="keyword">let</span> model = model <span class="keyword">as</span>? <span class="type">Model</span> <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">switch</span> (model, view) &#123;</span><br><span class="line">    <span class="keyword">case</span> (.avatar(<span class="keyword">let</span> string), <span class="keyword">let</span> cell <span class="keyword">as</span> <span class="type">Avatarcell</span>):</span><br><span class="line">      cell.configure(string: string)</span><br><span class="line">    <span class="keyword">case</span> (.name(<span class="keyword">let</span> name), <span class="keyword">let</span> cell <span class="keyword">as</span> <span class="type">NameCell</span>):</span><br><span class="line">      cell.configure(string: name)</span><br><span class="line">    <span class="keyword">case</span> (.header(<span class="keyword">let</span> string), <span class="keyword">let</span> view <span class="keyword">as</span> <span class="type">HeaderView</span>):</span><br><span class="line">      view.configure(string: string)</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">func</span> <span class="title">select</span><span class="params">(model: <span class="keyword">Any</span>)</span></span> &#123;</span><br><span class="line">    <span class="keyword">guard</span> <span class="keyword">let</span> model = model <span class="keyword">as</span>? <span class="type">Model</span> <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">switch</span> model &#123;</span><br><span class="line">    <span class="keyword">case</span> .skill(<span class="keyword">let</span> skill):</span><br><span class="line">      <span class="keyword">let</span> skillController = <span class="type">SkillController</span>(skill: skill)</span><br><span class="line">      navigationController?.pushViewController(skillController, animated: <span class="literal">true</span>)</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">func</span> <span class="title">size</span><span class="params">(model: <span class="keyword">Any</span>, containerSize: CGSize)</span></span> -&gt; <span class="type">CGSize</span> &#123;</span><br><span class="line">    <span class="keyword">guard</span> <span class="keyword">let</span> model = model <span class="keyword">as</span>? <span class="type">Model</span> <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> .zero</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">switch</span> model &#123;</span><br><span class="line">    <span class="keyword">case</span> .name:</span><br><span class="line">      <span class="keyword">return</span> <span class="type">CGSize</span>(width: containerSize.width, height: <span class="number">40</span>)</span><br><span class="line">    <span class="keyword">case</span> .avatar:</span><br><span class="line">      <span class="keyword">return</span> <span class="type">CGSize</span>(width: containerSize.width, height: <span class="number">200</span>)</span><br><span class="line">    <span class="keyword">case</span> .header:</span><br><span class="line">      <span class="keyword">return</span> <span class="type">CGSize</span>(width: containerSize.width, height: <span class="number">30</span>)</span><br><span class="line">     <span class="keyword">default</span>:</span><br><span class="line">       <span class="keyword">return</span> .zero</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Extending-Manager"><a href="#Extending-Manager" class="headerlink" title="Extending Manager"></a>Extending Manager</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AccordionManager</span>&lt;<span class="title">T</span>&gt;: <span class="title">Manager</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">var</span> collapsedSections = <span class="type">Set</span>&lt;<span class="type">Int</span>&gt;()</span><br><span class="line"> </span><br><span class="line">  <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">tableView</span><span class="params">(<span class="number">_</span> tableView: UITableView, numberOfRowsInSection section: Int)</span></span> -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> collapsedSections.<span class="built_in">contains</span>(section)</span><br><span class="line">      ? <span class="number">0</span> : sections[section].items.<span class="built_in">count</span></span><br><span class="line">  &#125;</span><br><span class="line"> </span><br><span class="line">  <span class="function"><span class="keyword">func</span> <span class="title">toggle</span><span class="params">(section: Int)</span></span> &#123;</span><br><span class="line">    <span class="keyword">if</span> collapsedSections.<span class="built_in">contains</span>(section) &#123;</span><br><span class="line">      collapsedSections.remove(section)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      collapsedSections.insert(section)</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">let</span> indexSet = <span class="type">IndexSet</span>(integer: section)</span><br><span class="line">    tableView?.reloadSections(indexSet, with: .automatic)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2020-01-04T06:37:56.000Z" title="2020-01-04T06:37:56.000Z">2020-01-04</time><span class="level-item">4 minutes read (About 667 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-make-progress-HUD-in-Swift/">How to make progress HUD in Swift</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/566">#566</a></strong></p>
<h2 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h2><ul>
<li><a href="https://github.com/onmyway133/FantasticDisplay">FantasticDisplay</a></li>
</ul>
<h2 id="Create-a-container-that-has-blur-effect"><a href="#Create-a-container-that-has-blur-effect" class="headerlink" title="Create a container that has blur effect"></a>Create a container that has blur effect</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HUDContainer</span>: <span class="title">UIVisualEffectView</span>, <span class="title">AnimationAware</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">let</span> innerContentView: <span class="type">UIView</span> &amp; <span class="type">AnimationAware</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">let</span> label = <span class="type">UILabel</span>()</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">var</span> text: <span class="type">String?</span> &#123;</span><br><span class="line">        <span class="keyword">didSet</span> &#123;</span><br><span class="line">            label.text = text</span><br><span class="line">            label.sizeToFit()</span><br><span class="line">            label.isHidden = text == <span class="literal">nil</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">init</span>(contentView: <span class="type">UIView</span> &amp; <span class="type">AnimationAware</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.innerContentView = contentView</span><br><span class="line">        <span class="keyword">super</span>.<span class="keyword">init</span>(effect: <span class="type">UIBlurEffect</span>(style: .light))</span><br><span class="line">        <span class="keyword">self</span>.contentView.addSubview(innerContentView)</span><br><span class="line">        <span class="keyword">self</span>.contentView.addSubview(label)</span><br><span class="line"></span><br><span class="line">        innerContentView.pinEdgesToSuperview()</span><br><span class="line">        configure()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">required</span> <span class="keyword">init</span>?(coder aDecoder: <span class="type">NSCoder</span>) &#123;</span><br><span class="line">        <span class="built_in">fatalError</span>()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">configure</span><span class="params">()</span></span> &#123;</span><br><span class="line">        layer.cornerRadius = <span class="number">8</span></span><br><span class="line">        layer.masksToBounds = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">        label.isHidden = <span class="literal">false</span></span><br><span class="line">        label.font = <span class="type">UIFont</span>.preferredFont(forTextStyle: .body)</span><br><span class="line">        label.textColor = <span class="type">UIColor</span>.black</span><br><span class="line">        label.textAlignment = .center</span><br><span class="line">        label.translatesAutoresizingMaskIntoConstraints = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">        <span class="type">NSLayoutConstraint</span>.activate([</span><br><span class="line">            label.bottomAnchor.constraint(equalTo: contentView.bottomAnchor, constant: -<span class="number">8</span>),</span><br><span class="line">            label.leftAnchor.constraint(equalTo: contentView.leftAnchor, constant: <span class="number">10</span>),</span><br><span class="line">            label.rightAnchor.constraint(equalTo: contentView.rightAnchor, constant: -<span class="number">10</span>),</span><br><span class="line">        ])</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">startAnimation</span><span class="params">()</span></span> &#123;</span><br><span class="line">        innerContentView.startAnimation()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">endAnimation</span><span class="params">()</span></span> &#123;</span><br><span class="line">        innerContentView.stopAnimation()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Make-error-view-with-2-cross-lines"><a href="#Make-error-view-with-2-cross-lines" class="headerlink" title="Make error view with 2 cross lines"></a>Make error view with 2 cross lines</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> UIKit</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ErrorView</span>: <span class="title">UIView</span>, <span class="title">AnimationAware</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">let</span> line1 = <span class="type">CAShapeLayer</span>()</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">let</span> line2 = <span class="type">CAShapeLayer</span>()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">let</span> animation1 = <span class="type">CASpringAnimation</span>(keyPath: #keyPath(<span class="type">CALayer</span>.transform))</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">let</span> animation2 = <span class="type">CASpringAnimation</span>(keyPath: #keyPath(<span class="type">CALayer</span>.transform))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">var</span> lineColor: <span class="type">UIColor</span> = <span class="type">UIColor</span>.darkGray</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">var</span> duration: <span class="type">TimeInterval</span> = <span class="number">0.75</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">override</span> <span class="keyword">init</span>(frame: <span class="type">CGRect</span>) &#123;</span><br><span class="line">        <span class="keyword">super</span>.<span class="keyword">init</span>(frame: frame)</span><br><span class="line">        layer.addSublayer(line1)</span><br><span class="line">        layer.addSublayer(line2)</span><br><span class="line">        configure()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">required</span> <span class="keyword">init</span>?(coder aDecoder: <span class="type">NSCoder</span>) &#123;</span><br><span class="line">        <span class="built_in">fatalError</span>()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">layoutSubviews</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">super</span>.layoutSubviews()</span><br><span class="line"></span><br><span class="line">        configureSize()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">configure</span><span class="params">()</span></span> &#123;</span><br><span class="line">        [line1, line2].forEach &#123;</span><br><span class="line">            $<span class="number">0</span>.backgroundColor = lineColor.cgColor</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        [animation1, animation2].forEach &#123;</span><br><span class="line">            $<span class="number">0</span>.fromValue = <span class="number">0</span></span><br><span class="line">            $<span class="number">0</span>.damping = <span class="number">0.33</span></span><br><span class="line">            $<span class="number">0</span>.initialVelocity = <span class="number">0.01</span></span><br><span class="line">            $<span class="number">0</span>.mass = <span class="number">0.2</span></span><br><span class="line">            $<span class="number">0</span>.duration = duration</span><br><span class="line">            $<span class="number">0</span>.valueFunction = <span class="type">CAValueFunction</span>(name: <span class="type">CAValueFunctionName</span>.rotateZ)</span><br><span class="line">            $<span class="number">0</span>.timingFunction = <span class="type">CAMediaTimingFunction</span>(name: .easeIn)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        animation1.toValue = <span class="type">CGFloat</span>.pi / <span class="number">4</span></span><br><span class="line">        animation2.toValue = -<span class="type">CGFloat</span>.pi / <span class="number">4</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">configureSize</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">guard</span> line1.frame.width &lt;= <span class="number">0</span> <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        [line1, line2].forEach &#123;</span><br><span class="line">            $<span class="number">0</span>.cornerRadius = <span class="number">3</span></span><br><span class="line">            $<span class="number">0</span>.frame.size = <span class="type">CGSize</span>(width: bounds.width*<span class="number">0.6</span>, height: <span class="number">6</span>)</span><br><span class="line">            $<span class="number">0</span>.position = layer.position</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">didMoveToWindow</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">super</span>.didMoveToWindow()</span><br><span class="line"></span><br><span class="line">        line1.transform = <span class="type">CATransform3DIdentity</span></span><br><span class="line">        line2.transform = <span class="type">CATransform3DIdentity</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">startAnimation</span><span class="params">()</span></span> &#123;</span><br><span class="line">        line1.transform = <span class="type">CATransform3DMakeRotation</span>(<span class="type">CGFloat</span>.pi/<span class="number">4</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1.0</span>)</span><br><span class="line">        line2.transform = <span class="type">CATransform3DMakeRotation</span>(-<span class="type">CGFloat</span>.pi/<span class="number">4</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1.0</span>)</span><br><span class="line"></span><br><span class="line">        line1.add(animation1, forKey: <span class="literal">nil</span>)</span><br><span class="line">        line2.add(animation2, forKey: <span class="literal">nil</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">stopAnimation</span><span class="params">()</span></span> &#123;</span><br><span class="line">        line1.removeAllAnimations()</span><br><span class="line">        line2.removeAllAnimations()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Make-loading-progress-using-replicator-layers"><a href="#Make-loading-progress-using-replicator-layers" class="headerlink" title="Make loading progress using replicator layers"></a>Make loading progress using replicator layers</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> UIKit</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProgressView</span>: <span class="title">UIView</span>, <span class="title">AnimationAware</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">let</span> replicatorLayer = <span class="type">CAReplicatorLayer</span>()</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">let</span> animation = <span class="type">CABasicAnimation</span>(keyPath: #keyPath(<span class="type">CALayer</span>.opacity))</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">let</span> line = <span class="type">CALayer</span>()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">var</span> lineCount: <span class="type">Int</span> = <span class="number">12</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">var</span> duration: <span class="type">TimeInterval</span> = <span class="number">1.0</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">var</span> lineSize: <span class="type">CGSize</span> = <span class="type">CGSize</span>(width: <span class="number">20</span>, height: <span class="number">6</span>)</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">var</span> lineColor: <span class="type">UIColor</span> = <span class="type">UIColor</span>.darkGray</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">override</span> <span class="keyword">init</span>(frame: <span class="type">CGRect</span>) &#123;</span><br><span class="line">        <span class="keyword">super</span>.<span class="keyword">init</span>(frame: .zero)</span><br><span class="line"></span><br><span class="line">        configure()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">required</span> <span class="keyword">init</span>?(coder aDecoder: <span class="type">NSCoder</span>) &#123;</span><br><span class="line">        <span class="built_in">fatalError</span>()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">configure</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">let</span> angle = <span class="type">CGFloat</span>.pi * <span class="number">2</span> / <span class="type">CGFloat</span>(lineCount)</span><br><span class="line">        <span class="keyword">let</span> rotation = <span class="type">CATransform3DMakeRotation</span>(angle, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1.0</span>)</span><br><span class="line"></span><br><span class="line">        replicatorLayer.instanceTransform = rotation</span><br><span class="line">        replicatorLayer.instanceCount = lineCount</span><br><span class="line">        replicatorLayer.instanceDelay = duration / <span class="type">TimeInterval</span>(lineCount)</span><br><span class="line"></span><br><span class="line">        line.backgroundColor = lineColor.cgColor</span><br><span class="line">        line.frame.size = lineSize</span><br><span class="line">        line.cornerRadius = lineSize.height / <span class="number">2</span></span><br><span class="line"></span><br><span class="line">        animation.fromValue = <span class="number">1.0</span></span><br><span class="line">        animation.toValue = <span class="number">0.0</span></span><br><span class="line">        animation.repeatCount = <span class="type">Float</span>.greatestFiniteMagnitude</span><br><span class="line">        animation.timingFunction = <span class="type">CAMediaTimingFunction</span>(name: .linear)</span><br><span class="line">        animation.duration = duration</span><br><span class="line"></span><br><span class="line">        replicatorLayer.addSublayer(line)</span><br><span class="line">        layer.addSublayer(replicatorLayer)</span><br><span class="line"></span><br><span class="line">        <span class="comment">// x: the larger, the closer to center</span></span><br><span class="line">        <span class="comment">// y: half the height, changing affects rotation of lines</span></span><br><span class="line">        line.position = <span class="type">CGPoint</span>(x: <span class="number">48</span>, y: <span class="number">75</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">layoutSubviews</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">super</span>.layoutSubviews()</span><br><span class="line"></span><br><span class="line">        replicatorLayer.frame = bounds</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">startAnimation</span><span class="params">()</span></span> &#123;</span><br><span class="line">        line.add(animation, forKey: <span class="literal">nil</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">stopAnimation</span><span class="params">()</span></span> &#123;</span><br><span class="line">        line.removeAllAnimations()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Make-success-view-with-check-mark-animation"><a href="#Make-success-view-with-check-mark-animation" class="headerlink" title="Make success view with check mark animation"></a>Make success view with check mark animation</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> UIKit</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SuccessView</span>: <span class="title">UIView</span>, <span class="title">AnimationAware</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">let</span> shapeLayer = <span class="type">CAShapeLayer</span>()</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">let</span> animation = <span class="type">CABasicAnimation</span>(keyPath: #keyPath(<span class="type">CAShapeLayer</span>.strokeEnd))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">var</span> lineColor: <span class="type">UIColor</span> = <span class="type">UIColor</span>.darkGray</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">var</span> duration: <span class="type">TimeInterval</span> = <span class="number">0.25</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">override</span> <span class="keyword">init</span>(frame: <span class="type">CGRect</span>) &#123;</span><br><span class="line">        <span class="keyword">super</span>.<span class="keyword">init</span>(frame: frame)</span><br><span class="line">        layer.addSublayer(shapeLayer)</span><br><span class="line">        configure()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">required</span> <span class="keyword">init</span>?(coder aDecoder: <span class="type">NSCoder</span>) &#123;</span><br><span class="line">        <span class="built_in">fatalError</span>()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">layoutSubviews</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">super</span>.layoutSubviews()</span><br><span class="line"></span><br><span class="line">        configurePath()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">configure</span><span class="params">()</span></span> &#123;</span><br><span class="line">        shapeLayer.lineCap = .round</span><br><span class="line">        shapeLayer.lineJoin = .round</span><br><span class="line">        shapeLayer.fillColor = <span class="literal">nil</span></span><br><span class="line">        shapeLayer.strokeColor = lineColor.cgColor</span><br><span class="line">        shapeLayer.lineWidth = <span class="number">6</span></span><br><span class="line"></span><br><span class="line">        animation.timingFunction = <span class="type">CAMediaTimingFunction</span>(name: .easeIn)</span><br><span class="line">        animation.fromValue = <span class="number">0.0</span></span><br><span class="line">        animation.toValue = <span class="number">1.0</span></span><br><span class="line">        animation.duration = duration</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">configurePath</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">let</span> size = <span class="type">CGSize</span>(width: <span class="number">80</span>, height: <span class="number">60</span>)</span><br><span class="line">        shapeLayer.frame = <span class="type">CGRect</span>(origin: .zero, size: size)</span><br><span class="line">        shapeLayer.position = layer.position</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> path = <span class="type">UIBezierPath</span>()</span><br><span class="line">        path.move(to: <span class="type">CGPoint</span>(x: size.width * <span class="number">0</span>, y: size.height * <span class="number">0.48</span>))</span><br><span class="line">        path.addLine(to: <span class="type">CGPoint</span>(x: size.width * <span class="number">0.38</span>, y: size.height))</span><br><span class="line">        path.addLine(to: <span class="type">CGPoint</span>(x: size.width, y: size.height * <span class="number">0.01</span>))</span><br><span class="line"></span><br><span class="line">        shapeLayer.path = path.cgPath</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">didMoveToWindow</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">super</span>.didMoveToWindow()</span><br><span class="line"></span><br><span class="line">        shapeLayer.strokeEnd = <span class="number">0.0</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">startAnimation</span><span class="params">()</span></span> &#123;</span><br><span class="line">        shapeLayer.strokeEnd = <span class="number">1.0</span></span><br><span class="line">        shapeLayer.add(animation, forKey: <span class="literal">nil</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">stopAnimation</span><span class="params">()</span></span> &#123;</span><br><span class="line">        shapeLayer.removeAllAnimations()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2020-01-03T07:21:42.000Z" title="2020-01-03T07:21:42.000Z">2020-01-03</time><span class="level-item">a few seconds read (About 41 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-specify-year-in-date-formatter-in-Swift/">How to specify year in date formatter in Swift</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/565">#565</a></strong></p>
<ul>
<li><a href="https://nakedsecurity.sophos.com/2019/12/23/serious-security-the-decade-ending-y2k-bug-that-wasnt/">Serious Security: The decade-ending Y2K bug that wasnt</a></li>
<li><a href="https://jayeshkawli.ghost.io/challenges-of-dateformatters/">Challenges of DateFormatters</a></li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2020-01-02T21:24:42.000Z" title="2020-01-02T21:24:42.000Z">2020-01-02</time><span class="level-item">a minute read (About 176 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-build-static-site-using-Publish/">How to build static site using Publish</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/564">#564</a></strong></p>
<h2 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h2><ul>
<li><a href="https://github.com/JohnSundell/publish">https://github.com/JohnSundell/publish</a></li>
<li>Example <a href="https://github.com/pumaswift/pumaswift.github.io">https://github.com/pumaswift/pumaswift.github.io</a></li>
</ul>
<h2 id="Steps"><a href="#Steps" class="headerlink" title="Steps"></a>Steps</h2><p>Step 1: Create executable</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">swift package init --type executable</span><br></pre></td></tr></table></figure>

<p>Step 2: Edit package</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// swift-tools-version:5.1</span></span><br><span class="line"><span class="comment">// The swift-tools-version declares the minimum version of Swift required to build this package.</span></span><br><span class="line"><span class="keyword">import</span> PackageDescription</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> package = <span class="type">Package</span>(</span><br><span class="line">    name: <span class="string">"PumaSwiftWeb"</span>,</span><br><span class="line">    dependencies: [</span><br><span class="line">        .package(url: <span class="string">"https://github.com/johnsundell/publish.git"</span>, from: <span class="string">"0.1.0"</span>)</span><br><span class="line">    ],</span><br><span class="line">    targets: [</span><br><span class="line">        .target(</span><br><span class="line">            name: <span class="string">"PumaSwiftWeb"</span>,</span><br><span class="line">            dependencies: [</span><br><span class="line">            	<span class="string">"Publish"</span></span><br><span class="line">        	]</span><br><span class="line">        )</span><br><span class="line">    ]</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>Step 3: Double click Package.swift, Xcode opens that in a generated project<br>Step 4: Declare website. Go to Sources/main.swift</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Publish</span><br><span class="line"><span class="keyword">import</span> Plot</span><br><span class="line"><span class="keyword">import</span> Ink</span><br><span class="line"><span class="keyword">import</span> Foundation</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">PumaSwiftWeb</span>: <span class="title">Website</span> </span>&#123;</span><br><span class="line">    <span class="class"><span class="keyword">enum</span> <span class="title">SectionID</span>: <span class="title">String</span>, <span class="title">WebsiteSectionID</span> </span>&#123;</span><br><span class="line">        <span class="keyword">case</span> gettingStarted</span><br><span class="line">        <span class="keyword">case</span> workflow</span><br><span class="line">        <span class="keyword">case</span> tasks</span><br><span class="line">        <span class="keyword">case</span> about</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">ItemMetadata</span>: <span class="title">WebsiteItemMetadata</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> url = <span class="type">URL</span>(string: <span class="string">"https://pumaswift.github.io"</span>)!</span><br><span class="line">    <span class="keyword">var</span> name = <span class="string">"Puma Swift"</span></span><br><span class="line">    <span class="keyword">var</span> description = <span class="string">"Build utilities in pure Swift"</span></span><br><span class="line">    <span class="keyword">var</span> language: <span class="type">Language</span> &#123; .english &#125;</span><br><span class="line">    <span class="keyword">var</span> imagePath: <span class="type">Path?</span> &#123; <span class="string">"https://avatars2.githubusercontent.com/u/54233247?s=200&amp;v=4"</span> &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> <span class="type">PumaSwiftWeb</span>()</span><br><span class="line">    .publish(withTheme: .foundation)</span><br></pre></td></tr></table></figure>

<p>Step 5: Create Content folder<br>Step 6: <code>swift run</code><br>Step 7: Copy Output to root and push to GitHub</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2020-01-01T13:21:28.000Z" title="2020-01-01T13:21:28.000Z">2020-01-01</time><span class="level-item">4 minutes read (About 575 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-use-iTMSTransporter/">How to use  iTMSTransporter</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/563">#563</a></strong></p>
<h2 id="Transporter-app"><a href="#Transporter-app" class="headerlink" title="Transporter app"></a>Transporter app</h2><ul>
<li><a href="https://developer.apple.com/news/?id=10152019a">Transporter Now Available on the Mac App Store</a></li>
</ul>
<blockquote>
<p>The new Transporter app for macOS makes it easy to upload your binary to App Store Connect. To get started, download Transporter from the Mac App Store, and simply drag and drop your binaries into the upload window. With Transporter you can</p>
</blockquote>
<p><a href="https://stackoverflow.com/questions/8094317/where-to-find-application-loader-app-in-mac/40419328">https://stackoverflow.com/questions/8094317/where-to-find-application-loader-app-in-mac/40419328</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">As of Xcode 11, &quot;Application Loader is no longer included with Xcode&quot;, per the Xcode 11 Release Notes:</span><br><span class="line"></span><br><span class="line">Xcode supports uploading apps from the Organizer window or from the command line with xcodebuild or xcrun altool. Application Loader is no longer included with Xcode. (29008875)</span><br><span class="line"></span><br><span class="line">The Xcode Help page, Upload an app to App Store Connect, explains how to upload from the Xcode Archives Organizer.</span><br><span class="line"></span><br><span class="line">Transporter</span><br><span class="line">In October 2019, Apple announced the Transporter app for macOS, now available in the Mac App Store.</span><br></pre></td></tr></table></figure>

<h2 id="Find-path"><a href="#Find-path" class="headerlink" title="Find path"></a>Find path</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">struct</span> <span class="title">Transporter</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> arguments: [<span class="type">String</span>] = []</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">run</span><span class="params">(workflow: Workflow)</span></span> <span class="keyword">throws</span> &#123;</span><br><span class="line">        <span class="keyword">guard</span> <span class="type">Folder</span>.directoryExists(path: <span class="string">"/Applications/Transporter.app"</span>) <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="type">Deps</span>.console.warn(<span class="string">"You need to install Transporter"</span>)</span><br><span class="line">            <span class="keyword">throw</span> <span class="type">PumaError</span>.invalid</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> <span class="type">CommandLine</span>().runBash(</span><br><span class="line">            workflow: workflow,</span><br><span class="line">            program: transportPath(),</span><br><span class="line">            arguments: arguments</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">transportPath</span><span class="params">()</span></span> <span class="keyword">throws</span> -&gt; <span class="type">String</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> <span class="type">Folder</span>.directoryExists(path: <span class="string">"/Applications/Transporter.app"</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"/Applications/Transporter.app/Contents/itms/bin/iTMSTransporter"</span></span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> <span class="type">Folder</span>.directoryExists(path: <span class="string">"/Applications/Xcode.app/Contents/Applications/Application Loader.app/"</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"/Applications/Xcode.app/Contents/Applications/Application Loader.app/Contents/MacOS/itms/bin/iTMSTransporter"</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="type">PumaError</span>.invalid</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Help"><a href="#Help" class="headerlink" title="Help"></a>Help</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">usage: iTMSTransporter [-help &lt;arg&gt; | -info | -m &lt;arg&gt; | -version]   [-o &lt;arg&gt;] [-v</span><br><span class="line">       &lt;arg&gt;]  [-WONoPause &lt;arg&gt;] [-Xmx4096m]</span><br><span class="line">iTMSTransporter : iTunes Store Transporter 2.0.0</span><br><span class="line"> -help &lt;arg&gt;        Show this help.  If a mode value is specified, show help specific</span><br><span class="line">                    to that mode.</span><br><span class="line"> -info              The -info option should be used by itself and returns the</span><br><span class="line">                    copyright notice and acknowledgements.</span><br><span class="line"> -m &lt;arg&gt;           The -m option specifies the tool&#39;s mode.  The valid values are:</span><br><span class="line">                    verify, upload, provider, diagnostic, lookupMetadata,</span><br><span class="line">                    createArtist, lookupArtist, status, statusAll,</span><br><span class="line">                    createMetadataTicket, queryTickets, generateSchema, transferTest,</span><br><span class="line">                    downloadMetadataGuides, listReports, requestReport</span><br><span class="line"> -o &lt;arg&gt;           The -o option specifies the directory and filename you want to use</span><br><span class="line">                    to log output information.  By default, Transporter logs output</span><br><span class="line">                    information to standard out. If you specify a filename,</span><br><span class="line">                    Transporter logs the output to the specified file, as well as to</span><br><span class="line">                    standard out.</span><br><span class="line"> -v &lt;arg&gt;           The -v option specifies the level of logging.  The five values</span><br><span class="line">                    are: off, detailed, informational, critical, eXtreme.</span><br><span class="line"> -version           The -version option should be used by itself and returns the</span><br><span class="line">                    version of the tool.</span><br><span class="line"> -WONoPause &lt;arg&gt;   The -WONoPause option is only valid on Windows and its value can</span><br><span class="line">                    be &#39;true&#39; or &#39;false&#39;.  If an error occurs during script execution,</span><br><span class="line">                    the process idles because the message &#39;Press any key...&#39; is</span><br><span class="line">                    displayed on the console and the system awaits a keypress. To</span><br><span class="line">                    avoid this behavior, set this property to true</span><br><span class="line"> -Xmx4096m          Specifies that you want to change the Java Virtual Machine&#39;s (JVM)</span><br><span class="line">                    allocated memory by increasing the JVM heap size.  By default,</span><br><span class="line">                    Transporter uses a 2048MB heap size. You can use the -Xmx4096m</span><br><span class="line">                    option to specify a 4-gigabyte (GB) heap size. Apple recommends,</span><br><span class="line">                    if needed, increasing the heap size to 4096MB by specifying the</span><br><span class="line">                    -Xmx4096m (or -Xmx4g) option and adjusting as needed.</span><br></pre></td></tr></table></figure>

<h2 id="Read-more"><a href="#Read-more" class="headerlink" title="Read more"></a>Read more</h2><ul>
<li><a href="https://bou.io/UploadingScreenshotsWithITMSTransporter.html">https://bou.io/UploadingScreenshotsWithITMSTransporter.html</a></li>
<li><a href="https://itunespartner.apple.com/en/movies/faq/Transporter_Getting%20Set%20Up">https://itunespartner.apple.com/en/movies/faq/Transporter_Getting%20Set%20Up</a></li>
<li><a href="https://gist.github.com/michaeltyson/0e82e24e5a3a7a42a6ad">https://gist.github.com/michaeltyson/0e82e24e5a3a7a42a6ad</a></li>
<li><a href="https://medium.com/ynap-tech/using-apples-itms-transporter-api-to-upload-builds-to-testflight-60dba18b07bc">https://medium.com/ynap-tech/using-apples-itms-transporter-api-to-upload-builds-to-testflight-60dba18b07bc</a></li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2020-01-01T12:22:12.000Z" title="2020-01-01T12:22:12.000Z">2020-01-01</time><span class="level-item">a few seconds read (About 46 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-use-Timer-and-RunLoop-in-Swift/">How to use Timer and RunLoop in Swift</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/562">#562</a></strong></p>
<h2 id="Run-Timer-in-command-line-application"><a href="#Run-Timer-in-command-line-application" class="headerlink" title="Run Timer in command line application"></a>Run Timer in command line application</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Timer</span>.scheduledTimer(withTimeInterval: seconds, repeats: <span class="literal">false</span>, block: &#123; <span class="number">_</span> <span class="keyword">in</span></span><br><span class="line">    completion(.success(()))</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="type">RunLoop</span>.current.run()</span><br></pre></td></tr></table></figure>

<h2 id="Read-more"><a href="#Read-more" class="headerlink" title="Read more"></a>Read more</h2><ul>
<li><a href="https://www.hackingwithswift.com/articles/117/the-ultimate-guide-to-timer">https://www.hackingwithswift.com/articles/117/the-ultimate-guide-to-timer</a></li>
<li><a href="https://learnappmaking.com/timer-swift-how-to/">https://learnappmaking.com/timer-swift-how-to/</a></li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-12-30T14:58:11.000Z" title="2019-12-30T14:58:11.000Z">2019-12-30</time><span class="level-item">a few seconds read (About 62 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-use-safeAreaInsets-in-iOS/">How to use safeAreaInsets in iOS</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/561">#561</a></strong></p>
<h2 id="Read-more"><a href="#Read-more" class="headerlink" title="Read more"></a>Read more</h2><ul>
<li><a href="https://medium.com/rosberryapps/ios-safe-area-ca10e919526f">https://medium.com/rosberryapps/ios-safe-area-ca10e919526f</a></li>
<li><a href="https://blog.smartnsoft.com/layout-guide-margins-insets-and-safe-area-demystified-on-ios-10-11-d6e7246d7cb8">https://blog.smartnsoft.com/layout-guide-margins-insets-and-safe-area-demystified-on-ios-10-11-d6e7246d7cb8</a></li>
<li><a href="https://www.matrixprojects.net/p/safe-area-insets/">https://www.matrixprojects.net/p/safe-area-insets/</a></li>
<li><a href="https://stackoverflow.com/questions/37796884/on-ios-what-are-the-differences-between-margins-edge-insets-content-insets-a/47614397">https://stackoverflow.com/questions/37796884/on-ios-what-are-the-differences-between-margins-edge-insets-content-insets-a/47614397</a></li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-12-30T09:46:38.000Z" title="2019-12-30T09:46:38.000Z">2019-12-30</time><span class="level-item">3 minutes read (About 409 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-send-message-from-bot-to-Slack-in-Swift/">How to send message from bot to Slack in Swift</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/560">#560</a></strong></p>
<h2 id="Create-a-bot"><a href="#Create-a-bot" class="headerlink" title="Create a bot"></a>Create a bot</h2><ul>
<li><a href="https://slack.com/intl/en-no/help/articles/115005265703-create-a-bot-for-your-workspace">https://slack.com/intl/en-no/help/articles/115005265703-create-a-bot-for-your-workspace</a></li>
<li><a href="https://api.slack.com/bot-users#setup-events-api">https://api.slack.com/bot-users#setup-events-api</a></li>
<li><a href="https://api.slack.com/bot-users#installing-bot">https://api.slack.com/bot-users#installing-bot</a></li>
</ul>
<h2 id="Post-message"><a href="#Post-message" class="headerlink" title="Post message"></a>Post message</h2><p>After adding bot to workspace, we’ll get OAuth Access Token and Bot User OAuth Access Token. Use Bot User OAuth Access Token to test drive bot message sending</p>
<p><a href="https://api.slack.com/methods/chat.postMessage/test">https://api.slack.com/methods/chat.postMessage/test</a></p>
<p>The request url is like</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:&#x2F;&#x2F;slack.com&#x2F;api&#x2F;chat.postMessage?token&#x3D;xoxb-7212342835698-890815481123-abcdGgDEFfm2joQs1Vj5mABC&amp;channel&#x3D;random&amp;text&#x3D;hello&amp;pretty&#x3D;1</span><br></pre></td></tr></table></figure>

<p>Code from <a href="https://github.com/pumaswift/Puma">Puma</a></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Foundation</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Slack</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">var</span> name: <span class="type">String</span> = <span class="string">"Send message to Slack"</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">var</span> isEnabled = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> message: <span class="type">Message?</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">init</span>(<span class="number">_</span> closure: (<span class="type">Slack</span>) -&gt; <span class="type">Void</span> = &#123; <span class="number">_</span> <span class="keyword">in</span> &#125;) &#123;</span><br><span class="line">        closure(<span class="keyword">self</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">extension</span> <span class="title">Slack</span> </span>&#123;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">Message</span> </span>&#123;</span><br><span class="line">        <span class="keyword">let</span> token: <span class="type">String</span></span><br><span class="line">        <span class="keyword">let</span> channel: <span class="type">String</span></span><br><span class="line">        <span class="keyword">let</span> text: <span class="type">String</span></span><br><span class="line">        <span class="keyword">let</span> username: <span class="type">String?</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">init</span>(</span><br><span class="line">            token: <span class="type">String</span>,</span><br><span class="line">            channel: <span class="type">String</span>,</span><br><span class="line">            text: <span class="type">String</span>,</span><br><span class="line">            username: <span class="type">String</span></span><br><span class="line">        ) &#123;</span><br><span class="line">            <span class="keyword">self</span>.token = token</span><br><span class="line">            <span class="keyword">self</span>.channel = channel</span><br><span class="line">            <span class="keyword">self</span>.text = text</span><br><span class="line">            <span class="keyword">self</span>.username = username</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">post</span><span class="params">(message: Message)</span></span> &#123;</span><br><span class="line">        <span class="keyword">self</span>.message = message</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Slack</span>: <span class="title">Task</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">run</span><span class="params">(workflow: Workflow, completion: @escaping TaskCompletion)</span></span> &#123;</span><br><span class="line">        <span class="keyword">guard</span> <span class="keyword">let</span> message = message <span class="keyword">else</span> &#123;</span><br><span class="line">            completion(.failure(<span class="type">PumaError</span>.invalid))</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> sender = <span class="type">MessageSender</span>()</span><br><span class="line">        sender.send(message: message, completion: &#123; result <span class="keyword">in</span></span><br><span class="line">            <span class="keyword">switch</span> result &#123;</span><br><span class="line">            <span class="keyword">case</span> .success:</span><br><span class="line">                <span class="type">Deps</span>.console.success(<span class="string">"Message posted successfully"</span>)</span><br><span class="line">            <span class="keyword">case</span> .failure(<span class="keyword">let</span> error):</span><br><span class="line">                <span class="type">Deps</span>.console.error(<span class="string">"Failed: \(error.localizedDescription)"</span>)</span><br><span class="line">            &#125;</span><br><span class="line">            completion(result)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">MessageSender</span> </span>&#123;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">Response</span>: <span class="title">Decodable</span> </span>&#123;</span><br><span class="line">        <span class="keyword">let</span> ok: <span class="type">Bool</span></span><br><span class="line">        <span class="keyword">let</span> error: <span class="type">String?</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">send</span><span class="params">(message: Slack.Message, completion: @escaping <span class="params">(Result&lt;<span class="params">()</span></span></span></span>, <span class="type">Error</span>&gt;) -&gt; <span class="type">Void</span>) &#123;</span><br><span class="line">        <span class="keyword">guard</span> <span class="keyword">let</span> baseUrl = <span class="type">URL</span>(string: <span class="string">"https://slack.com/api/chat.postMessage"</span>) <span class="keyword">else</span> &#123;</span><br><span class="line">            completion(.failure(<span class="type">PumaError</span>.invalid))</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> components = <span class="type">URLComponents</span>(url: baseUrl, resolvingAgainstBaseURL: <span class="literal">false</span>)</span><br><span class="line">        components?.queryItems = [</span><br><span class="line">            <span class="type">URLQueryItem</span>(name: <span class="string">"token"</span>, value: message.token),</span><br><span class="line">            <span class="type">URLQueryItem</span>(name: <span class="string">"channel"</span>, value: message.channel),</span><br><span class="line">            <span class="type">URLQueryItem</span>(name: <span class="string">"text"</span>, value: message.text),</span><br><span class="line">            <span class="type">URLQueryItem</span>(name: <span class="string">"pretty"</span>, value: <span class="string">"1"</span>)</span><br><span class="line">        ]</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">let</span> username = message.username &#123;</span><br><span class="line">            components?.queryItems?.append(</span><br><span class="line">                <span class="type">URLQueryItem</span>(name: <span class="string">"username"</span>, value: username)</span><br><span class="line">            )</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">guard</span> <span class="keyword">let</span> requestUrl = components?.url <span class="keyword">else</span> &#123;</span><br><span class="line">            completion(.failure(<span class="type">PumaError</span>.invalid))</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> request = <span class="type">URLRequest</span>(url: requestUrl)</span><br><span class="line">        request.allHTTPHeaderFields = [</span><br><span class="line">            <span class="string">"Accept"</span>: <span class="string">"application/json"</span></span><br><span class="line">        ]</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> task = <span class="type">URLSession</span>.shared.dataTask(with: request, completionHandler: &#123; data, response, error <span class="keyword">in</span></span><br><span class="line">            <span class="keyword">guard</span> <span class="keyword">let</span> data = data <span class="keyword">else</span> &#123;</span><br><span class="line">                completion(.failure(error ?? <span class="type">PumaError</span>.invalid))</span><br><span class="line">                <span class="keyword">return</span></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">do</span> &#123;</span><br><span class="line">                <span class="keyword">let</span> response = <span class="keyword">try</span> <span class="type">JSONDecoder</span>().decode(<span class="type">Response</span>.<span class="keyword">self</span>, from: data)</span><br><span class="line">                <span class="keyword">if</span> response.ok &#123;</span><br><span class="line">                    completion(.success(()))</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    completion(.failure(<span class="type">PumaError</span>.from(string: response.error)))</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> &#123;</span><br><span class="line">                completion(.failure(error))</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">        task.resume()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Read-more"><a href="#Read-more" class="headerlink" title="Read more"></a>Read more</h2><ul>
<li><a href="https://github.com/onmyway133/slackbot-yoda">slackbot-yoda</a> Slack bot in Nodejs</li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-12-28T21:46:06.000Z" title="2019-12-28T21:46:06.000Z">2019-12-28</time><span class="level-item">2 minutes read (About 247 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-parse-xcrun-simctl-devices/">How to parse xcrun simctl devices</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/559">#559</a></strong></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GetDestinations</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">init</span>() &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">getAvailable</span><span class="params">(workflow: Workflow)</span></span> <span class="keyword">throws</span> -&gt; [<span class="type">Destination</span>] &#123;</span><br><span class="line">        <span class="keyword">let</span> processHandler = <span class="type">DefaultProcessHandler</span>(<span class="built_in">filter</span>: &#123; $<span class="number">0</span>.starts(with: <span class="string">"name="</span>) &#125;)</span><br><span class="line">        <span class="keyword">let</span> string = <span class="keyword">try</span> <span class="type">CommandLine</span>().runBash(</span><br><span class="line">            workflow: workflow,</span><br><span class="line">            program: <span class="string">"xcrun simctl"</span>,</span><br><span class="line">            arguments: [</span><br><span class="line">                <span class="string">"list"</span>,</span><br><span class="line">                <span class="string">"devices"</span>,</span><br><span class="line">                <span class="string">"-j"</span></span><br><span class="line">            ],</span><br><span class="line">            processHandler: processHandler</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">        <span class="keyword">guard</span> <span class="keyword">let</span> data = string.data(using: .utf8) <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="type">PumaError</span>.invalid</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> response: <span class="type">Response</span> = <span class="keyword">try</span> <span class="type">JSONDecoder</span>().decode(<span class="type">Response</span>.<span class="keyword">self</span>, from: data)</span><br><span class="line">        <span class="keyword">let</span> devicesWithOS: [<span class="type">DeviceWithOS</span>] = response.devices.flatMap(&#123; key, value <span class="keyword">in</span></span><br><span class="line">            <span class="keyword">return</span> value.<span class="built_in">map</span>(&#123; <span class="type">DeviceWithOS</span>(device: $<span class="number">0</span>, os: key) &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> destinations: [<span class="type">Destination</span>] = <span class="keyword">try</span> devicesWithOS</span><br><span class="line">            .<span class="built_in">filter</span>(&#123; withOS <span class="keyword">in</span></span><br><span class="line">                <span class="keyword">return</span> withOS.device.isAvailable</span><br><span class="line">            &#125;)</span><br><span class="line">            .compactMap(&#123; withOS <span class="keyword">in</span></span><br><span class="line">                <span class="keyword">guard</span></span><br><span class="line">                    <span class="keyword">let</span> platform = <span class="keyword">self</span>.platform(withOS: withOS),</span><br><span class="line">                    <span class="keyword">let</span> os = <span class="keyword">try</span> <span class="keyword">self</span>.os(withOS: withOS)</span><br><span class="line">                <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="keyword">return</span>  <span class="literal">nil</span></span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">var</span> destination = <span class="type">Destination</span>(</span><br><span class="line">                    name: withOS.device.name,</span><br><span class="line">                    platform: platform,</span><br><span class="line">                    os: os</span><br><span class="line">                )</span><br><span class="line">                destination.id = withOS.device.udid</span><br><span class="line">                <span class="keyword">return</span> destination</span><br><span class="line">            &#125;)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> destinations</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">findId</span><span class="params">(workflow: Workflow, destination: Destination)</span></span> <span class="keyword">throws</span> -&gt; <span class="type">String?</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> availableDestinations = <span class="keyword">try</span> <span class="keyword">self</span>.getAvailable(workflow: workflow)</span><br><span class="line">        <span class="keyword">return</span> availableDestinations.first(<span class="keyword">where</span>: &#123; $<span class="number">0</span> == destination &#125;)?.id</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// MARK: - Private</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">platform</span><span class="params">(withOS: DeviceWithOS)</span></span> -&gt; <span class="type">String?</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> list: [<span class="type">String</span>] = [</span><br><span class="line">            <span class="type">Destination</span>.<span class="type">Platform</span>.iOS,</span><br><span class="line">            <span class="type">Destination</span>.<span class="type">Platform</span>.watchOS,</span><br><span class="line">            <span class="type">Destination</span>.<span class="type">Platform</span>.macOS,</span><br><span class="line">            <span class="type">Destination</span>.<span class="type">Platform</span>.tvOS,</span><br><span class="line">        ]</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> list.first(<span class="keyword">where</span>: &#123; withOS.os.<span class="built_in">contains</span>($<span class="number">0</span>) &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// com.apple.CoreSimulator.SimRuntime.iOS-13-2</span></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">os</span><span class="params">(withOS: DeviceWithOS)</span></span> <span class="keyword">throws</span> -&gt; <span class="type">String?</span> &#123;</span><br><span class="line">        <span class="keyword">guard</span> <span class="keyword">let</span> string = <span class="keyword">try</span> withOS.os.matches(pattern: #<span class="string">"(-\d+)+"</span>#).first <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> string.<span class="built_in">dropFirst</span>().replacingOccurrences(of: <span class="string">"-"</span>, with: <span class="string">"."</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="class"><span class="keyword">struct</span> <span class="title">Response</span>: <span class="title">Decodable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> devices: [<span class="type">String</span>: [<span class="type">Device</span>]]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="class"><span class="keyword">struct</span> <span class="title">Device</span>: <span class="title">Decodable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> state: <span class="type">String</span></span><br><span class="line">    <span class="keyword">let</span> name: <span class="type">String</span></span><br><span class="line">    <span class="keyword">let</span> udid: <span class="type">String</span></span><br><span class="line">    <span class="keyword">let</span> isAvailable: <span class="type">Bool</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="class"><span class="keyword">struct</span> <span class="title">DeviceWithOS</span> </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> device: <span class="type">Device</span></span><br><span class="line">    <span class="keyword">let</span> os: <span class="type">String</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-12-28T21:14:30.000Z" title="2019-12-28T21:14:30.000Z">2019-12-28</time><span class="level-item">2 minutes read (About 235 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-parse-xcrun-instruments-devices/">How to parse xcrun instruments devices</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/558">#558</a></strong></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GetDestinations</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">init</span>() &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">getAvailable</span><span class="params">(workflow: Workflow)</span></span> <span class="keyword">throws</span> -&gt; [<span class="type">Destination</span>] &#123;</span><br><span class="line">        <span class="keyword">let</span> processHandler = <span class="type">DefaultProcessHandler</span>(<span class="built_in">filter</span>: &#123; $<span class="number">0</span>.starts(with: <span class="string">"name="</span>) &#125;)</span><br><span class="line">        <span class="keyword">let</span> string = <span class="keyword">try</span> <span class="type">CommandLine</span>().runBash(</span><br><span class="line">            workflow: workflow,</span><br><span class="line">            program: <span class="string">"xcrun instruments"</span>,</span><br><span class="line">            arguments: [</span><br><span class="line">                <span class="string">"-s"</span>,</span><br><span class="line">                <span class="string">"devices"</span></span><br><span class="line">            ],</span><br><span class="line">            processHandler: processHandler</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Ex: iPad Air (11.0.1) [7A5EAD29-D870-49FB-9A9B-C81079620AC9] (Simulator)</span></span><br><span class="line">        <span class="keyword">let</span> destinations: [<span class="type">Destination</span>] = <span class="keyword">try</span> string</span><br><span class="line">            .<span class="built_in">split</span>(separator: <span class="string">"\n"</span>)</span><br><span class="line">            .<span class="built_in">map</span>(&#123; <span class="type">String</span>($<span class="number">0</span>) &#125;)</span><br><span class="line">            .<span class="built_in">filter</span>(&#123; <span class="keyword">try</span> $<span class="number">0</span>.hasPattern(pattern: #<span class="string">"\[.+\]"</span>#) &#125;)</span><br><span class="line">            .compactMap(&#123; (line) -&gt; <span class="type">Destination?</span> <span class="keyword">in</span></span><br><span class="line">                parse(line)</span><br><span class="line">            &#125;)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> destinations</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">parse</span><span class="params">(<span class="number">_</span> line: String)</span></span> -&gt; <span class="type">Destination?</span> &#123;</span><br><span class="line">        <span class="keyword">guard</span> <span class="keyword">var</span> id = <span class="keyword">try</span>? line.matches(pattern: #<span class="string">"\[.+\]"</span>#).first <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> line = line</span><br><span class="line">        line = line.replacingOccurrences(of: id, with: <span class="string">""</span>)</span><br><span class="line">        id = id</span><br><span class="line">            .replacingOccurrences(of: <span class="string">"["</span>, with: <span class="string">""</span>)</span><br><span class="line">            .replacingOccurrences(of: <span class="string">"]"</span>, with: <span class="string">""</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> isSimulator = line.<span class="built_in">contains</span>(<span class="string">"(Simulator)"</span>)</span><br><span class="line">        line = line.replacingOccurrences(of: <span class="string">"(Simulator)"</span>, with: <span class="string">""</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> os = (<span class="keyword">try</span>? line.matches(pattern: #<span class="string">"\((\d+\.)?(\d+\.)?(\*|\d+)\)"</span>#).first) ?? <span class="string">""</span></span><br><span class="line">        <span class="keyword">let</span> name = line</span><br><span class="line">            .replacingOccurrences(of: os, with: <span class="string">""</span>)</span><br><span class="line">            .trimmingCharacters(<span class="keyword">in</span>: .whitespacesAndNewlines)</span><br><span class="line"></span><br><span class="line">        os = os.replacingOccurrences(of: <span class="string">"("</span>, with: <span class="string">""</span>)</span><br><span class="line">            .replacingOccurrences(of: <span class="string">")"</span>, with: <span class="string">""</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> device = <span class="keyword">self</span>.device(name: name)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> os.isEmpty &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="type">Destination</span>(name: name, id: id)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">let</span> platform = isSimulator ? <span class="string">"\(device) Simulator"</span> : device</span><br><span class="line">            <span class="keyword">return</span> <span class="type">Destination</span>(name: name, platform: platform, os: os)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// MARK: - Private</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">device</span><span class="params">(name: String)</span></span> -&gt; <span class="type">String</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> name.starts(with: <span class="string">"iPad"</span>) || name.starts(with: <span class="string">"iPhone"</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="type">Destination</span>.<span class="type">Platform</span>.iOS</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> name.starts(with: <span class="string">"Apple Watch"</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="type">Destination</span>.<span class="type">Platform</span>.watchOS</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> name.starts(with: <span class="string">"Apple TV"</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="type">Destination</span>.<span class="type">Platform</span>.tvOS</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> name.containsIgnoringCase(<span class="string">"mac"</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="type">Destination</span>.<span class="type">Platform</span>.macOS</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="type">Destination</span>.<span class="type">Platform</span>.iOS</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-12-28T20:05:35.000Z" title="2019-12-28T20:05:35.000Z">2019-12-28</time><span class="level-item">a few seconds read (About 31 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-use-test-environment-variables-with-shared-scheme-in-Xcode/">How to use test environment variables with shared scheme in Xcode</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/557">#557</a></strong></p>
<p>Use <code>ProcessInfo</code> to access environment variables.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">ProcessInfo</span>().environment[<span class="string">"username"</span>]</span><br></pre></td></tr></table></figure>

<p>Duplicate main shared scheme TestApp to TestAppWithCredentials, but don’t share this TestAppWithCredentials scheme</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-12-27T22:46:10.000Z" title="2019-12-27T22:46:10.000Z">2019-12-27</time><span class="level-item">2 minutes read (About 237 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-generate-xml-in-Swift/">How to generate xml in Swift</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/556">#556</a></strong></p>
<p>Instead of learning <a href="https://developer.apple.com/documentation/foundation/xmlparser">XMLParser</a>, we can make a lightweight version</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Foundation</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">protocol</span> <span class="title">XmlItem</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">toLines</span><span class="params">()</span></span> -&gt; [<span class="type">String</span>]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">struct</span> <span class="title">XmlString</span>: <span class="title">XmlItem</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">let</span> key: <span class="type">String</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">let</span> value: <span class="type">String</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">init</span>(key: <span class="type">String</span>, value: <span class="type">String</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.key = key</span><br><span class="line">        <span class="keyword">self</span>.value = value</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">toLines</span><span class="params">()</span></span> -&gt; [<span class="type">String</span>] &#123;</span><br><span class="line">        <span class="keyword">return</span> [</span><br><span class="line">            <span class="string">"&lt;key&gt;\(key)&lt;/key&gt;"</span>,</span><br><span class="line">            <span class="string">"&lt;string&gt;\(value)&lt;/string&gt;"</span></span><br><span class="line">        ] <span class="keyword">as</span> [<span class="type">String</span>]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">struct</span> <span class="title">XmlBool</span>: <span class="title">XmlItem</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">let</span> key: <span class="type">String</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">let</span> value: <span class="type">Bool</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">init</span>(key: <span class="type">String</span>, value: <span class="type">Bool</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.key = key</span><br><span class="line">        <span class="keyword">self</span>.value = value</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">toLines</span><span class="params">()</span></span> -&gt; [<span class="type">String</span>] &#123;</span><br><span class="line">        <span class="keyword">let</span> string = value ? <span class="string">"&lt;true/&gt;"</span> : <span class="string">"&lt;false/&gt;"</span></span><br><span class="line">        <span class="keyword">return</span> [</span><br><span class="line">            <span class="string">"&lt;key&gt;\(key)&lt;/key&gt;"</span>,</span><br><span class="line">            <span class="string">"\(string)"</span></span><br><span class="line">        ] <span class="keyword">as</span> [<span class="type">String</span>]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">struct</span> <span class="title">XmlDict</span>: <span class="title">XmlItem</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">let</span> key: <span class="type">String</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">let</span> items: [<span class="type">XmlItem</span>]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">init</span>(key: <span class="type">String</span>, items: [<span class="type">XmlItem</span>]) &#123;</span><br><span class="line">        <span class="keyword">self</span>.key = key</span><br><span class="line">        <span class="keyword">self</span>.items = items</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">toLines</span><span class="params">()</span></span> -&gt; [<span class="type">String</span>] &#123;</span><br><span class="line">        <span class="keyword">var</span> lines = [<span class="type">String</span>]()</span><br><span class="line">        lines.append(<span class="string">"&lt;dict&gt;"</span>)</span><br><span class="line">        lines.append(contentsOf: items.flatMap(&#123; $<span class="number">0</span>.toLines() &#125;))</span><br><span class="line">        lines.append(<span class="string">"&lt;/dict&gt;"</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> lines</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">XmlGenerator</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">init</span>() &#123;&#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">generateXml</span><span class="params">(<span class="number">_</span> items: [XmlItem])</span></span> -&gt; <span class="type">String</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> content = items.flatMap(&#123; $<span class="number">0</span>.toLines() &#125;).joined(separator: <span class="string">"\n"</span>)</span><br><span class="line">        <span class="keyword">let</span> xml =</span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        &lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="string">        &lt;!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd"&gt;</span></span><br><span class="line"><span class="string">        &lt;plist version="1.0"&gt;</span></span><br><span class="line"><span class="string">        &lt;dict&gt;</span></span><br><span class="line"><span class="string">        \(content)</span></span><br><span class="line"><span class="string">        &lt;/dict&gt;</span></span><br><span class="line"><span class="string">        &lt;/plist&gt;</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="keyword">return</span> xml</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">xmlItems</span><span class="params">(dictionary: [String: <span class="keyword">Any</span>])</span></span> -&gt; [<span class="type">XmlItem</span>] &#123;</span><br><span class="line">        <span class="keyword">return</span> dictionary.flatMap(&#123; (key, value) -&gt; [<span class="type">XmlItem</span>] <span class="keyword">in</span></span><br><span class="line">            <span class="keyword">switch</span> value &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="keyword">let</span> string <span class="keyword">as</span> <span class="type">String</span>:</span><br><span class="line">                <span class="keyword">return</span> [<span class="type">XmlString</span>(key: key, value: string)]</span><br><span class="line">            <span class="keyword">case</span> <span class="keyword">let</span> bool <span class="keyword">as</span> <span class="type">Bool</span>:</span><br><span class="line">                <span class="keyword">return</span> [<span class="type">XmlBool</span>(key: key, value: bool)]</span><br><span class="line">            <span class="keyword">case</span> <span class="keyword">let</span> nestedDictionary <span class="keyword">as</span> [<span class="type">String</span>: <span class="type">Any</span>]:</span><br><span class="line">                <span class="keyword">return</span> xmlItems(dictionary: nestedDictionary)</span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">                <span class="keyword">return</span> []</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-12-23T07:40:41.000Z" title="2019-12-23T07:40:41.000Z">2019-12-23</time><span class="level-item">2 minutes read (About 225 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-use-synthetic-property-in-Kotlin-Android-Extension/">How to use synthetic property in Kotlin Android Extension</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/555">#555</a></strong></p>
<p>Synthetic properties generated by <a href="https://kotlinlang.org/docs/tutorials/android-plugin.html">Kotlin Android Extensions plugin</a> needs a <code>view</code> for <code>Fragment/Activity</code> to be set before hand.</p>
<p>In your case, for <code>Fragment</code>, you need to use <code>view.btn_K</code> in <code>onViewCreated</code></p>
<pre><code>override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?): View? {
    super.onCreateView(inflater, container, savedInstanceState)
    val view = inflater.inflate(R.layout.fragment_card_selector, container, false)
    view.btn_K.setOnClickListener{} // access with `view`
    return view
}</code></pre><p>Or better, you should only access synthetic properties in <code>onViewCreated</code></p>
<pre><code>override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?): View? {
    super.onCreateView(inflater, container, savedInstanceState)
    return inflater.inflate(R.layout.fragment_card_selector, container, false)
}

override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
    super.onViewCreated(view, savedInstanceState)
    btn_K.setOnClickListener{} // access without `view`
}</code></pre><p>Please notice that <code>savedInstanceState</code> parameter should be nullable <code>Bundle?</code>, and also check <a href="https://kotlinlang.org/docs/tutorials/android-plugin.html">Importing synthetic properties</a></p>
<blockquote>
<p>It is convenient to import all widget properties for a specific layout<br>in one go:</p>
<p><code>import kotlinx.android.synthetic.main.&lt;layout&gt;.*</code></p>
<p>Thus if the layout filename is activity_main.xml, we’d import<br><code>kotlinx.android.synthetic.main.activity_main.*.</code></p>
<p>If we want to call the synthetic properties on View, we should also<br>import <code>kotlinx.android.synthetic.main.activity_main.view.*.</code></p>
</blockquote>
<h2 id="Read-more"><a href="#Read-more" class="headerlink" title="Read more"></a>Read more</h2><ul>
<li><a href="https://stackoverflow.com/questions/34541650/nullpointerexception-when-trying-to-access-views-in-a-kotlin-fragment/51674381#51674381">https://stackoverflow.com/questions/34541650/nullpointerexception-when-trying-to-access-views-in-a-kotlin-fragment/51674381#51674381</a></li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-12-22T22:13:00.000Z" title="2019-12-22T22:13:00.000Z">2019-12-22</time><span class="level-item">a minute read (About 201 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-use-KVO-in-Swift/">How to use KVO in Swift</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/554">#554</a></strong></p>
<p>A class must inherit from <code>NSObject</code>, and we have 3 ways to trigger property change</p>
<p>Use <code>setValue(value: AnyObject?, forKey key: String)</code> from <code>NSKeyValueCoding</code></p>
<pre><code>class MyObjectToObserve: NSObject {
    var myDate = NSDate()
    func updateDate() {
        setValue(NSDate(), forKey: &quot;myDate&quot;)
    }
}</code></pre><p>Use <code>willChangeValueForKey</code> and <code>didChangeValueForKey</code> from <code>NSKeyValueObserving</code></p>
<pre><code>class MyObjectToObserve: NSObject {
    var myDate = NSDate()
    func updateDate() {
        willChangeValueForKey(&quot;myDate&quot;)
        myDate = NSDate()
        didChangeValueForKey(&quot;myDate&quot;)
    }
}</code></pre><p>Use <code>dynamic</code>. See <a href="https://developer.apple.com/library/ios/documentation/Swift/Conceptual/BuildingCocoaApps/InteractingWithObjective-CAPIs.html#//apple_ref/doc/uid/TP40014216-CH4-ID57">Swift Type Compatibility</a></p>
<blockquote>
<p>You can also use the dynamic modifier to require that access to members be dynamically dispatched through the Objective-C runtime if you’re using APIs like key–value observing that dynamically replace the implementation of a method.</p>
</blockquote>
<pre><code>class MyObjectToObserve: NSObject {
    dynamic var myDate = NSDate()
    func updateDate() {
        myDate = NSDate()
    }
}</code></pre><p>And property getter and setter is called when used. You can verify when working with KVO. This is an example of computed property</p>
<pre><code>class MyObjectToObserve: NSObject {
    var backing: NSDate = NSDate()
    dynamic var myDate: NSDate {
        set {
            print(&quot;setter is called&quot;)
            backing = newValue
        }
        get {
            print(&quot;getter is called&quot;)
            return backing
        }
    }
}</code></pre><h2 id="Read-more"><a href="#Read-more" class="headerlink" title="Read more"></a>Read more</h2><ul>
<li><a href="https://stackoverflow.com/questions/24092285/is-key-value-observation-kvo-available-in-swift/34873979#34873979">https://stackoverflow.com/questions/24092285/is-key-value-observation-kvo-available-in-swift/34873979#34873979</a></li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-12-22T22:07:16.000Z" title="2019-12-22T22:07:16.000Z">2019-12-22</time><span class="level-item">a few seconds read (About 91 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-use-precondition-and-assert-in-Swift/">How to use precondition and assert in Swift</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/553">#553</a></strong></p>
<p>Read <a href="http://blog.krzyzanowskim.com/2015/03/09/swift-asserts-the-missing-manual/">Swift asserts - the missing manual</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">                        debug	release	  release</span><br><span class="line">function	            -Onone	-O	     -Ounchecked</span><br><span class="line">assert()	            YES	    NO	      NO</span><br><span class="line">assertionFailure()	    YES	    NO	      NO**</span><br><span class="line">precondition()	        YES	    YES	      NO</span><br><span class="line">preconditionFailure()	YES	    YES	      YES**</span><br><span class="line">fatalError()*	        YES	    YES	      YES</span><br></pre></td></tr></table></figure>

<p>And from <a href="http://ericasadun.com/2015/12/15/interesting-discussions-on-swift-evolution/">Interesting discussions on Swift Evolution</a></p>
<blockquote>
<p>– assert: checking your own code for internal errors</p>
<p>– precondition: for checking that your clients have given you valid arguments.</p>
</blockquote>
<h2 id="Read-more"><a href="#Read-more" class="headerlink" title="Read more"></a>Read more</h2><ul>
<li><a href="https://stackoverflow.com/a/34379407/1418457">https://stackoverflow.com/a/34379407/1418457</a></li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-12-22T22:05:47.000Z" title="2019-12-22T22:05:47.000Z">2019-12-22</time><span class="level-item">a few seconds read (About 78 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-get-ISO-string-from-date-in-Javascript/">How to get ISO string from date in Javascript</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/552">#552</a></strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">type Components = &#123;</span><br><span class="line">  day: number,</span><br><span class="line">  month: number,</span><br><span class="line">  year: number</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">DateFormatter</span> </span>&#123;</span><br><span class="line">  <span class="comment">// 2018-11-11T00:00:00</span></span><br><span class="line">  <span class="keyword">static</span> ISOStringWithoutTimeZone = (date: <span class="built_in">Date</span>): <span class="function"><span class="params">string</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> components = DateFormatter.format(DateFormatter.components(date))</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;components.year&#125;</span>-<span class="subst">$&#123;components.month&#125;</span>-<span class="subst">$&#123;components.day&#125;</span>T00:00:00`</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">static</span> format = <span class="function">(<span class="params">components: Components</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      day: <span class="string">`<span class="subst">$&#123;components.day&#125;</span>`</span>.padStart(<span class="number">2</span>, <span class="string">'0'</span>),</span><br><span class="line">      month: <span class="string">`<span class="subst">$&#123;components.month&#125;</span>`</span>.padStart(<span class="number">2</span>, <span class="string">'0'</span>),</span><br><span class="line">      year: components.year</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">static</span> components = (date: <span class="built_in">Date</span>): <span class="function"><span class="params">Components</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      day: date.getDate(),</span><br><span class="line">      month: date.getMonth() + <span class="number">1</span>,</span><br><span class="line">      year: date.getFullYear()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Read-more"><a href="#Read-more" class="headerlink" title="Read more"></a>Read more</h2><ul>
<li><a href="https://stackoverflow.com/a/53298976/1418457">https://stackoverflow.com/a/53298976/1418457</a></li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-12-20T21:36:22.000Z" title="2019-12-20T21:36:22.000Z">2019-12-20</time><span class="level-item">a minute read (About 209 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-use-regular-expression-in-Swift/">How to use regular expression in Swift</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/551">#551</a></strong></p>
<h2 id="Find-matches"><a href="#Find-matches" class="headerlink" title="Find matches"></a>Find matches</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Foundation</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">extension</span> <span class="title">String</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">matches</span><span class="params">(pattern: String)</span></span> <span class="keyword">throws</span> -&gt; [<span class="type">String</span>] &#123;</span><br><span class="line">        <span class="keyword">let</span> regex = <span class="keyword">try</span> <span class="type">NSRegularExpression</span>(pattern: pattern)</span><br><span class="line">        <span class="keyword">let</span> results = regex.matches(<span class="keyword">in</span>: <span class="keyword">self</span>, options: [], range: <span class="type">NSRange</span>(<span class="keyword">self</span>.startIndex..., <span class="keyword">in</span>: <span class="keyword">self</span>))</span><br><span class="line">        <span class="keyword">return</span> results.compactMap(&#123; result <span class="keyword">in</span></span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">let</span> range = <span class="type">Range</span>(result.range, <span class="keyword">in</span>: <span class="keyword">self</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="type">String</span>(<span class="keyword">self</span>[range])</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">hasPattern</span><span class="params">(pattern: String)</span></span> <span class="keyword">throws</span> -&gt; <span class="type">Bool</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">try</span> !matches(pattern: pattern).isEmpty</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">testRegex</span><span class="params">()</span></span> <span class="keyword">throws</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> string = <span class="string">"iPad Air (11.0.1) [7A5EAD29-D870-49FB-9A9B-C81079620AC9] (Simulator)"</span></span><br><span class="line">    <span class="keyword">let</span> matches = <span class="keyword">try</span> string.matches(pattern: #<span class="string">"\[.+\]"</span>#)</span><br><span class="line">    <span class="type">XCTAssertEqual</span>(matches.first, <span class="string">"[7A5EAD29-D870-49FB-9A9B-C81079620AC9]"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Range-and-NSRange"><a href="#Range-and-NSRange" class="headerlink" title="Range and NSRange"></a>Range and NSRange</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> string: <span class="type">String</span></span><br><span class="line"><span class="keyword">let</span> nsRange: <span class="type">NSRange</span> = <span class="type">NSRange</span>(string.startIndex..., <span class="keyword">in</span>: string)</span><br></pre></td></tr></table></figure>

<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> string: <span class="type">String</span></span><br><span class="line"><span class="keyword">let</span> nsRange: <span class="type">NSRange</span></span><br><span class="line"><span class="keyword">let</span> range: <span class="type">Range</span> = <span class="type">Range</span>(nsRange, <span class="keyword">in</span>: string)</span><br><span class="line"><span class="keyword">let</span> substring: <span class="type">Substring</span> = string[range]</span><br></pre></td></tr></table></figure>

<h2 id="Common-expression"><a href="#Common-expression" class="headerlink" title="Common expression"></a>Common expression</h2><h3 id="Version"><a href="#Version" class="headerlink" title="Version"></a>Version</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#<span class="string">"\((\d+\.)?(\d+\.)?(\*|\d+)\)"</span>#</span><br><span class="line"></span><br><span class="line">(<span class="number">11.0</span>.<span class="number">1</span>)</span><br></pre></td></tr></table></figure>

<h2 id="Read-more"><a href="#Read-more" class="headerlink" title="Read more"></a>Read more</h2><ul>
<li><a href="https://nshipster.com/swift-regular-expressions/">NSHipster Swift Regular Expression</a></li>
<li><a href="https://www.hackingwithswift.com/example-code/language/how-to-convert-an-nsrange-to-a-swift-string-index">How to convert an NSRange to a Swift string index</a></li>
<li><a href="https://regex101.com/">Regex 101</a></li>
<li><a href="https://whatdidilearn.info/2018/07/29/how-to-capture-regex-group-values-in-swift.html">How to capture Regex group values in Swift</a></li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-12-20T14:08:25.000Z" title="2019-12-20T14:08:25.000Z">2019-12-20</time><span class="level-item">a few seconds read (About 14 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/Why-is-didSelectItem-not-called-in-UICollectionView/">Why is didSelectItem not called in UICollectionView</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/550">#550</a></strong></p>
<h2 id="Check"><a href="#Check" class="headerlink" title="Check"></a>Check</h2><ul>
<li>shouldHighlightItem -&gt; shouldSelectItem -&gt; didSelectItem</li>
<li>Gesture recognizer</li>
<li>isUserInteractionEnabled</li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-12-18T22:01:36.000Z" title="2019-12-18T22:01:36.000Z">2019-12-18</time><span class="level-item">a few seconds read (About 106 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-keep-command-line-tool-running-with-async-in-Swift/">How to keep command line tool running with async in Swift</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/549">#549</a></strong></p>
<h2 id="Use-Semaphore"><a href="#Use-Semaphore" class="headerlink" title="Use Semaphore"></a>Use Semaphore</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Sequence</span>: <span class="title">Task</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">run</span><span class="params">(workflow: Workflow, completion: @escaping TaskCompletion)</span></span> &#123;</span><br><span class="line">        <span class="keyword">let</span> semaphore = <span class="type">DispatchSemaphore</span>(value: <span class="number">0</span>)</span><br><span class="line">        runFirst(tasks: tasks, workflow: workflow, completion: &#123; result <span class="keyword">in</span></span><br><span class="line">            completion(result)</span><br><span class="line">            semaphore.signal()</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">        semaphore.wait()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Concurrent</span>: <span class="title">Task</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">run</span><span class="params">(workflow: Workflow, completion: @escaping <span class="params">(Result&lt;<span class="params">()</span></span></span></span>, <span class="type">Error</span>&gt;) -&gt; <span class="type">Void</span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> runTaskCount = <span class="number">0</span></span><br><span class="line">        <span class="keyword">let</span> taskCount = tasks.<span class="built_in">count</span></span><br><span class="line">        <span class="keyword">let</span> semaphore = <span class="type">DispatchSemaphore</span>(value: <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">        tasks.forEach &#123; task <span class="keyword">in</span></span><br><span class="line">            task.run(workflow: workflow, completion: &#123; <span class="number">_</span> <span class="keyword">in</span></span><br><span class="line">                <span class="keyword">self</span>.serialQueue.async &#123;</span><br><span class="line">                    runTaskCount += <span class="number">1</span></span><br><span class="line">                    <span class="keyword">if</span> runTaskCount == taskCount &#123;</span><br><span class="line">                        completion(.success(()))</span><br><span class="line">                        semaphore.signal()</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        semaphore.wait()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Read-more"><a href="#Read-more" class="headerlink" title="Read more"></a>Read more</h2><ul>
<li><a href="https://stackoverflow.com/questions/31944011/how-to-prevent-a-command-line-tool-from-exiting-before-asynchronous-operation-co">https://stackoverflow.com/questions/31944011/how-to-prevent-a-command-line-tool-from-exiting-before-asynchronous-operation-co</a></li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-12-18T13:21:44.000Z" title="2019-12-18T13:21:44.000Z">2019-12-18</time><span class="level-item">a few seconds read (About 20 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-use-deep-link-and-universal-link-in-iOS/">How to use deep link and universal link in iOS</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/548">#548</a></strong></p>
<ul>
<li><a href="https://stackoverflow.com/questions/35522618/universal-links-on-ios-vs-deep-links-url-schemes">https://stackoverflow.com/questions/35522618/universal-links-on-ios-vs-deep-links-url-schemes</a></li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-12-18T11:37:56.000Z" title="2019-12-18T11:37:56.000Z">2019-12-18</time><span class="level-item">a few seconds read (About 38 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-sync-an-async-function-in-Swift/">How to sync an async function in Swift</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/547">#547</a></strong></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">sync</span>&lt;T&gt;<span class="params">(<span class="number">_</span> work: <span class="params">(@escaping <span class="params">([T])</span></span></span></span> -&gt; <span class="type">Void</span>) -&gt; <span class="type">Void</span>) -&gt; [<span class="type">T</span>] &#123;</span><br><span class="line">    <span class="keyword">let</span> semaphore = <span class="type">DispatchSemaphore</span>(value: <span class="number">1</span>)</span><br><span class="line">    <span class="keyword">var</span> results = [<span class="type">T</span>]()</span><br><span class="line">    work &#123; values <span class="keyword">in</span></span><br><span class="line">        results = values</span><br><span class="line">        semaphore.signal()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> results</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">sync(&#123; completion <span class="keyword">in</span> </span><br><span class="line">    service.load(completion)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-12-17T12:35:08.000Z" title="2019-12-17T12:35:08.000Z">2019-12-17</time><span class="level-item">a few seconds read (About 39 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-use-UICollectionViewLayout/">How to use UICollectionViewLayout</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/546">#546</a></strong></p>
<ul>
<li><a href="https://developer.apple.com/library/archive/documentation/WindowsViews/Conceptual/CollectionViewPGforIOS/UsingtheFlowLayout/UsingtheFlowLayout.html">Using the Flow Layout</a></li>
<li><a href="https://littlebitesofcocoa.com/306-customizing-collection-view-cell-insertion-animations">Customizing Collection View Cell Insertion Animations</a></li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-12-16T22:05:11.000Z" title="2019-12-16T22:05:11.000Z">2019-12-16</time><span class="level-item">a few seconds read (About 40 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-do-localization-in-Xcode/">How to do localization in Xcode</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/545">#545</a></strong></p>
<p>Xcode 10 Localization catalog and XclocReader</p>
<ul>
<li><a href="https://developer.apple.com/videos/play/wwdc2018/404/">New Localization Workflows in Xcode 10</a></li>
</ul>
<p>Xcode 11 localized screenshots</p>
<ul>
<li><a href="https://developer.apple.com/videos/play/wwdc2019/403/">Creating Great Localized Experiences with Xcode 11</a></li>
</ul>
</div></article></div><nav class="pagination is-centered mt-4" role="navigation" aria-label="pagination"><div class="pagination-previous"><a href="/page/7/">Previous</a></div><div class="pagination-next"><a href="/page/9/">Next</a></div><ul class="pagination-list is-hidden-mobile"><li><a class="pagination-link" href="/">1</a></li><li><span class="pagination-ellipsis">&hellip;</span></li><li><a class="pagination-link" href="/page/7/">7</a></li><li><a class="pagination-link is-current" href="/page/8/">8</a></li><li><a class="pagination-link" href="/page/9/">9</a></li><li><span class="pagination-ellipsis">&hellip;</span></li><li><a class="pagination-link" href="/page/25/">25</a></li></ul></nav></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1"><div class="card widget"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="" src="https://avatars1.githubusercontent.com/u/2284279?s=460&amp;v=4" alt="onmyway133"></figure><p class="title is-size-4 is-block line-height-inherit">onmyway133</p><p class="is-size-6 is-block">iOS, macOS, Android, React. Serial maker. Writer. Speaker.</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Oslo, Norway</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Posts</p><a href="/archives"><p class="title">731</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Categories</p><a href="/categories"><p class="title">0</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Tags</p><a href="/tags"><p class="title">54</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/onmyway133" target="_blank" rel="noopener">Follow</a></div><div class="level is-mobile"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/onmyway133"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Twitter" href="https://twitter.com/onmyway133"><i class="fab fa-twitter"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Dribbble" href="https://dribbble.com"><i class="fab fa-dribbble"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/"><i class="fas fa-rss"></i></a></div></div></div><!--!--><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">Links</h3><ul class="menu-list"><li><a class="level is-mobile is-mobile" href="https://onmyway133.com/apps" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Apps</span></span><span class="level-right"><span class="level-item tag">onmyway133.com</span></span></a></li><li><a class="level is-mobile is-mobile" href="https://learntalks.com" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Learn Talks</span></span><span class="level-right"><span class="level-item tag">learntalks.com</span></span></a></li><li><a class="level is-mobile is-mobile" href="https://wwdctogether.com" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">WWDC Together</span></span><span class="level-right"><span class="level-item tag">wwdctogether.com</span></span></a></li></ul></div></div></div><!--!--><div class="card widget"><div class="card-content"><h3 class="menu-label">Recent</h3><article class="media"><div class="media-content size-small"><p><time dateTime="2021-02-25T21:42:08.000Z">2021-02-25</time></p><p class="title is-6"><a class="link-muted" href="/blog/How-to-listen-to-remote-changes-in-CloudKit-CoreData/">How to listen to remote changes in CloudKit CoreData</a></p><p class="is-uppercase"></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2021-02-25T20:56:27.000Z">2021-02-25</time></p><p class="title is-6"><a class="link-muted" href="/blog/How-to-listen-to-Published-outside-of-SwiftUI-view/">How to listen to Published outside of SwiftUI view</a></p><p class="is-uppercase"></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2021-02-25T07:51:07.000Z">2021-02-25</time></p><p class="title is-6"><a class="link-muted" href="/blog/How-to-filter-non-numeric-digit-from-String-in-Swift/">How to filter non numeric digit from String in Swift</a></p><p class="is-uppercase"></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2021-02-24T20:13:56.000Z">2021-02-24</time></p><p class="title is-6"><a class="link-muted" href="/blog/How-to-build-container-view-in-SwiftUI/">How to build container view in SwiftUI</a></p><p class="is-uppercase"></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2021-02-24T08:12:22.000Z">2021-02-24</time></p><p class="title is-6"><a class="link-muted" href="/blog/How-to-tune-performance-with-ButtonBehavior-in-SwiftUI/">How to tune performance with ButtonBehavior in SwiftUI</a></p><p class="is-uppercase"></p></div></article></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">Archives</h3><ul class="menu-list"><li><a class="level is-mobile is-marginless" href="/archives/2021/02/"><span class="level-start"><span class="level-item">February 2021</span></span><span class="level-end"><span class="level-item tag">17</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2021/01/"><span class="level-start"><span class="level-item">January 2021</span></span><span class="level-end"><span class="level-item tag">33</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/12/"><span class="level-start"><span class="level-item">December 2020</span></span><span class="level-end"><span class="level-item tag">29</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/11/"><span class="level-start"><span class="level-item">November 2020</span></span><span class="level-end"><span class="level-item tag">15</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/10/"><span class="level-start"><span class="level-item">October 2020</span></span><span class="level-end"><span class="level-item tag">11</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/09/"><span class="level-start"><span class="level-item">September 2020</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/08/"><span class="level-start"><span class="level-item">August 2020</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/06/"><span class="level-start"><span class="level-item">June 2020</span></span><span class="level-end"><span class="level-item tag">14</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/05/"><span class="level-start"><span class="level-item">May 2020</span></span><span class="level-end"><span class="level-item tag">11</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/04/"><span class="level-start"><span class="level-item">April 2020</span></span><span class="level-end"><span class="level-item tag">13</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/03/"><span class="level-start"><span class="level-item">March 2020</span></span><span class="level-end"><span class="level-item tag">21</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/02/"><span class="level-start"><span class="level-item">February 2020</span></span><span class="level-end"><span class="level-item tag">20</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/01/"><span class="level-start"><span class="level-item">January 2020</span></span><span class="level-end"><span class="level-item tag">31</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2019/12/"><span class="level-start"><span class="level-item">December 2019</span></span><span class="level-end"><span class="level-item tag">36</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2019/11/"><span class="level-start"><span class="level-item">November 2019</span></span><span class="level-end"><span class="level-item tag">38</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2019/10/"><span class="level-start"><span class="level-item">October 2019</span></span><span class="level-end"><span class="level-item tag">49</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2019/09/"><span class="level-start"><span class="level-item">September 2019</span></span><span class="level-end"><span class="level-item tag">50</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2019/08/"><span class="level-start"><span class="level-item">August 2019</span></span><span class="level-end"><span class="level-item tag">39</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2019/07/"><span class="level-start"><span class="level-item">July 2019</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2019/06/"><span class="level-start"><span class="level-item">June 2019</span></span><span class="level-end"><span class="level-item tag">41</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2019/05/"><span class="level-start"><span class="level-item">May 2019</span></span><span class="level-end"><span class="level-item tag">50</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2019/04/"><span class="level-start"><span class="level-item">April 2019</span></span><span class="level-end"><span class="level-item tag">27</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2019/03/"><span class="level-start"><span class="level-item">March 2019</span></span><span class="level-end"><span class="level-item tag">24</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2019/02/"><span class="level-start"><span class="level-item">February 2019</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2018/12/"><span class="level-start"><span class="level-item">December 2018</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2018/05/"><span class="level-start"><span class="level-item">May 2018</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2018/04/"><span class="level-start"><span class="level-item">April 2018</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2018/02/"><span class="level-start"><span class="level-item">February 2018</span></span><span class="level-end"><span class="level-item tag">9</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2018/01/"><span class="level-start"><span class="level-item">January 2018</span></span><span class="level-end"><span class="level-item tag">14</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2017/12/"><span class="level-start"><span class="level-item">December 2017</span></span><span class="level-end"><span class="level-item tag">14</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2017/11/"><span class="level-start"><span class="level-item">November 2017</span></span><span class="level-end"><span class="level-item tag">12</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2017/10/"><span class="level-start"><span class="level-item">October 2017</span></span><span class="level-end"><span class="level-item tag">18</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2017/09/"><span class="level-start"><span class="level-item">September 2017</span></span><span class="level-end"><span class="level-item tag">10</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2017/08/"><span class="level-start"><span class="level-item">August 2017</span></span><span class="level-end"><span class="level-item tag">9</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2017/07/"><span class="level-start"><span class="level-item">July 2017</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2017/06/"><span class="level-start"><span class="level-item">June 2017</span></span><span class="level-end"><span class="level-item tag">12</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2017/05/"><span class="level-start"><span class="level-item">May 2017</span></span><span class="level-end"><span class="level-item tag">35</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2017/04/"><span class="level-start"><span class="level-item">April 2017</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">Tags</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/algorithm/"><span class="tag">algorithm</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/android/"><span class="tag">android</span><span class="tag is-grey-lightest">34</span></a></div><div class="control"><a class="tags has-addons" href="/tags/apple-script/"><span class="tag">apple script</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/catalyst/"><span class="tag">catalyst</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ci/"><span class="tag">ci</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/cloud/"><span class="tag">cloud</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/cocoapods/"><span class="tag">cocoapods</span><span class="tag is-grey-lightest">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/combine/"><span class="tag">combine</span><span class="tag is-grey-lightest">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/core-data/"><span class="tag">core data</span><span class="tag is-grey-lightest">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/csharp/"><span class="tag">csharp</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/css/"><span class="tag">css</span><span class="tag is-grey-lightest">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/dart/"><span class="tag">dart</span><span class="tag is-grey-lightest">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/database/"><span class="tag">database</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/design/"><span class="tag">design</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/electron/"><span class="tag">electron</span><span class="tag is-grey-lightest">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/featured/"><span class="tag">featured</span><span class="tag is-grey-lightest">10</span></a></div><div class="control"><a class="tags has-addons" href="/tags/firebase/"><span class="tag">firebase</span><span class="tag is-grey-lightest">7</span></a></div><div class="control"><a class="tags has-addons" href="/tags/flutter/"><span class="tag">flutter</span><span class="tag is-grey-lightest">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/git/"><span class="tag">git</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/github/"><span class="tag">github</span><span class="tag is-grey-lightest">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/go/"><span class="tag">go</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/google/"><span class="tag">google</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/iOS/"><span class="tag">iOS</span><span class="tag is-grey-lightest">173</span></a></div><div class="control"><a class="tags has-addons" href="/tags/javascript/"><span class="tag">javascript</span><span class="tag is-grey-lightest">51</span></a></div><div class="control"><a class="tags has-addons" href="/tags/kotlin/"><span class="tag">kotlin</span><span class="tag is-grey-lightest">27</span></a></div><div class="control"><a class="tags has-addons" href="/tags/layout/"><span class="tag">layout</span><span class="tag is-grey-lightest">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/life/"><span class="tag">life</span><span class="tag is-grey-lightest">14</span></a></div><div class="control"><a class="tags has-addons" href="/tags/links/"><span class="tag">links</span><span class="tag is-grey-lightest">9</span></a></div><div class="control"><a class="tags has-addons" href="/tags/macOS/"><span class="tag">macOS</span><span class="tag is-grey-lightest">136</span></a></div><div class="control"><a class="tags has-addons" href="/tags/machine-learning/"><span class="tag">machine learning</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/maps/"><span class="tag">maps</span><span class="tag is-grey-lightest">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/networking/"><span class="tag">networking</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/node/"><span class="tag">node</span><span class="tag is-grey-lightest">13</span></a></div><div class="control"><a class="tags has-addons" href="/tags/objc/"><span class="tag">objc</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/react/"><span class="tag">react</span><span class="tag is-grey-lightest">24</span></a></div><div class="control"><a class="tags has-addons" href="/tags/react-native/"><span class="tag">react native</span><span class="tag is-grey-lightest">14</span></a></div><div class="control"><a class="tags has-addons" href="/tags/realm/"><span class="tag">realm</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/rx/"><span class="tag">rx</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/script/"><span class="tag">script</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/spm/"><span class="tag">spm</span><span class="tag is-grey-lightest">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/swift/"><span class="tag">swift</span><span class="tag is-grey-lightest">363</span></a></div><div class="control"><a class="tags has-addons" href="/tags/swiftUI/"><span class="tag">swiftUI</span><span class="tag is-grey-lightest">101</span></a></div><div class="control"><a class="tags has-addons" href="/tags/tech/"><span class="tag">tech</span><span class="tag is-grey-lightest">14</span></a></div><div class="control"><a class="tags has-addons" href="/tags/terminal/"><span class="tag">terminal</span><span class="tag is-grey-lightest">9</span></a></div><div class="control"><a class="tags has-addons" href="/tags/testing/"><span class="tag">testing</span><span class="tag is-grey-lightest">17</span></a></div><div class="control"><a class="tags has-addons" href="/tags/tool/"><span class="tag">tool</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/tweet/"><span class="tag">tweet</span><span class="tag is-grey-lightest">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/unity/"><span class="tag">unity</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/voip/"><span class="tag">voip</span><span class="tag is-grey-lightest">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/watchOS/"><span class="tag">watchOS</span><span class="tag is-grey-lightest">11</span></a></div><div class="control"><a class="tags has-addons" href="/tags/web/"><span class="tag">web</span><span class="tag is-grey-lightest">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/work/"><span class="tag">work</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/wwdc/"><span class="tag">wwdc</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/xcode/"><span class="tag">xcode</span><span class="tag is-grey-lightest">24</span></a></div></div></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">Subscribe to Updates</h3><form action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open(&#039;https://feedburner.google.com/fb/a/mailverify?uri=c2r59mmt2n5k0o5dt5vv3nq4u4&#039;,&#039;popupwindow&#039;,&#039;scrollbars=yes,width=550,height=520&#039;);return true"><input type="hidden" value="c2r59mmt2n5k0o5dt5vv3nq4u4" name="uri"><input type="hidden" name="loc" value="en_US"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button is-primary" type="submit" value="Subscribe"></div></div></form></div></div></div><div class="card widget"><div class="card-content"><div class="notification is-danger">You need to set <code>client_id</code> and <code>slot_id</code> to show this AD unit. Please set it in <code>_config.yml</code>.</div></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/z.png" alt="onmyway133" height="28"></a><p class="size-small"><span>&copy; 2021 Khoa Pham</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/onmyway133"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            site: {
                url: 'https://onmyway133.github.io',
                external_link: {"enable":true,"exclude":[]}
            },
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to Top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>