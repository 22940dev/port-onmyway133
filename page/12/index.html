<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="generator" content="Hexo 4.2.0"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>onmyway133</title><meta description="What you don&amp;#39;t know is what you haven&amp;#39;t learned"><meta property="og:type" content="blog"><meta property="og:title" content="onmyway133"><meta property="og:url" content="https://onmyway133.github.io/"><meta property="og:site_name" content="onmyway133"><meta property="og:description" content="What you don&amp;#39;t know is what you haven&amp;#39;t learned"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://onmyway133.github.io/img/og_image.png"><meta property="article:author" content="Khoa Pham"><meta property="article:tag" content="ios"><meta property="article:tag" content=" android"><meta property="article:tag" content="javascript"><meta property="article:tag" content=" react"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/img/og_image.png"><meta property="twitter:creator" content="@onmyway133"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://onmyway133.github.io"},"headline":"onmyway133","image":["https://onmyway133.github.io/img/og_image.png"],"author":{"@type":"Person","name":"Khoa Pham"},"description":"What you don&#39;t know is what you haven&#39;t learned"}</script><link rel="alternative" href="/atom.xml" title="onmyway133" type="application/atom+xml"><link rel="icon" href="/img/favicon.ico"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><script src="https://www.googletagmanager.com/gtag/js?id=UA-40119591-5" async></script><script>window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
    
        gtag('config', 'UA-40119591-5');</script><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><script data-ad-client="ca-pub-3656459401405265" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js" async></script></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/z.png" alt="onmyway133" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/apps">Apps</a><a class="navbar-item" href="/gumroad">Gumroad</a><a class="navbar-item" href="/about">About</a><a class="navbar-item" href="/opensource">Open Source</a><a class="navbar-item" href="/writing">Writing</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/speaking">Speaking</a><a class="navbar-item" href="/news">News</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/onmyway133"><i class="fab fa-github"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-08-23T08:34:20.000Z" title="2019-08-23T08:34:20.000Z">2019-08-23</time><span class="level-item">2 minutes read (About 260 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-simplify-anchor-with-NSLayoutConstraint-in-iOS/">How to simplify anchor with NSLayoutConstraint in iOS</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/368">#368</a></strong></p>
<p>See <a href="https://github.com/onmyway133/Omnia/blob/master/Sources/iOS/NSLayoutConstraint.swift">https://github.com/onmyway133/Omnia/blob/master/Sources/iOS/NSLayoutConstraint.swift</a></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">NSLayoutConstraint</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/// Disable auto resizing mask and activate constraints</span></span><br><span class="line">    <span class="comment">///</span></span><br><span class="line">    <span class="comment">/// - Parameter constraints: constraints to activate</span></span><br><span class="line">    <span class="keyword">static</span> <span class="function"><span class="keyword">func</span> <span class="title">on</span><span class="params">(<span class="number">_</span> constraints: [NSLayoutConstraint])</span></span> &#123;</span><br><span class="line">        constraints.forEach &#123;</span><br><span class="line">            ($<span class="number">0</span>.firstItem <span class="keyword">as</span>? <span class="type">UIView</span>)?.translatesAutoresizingMaskIntoConstraints = <span class="literal">false</span></span><br><span class="line">            $<span class="number">0</span>.isActive = <span class="literal">true</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="function"><span class="keyword">func</span> <span class="title">on</span><span class="params">(<span class="number">_</span> constraintsArray: [[NSLayoutConstraint]])</span></span> &#123;</span><br><span class="line">        <span class="keyword">let</span> constraints = constraintsArray.flatMap(&#123; $<span class="number">0</span> &#125;)</span><br><span class="line">        <span class="type">NSLayoutConstraint</span>.on(constraints)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">priority</span><span class="params">(<span class="number">_</span> value: Float)</span></span> -&gt; <span class="type">NSLayoutConstraint</span> &#123;</span><br><span class="line">        priority = <span class="type">UILayoutPriority</span>(value)</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">self</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Array</span> <span class="title">where</span> <span class="title">Element</span> == <span class="title">NSLayoutConstraint</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">priority</span><span class="params">(<span class="number">_</span> value: Float)</span></span> -&gt; [<span class="type">NSLayoutConstraint</span>] &#123;</span><br><span class="line">        forEach &#123;</span><br><span class="line">            $<span class="number">0</span>.priority = <span class="type">UILayoutPriority</span>(value)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">self</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">UILayoutGuide</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">pinEdges</span><span class="params">(view: UIView, inset: UIEdgeInsets = UIEdgeInsets.zero)</span></span> -&gt; [<span class="type">NSLayoutConstraint</span>] &#123;</span><br><span class="line">        <span class="keyword">return</span> [</span><br><span class="line">            leadingAnchor.constraint(equalTo: view.leadingAnchor, constant: inset.<span class="keyword">left</span>),</span><br><span class="line">            trailingAnchor.constraint(equalTo: view.trailingAnchor, constant: inset.<span class="keyword">right</span>),</span><br><span class="line">            topAnchor.constraint(equalTo: view.topAnchor, constant: inset.top),</span><br><span class="line">            bottomAnchor.constraint(equalTo: view.bottomAnchor, constant: inset.bottom)</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">UIView</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">pinEdges</span><span class="params">(view: UIView, inset: UIEdgeInsets = UIEdgeInsets.zero)</span></span> -&gt; [<span class="type">NSLayoutConstraint</span>] &#123;</span><br><span class="line">        <span class="keyword">return</span> [</span><br><span class="line">            leadingAnchor.constraint(equalTo: view.leadingAnchor, constant: inset.<span class="keyword">left</span>),</span><br><span class="line">            trailingAnchor.constraint(equalTo: view.trailingAnchor, constant: inset.<span class="keyword">right</span>),</span><br><span class="line">            topAnchor.constraint(equalTo: view.topAnchor, constant: inset.top),</span><br><span class="line">            bottomAnchor.constraint(equalTo: view.bottomAnchor, constant: inset.bottom)</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">pinCenter</span><span class="params">(view: UIView, offset: CGPoint = .zero)</span></span> -&gt; [<span class="type">NSLayoutConstraint</span>] &#123;</span><br><span class="line">        <span class="keyword">return</span> [</span><br><span class="line">            centerXAnchor.constraint(equalTo: view.centerXAnchor, constant: offset.x),</span><br><span class="line">            centerYAnchor.constraint(equalTo: view.centerYAnchor, constant: offset.y)</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">padding</span><span class="params">(view: UIView, <span class="number">_</span> constant: CGFloat = <span class="number">0</span>)</span></span> -&gt; [<span class="type">NSLayoutConstraint</span>] &#123;</span><br><span class="line">        <span class="keyword">return</span> [</span><br><span class="line">            leadingAnchor.constraint(equalTo: view.leadingAnchor, constant: constant),</span><br><span class="line">            trailingAnchor.constraint(equalTo: view.trailingAnchor, constant: -constant)</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">size</span><span class="params">(<span class="number">_</span> constant: CGFloat)</span></span> -&gt; [<span class="type">NSLayoutConstraint</span>] &#123;</span><br><span class="line">        <span class="keyword">return</span> [</span><br><span class="line">            widthAnchor.constraint(equalToConstant: constant),</span><br><span class="line">            heightAnchor.constraint(equalToConstant: constant)</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">size</span><span class="params">(<span class="number">_</span> width: CGFloat, <span class="number">_</span> height: CGFloat)</span></span> -&gt; [<span class="type">NSLayoutConstraint</span>] &#123;</span><br><span class="line">        <span class="keyword">return</span> [</span><br><span class="line">            widthAnchor.constraint(equalToConstant: width),</span><br><span class="line">            heightAnchor.constraint(equalToConstant: height)</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">addSubviews</span><span class="params">(<span class="number">_</span> views: [UIView])</span></span> &#123;</span><br><span class="line">        views.forEach &#123;</span><br><span class="line">            addSubview($<span class="number">0</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-08-22T17:22:35.000Z" title="2019-08-22T17:22:35.000Z">2019-08-22</time><span class="level-item">a minute read (About 141 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-get-trending-repos-on-GitHub-using-Retrofit/">How to get trending repos on GitHub using Retrofit</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/367">#367</a></strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:&#x2F;&#x2F;api.github.com&#x2F;search&#x2F;repositories?sort&#x3D;stars&amp;order&#x3D;desc&amp;q&#x3D;language:javascript,java,swift,kotlin&amp;q&#x3D;created:&gt;2019-08-21</span><br></pre></td></tr></table></figure>

<figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Api</span> </span>&#123;</span><br><span class="line">    <span class="meta">@GET(<span class="meta-string">"https://api.github.com/search/repositories"</span>)</span></span><br><span class="line">    <span class="keyword">suspend</span> <span class="function"><span class="keyword">fun</span> <span class="title">getTrendingRepos</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">        <span class="meta">@Query(<span class="meta-string">"sort"</span>)</span> sort: <span class="type">String</span>,</span></span></span><br><span class="line"><span class="function"><span class="params">        <span class="meta">@Query(<span class="meta-string">"order"</span>)</span> order: <span class="type">String</span>,</span></span></span><br><span class="line"><span class="function"><span class="params">        <span class="meta">@Query(<span class="meta-string">"q"</span>)</span> qs: <span class="type">List</span>&lt;<span class="type">String</span>&gt;</span></span></span><br><span class="line"><span class="function"><span class="params">    )</span></span>: Response</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Repo</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">api</span><span class="params">()</span></span>: Api &#123;</span><br><span class="line">        <span class="keyword">return</span> Retrofit.Builder()</span><br><span class="line">            .baseUrl(<span class="string">"https://api.github.com/"</span>)</span><br><span class="line">            .addConverterFactory(MoshiConverterFactory.create())</span><br><span class="line">            .build()</span><br><span class="line">            .create(Api::<span class="class"><span class="keyword">class</span>.<span class="title">java</span>)</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ViewModel</span></span>(<span class="keyword">val</span> repo: Repo, <span class="keyword">val</span> dateProvider: DateProvider): ViewModel() &#123;</span><br><span class="line">    <span class="keyword">val</span> items = MutableLiveData&lt;ArrayList&lt;Item&gt;&gt;()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">suspend</span> <span class="function"><span class="keyword">fun</span> <span class="title">load</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">val</span> order = <span class="string">"desc"</span></span><br><span class="line">            <span class="keyword">val</span> sort = <span class="string">"star"</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">val</span> formatter = SimpleDateFormat(<span class="string">"YYYY-MM-dd"</span>)</span><br><span class="line">            <span class="keyword">val</span> qs = listOf(</span><br><span class="line">                <span class="string">"language:javascript,java,swift,kotlin"</span>,</span><br><span class="line">                <span class="string">"q=created:&gt;<span class="subst">$&#123;formatter.format(dateProvider.yesterday)&#125;</span>"</span></span><br><span class="line">            )</span><br><span class="line"></span><br><span class="line">            <span class="keyword">val</span> response = repo.api().getTrendingRepos(sort=sort, order=order, qs=qs)</span><br><span class="line">            <span class="keyword">this</span>.items.value = response.items.toCollection(ArrayList())</span><br><span class="line">        &#125; <span class="keyword">catch</span> (e: Exception) &#123;</span><br><span class="line">            <span class="keyword">this</span>.items.value = arrayListOf()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-08-22T05:59:14.000Z" title="2019-08-22T05:59:14.000Z">2019-08-22</time><span class="level-item">a minute read (About 152 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-use-Retrofit-in-Android/">How to use Retrofit in Android</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/366">#366</a></strong></p>
<p>Code uses Retrofit 2.6.0 which has Coroutine support</p>
<p><code>app/build.gradle</code></p>
<figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">implementation <span class="string">"androidx.lifecycle:lifecycle-livedata-ktx:2.2.0-alpha01"</span></span><br><span class="line"></span><br><span class="line">implementation <span class="string">"com.squareup.moshi:moshi:<span class="variable">$Version</span>.moshi"</span></span><br><span class="line"></span><br><span class="line">implementation <span class="string">"com.squareup.retrofit2:retrofit:<span class="variable">$Version</span>.retrofit"</span></span><br><span class="line">implementation <span class="string">"com.squareup.retrofit2:converter-moshi:<span class="variable">$Version</span>.retrofit"</span></span><br></pre></td></tr></table></figure>

<p><code>Api.kt</code></p>
<figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> retrofit2.http.GET</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Api</span> </span>&#123;</span><br><span class="line">    <span class="meta">@GET(<span class="meta-string">"api/articles"</span>)</span></span><br><span class="line">    <span class="keyword">suspend</span> <span class="function"><span class="keyword">fun</span> <span class="title">getArticles</span><span class="params">()</span></span>: List&lt;Article&gt;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>Repo.kt</code></p>
<figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> retrofit2.Retrofit</span><br><span class="line"><span class="keyword">import</span> retrofit2.converter.moshi.MoshiConverterFactory</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Repo</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">get</span><span class="params">()</span></span>: Api &#123;</span><br><span class="line">        <span class="keyword">return</span> Retrofit.Builder()</span><br><span class="line">            .baseUrl(<span class="string">"https://dev.to"</span>)</span><br><span class="line">            .addConverterFactory(MoshiConverterFactory.create())</span><br><span class="line">            .build()</span><br><span class="line">            .create(Api::<span class="class"><span class="keyword">class</span>.<span class="title">java</span>)</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>ViewModel.kt</code></p>
<figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> androidx.lifecycle.ViewModel</span><br><span class="line"><span class="keyword">import</span> androidx.lifecycle.liveData</span><br><span class="line"><span class="keyword">import</span> kotlinx.coroutines.Dispatchers</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ViewModel</span></span>(<span class="keyword">val</span> repo: Repo): ViewModel() &#123;</span><br><span class="line">    <span class="keyword">val</span> articles = liveData(Dispatchers.Main) &#123;</span><br><span class="line">        emit(repo.<span class="keyword">get</span>().getArticles().toCollection(ArrayList()))</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>Article.kt</code></p>
<figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.squareup.moshi.Json</span><br><span class="line"></span><br><span class="line"><span class="keyword">data</span> <span class="class"><span class="keyword">class</span> <span class="title">Article</span></span>(</span><br><span class="line">    <span class="meta">@field:Json</span>(name=<span class="string">"type_of"</span>) <span class="keyword">val</span> typeOf: String,</span><br><span class="line">    <span class="meta">@field:Json</span>(name=<span class="string">"title"</span>) <span class="keyword">val</span> title: String</span><br><span class="line">)</span><br></pre></td></tr></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-08-21T06:46:31.000Z" title="2019-08-21T06:46:31.000Z">2019-08-21</time><span class="level-item">a few seconds read (About 64 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-handle-link-clicked-in-WKWebView-in-iOS/">How to handle link clicked in WKWebView in iOS</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/365">#365</a></strong></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> WebKit</span><br><span class="line"><span class="keyword">import</span> SafariServices</span><br><span class="line"></span><br><span class="line"><span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">WebViewHandler</span>: <span class="title">NSObject</span>, <span class="title">WKNavigationDelegate</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> show: ((<span class="type">UIViewController</span>) -&gt; <span class="type">Void</span>)?</span><br><span class="line">    <span class="keyword">let</span> supportedSchemes = [<span class="string">"http"</span>, <span class="string">"https"</span>]</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">webView</span><span class="params">(<span class="number">_</span> webView: WKWebView, decidePolicyFor navigationAction: WKNavigationAction, decisionHandler: @escaping <span class="params">(WKNavigationActionPolicy)</span></span></span> -&gt; <span class="type">Void</span>) &#123;</span><br><span class="line">        <span class="keyword">defer</span> &#123;</span><br><span class="line">            decisionHandler(.allow)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">guard</span></span><br><span class="line">            navigationAction.navigationType == .linkActivated,</span><br><span class="line">            <span class="keyword">let</span> url = navigationAction.request.url,</span><br><span class="line">            <span class="keyword">let</span> scheme = url.scheme,</span><br><span class="line">            supportedSchemes.<span class="built_in">contains</span>(scheme)</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> controller = <span class="type">SFSafariViewController</span>(url: url)</span><br><span class="line">        show?(controller)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-08-20T10:39:35.000Z" title="2019-08-20T10:39:35.000Z">2019-08-20</time><span class="level-item">a minute read (About 117 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-use-AppFlowController-in-iOS/">How to use AppFlowController in iOS</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/364">#364</a></strong></p>
<p><code>AppFlowController.swift</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> UIKit</span><br><span class="line"><span class="keyword">import</span> GoogleMaps</span><br><span class="line"><span class="keyword">import</span> Stripe</span><br><span class="line"></span><br><span class="line"><span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">AppFlowController</span>: <span class="title">UIViewController</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">lazy</span> <span class="keyword">var</span> window = <span class="type">UIWindow</span>(frame: <span class="type">UIScreen</span>.main.bounds)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">configure</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="type">GMSServices</span>.provideAPIKey(<span class="type">Constant</span>.googleMapsApiKey)</span><br><span class="line">        <span class="type">STPPaymentConfiguration</span>.shared().publishableKey = <span class="type">Constant</span>.stripeKey</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">start</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">if</span> <span class="type">Deps</span>.onboardingHandler.hasOnboarded &#123;</span><br><span class="line">            startMain()</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            startOnboarding()</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        window.makeKeyAndVisible()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">startOnboarding</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">let</span> controller = <span class="type">OnboardingController</span>()</span><br><span class="line">        controller.delegate = <span class="keyword">self</span></span><br><span class="line">        window.rootViewController = controller</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">startMain</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">let</span> controller = <span class="type">MainFlowController</span>()</span><br><span class="line">        window.rootViewController = controller</span><br><span class="line">        controller.start()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">AppFlowController</span>: <span class="title">OnboardingControllerDelegate</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">onboardingControllerDidFinish</span><span class="params">(<span class="number">_</span> controller: OnboardingController)</span></span> &#123;</span><br><span class="line">        <span class="type">Deps</span>.onboardingHandler.hasOnboarded = <span class="literal">true</span></span><br><span class="line">        startMain()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>AppDelegate.swift</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@UIApplicationMain</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AppDelegate</span>: <span class="title">UIResponder</span>, <span class="title">UIApplicationDelegate</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">let</span> appFlowController = <span class="type">AppFlowController</span>()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">application</span><span class="params">(<span class="number">_</span> application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplication.LaunchOptionsKey: <span class="keyword">Any</span>]?)</span></span> -&gt; <span class="type">Bool</span> &#123;</span><br><span class="line"></span><br><span class="line">        appFlowController.configure()</span><br><span class="line">        appFlowController.start()</span><br><span class="line"></span><br><span class="line">        <span class="type">UIApplication</span>.shared.registerForRemoteNotifications()</span><br><span class="line">		<span class="type">FirebaseApp</span>.configure()</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-08-20T02:56:29.000Z" title="2019-08-20T02:56:29.000Z">2019-08-20</time><span class="level-item">4 minutes read (About 669 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-use-ViewModel-and-ViewModelsProviders-in-Android/">How to use ViewModel and ViewModelsProviders in Android</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/363">#363</a></strong></p>
<h2 id="ViewModels-a-simple-example"><a href="#ViewModels-a-simple-example" class="headerlink" title="ViewModels a simple example"></a>ViewModels a simple example</h2><p><a href="https://medium.com/androiddevelopers/viewmodels-a-simple-example-ed5ac416317e">https://medium.com/androiddevelopers/viewmodels-a-simple-example-ed5ac416317e</a></p>
<blockquote>
<p>Rotating a device is one of a few configuration changes that an app can go through during its lifetime, including keyboard availability and changing the device’s language. All of these configuration changes cause the Activity to be torn down and recreated</p>
</blockquote>
<blockquote>
<p>The ViewModel class is designed to hold and manage UI-related data in a life-cycle conscious way. This allows data to survive configuration changes such as screen rotations.</p>
</blockquote>
<blockquote>
<p>The ViewModel exists from when the you first request a ViewModel (usually in the onCreate the Activity) until the Activity is finished and destroyed. onCreate may be called several times during the life of an Activity, such as when the app is rotated, but the ViewModel survives throughout.</p>
</blockquote>
<p><img src="https://miro.medium.com/max/1044/1*3Kr2-5HE0TLZ4eqq8UQCkQ.png" alt=""></p>
<blockquote>
<p>Storing an Application context in a ViewModel is okay because an Application context is tied to the Application lifecycle. This is different from an Activity context, which is tied to the Activity lifecycle. In fact, if you need an Application context, you should extend AndroidViewModel which is simply a ViewModel that includes an Application reference.</p>
</blockquote>
<blockquote>
<p>The first time the ViewModelProviders.of method is called by MainActivity, it creates a new ViewModel instance. When this method is called again, which happens whenever onCreate is called, it will return the pre-existing ViewModel associated with the specific Court-Counter MainActivity</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ViewModelProviders.of(&lt;THIS ARGUMENT&gt;).get(ScoreViewModel.class);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>This allows you to have an app that opens a lot of different instances of the same Activity or Fragment, but with different ViewModel information</p>
</blockquote>
<h2 id="Dive-deep-into-Android’s-ViewModel-—-Android-Architecture-Components"><a href="#Dive-deep-into-Android’s-ViewModel-—-Android-Architecture-Components" class="headerlink" title="Dive deep into Android’s ViewModel — Android Architecture Components"></a>Dive deep into Android’s ViewModel — Android Architecture Components</h2><p><a href="https://android.jlelse.eu/dive-deep-into-androids-viewmodel-android-architecture-components-e0a7ded26f70">https://android.jlelse.eu/dive-deep-into-androids-viewmodel-android-architecture-components-e0a7ded26f70</a></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Utilities methods for &#123;<span class="doctag">@link</span> ViewModelStore&#125; class.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ViewModelProviders</span> </span>&#123;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Creates a &#123;<span class="doctag">@link</span> ViewModelProvider&#125;, which retains ViewModels while a scope of given Activity</span></span><br><span class="line"><span class="comment">     * is alive. More detailed explanation is in &#123;<span class="doctag">@link</span> ViewModel&#125;.</span></span><br><span class="line"><span class="comment">     * &lt;p&gt;</span></span><br><span class="line"><span class="comment">     * It uses &#123;<span class="doctag">@link</span> ViewModelProvider.AndroidViewModelFactory&#125; to instantiate new ViewModels.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> activity an activity, in whose scope ViewModels should be retained</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> a ViewModelProvider instance</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@NonNull</span></span><br><span class="line">    <span class="meta">@MainThread</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ViewModelProvider <span class="title">of</span><span class="params">(@NonNull FragmentActivity activity)</span> </span>&#123;</span><br><span class="line">        ViewModelProvider.AndroidViewModelFactory factory =</span><br><span class="line">                ViewModelProvider.AndroidViewModelFactory.getInstance(</span><br><span class="line">                        checkApplication(activity));</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ViewModelProvider(ViewModelStores.of(activity), factory);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>It seems like ViewModelProviders.of is just a factory of ViewModelProvider, which depends upon ViewModelFactory and a ViewModelStore.</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">MyViewModelFactory factory = <span class="keyword">new</span> MyViewModelFactory(data1, data2);</span><br><span class="line">ViewModelProviders.of(<span class="keyword">this</span>, factory).get(MyViewModel.class);</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ViewModelStore</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> HashMap&lt;String, ViewModel&gt; mMap = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="HolderFragment"><a href="#HolderFragment" class="headerlink" title="HolderFragment"></a>HolderFragment</h3><blockquote>
<p>HolderFragment is a regular Android Headless Fragment. It is the scope where all ViewModels inside the ViewModelStore will live.</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HolderFragment</span> <span class="keyword">extends</span> <span class="title">Fragment</span> <span class="keyword">implements</span> <span class="title">ViewModelStoreOwner</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> HolderFragmentManager sHolderFragmentManager = <span class="keyword">new</span> HolderFragmentManager();</span><br><span class="line">    <span class="keyword">private</span> ViewModelStore mViewModelStore = <span class="keyword">new</span> ViewModelStore();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">HolderFragmentManager</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Map&lt;Activity, HolderFragment&gt; mNotCommittedActivityHolders = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">    <span class="keyword">private</span> Map&lt;Fragment, HolderFragment&gt; mNotCommittedFragmentHolders = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Who-owns-the-HolderFragment"><a href="#Who-owns-the-HolderFragment" class="headerlink" title="Who owns the HolderFragment?"></a>Who owns the HolderFragment?</h3><blockquote>
<p>The HolderFragment has an inner static class named HolderFragmentManager. The HolderFragmentManager creates and manages HolderFragment instances.<br>After creating the instances it associates them with an Activity or Fragment.</p>
</blockquote>
<blockquote>
<p>The whole process is done using the methods holderFragmentFor(Activity) and holderFragmentFor(Fragment).</p>
</blockquote>
<h3 id="How-does-HolderFragment-retains-the-state"><a href="#How-does-HolderFragment-retains-the-state" class="headerlink" title="How does HolderFragment retains the state ?"></a>How does HolderFragment retains the state ?</h3><blockquote>
<p>By setting retain instance to true and not providing a view, the HolderFragment becomes essentially a headless Fragment that is retained for as long as the Activity is not destroyed.</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">HolderFragment</span><span class="params">()</span> </span>&#123;</span><br><span class="line">   setRetainInstance(<span class="keyword">true</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>void setRetainInstance (boolean retain)</code></p>
<blockquote>
<p>Control whether a fragment instance is retained across Activity re-creation (such as from a configuration change). This can only be used with fragments not in the back stack. If set, the fragment lifecycle will be slightly different when an activity is recreated:</p>
</blockquote>
<h3 id="Retrieving-ViewModel-instance"><a href="#Retrieving-ViewModel-instance" class="headerlink" title="Retrieving ViewModel instance"></a>Retrieving ViewModel instance</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">get(MyViewModel.class)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>It tries to retrieve a MyViewModel instance from the store. If none is there, it uses the factory to create it and then stores it into HashMap&lt;String, ViewModel&gt;. In order to retrieve the already created ViewModel, it generates a key from the class qualified name.</p>
</blockquote>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-08-19T07:16:20.000Z" title="2019-08-19T07:16:20.000Z">2019-08-19</time><span class="level-item">a few seconds read (About 45 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-declare-UIGestureRecognizer-in-iOS/">How to declare UIGestureRecognizer in iOS</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/362">#362</a></strong></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> tapGR = <span class="type">UITapGestureRecognizer</span>(target: <span class="keyword">self</span>, action: #selector(handleTap(<span class="number">_</span>:)))</span><br><span class="line"></span><br><span class="line"><span class="meta">@objc</span> <span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">handleTap</span><span class="params">(<span class="number">_</span> gr: UITapGestureRecognizer)</span></span> &#123;</span><br><span class="line">    didTouch?()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>We need to use <code>lazy</code> instead of <code>let</code> for gesture to work</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">lazy</span> <span class="keyword">var</span> tapGR = <span class="type">UITapGestureRecognizer</span>(target: <span class="keyword">self</span>, action: #selector(handleTap(<span class="number">_</span>:)))</span><br></pre></td></tr></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-08-18T19:10:17.000Z" title="2019-08-18T19:10:17.000Z">2019-08-18</time><span class="level-item">a few seconds read (About 75 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-use-function-builder-in-Swift-5.1/">How to use function builder in Swift 5.1</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/361">#361</a></strong></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">Task</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Build</span>: <span class="title">Task</span> </span>&#123;&#125;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Test</span>: <span class="title">Task</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">@_functionBuilder</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">struct</span> <span class="title">TaskBuilder</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="function"><span class="keyword">func</span> <span class="title">buildBlock</span><span class="params">(<span class="number">_</span> tasks: Task...)</span></span> -&gt; [<span class="type">Task</span>] &#123;</span><br><span class="line">        tasks</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">run</span><span class="params">(@TaskBuilder builder: <span class="params">()</span></span></span> -&gt; [<span class="type">Task</span>]) &#123;</span><br><span class="line">    <span class="type">MyManager</span>.run(tasks: builder())</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">run</span><span class="params">(@TaskBuilder builder: <span class="params">()</span></span></span> -&gt; <span class="type">Task</span>) &#123;</span><br><span class="line">    <span class="type">MyManager</span>.run(tasks: [builder()])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">run &#123;</span><br><span class="line">   <span class="type">Build</span>()</span><br><span class="line">   <span class="type">Test</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Read-more"><a href="#Read-more" class="headerlink" title="Read more"></a>Read more</h2><ul>
<li><a href="https://www.swiftbysundell.com/posts/the-swift-51-features-that-power-swiftuis-api">The Swift 5.1 features that power SwiftUI’s API</a></li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-08-16T08:49:06.000Z" title="2019-08-16T08:49:06.000Z">2019-08-16</time><span class="level-item">2 minutes read (About 275 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-simplify-get-GRPC-streaming-in-Swift/">How to simplify get GRPC streaming in Swift</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/360">#360</a></strong></p>
<p>Given a streaming service</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">service Server &#123;</span><br><span class="line">  rpc GetUsers(GetUsersRequest) returns (stream GetUsersResponse);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>To get a response list in Swift, we need to do observe stream, which is a subclass of <code>ClientCallServerStreaming</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">getUsers</span><span class="params">(roomId: String, completion: @escaping <span class="params">(Result&lt;[User], Error&gt;)</span></span></span> -&gt; <span class="type">Void</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> request = withValue(<span class="type">Server_GetUsersRequest</span>()) &#123;</span><br><span class="line">        $<span class="number">0</span>.roomId = roomId</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">DispatchQueue</span>.global().async &#123;</span><br><span class="line">        <span class="keyword">var</span> users = [<span class="type">User</span>]()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">do</span> &#123;</span><br><span class="line">            <span class="keyword">var</span> streaming = <span class="literal">true</span></span><br><span class="line">            <span class="keyword">let</span> stream = <span class="keyword">try</span> <span class="keyword">self</span>.client.getUsers(request, completion: &#123; <span class="number">_</span> <span class="keyword">in</span></span><br><span class="line">                streaming = <span class="literal">false</span></span><br><span class="line">            &#125;)</span><br><span class="line"></span><br><span class="line">            <span class="keyword">while</span> streaming &#123;</span><br><span class="line">                <span class="keyword">if</span> <span class="keyword">let</span> response = <span class="keyword">try</span> stream.receive() &#123;</span><br><span class="line">                    users.append(response.user)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="type">DispatchQueue</span>.main.async &#123;</span><br><span class="line">                completion(.success(users))</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> &#123;</span><br><span class="line">            <span class="type">DispatchQueue</span>.main.async &#123;</span><br><span class="line">                completion(.failure(error))</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>This can get repetitive very fast. To avoid the duplication, we can make a generic function</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> SwiftGRPC</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">getStream</span>&lt;Streaming, Response&gt;<span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">    makeStream: @escaping <span class="params">(@escaping <span class="params">()</span></span></span></span> -&gt; <span class="type">Void</span>) <span class="keyword">throws</span> -&gt; <span class="type">Streaming</span>,</span><br><span class="line">    receive: @escaping (<span class="type">Streaming</span>) <span class="keyword">throws</span> -&gt; <span class="type">Response?</span>,</span><br><span class="line">    completion: @escaping (<span class="type">Result</span>&lt;[<span class="type">Response</span>], <span class="type">Error</span>&gt;) -&gt; <span class="type">Void</span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">DispatchQueue</span>.global().async &#123;</span><br><span class="line">        <span class="keyword">var</span> responses = [<span class="type">Response</span>]()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">do</span> &#123;</span><br><span class="line">            <span class="keyword">var</span> streaming = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">let</span> stream = <span class="keyword">try</span> makeStream(&#123;</span><br><span class="line">                streaming = <span class="literal">false</span></span><br><span class="line">            &#125;)</span><br><span class="line"></span><br><span class="line">            <span class="keyword">while</span> streaming &#123;</span><br><span class="line">                <span class="keyword">if</span> <span class="keyword">let</span> response = <span class="keyword">try</span> receive(stream) &#123;</span><br><span class="line">                    responses.append(response)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="type">DispatchQueue</span>.main.async &#123;</span><br><span class="line">                completion(.success(responses))</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> &#123;</span><br><span class="line">            <span class="type">DispatchQueue</span>.main.async &#123;</span><br><span class="line">                completion(.failure(error))</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Since swift-grpc generates very concrete structs, we need to use generic. The difference is the <code>Streaming</code> class and <code>Response</code> struct</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">getUsers</span><span class="params">(roomId: String, completion: @escaping <span class="params">(Result&lt;[User], Error&gt;)</span></span></span> -&gt; <span class="type">Void</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> request = withValue(<span class="type">Server_GetUsersRequest</span>()) &#123;</span><br><span class="line">        $<span class="number">0</span>.roomId = roomId</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    getStream(</span><br><span class="line">        makeStream: &#123; completion <span class="keyword">in</span></span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">try</span> <span class="keyword">self</span>.client.getUsers(request, completion: &#123; <span class="number">_</span> <span class="keyword">in</span></span><br><span class="line">                completion()</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;, receive: &#123; stream <span class="keyword">in</span></span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">try</span> stream.receive()</span><br><span class="line">        &#125;, completion: &#123; result <span class="keyword">in</span></span><br><span class="line">            completion(result.<span class="built_in">map</span> &#123; $<span class="number">0</span>.<span class="built_in">map</span> &#123; $<span class="number">0</span>.user &#125;&#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Handle-CallResult"><a href="#Handle-CallResult" class="headerlink" title="Handle CallResult"></a>Handle CallResult</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> SwiftGRPC</span><br><span class="line"><span class="keyword">import</span> SwiftProtobuf</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">CallResult</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">toError</span><span class="params">()</span></span> -&gt; <span class="type">NSError</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="type">NSError</span>(domain: <span class="string">"com.myApp"</span>, code: statusCode.rawValue, userInfo: [</span><br><span class="line">            <span class="string">"status_code"</span>: statusCode,</span><br><span class="line">            <span class="string">"status_message"</span>: statusMessage ?? <span class="string">""</span></span><br><span class="line">        ])</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-08-15T18:52:00.000Z" title="2019-08-15T18:52:00.000Z">2019-08-15</time><span class="level-item">a minute read (About 112 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-inject-view-model-with-Koin-in-Android/">How to inject view model with Koin in Android</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/359">#359</a></strong></p>
<p><code>app/build.gradle</code></p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">implementation <span class="string">"org.koin:koin-core:$Version.koin"</span></span><br><span class="line">implementation <span class="string">"org.koin:koin-androidx-scope:$Version.koin"</span></span><br><span class="line">implementation <span class="string">"org.koin:koin-androidx-viewmodel:$Version.koin"</span></span><br></pre></td></tr></table></figure>

<p><code>MyApplication.kt</code></p>
<figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> android.app.Application</span><br><span class="line"><span class="keyword">import</span> org.koin.android.ext.koin.androidContext</span><br><span class="line"><span class="keyword">import</span> org.koin.android.ext.koin.androidLogger</span><br><span class="line"><span class="keyword">import</span> org.koin.androidx.viewmodel.dsl.viewModel</span><br><span class="line"><span class="keyword">import</span> org.koin.core.context.startKoin</span><br><span class="line"><span class="keyword">import</span> org.koin.dsl.module</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyApplication</span>: <span class="type">Application</span></span>() &#123;</span><br><span class="line">    <span class="keyword">var</span> appModule = module &#123;</span><br><span class="line">        single &#123; MyRepo() &#125;</span><br><span class="line">        viewModel &#123; MyViewModel(<span class="keyword">get</span>()) &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onCreate</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate()</span><br><span class="line"></span><br><span class="line">        startKoin &#123;</span><br><span class="line">            androidLogger()</span><br><span class="line">            androidContext(<span class="keyword">this</span><span class="symbol">@MyApplication</span>)</span><br><span class="line">            modules(appModule)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>MyFragment.kt</code></p>
<figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.koin.androidx.viewmodel.ext.android.viewModel</span><br><span class="line"></span><br><span class="line"><span class="keyword">val</span> viewModel: MyViewModel <span class="keyword">by</span> viewModel()</span><br></pre></td></tr></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-08-15T18:48:58.000Z" title="2019-08-15T18:48:58.000Z">2019-08-15</time><span class="level-item">2 minutes read (About 310 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-use-coroutine-LiveData-in-Android/">How to use coroutine LiveData in Android</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/358">#358</a></strong></p>
<p><code>app/build.gradle</code></p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">implementation <span class="string">"androidx.lifecycle:lifecycle-livedata-ktx:2.2.0-alpha01"</span></span><br></pre></td></tr></table></figure>

<figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> androidx.lifecycle.ViewModel</span><br><span class="line"><span class="keyword">import</span> androidx.lifecycle.liveData</span><br><span class="line"><span class="keyword">import</span> kotlinx.coroutines.Dispatchers</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MainViewModel</span> : <span class="type">ViewModel</span></span>() &#123;</span><br><span class="line">    <span class="keyword">val</span> repository: TodoRepository = TodoRepository()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> firstTodo = liveData(Dispatchers.IO) &#123;</span><br><span class="line">        <span class="keyword">val</span> retrivedTodo = repository.getTodo(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">        emit(retrivedTodo)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Use-coroutines-with-LiveData"><a href="#Use-coroutines-with-LiveData" class="headerlink" title="Use coroutines with LiveData"></a>Use coroutines with LiveData</h2><p><a href="https://developer.android.com/topic/libraries/architecture/coroutines">https://developer.android.com/topic/libraries/architecture/coroutines</a></p>
<blockquote>
<p>The liveData building block serves as a structured concurrency primitive between coroutines and LiveData. The code block starts executing when LiveData becomes active and is automatically canceled after a configurable timeout when the LiveData becomes inactive.</p>
</blockquote>
<h2 id="Source-code"><a href="#Source-code" class="headerlink" title="Source code"></a>Source code</h2><p><a href="https://android.googlesource.com/platform/frameworks/support/+/androidx-master-dev/lifecycle/lifecycle-livedata-ktx/src/main/java/androidx/lifecycle/CoroutineLiveData.kt">https://android.googlesource.com/platform/frameworks/support/+/androidx-master-dev/lifecycle/lifecycle-livedata-ktx/src/main/java/androidx/lifecycle/CoroutineLiveData.kt</a><br><a href="https://android.googlesource.com/platform/frameworks/support/+/androidx-master-dev/lifecycle/lifecycle-livedata-ktx/src/main/java/androidx/lifecycle/FlowLiveData.kt">https://android.googlesource.com/platform/frameworks/support/+/androidx-master-dev/lifecycle/lifecycle-livedata-ktx/src/main/java/androidx/lifecycle/FlowLiveData.kt</a></p>
<p><code>CoroutineLiveData.kt</code></p>
<figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@UseExperimental(ExperimentalTypeInference::class)</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="type">&lt;T&gt;</span> <span class="title">liveData</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">    context: <span class="type">CoroutineContext</span> = EmptyCoroutineContext,</span></span></span><br><span class="line"><span class="function"><span class="params">    timeoutInMs: <span class="type">Long</span> = DEFAULT_TIMEOUT,</span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="meta">@BuilderInference</span> block: <span class="type">suspend</span> <span class="type">LiveDataScope</span>&lt;<span class="type">T</span>&gt;.() -&gt; <span class="type">Unit</span></span></span></span><br><span class="line"><span class="function"><span class="params">)</span></span>: LiveData&lt;T&gt; = CoroutineLiveData(context, timeoutInMs, block)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>a LiveData that tries to load the <code>User</code> from local cache first and then tries from the server and also yields the updated value</p>
</blockquote>
<figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> user = liveData &#123;</span><br><span class="line"> 	<span class="comment">// dispatch loading first</span></span><br><span class="line"> 	emit(LOADING(id))</span><br><span class="line"> 	<span class="comment">// check local storage</span></span><br><span class="line"> 	<span class="keyword">val</span> cached = cache.loadUser(id)</span><br><span class="line"></span><br><span class="line"> 	<span class="keyword">if</span> (cached != <span class="literal">null</span>) &#123;</span><br><span class="line">    	emit(cached)</span><br><span class="line"> 	&#125;</span><br><span class="line"></span><br><span class="line"> 	<span class="keyword">if</span> (cached == <span class="literal">null</span> || cached.isStale()) &#123;</span><br><span class="line">    	<span class="keyword">val</span> fresh = api.fetch(id) <span class="comment">// errors are ignored for brevity</span></span><br><span class="line">     	cache.save(fresh)</span><br><span class="line">     	emit(fresh)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Read-more"><a href="#Read-more" class="headerlink" title="Read more"></a>Read more</h2><ul>
<li><a href="https://proandroiddev.com/suspend-what-youre-doing-retrofit-has-now-coroutines-support-c65bd09ba067">Suspend what you’re doing: Retrofit has now Coroutines support!</a></li>
<li><a href="https://medium.com/corouteam/exploring-kotlin-coroutines-and-lifecycle-architectural-components-integration-on-android-c63bb8a9156f">Exploring new Coroutines and Lifecycle Architectural Components integration on Android</a></li>
<li><a href="https://android.jlelse.eu/coroutine-in-android-working-with-lifecycle-fc9c1a31e5f3">Coroutine in Android: Working with Lifecycle</a></li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-08-14T18:53:28.000Z" title="2019-08-14T18:53:28.000Z">2019-08-14</time><span class="level-item">a minute read (About 190 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-declare-generic-RecyclerView-adapter-in-Android/">How to declare generic RecyclerView adapter in Android</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/357">#357</a></strong></p>
<p><code>generic/Adapter.kt</code></p>
<figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.onmyway133.generic</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.view.LayoutInflater</span><br><span class="line"><span class="keyword">import</span> android.view.View</span><br><span class="line"><span class="keyword">import</span> android.view.ViewGroup</span><br><span class="line"><span class="keyword">import</span> androidx.recyclerview.widget.RecyclerView</span><br><span class="line"></span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Adapter</span>&lt;<span class="type">T</span>&gt;</span>(<span class="keyword">var</span> items: ArrayList&lt;T&gt;): RecyclerView.Adapter&lt;RecyclerView.ViewHolder&gt;() &#123;</span><br><span class="line">    <span class="keyword">abstract</span> <span class="function"><span class="keyword">fun</span> <span class="title">configure</span><span class="params">(item: <span class="type">T</span>, holder: <span class="type">ViewHolder</span>)</span></span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">update</span><span class="params">(items: <span class="type">ArrayList</span>&lt;<span class="type">T</span>&gt;)</span></span> &#123;</span><br><span class="line">        <span class="keyword">this</span>.items = items</span><br><span class="line">        notifyDataSetChanged()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">getItemCount</span><span class="params">()</span></span>: <span class="built_in">Int</span> = items.count()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onCreateViewHolder</span><span class="params">(parent: <span class="type">ViewGroup</span>, viewType: <span class="type">Int</span>)</span></span>: RecyclerView.ViewHolder &#123;</span><br><span class="line">        <span class="keyword">val</span> view = LayoutInflater</span><br><span class="line">            .from(parent.context)</span><br><span class="line">            .inflate(viewType, parent, <span class="literal">false</span>)</span><br><span class="line">        <span class="keyword">return</span> ViewHolder(view)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onBindViewHolder</span><span class="params">(holder: <span class="type">RecyclerView</span>.<span class="type">ViewHolder</span>, position: <span class="type">Int</span>)</span></span> &#123;</span><br><span class="line">        configure(items[position], holder <span class="keyword">as</span> ViewHolder)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ViewHolder</span></span>(view: View): RecyclerView.ViewHolder(view) &#123;&#125;</span><br></pre></td></tr></table></figure>

<p><code>hero/HeroAdapter.kt</code></p>
<figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.onmyway133.hero</span><br><span class="line"><span class="keyword">import</span> kotlinx.android.synthetic.main.hero_item_view.view.*</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Adapter</span></span>(items: ArrayList&lt;Hero&gt;): com.onmyway133.generic.Adapter&lt;Hero&gt;(items) &#123;</span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">configure</span><span class="params">(item: <span class="type">Hero</span>, holder: <span class="type">ViewHolder</span>)</span></span> &#123;</span><br><span class="line">        holder.itemView.titleLabel.text = item.name</span><br><span class="line">        holder.itemView.descriptionLabel.text = item.description</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">getItemViewType</span><span class="params">(position: <span class="type">Int</span>)</span></span>: <span class="built_in">Int</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> R.layout.hero_item_view</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>May run into <a href="https://stackoverflow.com/questions/49512629/default-interface-methods-are-only-supported-starting-with-android-n">https://stackoverflow.com/questions/49512629/default-interface-methods-are-only-supported-starting-with-android-n</a></p>
<p><code>app/build.gradle</code></p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">android &#123;</span><br><span class="line">    compileOptions &#123;</span><br><span class="line">        sourceCompatibility JavaVersion.VERSION_1_8</span><br><span class="line">        targetCompatibility JavaVersion.VERSION_1_8</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-08-14T09:05:23.000Z" title="2019-08-14T09:05:23.000Z">2019-08-14</time><span class="level-item">5 minutes read (About 804 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-use-Payment-Intent-and-Setup-Intents-with-Stripe-in-iOS/">How to use Payment Intent and Setup Intents with Stripe in iOS</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/356">#356</a></strong></p>
<p><code>StripeHandler.swift</code></p>
<p>From Stripe 16.0.0 <a href="https://github.com/stripe/stripe-ios/blob/master/CHANGELOG.md#1600-2019-07-18">https://github.com/stripe/stripe-ios/blob/master/CHANGELOG.md#1600-2019-07-18</a></p>
<blockquote>
<p>Migrates STPPaymentCardTextField.cardParams property type from STPCardParams to STPPaymentMethodCardParams</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">StripeHandler</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">createPaymentMethod</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">        textField: STPPaymentCardTextField,</span></span></span><br><span class="line"><span class="function"><span class="params">        completion: @escaping <span class="params">(Result&lt;STPPaymentMethod, Error&gt;)</span></span></span> -&gt; <span class="type">Void</span>) &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> paymentMethodParams = <span class="type">STPPaymentMethodParams</span>(</span><br><span class="line">            card: textField.cardParams,</span><br><span class="line">            billingDetails: <span class="literal">nil</span>,</span><br><span class="line">            metadata: <span class="literal">nil</span></span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">        <span class="type">STPAPIClient</span>.shared().createPaymentMethod(</span><br><span class="line">            with: paymentMethodParams,</span><br><span class="line">            completion: &#123; paymentMethod, error <span class="keyword">in</span></span><br><span class="line">                <span class="type">DispatchQueue</span>.main.async &#123;</span><br><span class="line">                    <span class="keyword">if</span> <span class="keyword">let</span> paymentMethod = paymentMethod &#123;</span><br><span class="line">                        completion(.success(paymentMethod))</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        completion(.failure(error ?? <span class="type">AppError</span>.request))</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">        <span class="type">STPAPIClient</span>.shared().createPaymentMethod(</span><br><span class="line">            with: paymentMethodParams,</span><br><span class="line">            completion: &#123; paymentMethod, error <span class="keyword">in</span></span><br><span class="line">                <span class="type">DispatchQueue</span>.main.async &#123;</span><br><span class="line">                    <span class="keyword">if</span> <span class="keyword">let</span> paymentMethod = paymentMethod &#123;</span><br><span class="line">                        completion(.success(paymentMethod))</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        completion(.failure(error ?? <span class="type">AppError</span>.request))</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">confirmSetupIntents</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">        clientSecret: String,</span></span></span><br><span class="line"><span class="function"><span class="params">        paymentMethodId: String,</span></span></span><br><span class="line"><span class="function"><span class="params">        context: STPAuthenticationContext?,</span></span></span><br><span class="line"><span class="function"><span class="params">        completion: @escaping <span class="params">(Result&lt;STPSetupIntent, Error&gt;)</span></span></span> -&gt; <span class="type">Void</span>) &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">guard</span> <span class="keyword">let</span> context = context <span class="keyword">else</span> &#123;</span><br><span class="line">            completion(.failure(<span class="type">AppError</span>.invalid))</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> setupIntentParams = <span class="type">STPSetupIntentConfirmParams</span>(clientSecret: clientSecret)</span><br><span class="line">        setupIntentParams.paymentMethodID = paymentMethodId</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> paymentHandler = <span class="type">STPPaymentHandler</span>.shared()</span><br><span class="line">        paymentHandler.confirmSetupIntent(</span><br><span class="line">            setupIntentParams,</span><br><span class="line">            with: context,</span><br><span class="line">            completion: &#123; status, intent, error <span class="keyword">in</span></span><br><span class="line">                <span class="type">DispatchQueue</span>.main.async &#123;</span><br><span class="line">                    <span class="keyword">if</span> <span class="keyword">case</span> .succeeded = status, <span class="keyword">let</span> intent = intent &#123;</span><br><span class="line">                        completion(.success(intent))</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        completion(.failure(error ?? <span class="type">AppError</span>.invalid))</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">     <span class="function"><span class="keyword">func</span> <span class="title">confirmPaymentIntents</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">        clientSecret: String,</span></span></span><br><span class="line"><span class="function"><span class="params">        context: STPAuthenticationContext?,</span></span></span><br><span class="line"><span class="function"><span class="params">        completion: @escaping <span class="params">(Result&lt;STPPaymentIntent, Error&gt;)</span></span></span> -&gt; <span class="type">Void</span>) &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">guard</span> <span class="keyword">let</span> context = context <span class="keyword">else</span> &#123;</span><br><span class="line">            completion(.failure(<span class="type">AppError</span>.invalid))</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">STPPaymentHandler</span>.shared().handleNextAction(</span><br><span class="line">            forPayment: clientSecret,</span><br><span class="line">            with: context,</span><br><span class="line">            returnURL: <span class="literal">nil</span>,</span><br><span class="line">            completion: &#123; status, paymentIntent, error <span class="keyword">in</span></span><br><span class="line">                <span class="keyword">if</span> <span class="keyword">case</span> .succeeded = status, <span class="keyword">let</span> paymentIntent = paymentIntent &#123;</span><br><span class="line">                    completion(.success(paymentIntent))</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    completion(.failure(error ?? <span class="type">AppError</span>.invalid))</span><br><span class="line">                &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">toCard</span><span class="params">(paymentMethod: STPPaymentMethod)</span></span> -&gt; <span class="type">MyCard?</span> &#123;</span><br><span class="line">        <span class="keyword">guard</span></span><br><span class="line">            <span class="keyword">let</span> card = paymentMethod.card,</span><br><span class="line">            <span class="keyword">let</span> last4 = card.last4</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> withValue(<span class="type">MyCard</span>()) &#123;</span><br><span class="line">            $<span class="number">0</span>.expiryYear = <span class="type">UInt32</span>(card.expYear)</span><br><span class="line">            $<span class="number">0</span>.expiryMonth = <span class="type">UInt32</span>(card.expMonth)</span><br><span class="line">            $<span class="number">0</span>.lastFourDigits = last4</span><br><span class="line">            $<span class="number">0</span>.brand = <span class="type">STPCard</span>.string(from: card.brand)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Payment-intents"><a href="#Payment-intents" class="headerlink" title="Payment intents"></a>Payment intents</h2><p><a href="https://stripe.com/docs/payments/payment-intents/creating-payment-intents">https://stripe.com/docs/payments/payment-intents/creating-payment-intents</a></p>
<blockquote>
<p>When using automatic confirmation, create the PaymentIntent at the beginning of the checkout process. When using manual confirmation, create the PaymentIntent after collecting payment information from the customer using Elements or our iOS and Android SDKs. For a detailed comparison on the automatic and manual confirmation flows, see accepting one-time payments.</p>
</blockquote>
<h4 id="Step-3-Authenticate-the-payment-if-necessary"><a href="#Step-3-Authenticate-the-payment-if-necessary" class="headerlink" title="Step 3: Authenticate the payment if necessary"></a>Step 3: Authenticate the payment if necessary</h4><blockquote>
<p>Pass the confirmed Payment Intent client secret from the previous step to STPPaymentHandler handleNextActionForPayment. If the customer must perform 3D Secure authentication to complete the payment, STPPaymentHandler presents view controllers using the STPAuthenticationContext passed in and walks them through that process. See Supporting 3D Secure Authentication on iOS to learn more.</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">MyAPIClient</span>.createAndConfirmPaymentIntent(paymentMethodId: paymentMethodId) &#123; result <span class="keyword">in</span></span><br><span class="line">  <span class="keyword">guard</span> <span class="keyword">case</span> .success(<span class="keyword">let</span> paymentIntentClientSecret) = result <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// Handle error</span></span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="type">STPPaymentHandler</span>.shared().handleNextAction(forPayment: paymentIntentClientSecret, with: <span class="keyword">self</span>, returnURL: <span class="literal">nil</span>) &#123; (status, paymentIntent, error) <span class="keyword">in</span></span><br><span class="line">    <span class="keyword">switch</span> (status) &#123;</span><br><span class="line">      <span class="keyword">case</span> .succeeded:</span><br><span class="line">        <span class="comment">// ...Continued in Step 4</span></span><br><span class="line">      <span class="keyword">case</span> .canceled:</span><br><span class="line">        <span class="comment">// Handle cancel</span></span><br><span class="line">      <span class="keyword">case</span> .failed:</span><br><span class="line">        <span class="comment">// Handle error</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Setup-intents"><a href="#Setup-intents" class="headerlink" title="Setup intents"></a>Setup intents</h2><p>There is Setup intents <a href="https://stripe.com/docs/payments/cards/reusing-cards#saving-cards-without-payment">https://stripe.com/docs/payments/cards/reusing-cards#saving-cards-without-payment</a> for saving cards</p>
<blockquote>
<p>Use the Setup Intents API to authenticate a customer’s card without making an initial payment. This flow works best for businesses that want to onboard customers without charging them right away:</p>
</blockquote>
<h4 id="Step-4-Submit-the-card-details-to-Stripe-from-the-client"><a href="#Step-4-Submit-the-card-details-to-Stripe-from-the-client" class="headerlink" title="Step 4: Submit the card details to Stripe from the client"></a>Step 4: Submit the card details to Stripe from the client</h4><blockquote>
<p>Pass the STPSetupIntentParams object to the confirmSetupIntent method on a STPPaymentHandler sharedManager. If the customer must perform additional steps to complete the payment, such as authentication, STPPaymentHandler presents view controllers using the STPAuthenticationContext passed in and walks them through that process. See Supporting 3D Secure Authentication on iOS to learn more.</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> setupIntentParams = <span class="type">STPSetupIntentParams</span>(clientSecret: clientSecret)</span><br><span class="line">setupIntentParams.paymentMethodId = paymentMethodId</span><br><span class="line"><span class="keyword">let</span> paymentManager = <span class="type">STPPaymentHandler</span>.shared()</span><br><span class="line">paymentManager.confirmSetupIntent(setupIntentParams, authenticationContext: <span class="keyword">self</span>, completion &#123; (status, setupIntent, error) <span class="keyword">in</span></span><br><span class="line">  <span class="keyword">switch</span> (status) &#123;</span><br><span class="line">    <span class="keyword">case</span> .succeeded:</span><br><span class="line">      <span class="comment">// Setup succeeded</span></span><br><span class="line">    <span class="keyword">case</span> .canceled:</span><br><span class="line">      <span class="comment">// Handle cancel</span></span><br><span class="line">    <span class="keyword">case</span> .failed:</span><br><span class="line">      <span class="comment">// Handle error</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="Authentication-context"><a href="#Authentication-context" class="headerlink" title="Authentication context"></a>Authentication context</h2><p>In <code>STPPaymentHandler.m</code></p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="built_in">BOOL</span>)_canPresentWithAuthenticationContext:(<span class="keyword">id</span>&lt;STPAuthenticationContext&gt;)authenticationContext &#123;</span><br><span class="line">    <span class="built_in">UIViewController</span> *presentingViewController = authenticationContext.authenticationPresentingViewController;</span><br><span class="line">    <span class="comment">// Is presentingViewController non-nil and in the window?</span></span><br><span class="line">    <span class="keyword">if</span> (presentingViewController == <span class="literal">nil</span> || presentingViewController.view.window == <span class="literal">nil</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">NO</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Is it the Apple Pay VC?</span></span><br><span class="line">    <span class="keyword">if</span> ([presentingViewController isKindOfClass:[PKPaymentAuthorizationViewController <span class="keyword">class</span>]]) &#123;</span><br><span class="line">        <span class="comment">// We can't present over Apple Pay, user must implement prepareAuthenticationContextForPresentation: to dismiss it.</span></span><br><span class="line">        <span class="keyword">return</span> [authenticationContext respondsToSelector:<span class="keyword">@selector</span>(prepareAuthenticationContextForPresentation:)];</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Is it already presenting something?</span></span><br><span class="line">    <span class="keyword">if</span> (presentingViewController.presentedViewController == <span class="literal">nil</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">YES</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// Hopefully the user implemented prepareAuthenticationContextForPresentation: to dismiss it.</span></span><br><span class="line">        <span class="keyword">return</span> [authenticationContext respondsToSelector:<span class="keyword">@selector</span>(prepareAuthenticationContextForPresentation:)];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Use-stripe-SDK"><a href="#Use-stripe-SDK" class="headerlink" title="Use stripe SDK"></a>Use stripe SDK</h2><p><code>STPSetupIntentConfirmParams.useStripeSDK</code></p>
<blockquote>
<p> A boolean number to indicate whether you intend to use the Stripe SDK’s functionality to handle any SetupIntent next actions.<br>If set to false, STPSetupIntent.nextAction will only ever contain a redirect url that can be opened in a webview or mobile browser.<br>When set to true, the nextAction may contain information that the Stripe SDK can use to perform native authentication within your app.</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> setupIntentParams = <span class="type">STPSetupIntentConfirmParams</span>(clientSecret: clientSecret)</span><br><span class="line">setupIntentParams.useStripeSDK = <span class="type">NSNumber</span>(booleanLiteral: <span class="literal">true</span>)</span><br></pre></td></tr></table></figure>

<h2 id="Read-more"><a href="#Read-more" class="headerlink" title="Read more"></a>Read more</h2><ul>
<li><a href="https://stripe.com/docs/payments/payment-intents/ios#create-and-confirm-payment-intent-manual">Using Payment Intents on iOS</a></li>
<li><a href="https://stripe.com/docs/payments/payment-intents">One-time Payments with the Payment Intents API</a></li>
<li><a href="https://stripe.com/docs/mobile/ios/authentication#return-url">Supporting 3D Secure Authentication on iOS</a></li>
<li><a href="https://stripe.dev/stripe-ios/docs/Classes/STPSetupIntentConfirmParams.html">STPSetupIntentConfirmParams</a></li>
<li><a href="https://stripe.com/docs/testing">Testing</a></li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-08-13T11:09:29.000Z" title="2019-08-13T11:09:29.000Z">2019-08-13</time><span class="level-item">a few seconds read (About 78 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-format-currency-in-Swift/">How to format currency in Swift</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/355">#355</a></strong></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">CurrencyFormatter</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">format</span><span class="params">(amount: UInt64, decimalCount: Int)</span></span> -&gt; <span class="type">String</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> formatter = <span class="type">NumberFormatter</span>()</span><br><span class="line">        formatter.minimumFractionDigits = <span class="number">0</span></span><br><span class="line">        formatter.maximumFractionDigits = decimalCount</span><br><span class="line">        formatter.numberStyle = .decimal</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> value = <span class="type">Double</span>(amount) / pow(<span class="type">Double</span>(<span class="number">10</span>), <span class="type">Double</span>(decimalCount))</span><br><span class="line">        <span class="keyword">let</span> fallback = <span class="type">String</span>(format: <span class="string">"%.0f"</span>, value)</span><br><span class="line">        <span class="keyword">return</span> formatter.string(from: <span class="type">NSNumber</span>(value: value)) ?? fallback</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CurrencyFormatterTests</span>: <span class="title">XCTestCase</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">testFormat</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">let</span> formatter = <span class="type">CurrencyFormatter</span>()</span><br><span class="line">        <span class="comment">// 120 USD</span></span><br><span class="line">        <span class="type">XCTAssertEqual</span>(formatter.format(amount: <span class="number">120</span>, decimalCount: <span class="number">0</span>), <span class="string">"120"</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 12000 cents</span></span><br><span class="line">        <span class="type">XCTAssertEqual</span>(formatter.format(amount: <span class="number">12000</span>, decimalCount: <span class="number">2</span>), <span class="string">"120"</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 12520 cents</span></span><br><span class="line">        <span class="type">XCTAssertEqual</span>(formatter.format(amount: <span class="number">12520</span>, decimalCount: <span class="number">2</span>), <span class="string">"125.2"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-08-13T09:55:52.000Z" title="2019-08-13T09:55:52.000Z">2019-08-13</time><span class="level-item">a few seconds read (About 73 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-simplify-struct-mutating-in-Swift/">How to simplify struct mutating in Swift</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/354">#354</a></strong></p>
<p>In <a href="https://github.com/onmyway133/Construction/blob/master/Sources/Construction.swift#L37">Construction</a>, we have a <code>build</code> method to apply closure to <code>inout</code> struct.</p>
<p>We can explicitly define that with <code>withValue</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">withValue</span>&lt;T&gt;<span class="params">(<span class="number">_</span> value: T, closure: <span class="params">(<span class="keyword">inout</span> T)</span></span></span> -&gt; <span class="type">Void</span>) -&gt; <span class="type">T</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> mutableValue = value</span><br><span class="line">    closure(&amp;mutableValue)</span><br><span class="line">    <span class="keyword">return</span> mutableValue</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>So we can modify Protobuf structs easily</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">user.book = withValue(<span class="type">Book</span>()) &#123;</span><br><span class="line">    $<span class="number">0</span>.price = <span class="number">300</span></span><br><span class="line">    $<span class="number">0</span>.author = withValue(<span class="type">Author</span>()) &#123;</span><br><span class="line">        $<span class="number">0</span>.name = <span class="string">"Thor"</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-08-13T06:37:55.000Z" title="2019-08-13T06:37:55.000Z">2019-08-13</time><span class="level-item">a minute read (About 160 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-not-resign-first-responder-for-UITextField-in-iOS/">How to not resign first responder for UITextField in iOS</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/353">#353</a></strong></p>
<p>When using <code>STPPaymentCardTextField</code> from <a href="https://github.com/stripe/stripe-ios">stripe-ios</a>, the default behavior is when we touch outside to dismiss keyboard, it checks and focus on number text field is it is invalid</p>
<p><code>STPPaymentCardTextField.m</code></p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">- (STPFormTextField *)currentFirstResponderField &#123;</span><br><span class="line">    <span class="keyword">for</span> (STPFormTextField *textField <span class="keyword">in</span> [<span class="keyword">self</span> allFields]) &#123;</span><br><span class="line">        <span class="keyword">if</span> ([textField isFirstResponder]) &#123;</span><br><span class="line">            <span class="keyword">return</span> textField;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">nil</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="built_in">BOOL</span>)canResignFirstResponder &#123;</span><br><span class="line">    <span class="keyword">return</span> [<span class="keyword">self</span>.currentFirstResponderField canResignFirstResponder];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="built_in">BOOL</span>)resignFirstResponder &#123;</span><br><span class="line">    [<span class="keyword">super</span> resignFirstResponder];</span><br><span class="line">    <span class="built_in">BOOL</span> success = [<span class="keyword">self</span>.currentFirstResponderField resignFirstResponder];</span><br><span class="line">    [<span class="keyword">self</span> layoutViewsToFocusField:<span class="literal">nil</span></span><br><span class="line">                         animated:<span class="literal">YES</span></span><br><span class="line">                       completion:<span class="literal">nil</span>];</span><br><span class="line">    [<span class="keyword">self</span> updateImageForFieldType:STPCardFieldTypeNumber];</span><br><span class="line">    <span class="keyword">return</span> success;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Then it calls <code>[self.numberField becomeFirstResponder];</code> is validation on number fails</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="keyword">void</span> (^STPLayoutAnimationCompletionBlock)(<span class="built_in">BOOL</span> completed);</span><br><span class="line">- (<span class="keyword">void</span>)layoutViewsToFocusField:(<span class="built_in">NSNumber</span> *)focusedField</span><br><span class="line">                       animated:(<span class="built_in">BOOL</span>)animated</span><br><span class="line">                     completion:(STPLayoutAnimationCompletionBlock)completion &#123;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">NSNumber</span> *fieldtoFocus = focusedField;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (fieldtoFocus == <span class="literal">nil</span></span><br><span class="line">        &amp;&amp; ![<span class="keyword">self</span>.focusedTextFieldForLayout isEqualToNumber:@(STPCardFieldTypeNumber)]</span><br><span class="line">        &amp;&amp; ([<span class="keyword">self</span>.viewModel validationStateForField:STPCardFieldTypeNumber] != STPCardValidationStateValid)) &#123;</span><br><span class="line">        fieldtoFocus = @(STPCardFieldTypeNumber);</span><br><span class="line">        [<span class="keyword">self</span>.numberField becomeFirstResponder];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="isUserInteractionEnabled"><a href="#isUserInteractionEnabled" class="headerlink" title="isUserInteractionEnabled"></a>isUserInteractionEnabled</h3><p>Be aware to use <code>isUserInteractionEnabled</code> on <code>STPPaymentCardTextField</code> as that can resign first responder when set to <code>true</code> and become first responder when set to <code>false</code></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-08-12T04:44:36.000Z" title="2019-08-12T04:44:36.000Z">2019-08-12</time><span class="level-item">a minute read (About 122 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-use-React-JSX-with-Babel-in-Electron/">How to use React JSX with Babel in Electron</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/352">#352</a></strong></p>
<p>For a normal electron app created with <code>npm init</code>, we can use all features of ES6, but not the JSX syntax for React. We can use just Babel to transpile JSX, as used in <a href="https://github.com/onmyway133/IconGenerator/blob/master/.babelrc">IconGenerator</a></p>
<p><code>.babelrc</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">"plugins"</span>: [</span><br><span class="line">    <span class="string">"transform-react-jsx-source"</span>    </span><br><span class="line">  ],</span><br><span class="line">  <span class="string">"presets"</span>: [<span class="string">"env"</span>, <span class="string">"react"</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>And in <code>package.json</code>, call babel to transpile <code>src</code> to <code>dist</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"main"</span>: <span class="string">"dist/main.js"</span>,</span><br><span class="line"><span class="string">"scripts"</span>: &#123;</span><br><span class="line">    <span class="string">"start"</span>: <span class="string">"npm run babel &amp;&amp; electron ."</span>,</span><br><span class="line">    <span class="string">"babel"</span>: <span class="string">"babel ./src --out-dir ./dist --copy-files"</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p>Remember to use <code>dist/main.js</code> as our starting point, and in <a href="https://github.com/onmyway133/IconGenerator/blob/master/index.html">index.html</a>, specify <code>./dist/renderer.js</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"root"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span></span><br><span class="line"><span class="javascript">      <span class="built_in">require</span>(<span class="string">'./dist/renderer.js'</span>)</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-08-10T18:49:00.000Z" title="2019-08-10T18:49:00.000Z">2019-08-10</time><span class="level-item">a minute read (About 140 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-define-version-property-in-gradle/">How to define version property in gradle</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/351">#351</a></strong></p>
<p>From <a href="https://developer.android.com/studio/build/gradle-tips">Gradle tips and recipes</a>, Configure project-wide properties</p>
<blockquote>
<p>For projects that include multiple modules, it might be useful to define properties at the project level and share them across all modules. You can do this by adding extra properties to the ext block in the top-level build.gradle file.</p>
</blockquote>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ext &#123;</span><br><span class="line">    navigationVersion = <span class="string">"2.0.0"</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">rootProject.ext.navigationVersion</span><br></pre></td></tr></table></figure>

<p>Versions are used mostly in <code>dependencies</code> block so having them defined in global <code>ext</code> is not quite right.  We can use <code>def</code> to define variables</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">dependencies &#123;</span><br><span class="line">    <span class="keyword">def</span> navigationVersion = <span class="string">"2.0.0"</span></span><br><span class="line">    implementation <span class="string">"androidx.navigation:navigation-fragment-ktx:$navigationVersion"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>For better namespacing, we can use a class</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Version</span> &#123;</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">def</span> navigation = <span class="string">"2.0.0"</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">def</span> drawerLayout = <span class="string">"1.0.0"</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">def</span> koin = <span class="string">"2.0.1"</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">def</span> moshi = <span class="string">"1.8.0"</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">dependencies &#123;</span><br><span class="line">    implementation <span class="string">"androidx.navigation:navigation-fragment-ktx:$Version.navigation"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-08-07T11:57:14.000Z" title="2019-08-07T11:57:14.000Z">2019-08-07</time><span class="level-item">a minute read (About 189 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-use-Firebase-PhoneAuth-in-iOS/">How to use Firebase PhoneAuth in iOS</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/350">#350</a></strong></p>
<p>Read <a href="https://firebase.google.com/docs/auth/ios/phone-auth">Authenticate with Firebase on iOS using a Phone Number</a></p>
<h3 id="Disable-swizzling"><a href="#Disable-swizzling" class="headerlink" title="Disable swizzling"></a>Disable swizzling</h3><p><code>Info.plist</code></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">key</span>&gt;</span>FirebaseAppDelegateProxyEnabled<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">string</span>&gt;</span>NO<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="Enable-remote-notification"><a href="#Enable-remote-notification" class="headerlink" title="Enable remote notification"></a>Enable remote notification</h3><p>Enable Capability -&gt; Background mode -&gt; Remote notification</p>
<p><code>AppDelegate.swift</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Firebase</span><br><span class="line"><span class="keyword">import</span> UIKit</span><br><span class="line"><span class="keyword">import</span> FirebaseAuth</span><br><span class="line"></span><br><span class="line"><span class="meta">@UIApplicationMain</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AppDelegate</span>: <span class="title">UIResponder</span>, <span class="title">UIApplicationDelegate</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">let</span> appFlowController = <span class="type">AppFlowController</span>()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">application</span><span class="params">(<span class="number">_</span> application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplication.LaunchOptionsKey: <span class="keyword">Any</span>]?)</span></span> -&gt; <span class="type">Bool</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">UIApplication</span>.shared.registerForRemoteNotifications()</span><br><span class="line">		<span class="type">FirebaseApp</span>.configure()</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// MARK: - Remote Notification</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">application</span><span class="params">(<span class="number">_</span> application: UIApplication, didRegisterForRemoteNotificationsWithDeviceToken deviceToken: Data)</span></span> &#123;</span><br><span class="line">        <span class="type">Auth</span>.auth().setAPNSToken(deviceToken, type: .unknown)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">application</span><span class="params">(<span class="number">_</span> application: UIApplication, didFailToRegisterForRemoteNotificationsWithError error: Error)</span></span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(error)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">application</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">        <span class="number">_</span> application: UIApplication,</span></span></span><br><span class="line"><span class="function"><span class="params">        didReceiveRemoteNotification userInfo: [AnyHashable: <span class="keyword">Any</span>],</span></span></span><br><span class="line"><span class="function"><span class="params">        fetchCompletionHandler completionHandler: @escaping <span class="params">(UIBackgroundFetchResult)</span></span></span> -&gt; <span class="type">Void</span>) &#123;</span><br><span class="line">        completionHandler(.noData)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">application</span><span class="params">(<span class="number">_</span> app: UIApplication, <span class="keyword">open</span> url: URL, options: [UIApplication.OpenURLOptionsKey: <span class="keyword">Any</span>] = [:])</span></span> -&gt; <span class="type">Bool</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> <span class="type">Auth</span>.auth().canHandle(url) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Firebase push message looks like</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">▿ 1 element</span><br><span class="line">  ▿ 0 : 2 elements</span><br><span class="line">    ▿ key : AnyHashable(&quot;com.google.firebase.auth&quot;)</span><br><span class="line">      - value : &quot;com.google.firebase.auth&quot;</span><br><span class="line">    ▿ value : 1 element</span><br><span class="line">      ▿ 0 : 2 elements</span><br><span class="line">        - key : warning</span><br><span class="line">        - value : This fake notification should be forwarded to Firebase Auth.</span><br></pre></td></tr></table></figure>

<h2 id="Captcha"><a href="#Captcha" class="headerlink" title="Captcha"></a>Captcha</h2><p>To disable captcha during testing</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Auth</span>.auth().settings?.isAppVerificationDisabledForTesting = <span class="literal">true</span></span><br></pre></td></tr></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-08-07T07:36:15.000Z" title="2019-08-07T07:36:15.000Z">2019-08-07</time><span class="level-item">3 minutes read (About 453 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-use-Navigation-component-with-DrawerLayout-in-Android/">How to use Navigation component with DrawerLayout in Android</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/349">#349</a></strong></p>
<p><img src="https://user-images.githubusercontent.com/2284279/62612124-24833900-b907-11e9-9a7d-57fbcffa72aa.png" alt="Screenshot_1565169686"></p>
<p><code>build.gradle</code></p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dependencies &#123;</span><br><span class="line">    classpath <span class="string">'android.arch.navigation:navigation-safe-args-gradle-plugin:1.0.0-alpha05'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>app/build.gradle</code></p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">apply <span class="string">plugin:</span> <span class="string">'androidx.navigation.safeargs'</span></span><br><span class="line"></span><br><span class="line">dependencies &#123;</span><br><span class="line">    <span class="keyword">def</span> navigationVersion = <span class="string">"2.0.0"</span></span><br><span class="line">    <span class="keyword">def</span> drawerLayoutVersion = <span class="string">"1.0.0"</span></span><br><span class="line"></span><br><span class="line">    implementation <span class="string">"androidx.drawerlayout:drawerlayout:$drawerLayoutVersion"</span></span><br><span class="line">    implementation <span class="string">"androidx.navigation:navigation-fragment-ktx:$navigationVersion"</span></span><br><span class="line">    implementation <span class="string">"androidx.navigation:navigation-ui-ktx:$navigationVersion"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>main_activity.xml</code></p>
<ul>
<li>Use <code>CoordinatorLayout</code> and <code>ToolBar</code></li>
<li>Define <code>layout_gravity</code> for <code>NavigationView</code></li>
</ul>
<figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">"1.0"</span> encoding=<span class="string">"utf-8"</span>?&gt;</span><br><span class="line">&lt;androidx.drawerlayout.widget.DrawerLayout</span><br><span class="line">    android:layout_height=<span class="string">"match_parent"</span></span><br><span class="line">    android:layout_width=<span class="string">"match_parent"</span></span><br><span class="line">    xmlns:android=<span class="string">"http://schemas.android.com/apk/res/android"</span></span><br><span class="line">    xmlns:app=<span class="string">"http://schemas.android.com/apk/res-auto"</span></span><br><span class="line">    xmlns:tools=<span class="string">"http://schemas.android.com/tools"</span></span><br><span class="line">    android:id=<span class="string">"@+id/drawerLayout"</span></span><br><span class="line">    tools:context=<span class="string">".MainActivity"</span>&gt;</span><br><span class="line"></span><br><span class="line">    &lt;androidx.coordinatorlayout.widget.CoordinatorLayout</span><br><span class="line">        android:layout_width=<span class="string">"match_parent"</span></span><br><span class="line">        android:layout_height=<span class="string">"match_parent"</span>&gt;</span><br><span class="line">        &lt;com.google.android.material.appbar.AppBarLayout</span><br><span class="line">            android:layout_width=<span class="string">"match_parent"</span></span><br><span class="line">            android:layout_height=<span class="string">"wrap_content"</span>&gt;</span><br><span class="line">            &lt;androidx.appcompat.widget.Toolbar</span><br><span class="line">                android:layout_width=<span class="string">"match_parent"</span></span><br><span class="line">                android:layout_height=<span class="string">"?attr/actionBarSize"</span></span><br><span class="line">                android:id=<span class="string">"@+id/toolbar"</span>/&gt;</span><br><span class="line">        &lt;/com.google.android.material.appbar.AppBarLayout&gt;</span><br><span class="line">        &lt;fragment</span><br><span class="line">            android:layout_width=<span class="string">"match_parent"</span></span><br><span class="line">            android:layout_height=<span class="string">"match_parent"</span></span><br><span class="line">            android:id=<span class="string">"@+id/hostFragment"</span></span><br><span class="line">            android:name=<span class="string">"androidx.navigation.fragment.NavHostFragment"</span></span><br><span class="line">            app:defaultNavHost=<span class="string">"true"</span></span><br><span class="line">            app:navGraph=<span class="string">"@navigation/navigation_graph"</span>/&gt;</span><br><span class="line">    &lt;/androidx.coordinatorlayout.widget.CoordinatorLayout&gt;</span><br><span class="line">    &lt;com.google.android.material.navigation.NavigationView</span><br><span class="line">        android:layout_width=<span class="string">"wrap_content"</span></span><br><span class="line">        android:layout_height=<span class="string">"match_parent"</span></span><br><span class="line">        android:id=<span class="string">"@+id/navigationView"</span></span><br><span class="line">        android:fitsSystemWindows=<span class="string">"true"</span></span><br><span class="line">        android:layout_gravity=<span class="string">"start"</span></span><br><span class="line">        app:menu=<span class="string">"@menu/drawer_menu"</span>/&gt;</span><br><span class="line">&lt;/androidx.drawerlayout.widget.DrawerLayout&gt;</span><br></pre></td></tr></table></figure>

<p><code>navigation/navigation_graph.xml</code></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">navigation</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">"http://schemas.android.com/apk/res-auto"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">"@+id/navigationGraph"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">"http://schemas.android.com/tools"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:startDestination</span>=<span class="string">"@id/aboutFragment"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">fragment</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/aboutFragment"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:name</span>=<span class="string">"com.onmyway133.whatsupintech.AboutFragment"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:label</span>=<span class="string">"@string/menu_about"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">tools:layout</span>=<span class="string">"@layout/about_fragment"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">fragment</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/feedFragment"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:name</span>=<span class="string">"com.onmyway133.whatsupintech.FeedFragment"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:label</span>=<span class="string">"@string/menu_git_hub"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">tools:layout</span>=<span class="string">"@layout/feed_fragment"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">fragment</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/webFragment"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:name</span>=<span class="string">"com.onmyway133.whatsupintech.WebFragment"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">tools:layout</span>=<span class="string">"@layout/web_fragment"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">navigation</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><code>menu/drawer_menu.xml</code></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">menu</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">group</span> <span class="attr">android:checkableBehavior</span>=<span class="string">"single"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">item</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">"@+id/about"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:title</span>=<span class="string">"@string/menu_about"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">item</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">"@+id/hackerNews"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:title</span>=<span class="string">"@string/menu_hacker_news"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">item</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">"@+id/reddit"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:title</span>=<span class="string">"@string/menu_reddit"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">item</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">"@+id/dev"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:title</span>=<span class="string">"@string/menu_dev"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">item</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">"@+id/gitHub"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:title</span>=<span class="string">"@string/menu_git_hub"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">group</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">menu</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><code>MainActivity.kotlin</code></p>
<ul>
<li>Use <code>AppBarConfiguration</code> to define multiple top level destinations</li>
<li>Convert Toolbar to ActionBar</li>
</ul>
<figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.onmyway133.whatsupintech</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.os.Bundle</span><br><span class="line"><span class="keyword">import</span> androidx.appcompat.app.AppCompatActivity;</span><br><span class="line"><span class="keyword">import</span> androidx.core.view.GravityCompat</span><br><span class="line"><span class="keyword">import</span> androidx.navigation.findNavController</span><br><span class="line"><span class="keyword">import</span> androidx.navigation.ui.AppBarConfiguration</span><br><span class="line"><span class="keyword">import</span> androidx.navigation.ui.navigateUp</span><br><span class="line"><span class="keyword">import</span> androidx.navigation.ui.setupActionBarWithNavController</span><br><span class="line"><span class="keyword">import</span> androidx.navigation.ui.setupWithNavController</span><br><span class="line"><span class="keyword">import</span> kotlinx.android.synthetic.main.main_activity.*</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> : <span class="type">AppCompatActivity</span></span>() &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">lateinit</span> <span class="keyword">var</span> appBarConfig: AppBarConfiguration</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onCreate</span><span class="params">(savedInstanceState: <span class="type">Bundle</span>?)</span></span> &#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState)</span><br><span class="line">        setContentView(R.layout.main_activity)</span><br><span class="line">        setupNavigationController()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">setupNavigationController</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">val</span> navigationController = findNavController(R.id.hostFragment)</span><br><span class="line"></span><br><span class="line">        setSupportActionBar(toolbar)</span><br><span class="line"></span><br><span class="line">        appBarConfig = AppBarConfiguration(setOf(R.id.aboutFragment, R.id.feedFragment), drawerLayout)</span><br><span class="line">        setupActionBarWithNavController(navigationController, appBarConfig)</span><br><span class="line">        navigationView.setupWithNavController(navigationController)</span><br><span class="line">        navigationView.setNavigationItemSelectedListener &#123; menuItem -&gt;</span><br><span class="line">            drawerLayout.closeDrawers()</span><br><span class="line">            menuItem.isChecked = <span class="literal">true</span></span><br><span class="line">            <span class="keyword">when</span> (menuItem.itemId) &#123;</span><br><span class="line">                R.id.about -&gt; navigationController.navigate(R.id.aboutFragment)</span><br><span class="line">                R.id.gitHub, R.id.reddit, R.id.hackerNews, R.id.dev -&gt; navigationController.navigate(R.id.feedFragment)</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="literal">true</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onSupportNavigateUp</span><span class="params">()</span></span>: <span class="built_in">Boolean</span> &#123;</span><br><span class="line">        <span class="keyword">val</span> navigationController = findNavController(R.id.hostFragment)</span><br><span class="line">        <span class="keyword">return</span> navigationController.navigateUp(appBarConfig) || <span class="keyword">super</span>.onSupportNavigateUp()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onBackPressed</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (drawerLayout.isDrawerOpen(GravityCompat.START)) &#123;</span><br><span class="line">            drawerLayout.closeDrawer(GravityCompat.START)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">super</span>.onBackPressed()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Update-UI-components-with-NavigationUI"><a href="#Update-UI-components-with-NavigationUI" class="headerlink" title="Update UI components with NavigationUI"></a><a href="https://developer.android.com/guide/navigation/navigation-ui">Update UI components with NavigationUI</a></h2><h3 id="Tie-destinations-to-menu-items"><a href="#Tie-destinations-to-menu-items" class="headerlink" title="Tie destinations to menu items"></a>Tie destinations to menu items</h3><blockquote>
<p>NavigationUI also provides helpers for tying destinations to menu-driven UI components. NavigationUI contains a helper method, onNavDestinationSelected(), which takes a MenuItem along with the NavController that hosts the associated destination. If the id of the MenuItem matches the id of the destination, the NavController can then navigate to that destination.</p>
</blockquote>
<h3 id="Add-a-navigation-drawer"><a href="#Add-a-navigation-drawer" class="headerlink" title="Add a navigation drawer"></a>Add a navigation drawer</h3><blockquote>
<p>The drawer icon is displayed on all top-level destinations that use a DrawerLayout. Top-level destinations are the root-level destinations of your app. They do not display an Up button in the app bar.</p>
</blockquote>
<h2 id="Read-more"><a href="#Read-more" class="headerlink" title="Read more"></a>Read more</h2><ul>
<li><a href="https://mvnrepository.com/artifact/android.arch.navigation/navigation-safe-args-gradle-plugin/1.0.0-alpha01">Android Navigation TypeSafe Arguments Gradle Plugin</a></li>
<li><a href="https://developer.android.com/guide/navigation/navigation-getting-started">Get started with the Navigation component</a></li>
<li><a href="https://developer.android.com/guide/navigation/navigation-conditional">Conditional navigation</a></li>
<li><a href="https://github.com/umangburman/Navigation-Drawer-With-Navigation-Component">Navigation Drawer with New JetPacks Navigation Component</a></li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-08-06T11:14:49.000Z" title="2019-08-06T11:14:49.000Z">2019-08-06</time><span class="level-item">2 minutes read (About 325 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-make-digit-passcode-input-in-Swift/">How to make digit passcode input in Swift</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/347">#347</a></strong></p>
<p>Add a hidden <code>UITextField</code> to view hierarchy, and add <code>UITapGestureRecognizer</code> to activate that textField.</p>
<p>Use padding string with limit to the number of labels, and prefix to get exactly n characters.</p>
<img width="596" alt="code" src="https://user-images.githubusercontent.com/2284279/62542858-f34e2e80-b85c-11e9-91df-c9c46a00eefe.png">


<p><code>DigitView.swift</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> UIKit</span><br><span class="line"></span><br><span class="line"><span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">DigitView</span>: <span class="title">UIView</span> </span>&#123;</span><br><span class="line">    <span class="built_in">lazy</span> <span class="keyword">var</span> stackView: <span class="type">UIStackView</span> = &#123;</span><br><span class="line">        <span class="keyword">let</span> view = <span class="type">UIStackView</span>()</span><br><span class="line">        view.axis = .horizontal</span><br><span class="line">        view.distribution = .equalSpacing</span><br><span class="line">        <span class="keyword">return</span> view</span><br><span class="line">    &#125;()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span>(<span class="keyword">set</span>) <span class="keyword">var</span> boxes: [<span class="type">UIView</span>] = []</span><br><span class="line">    <span class="keyword">private</span>(<span class="keyword">set</span>) <span class="keyword">var</span> labels: [<span class="type">UILabel</span>] = []</span><br><span class="line"></span><br><span class="line">    <span class="built_in">lazy</span> <span class="keyword">var</span> hiddenTextField: <span class="type">UITextField</span> = &#123;</span><br><span class="line">        <span class="keyword">let</span> textField = <span class="type">UITextField</span>()</span><br><span class="line">        textField.alpha = <span class="number">0</span></span><br><span class="line">        textField.keyboardType = .numbersAndPunctuation</span><br><span class="line">        <span class="keyword">return</span> textField</span><br><span class="line">    &#125;()</span><br><span class="line"></span><br><span class="line">    <span class="built_in">lazy</span> <span class="keyword">var</span> tapGR = <span class="type">UITapGestureRecognizer</span>(target: <span class="keyword">self</span>, action: #selector(handle(<span class="number">_</span>:)))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="keyword">init</span>(frame: <span class="type">CGRect</span>) &#123;</span><br><span class="line">        <span class="keyword">super</span>.<span class="keyword">init</span>(frame: frame)</span><br><span class="line">        setup()</span><br><span class="line"></span><br><span class="line">        addGestureRecognizer(tapGR)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">required</span> <span class="keyword">init</span>?(coder aDecoder: <span class="type">NSCoder</span>) &#123;</span><br><span class="line">        <span class="built_in">fatalError</span>()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">layoutSubviews</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">super</span>.layoutSubviews()</span><br><span class="line"></span><br><span class="line">        boxes.forEach &#123;</span><br><span class="line">            $<span class="number">0</span>.layer.borderWidth = <span class="number">1</span></span><br><span class="line">            $<span class="number">0</span>.layer.borderColor = <span class="type">R</span>.color.primary.cgColor</span><br><span class="line">            $<span class="number">0</span>.layoutIfNeeded()</span><br><span class="line">            $<span class="number">0</span>.layer.cornerRadius = $<span class="number">0</span>.bounds.height / <span class="number">2</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@objc</span> <span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">handle</span><span class="params">(<span class="number">_</span> tapGR: UITapGestureRecognizer)</span></span> &#123;</span><br><span class="line">        hiddenTextField.becomeFirstResponder()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">setup</span><span class="params">()</span></span> &#123;</span><br><span class="line">        addSubviews([hiddenTextField, stackView])</span><br><span class="line">        boxes = <span class="type">Array</span>(<span class="number">0</span>..&lt;<span class="number">6</span>).<span class="built_in">map</span> &#123; <span class="number">_</span> <span class="keyword">in</span></span><br><span class="line">            <span class="keyword">return</span> <span class="type">UIView</span>()</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        labels = boxes.<span class="built_in">map</span> &#123; box <span class="keyword">in</span></span><br><span class="line">            <span class="keyword">let</span> label = <span class="type">UILabel</span>()</span><br><span class="line">            label.font = <span class="type">R</span>.customFont.semibold(<span class="number">16</span>)</span><br><span class="line">            label.textAlignment = .center</span><br><span class="line">            label.textColor = <span class="type">R</span>.color.primary</span><br><span class="line">            box.addSubview(label)</span><br><span class="line"></span><br><span class="line">            <span class="type">NSLayoutConstraint</span>.on([</span><br><span class="line">                label.centerXAnchor.constraint(equalTo: box.centerXAnchor),</span><br><span class="line">                label.centerYAnchor.constraint(equalTo: box.centerYAnchor)</span><br><span class="line">            ])</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> label</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        boxes.forEach &#123;</span><br><span class="line">            stackView.addArrangedSubview($<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">            <span class="type">NSLayoutConstraint</span>.on([</span><br><span class="line">                $<span class="number">0</span>.heightAnchor.constraint(equalTo: stackView.heightAnchor, multiplier: <span class="number">0.9</span>),</span><br><span class="line">                $<span class="number">0</span>.widthAnchor.constraint(equalTo: $<span class="number">0</span>.heightAnchor, multiplier: <span class="number">1.0</span>)</span><br><span class="line">            ])</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">NSLayoutConstraint</span>.on([</span><br><span class="line">            stackView.pinEdges(view: <span class="keyword">self</span>, inset: <span class="type">UIEdgeInsets</span>(top: <span class="number">0</span>, <span class="keyword">left</span>: <span class="number">16</span>, bottom: <span class="number">0</span>, <span class="keyword">right</span>: -<span class="number">16</span>))</span><br><span class="line">        ])</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>DigitHandler.swift</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">DigitHandler</span>: <span class="title">NSObject</span> </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> digitView: <span class="type">DigitView</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">init</span>(digitView: <span class="type">DigitView</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.digitView = digitView</span><br><span class="line">        <span class="keyword">super</span>.<span class="keyword">init</span>()</span><br><span class="line"></span><br><span class="line">        digitView.hiddenTextField.delegate = <span class="keyword">self</span></span><br><span class="line">        digitView.hiddenTextField.addTarget(<span class="keyword">self</span>, action: #selector(handle(<span class="number">_</span>:)), <span class="keyword">for</span>: .editingChanged)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@objc</span> <span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">handle</span><span class="params">(<span class="number">_</span> textField: UITextField)</span></span> &#123;</span><br><span class="line">        <span class="keyword">guard</span> <span class="keyword">let</span> text = textField.text <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> <span class="built_in">count</span> = digitView.labels.<span class="built_in">count</span></span><br><span class="line">        <span class="keyword">let</span> paddedText = <span class="type">String</span>(text.padding(toLength: <span class="built_in">count</span>, withPad: <span class="string">"-"</span>, startingAt: <span class="number">0</span>).<span class="keyword">prefix</span>(<span class="built_in">count</span>))</span><br><span class="line">        <span class="built_in">zip</span>(digitView.labels, paddedText).forEach &#123; tuple <span class="keyword">in</span></span><br><span class="line">            tuple.<span class="number">0</span>.text = <span class="type">String</span>(tuple.<span class="number">1</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">DigitHandler</span>: <span class="title">UITextFieldDelegate</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">textFieldShouldReturn</span><span class="params">(<span class="number">_</span> textField: UITextField)</span></span> -&gt; <span class="type">Bool</span> &#123;</span><br><span class="line">        textField.resignFirstResponder()</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">textField</span><span class="params">(<span class="number">_</span> textField: UITextField, shouldChangeCharactersIn range: NSRange, replacementString string: String)</span></span> -&gt; <span class="type">Bool</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> text = textField.text ?? <span class="string">""</span></span><br><span class="line">        <span class="keyword">return</span> text.<span class="built_in">count</span> &lt; digitView.labels.<span class="built_in">count</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-08-05T12:16:48.000Z" title="2019-08-05T12:16:48.000Z">2019-08-05</time><span class="level-item">5 minutes read (About 683 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-make-credit-card-input-UI-in-Swift/">How to make credit card input UI in Swift</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/346">#346</a></strong></p>
<p>We have FrontCard that contains number and expiration date, BackCard that contains CVC. CardView is used to contain front and back sides for flipping transition.</p>
<p>We leverage <code>STPPaymentCardTextField</code> from Stripe for working input fields, then <code>CardHandler</code> is used to parse <code>STPPaymentCardTextField</code> content and update our UI.</p>
<p>For masked credit card numbers, we pad string to fit 16 characters with <code>●</code> symbol, then chunk into 4 parts and zip with labels to update.</p>
<p>For flipping animation, we use <code>UIView.transition</code> with <code>showHideTransitionViews</code></p>
<img width="370" alt="a1" src="https://user-images.githubusercontent.com/2284279/62470585-0dbfd380-b79b-11e9-9c31-13ea6cd17550.png">
<img width="362" alt="a2" src="https://user-images.githubusercontent.com/2284279/62470586-0dbfd380-b79b-11e9-9473-4c534b263b74.png">



<p><code>BackCard.swift</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> UIKit</span><br><span class="line"></span><br><span class="line"><span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">BackCard</span>: <span class="title">UIView</span> </span>&#123;</span><br><span class="line">    <span class="built_in">lazy</span> <span class="keyword">var</span> rectangle: <span class="type">UIView</span> = &#123;</span><br><span class="line">        <span class="keyword">let</span> view = <span class="type">UIView</span>()</span><br><span class="line">        view.backgroundColor = <span class="type">R</span>.color.darkText</span><br><span class="line">        <span class="keyword">return</span> view</span><br><span class="line">    &#125;()</span><br><span class="line"></span><br><span class="line">    <span class="built_in">lazy</span> <span class="keyword">var</span> cvcLabel: <span class="type">UILabel</span> = &#123;</span><br><span class="line">        <span class="keyword">let</span> label = <span class="type">UILabel</span>()</span><br><span class="line">        label.font = <span class="type">R</span>.customFont.medium(<span class="number">14</span>)</span><br><span class="line">        label.textColor = <span class="type">R</span>.color.darkText</span><br><span class="line">        label.textAlignment = .center</span><br><span class="line">        <span class="keyword">return</span> label</span><br><span class="line">    &#125;()</span><br><span class="line"></span><br><span class="line">    <span class="built_in">lazy</span> <span class="keyword">var</span> cvcBox: <span class="type">UIView</span> = &#123;</span><br><span class="line">        <span class="keyword">let</span> view = <span class="type">UIView</span>()</span><br><span class="line">        view.backgroundColor = <span class="type">R</span>.color.lightText</span><br><span class="line">        <span class="keyword">return</span> view</span><br><span class="line">    &#125;()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="keyword">init</span>(frame: <span class="type">CGRect</span>) &#123;</span><br><span class="line">        <span class="keyword">super</span>.<span class="keyword">init</span>(frame: frame)</span><br><span class="line">        setup()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">required</span> <span class="keyword">init</span>?(coder aDecoder: <span class="type">NSCoder</span>) &#123;</span><br><span class="line">        <span class="built_in">fatalError</span>()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">setup</span><span class="params">()</span></span> &#123;</span><br><span class="line">        addSubviews([rectangle, cvcBox, cvcLabel])</span><br><span class="line">        <span class="type">NSLayoutConstraint</span>.on([</span><br><span class="line">            rectangle.leftAnchor.constraint(equalTo: leftAnchor),</span><br><span class="line">            rectangle.rightAnchor.constraint(equalTo: rightAnchor),</span><br><span class="line">            rectangle.heightAnchor.constraint(equalToConstant: <span class="number">52</span>),</span><br><span class="line">            rectangle.topAnchor.constraint(equalTo: topAnchor, constant: <span class="number">30</span>),</span><br><span class="line"></span><br><span class="line">            cvcBox.rightAnchor.constraint(equalTo: rightAnchor, constant: -<span class="number">16</span>),</span><br><span class="line">            cvcBox.topAnchor.constraint(equalTo: rectangle.bottomAnchor, constant: <span class="number">16</span>),</span><br><span class="line">            cvcBox.widthAnchor.constraint(equalToConstant: <span class="number">66</span>),</span><br><span class="line">            cvcBox.heightAnchor.constraint(equalToConstant: <span class="number">30</span>),</span><br><span class="line"></span><br><span class="line">            cvcLabel.centerXAnchor.constraint(equalTo: cvcBox.centerXAnchor),</span><br><span class="line">            cvcLabel.centerYAnchor.constraint(equalTo: cvcBox.centerYAnchor)</span><br><span class="line">        ])</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>FrontCard.swift</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> UIKit</span><br><span class="line"></span><br><span class="line"><span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">FrontCard</span>: <span class="title">UIView</span> </span>&#123;</span><br><span class="line">    <span class="built_in">lazy</span> <span class="keyword">var</span> stackView: <span class="type">UIStackView</span> = &#123;</span><br><span class="line">        <span class="keyword">let</span> stackView = <span class="type">UIStackView</span>()</span><br><span class="line">        stackView.axis = .horizontal</span><br><span class="line">        stackView.distribution = .equalSpacing</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> stackView</span><br><span class="line">    &#125;()</span><br><span class="line"></span><br><span class="line">    <span class="built_in">lazy</span> <span class="keyword">var</span> numberLabels: [<span class="type">UILabel</span>] = <span class="type">Array</span>(<span class="number">0</span>..&lt;<span class="number">4</span>).<span class="built_in">map</span>(&#123; <span class="number">_</span> <span class="keyword">in</span> <span class="keyword">return</span> <span class="type">UILabel</span>() &#125;)</span><br><span class="line">    <span class="built_in">lazy</span> <span class="keyword">var</span> expirationStaticLabel: <span class="type">UILabel</span> = &#123;</span><br><span class="line">        <span class="keyword">let</span> label = <span class="type">UILabel</span>()</span><br><span class="line">        label.font = <span class="type">R</span>.customFont.regular(<span class="number">10</span>)</span><br><span class="line">        label.textColor = <span class="type">R</span>.color.darkText</span><br><span class="line">        <span class="keyword">return</span> label</span><br><span class="line">    &#125;()</span><br><span class="line"></span><br><span class="line">    <span class="built_in">lazy</span> <span class="keyword">var</span> expirationLabel: <span class="type">UILabel</span> = &#123;</span><br><span class="line">        <span class="keyword">let</span> label = <span class="type">UILabel</span>()</span><br><span class="line">        label.font = <span class="type">R</span>.customFont.medium(<span class="number">14</span>)</span><br><span class="line">        label.textColor = <span class="type">R</span>.color.darkText</span><br><span class="line">        <span class="keyword">return</span> label</span><br><span class="line">    &#125;()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="keyword">init</span>(frame: <span class="type">CGRect</span>) &#123;</span><br><span class="line">        <span class="keyword">super</span>.<span class="keyword">init</span>(frame: frame)</span><br><span class="line">        setup()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">required</span> <span class="keyword">init</span>?(coder aDecoder: <span class="type">NSCoder</span>) &#123;</span><br><span class="line">        <span class="built_in">fatalError</span>()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">setup</span><span class="params">()</span></span> &#123;</span><br><span class="line">        addSubview(stackView)</span><br><span class="line">        numberLabels.forEach &#123;</span><br><span class="line">            stackView.addArrangedSubview($<span class="number">0</span>)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        addSubviews([expirationStaticLabel, expirationLabel])</span><br><span class="line"></span><br><span class="line">        numberLabels.forEach &#123;</span><br><span class="line">            $<span class="number">0</span>.font = <span class="type">R</span>.customFont.medium(<span class="number">16</span>)</span><br><span class="line">            $<span class="number">0</span>.textColor = <span class="type">R</span>.color.darkText</span><br><span class="line">            $<span class="number">0</span>.textAlignment = .center</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">NSLayoutConstraint</span>.on([</span><br><span class="line">            stackView.heightAnchor.constraint(equalToConstant: <span class="number">50</span>),</span><br><span class="line">            stackView.leftAnchor.constraint(equalTo: leftAnchor, constant: <span class="number">24</span>),</span><br><span class="line">            stackView.rightAnchor.constraint(equalTo: rightAnchor, constant: -<span class="number">24</span>),</span><br><span class="line">            stackView.topAnchor.constraint(equalTo: centerYAnchor),</span><br><span class="line"></span><br><span class="line">            expirationStaticLabel.topAnchor.constraint(equalTo: stackView.bottomAnchor),</span><br><span class="line">            expirationStaticLabel.leftAnchor.constraint(equalTo: rightAnchor, constant: -<span class="number">70</span>),</span><br><span class="line"></span><br><span class="line">            expirationLabel.leftAnchor.constraint(equalTo: expirationStaticLabel.leftAnchor),</span><br><span class="line">            expirationLabel.topAnchor.constraint(equalTo: expirationStaticLabel.bottomAnchor)</span><br><span class="line">        ])</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>CardView.swift</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> UIKit</span><br><span class="line"></span><br><span class="line"><span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">CardView</span>: <span class="title">UIView</span> </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> backCard = <span class="type">BackCard</span>()</span><br><span class="line">    <span class="keyword">let</span> frontCard = <span class="type">FrontCard</span>()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="keyword">init</span>(frame: <span class="type">CGRect</span>) &#123;</span><br><span class="line">        <span class="keyword">super</span>.<span class="keyword">init</span>(frame: frame)</span><br><span class="line">        setup()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">required</span> <span class="keyword">init</span>?(coder aDecoder: <span class="type">NSCoder</span>) &#123;</span><br><span class="line">        <span class="built_in">fatalError</span>()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">setup</span><span class="params">()</span></span> &#123;</span><br><span class="line">        addSubview(backCard)</span><br><span class="line">        addSubview(frontCard)</span><br><span class="line"></span><br><span class="line">        [backCard, frontCard].forEach &#123;</span><br><span class="line">            <span class="type">NSLayoutConstraint</span>.on([</span><br><span class="line">                $<span class="number">0</span>.pinEdges(view: <span class="keyword">self</span>)</span><br><span class="line">            ])</span><br><span class="line"></span><br><span class="line">            $<span class="number">0</span>.clipsToBounds = <span class="literal">true</span></span><br><span class="line">            $<span class="number">0</span>.layer.cornerRadius = <span class="number">10</span></span><br><span class="line">            $<span class="number">0</span>.backgroundColor = <span class="type">R</span>.color.card.background</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>CardHandler.swift</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Foundation</span><br><span class="line"><span class="keyword">import</span> Stripe</span><br><span class="line"></span><br><span class="line"><span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">CardHandler</span> </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> cardView: <span class="type">CardView</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">init</span>(cardView: <span class="type">CardView</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.cardView = cardView</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">reset</span><span class="params">()</span></span> &#123;</span><br><span class="line">        cardView.frontCard.expirationStaticLabel.text = <span class="type">R</span>.string.localizable.cardExpiration()</span><br><span class="line">        cardView.frontCard.expirationLabel.text = <span class="type">R</span>.string.localizable.cardExpirationPlaceholder()</span><br><span class="line">        cardView.backCard.cvcLabel.text = <span class="type">R</span>.string.localizable.cardCvcPlaceholder()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">showFront</span><span class="params">()</span></span> &#123;</span><br><span class="line">        flip(</span><br><span class="line">            from: cardView.backCard,</span><br><span class="line">            to: cardView.frontCard,</span><br><span class="line">            options: .transitionFlipFromLeft</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">showBack</span><span class="params">()</span></span> &#123;</span><br><span class="line">        flip(</span><br><span class="line">            from: cardView.frontCard,</span><br><span class="line">            to: cardView.backCard,</span><br><span class="line">            options: .transitionFlipFromRight</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">handle</span><span class="params">(<span class="number">_</span> textField: STPPaymentCardTextField)</span></span> &#123;</span><br><span class="line">        handle(number: textField.cardNumber ?? <span class="string">""</span>)</span><br><span class="line">        handle(month: textField.formattedExpirationMonth, year: textField.formattedExpirationYear)</span><br><span class="line">        handle(cvc: textField.cvc)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">handle</span><span class="params">(number: String)</span></span> &#123;</span><br><span class="line">        <span class="keyword">let</span> paddedNumber = number.padding(</span><br><span class="line">            toLength: <span class="number">16</span>,</span><br><span class="line">            withPad: <span class="type">R</span>.string.localizable.cardNumberPlaceholder(),</span><br><span class="line">            startingAt: <span class="number">0</span></span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> chunkedNumbers = paddedNumber.chunk(by: <span class="number">4</span>)</span><br><span class="line">        <span class="built_in">zip</span>(cardView.frontCard.numberLabels, chunkedNumbers).forEach &#123; tuple <span class="keyword">in</span></span><br><span class="line">            tuple.<span class="number">0</span>.text = tuple.<span class="number">1</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">handle</span><span class="params">(cvc: String?)</span></span> &#123;</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">let</span> cvc = cvc, !cvc.isEmpty &#123;</span><br><span class="line">            cardView.backCard.cvcLabel.text = cvc</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            cardView.backCard.cvcLabel.text = <span class="type">R</span>.string.localizable.cardCvcPlaceholder()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">handle</span><span class="params">(month: String?, year: String?)</span></span> &#123;</span><br><span class="line">        <span class="keyword">guard</span></span><br><span class="line">            <span class="keyword">let</span> month = month, <span class="keyword">let</span> year = year,</span><br><span class="line">            !month.isEmpty</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            cardView.frontCard.expirationLabel.text = <span class="type">R</span>.string.localizable.cardExpirationPlaceholder()</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> formattedYear = year.ifEmpty(replaceWith: <span class="string">"00"</span>)</span><br><span class="line">        cardView.frontCard.expirationLabel.text = <span class="string">"\(month)/\(formattedYear)"</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">flip</span><span class="params">(from: UIView, to: UIView, options: UIView.AnimationOptions)</span></span> &#123;</span><br><span class="line">        <span class="type">UIView</span>.transition(</span><br><span class="line">            from: from,</span><br><span class="line">            to: to,</span><br><span class="line">            duration: <span class="number">0.25</span>,</span><br><span class="line">            options: [options, .showHideTransitionViews],</span><br><span class="line">            completion: <span class="literal">nil</span></span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>String+Extension.swift</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">String</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">ifEmpty</span><span class="params">(replaceWith: String)</span></span> -&gt; <span class="type">String</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> isEmpty ? replaceWith : <span class="keyword">self</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">chunk</span><span class="params">(by length: Int)</span></span> -&gt; [<span class="type">String</span>] &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">stride</span>(from: <span class="number">0</span>, to: <span class="built_in">count</span>, by: length).<span class="built_in">map</span> &#123;</span><br><span class="line">            <span class="keyword">let</span> start = index(startIndex, offsetBy: $<span class="number">0</span>)</span><br><span class="line">            <span class="keyword">let</span> end = index(start, offsetBy: length, limitedBy: endIndex) ?? endIndex</span><br><span class="line">            <span class="keyword">return</span> <span class="type">String</span>(<span class="keyword">self</span>[start..&lt;end])</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-08-02T05:21:47.000Z" title="2019-08-02T05:21:47.000Z">2019-08-02</time><span class="level-item">a minute read (About 135 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-stop-implicit-animation-when-title-change-on-UIButton/">How to stop implicit animation when title change on UIButton</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/345">#345</a></strong></p>
<p><code>UIButton</code> with system type has implicit animation for <a href="https://developer.apple.com/documentation/uikit/uibutton/1624018-settitle">setTitle(_:for:)</a></p>
<blockquote>
<p>Use this method to set the title for the button. The title you specify derives its formatting from the button’s associated label object. If you set both a title and an attributed title for the button, the button prefers the use of the attributed title over this one.</p>
</blockquote>
<blockquote>
<p>At a minimum, you should set the value for the normal state. If a title is not specified for a state, the default behavior is to use the title associated with the normal state. If the value for normal is not set, then the property defaults to a system value.</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">UIView</span>.performWithoutAnimation &#123;</span><br><span class="line">    button.setTitle(title, <span class="keyword">for</span>: .normal)</span><br><span class="line">    button.layoutIfNeeded()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-08-01T12:06:27.000Z" title="2019-08-01T12:06:27.000Z">2019-08-01</time><span class="level-item">a minute read (About 169 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-use-addSubview-in-iOS/">How to use addSubview in iOS</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/344">#344</a></strong></p>
<p><a href="https://developer.apple.com/documentation/uikit/uiview/1622616-addsubview">addSubview</a> can trigger <a href="https://developer.apple.com/documentation/uikit/uiviewcontroller/1621398-viewdidlayoutsubviews">viewDidLayoutSubviews</a>, so be careful to just do layout stuff in <code>viewDidLayoutSubviews</code></p>
<blockquote>
<p>This method establishes a strong reference to view and sets its next responder to the receiver, which is its new superview.</p>
</blockquote>
<blockquote>
<p>Views can have only one superview. If view already has a superview and that view is not the receiver, this method removes the previous superview before making the receiver its new superview.</p>
</blockquote>
<blockquote>
<p>When the bounds change for a view controller’s view, the view adjusts the positions of its subviews and then the system calls this method. However, this method being called does not indicate that the individual layouts of the view’s subviews have been adjusted. Each subview is responsible for adjusting its own layout.</p>
</blockquote>
<blockquote>
<p>Your view controller can override this method to make changes after the view lays out its subviews. The default implementation of this method does nothing.</p>
</blockquote>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-08-01T04:59:03.000Z" title="2019-08-01T04:59:03.000Z">2019-08-01</time><span class="level-item">a few seconds read (About 79 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-run-app-on-beta-iOS-devices/">How to run app on beta iOS devices</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/343">#343</a></strong></p>
<p>Xcode 10.3 with iOS 13</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ln -s &#x2F;Applications&#x2F;Xcode-beta.app&#x2F;Contents&#x2F;Developer&#x2F;Platforms&#x2F;iPhoneOS.platform&#x2F;DeviceSupport&#x2F;13.0 &#x2F;Applications&#x2F;Xcode.app&#x2F;Contents&#x2F;Developer&#x2F;Platforms&#x2F;iPhoneOS.platform&#x2F;DeviceSupport</span><br></pre></td></tr></table></figure>

<p>Xcode 10.3 with iOS 13.1 beta 2</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ln -s &#x2F;Applications&#x2F;Xcode-beta.app&#x2F;Contents&#x2F;Developer&#x2F;Platforms&#x2F;iPhoneOS.platform&#x2F;DeviceSupport&#x2F;13.0&#x2F; &#x2F;Applications&#x2F;Xcode.app&#x2F;Contents&#x2F;Developer&#x2F;Platforms&#x2F;iPhoneOS.platform&#x2F;DeviceSupport&#x2F;13.1</span><br></pre></td></tr></table></figure>

<h2 id="Use-DeviceSupport"><a href="#Use-DeviceSupport" class="headerlink" title="Use DeviceSupport"></a>Use DeviceSupport</h2><ul>
<li>Download and unzip Device support <a href="https://github.com/iGhibli/iOS-DeviceSupport">https://github.com/iGhibli/iOS-DeviceSupport</a></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;Applications&#x2F;Xcode&#x2F;Contents&#x2F;Developer&#x2F;Platforms&#x2F;iPhoneOS.platform&#x2F;DeviceSupport</span><br></pre></td></tr></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-07-31T18:19:25.000Z" title="2019-07-31T18:19:25.000Z">2019-07-31</time><span class="level-item">3 minutes read (About 459 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-submit-electron-app-to-AppStore/">How to submit electron app to AppStore</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/342">#342</a></strong></p>
<h2 id="Before"><a href="#Before" class="headerlink" title="Before"></a>Before</h2><p>Install electron as dev <code>npm install electron --save-dev</code><br>Update electron-packager <code>npm install electron-packager@latest --save-dev</code><br>Use no space in app name</p>
<h2 id="Package-with-electron-packager"><a href="#Package-with-electron-packager" class="headerlink" title="Package with electron-packager"></a>Package with electron-packager</h2><p>Follow <a href="https://github.com/electron/electron-osx-sign/wiki/Packaging-and-Submitting-an-Electron-App-to-the-Mac-App-Store">https://github.com/electron/electron-osx-sign/wiki/Packaging-and-Submitting-an-Electron-App-to-the-Mac-App-Store</a></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npx electron-packager . <span class="string">"MyApp"</span> --app-bundle-id=com.onmyway133.MyApp --helper-bundle-id=com.onmyway133.MyApp.helper --app-version=1.4.0 --build-version=1.0.100 --platform=mas --arch=x64 --icon=Icon/Icon.icns --overwrite</span><br><span class="line">npx electron-osx-sign <span class="string">"MyApp-mas-x64/MyApp.app"</span> --verbose</span><br><span class="line">npx electron-osx-flat <span class="string">"MyApp-mas-x64/MyApp.app"</span> --verbose</span><br></pre></td></tr></table></figure>

<h3 id="If-you-have-multiple-developer-identities-in-your-keychain"><a href="#If-you-have-multiple-developer-identities-in-your-keychain" class="headerlink" title="If you have multiple developer identities in your keychain:"></a>If you have multiple developer identities in your keychain:</h3><blockquote>
<p>electron-osx-sign searches your keychain for the first signing certificates that it can locate. If you have multiple certificates then it may not know which cert you want to use for signing and you need to explicitly provide the name:</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">electron-osx-sign &quot;My App-mas-x64&#x2F;My App.app&quot; --identity&#x3D;&quot;3rd Party Mac Developer Application: My Company, Inc (ABCDEFG1234)&quot; --verbose</span><br></pre></td></tr></table></figure>

<h2 id="Read-more"><a href="#Read-more" class="headerlink" title="Read more"></a>Read more</h2><h5 id="Sign-with-electron-osx-sign"><a href="#Sign-with-electron-osx-sign" class="headerlink" title="Sign with electron-osx-sign"></a>Sign with electron-osx-sign</h5><p>Read README <a href="https://github.com/electron/electron-osx-sign">https://github.com/electron/electron-osx-sign</a></p>
<blockquote>
<p>For distribution in the Mac App Store: Have the provisioning profile for distribution placed in the current working directory and the signing identity installed in the default keychain.</p>
</blockquote>
<h3 id="Certificate"><a href="#Certificate" class="headerlink" title="Certificate"></a>Certificate</h3><p>On developer.apple.com, create Mac App Distribution certificate. Make sure when we download in Keychain Access, it has associated private key</p>
<h3 id="Manually-upload"><a href="#Manually-upload" class="headerlink" title="Manually upload"></a>Manually upload</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;Applications&#x2F;Xcode.app&#x2F;Contents&#x2F;Applications&#x2F;Application\ Loader.app&#x2F;Contents&#x2F;itms&#x2F;bin&#x2F;iTMSTransporter -m upload  -assetFile MyApp&#x2F;MyApp.pkg  -u onmyway133@gmail.com -p mypassword</span><br></pre></td></tr></table></figure>

<h3 id="Use-Application-Loader"><a href="#Use-Application-Loader" class="headerlink" title="Use Application Loader"></a>Use Application Loader</h3><p>Use <a href="https://support.apple.com/en-us/HT204397">Using app-specific passwords</a></p>
<h3 id="Troubleshooting"><a href="#Troubleshooting" class="headerlink" title="Troubleshooting"></a>Troubleshooting</h3><h4 id="electron-Bad-CFBundleExecutable-Cannot-find-executable-file"><a href="#electron-Bad-CFBundleExecutable-Cannot-find-executable-file" class="headerlink" title="electron Bad CFBundleExecutable. Cannot find executable file"></a>electron Bad CFBundleExecutable. Cannot find executable file</h4><blockquote>
<p>ERROR ITMS-90261: “Bad CFBundleExecutable. Cannot find executable file that matches the value of CFBundleExecutable in the nested bundle MyApp [com.onmyway133.MyApp.pkg/Payload/MyApp.app/Contents/Frameworks/MyApp (GPU).app] property list file.”</p>
</blockquote>
<p><a href="https://github.com/electron/electron-packager/issues?utf8=%E2%9C%93&amp;q=helper">https://github.com/electron/electron-packager/issues?utf8=%E2%9C%93&amp;q=helper</a></p>
<p>Try electron 5.0.0 <code>npm install electron@5.0.0 --save-dev</code></p>
<h4 id="Specifically-we-found-that-when-the-user-closes-the-main-application-window-there-is-no-menu-item-to-re-open-it"><a href="#Specifically-we-found-that-when-the-user-closes-the-main-application-window-there-is-no-menu-item-to-re-open-it" class="headerlink" title="Specifically, we found that when the user closes the main application window there is no menu item to re-open it."></a>Specifically, we found that when the user closes the main application window there is no menu item to re-open it.</h4><p><a href="https://stackoverflow.com/questions/35008347/electron-close-w-x-vs-right-click-dock-and-quit">https://stackoverflow.com/questions/35008347/electron-close-w-x-vs-right-click-dock-and-quit</a></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createMenu</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> application = &#123;</span><br><span class="line">    label: <span class="string">"MyApp"</span>,</span><br><span class="line">    submenu: [</span><br><span class="line">      &#123;</span><br><span class="line">        label: <span class="string">"New"</span>,</span><br><span class="line">        accelerator: <span class="string">"Command+N"</span>,</span><br><span class="line">        click: <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">if</span> (win === <span class="literal">null</span>) &#123;</span><br><span class="line">            createWindow()</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="‘electron-osx-flat-latest’-is-not-in-the-npm-registry"><a href="#‘electron-osx-flat-latest’-is-not-in-the-npm-registry" class="headerlink" title="‘electron-osx-flat@latest’ is not in the npm registry"></a>‘electron-osx-flat@latest’ is not in the npm registry</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g electron-osx-sign@latest</span><br></pre></td></tr></table></figure>

<h4 id="App-sandbox-not-enabled"><a href="#App-sandbox-not-enabled" class="headerlink" title="App sandbox not enabled"></a>App sandbox not enabled</h4><h4 id="electron-osx-sign-Command-failed-codesign"><a href="#electron-osx-sign-Command-failed-codesign" class="headerlink" title="electron-osx-sign Command failed: codesign"></a>electron-osx-sign Command failed: codesign</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ran xattr -cr *</span><br></pre></td></tr></table></figure>

<h4 id="Command-failed-codesign-bundle-format-is-ambiguous"><a href="#Command-failed-codesign-bundle-format-is-ambiguous" class="headerlink" title="Command failed: codesign bundle format is ambiguous"></a>Command failed: codesign bundle format is ambiguous</h4><blockquote>
<p>Perhaps you accidentally packaged the previous generated app bundle into your newly packaged app?</p>
</blockquote>
<p>Remove <code>dist</code> folder generated by electron-builder</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-07-31T07:35:44.000Z" title="2019-07-31T07:35:44.000Z">2019-07-31</time><span class="level-item">a few seconds read (About 90 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-format-hour-minute-from-time-interval-in-Swift/">How to format hour minute from time interval in Swift</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/340">#340</a></strong></p>
<h2 id="Use-DateComponentsFormatter"><a href="#Use-DateComponentsFormatter" class="headerlink" title="Use DateComponentsFormatter"></a>Use DateComponentsFormatter</h2><p><a href="https://nshipster.com/formatter/#datecomponentsformatter">https://nshipster.com/formatter/#datecomponentsformatter</a></p>
<p>Results in no padding 0</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">format</span><span class="params">(second: TimeInterval)</span></span> -&gt; <span class="type">String?</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> formatter = <span class="type">DateComponentsFormatter</span>()</span><br><span class="line">    formatter.unitsStyle = .positional</span><br><span class="line">    formatter.allowedUnits = [.hour, .minute]</span><br><span class="line">    formatter.zeroFormattingBehavior = .pad</span><br><span class="line">    <span class="keyword">return</span> formatter.string(from: second)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">XCTAssertEqual</span>(format(second: <span class="number">5400</span> ), <span class="string">"1:30"</span>)</span><br><span class="line"><span class="type">XCTAssertEqual</span>(format(second: <span class="number">7200</span>), <span class="string">"2:00"</span>)</span><br><span class="line"><span class="type">XCTAssertEqual</span>(format(second: <span class="number">39600</span> ), <span class="string">"11:00"</span>)</span><br></pre></td></tr></table></figure>

<h2 id="Use-mod"><a href="#Use-mod" class="headerlink" title="Use mod"></a>Use mod</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">format</span><span class="params">(minute: Int)</span></span> -&gt; <span class="type">String</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> h = minute / <span class="number">60</span></span><br><span class="line">    <span class="keyword">let</span> m = minute % <span class="number">60</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">"\(h.padZero()):\(m.padZero())"</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="class"><span class="keyword">extension</span> <span class="title">Int</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">padZero</span><span class="params">()</span></span> -&gt; <span class="type">String</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="type">String</span>(format: <span class="string">"%02d"</span>, <span class="keyword">self</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">XCTAssertEqual</span>(format(minute: <span class="number">90</span> ), <span class="string">"01:30"</span>)</span><br><span class="line"><span class="type">XCTAssertEqual</span>(format(minute: <span class="number">120</span>), <span class="string">"02:00"</span>)</span><br><span class="line"><span class="type">XCTAssertEqual</span>(format(minute: <span class="number">660</span> ), <span class="string">"11:00"</span>)</span><br></pre></td></tr></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-07-03T11:49:07.000Z" title="2019-07-03T11:49:07.000Z">2019-07-03</time><span class="level-item">a minute read (About 123 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-cache-URLSession-response/">How to cache URLSession response</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/339">#339</a></strong></p>
<p>For simple cases, we don’t need to. Let’s use <a href="https://developer.apple.com/documentation/foundation/urlsessionconfiguration/1410148-urlcache">urlCache</a></p>
<blockquote>
<p>The URL cache for providing cached responses to requests within the session.</p>
</blockquote>
<p><a href="https://developer.apple.com/documentation/foundation/url_loading_system/accessing_cached_data">Accessing Cached Data</a></p>
<blockquote>
<p>The URL Loading System caches responses both in memory and on disk, improving performance and reducing network traffic.</p>
</blockquote>
<blockquote>
<p>The URLCache class is used for caching responses from network resources. Your app can directly access the shared cache instance by using the shared property of URLCache. Or, you can create your own caches for different purposes, setting distinct caches on your URLSessionConfiguration objects.</p>
</blockquote>
<h2 id="Read-more"><a href="#Read-more" class="headerlink" title="Read more"></a>Read more</h2><ul>
<li><a href="https://nshipster.com/nsurlcache/">URLCache</a></li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-07-02T12:15:02.000Z" title="2019-07-02T12:15:02.000Z">2019-07-02</time><span class="level-item">a minute read (About 152 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-use-ext-in-gradle-in-Android/">How to use ext in gradle in Android</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/338">#338</a></strong></p>
<p>Gradle uses Groovy and it has <code>ext</code>, also known as <a href="https://docs.gradle.org/current/dsl/org.gradle.api.plugins.ExtraPropertiesExtension.html">ExtraPropertiesExtension</a></p>
<blockquote>
<p>Additional, ad-hoc, properties for Gradle domain objects.</p>
</blockquote>
<blockquote>
<p>Extra properties extensions allow new properties to be added to existing domain objects. They act like maps, allowing the storage of arbitrary key/value pairs. All ExtensionAware Gradle domain objects intrinsically have an extension named “ext” of this type.</p>
</blockquote>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">project.ext &#123;</span><br><span class="line">  myprop = <span class="string">"a"</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">assert</span> project.myprop == <span class="string">"a"</span></span><br><span class="line"><span class="keyword">assert</span> project.ext.myprop == <span class="string">"a"</span></span><br><span class="line"></span><br><span class="line">project.myprop = <span class="string">"b"</span></span><br><span class="line"><span class="keyword">assert</span> project.myprop == <span class="string">"b"</span></span><br><span class="line"><span class="keyword">assert</span> project.ext.myprop == <span class="string">"b"</span></span><br></pre></td></tr></table></figure>

<p>In root <code>build.gradle</code>, <code>ext</code> adds extra property to <code>rootProject</code> object. There we can access <code>rootProject.ext</code> or just <code>ext</code></p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ext &#123;</span><br><span class="line">  myLibraryVersion = <span class="string">'1.0.0'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>In module <code>app/build.gradle</code>, <code>ext</code> adds extra property to <code>project</code> object. There we can access <code>project.ext</code> or just <code>ext</code></p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ext &#123;</span><br><span class="line">  myLibraryVersion = <span class="string">'1.0.0'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-07-02T08:14:34.000Z" title="2019-07-02T08:14:34.000Z">2019-07-02</time><span class="level-item">2 minutes read (About 308 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-do-custom-presentation-with-UIViewPropertyAnimator-in-iOS/">How to do custom presentation with UIViewPropertyAnimator in iOS</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/337">#337</a></strong></p>
<p>Normally we just present from any <code>UIViewController</code> in any <code>UINavigationController</code> in <code>UITabBarController</code> and it will present over tabbar</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">present(detailViewController, animated: <span class="literal">true</span>, completion: <span class="literal">nil</span>)</span><br></pre></td></tr></table></figure>

<p>If we have animation with <code>UIViewPropertyAnimator</code>, then we can implement <a href="https://developer.apple.com/documentation/uikit/uiviewcontrolleranimatedtransitioning">UIViewControllerAnimatedTransitioning</a> and <a href="https://developer.apple.com/documentation/uikit/uiviewcontrolleranimatedtransitioning/1829434-interruptibleanimator">interruptibleAnimator(using:)</a></p>
<blockquote>
<p>The methods in this protocol let you define an animator object, which creates the animations for transitioning a view controller on or off screen in a fixed amount of time. The animations you create using this protocol must not be interactive. To create interactive transitions, you must combine your animator object with another object that controls the timing of your animations.</p>
</blockquote>
<blockquote>
<p>Implement this method when you want to perform your transitions using an interruptible animator object, such as a UIViewPropertyAnimator object. You must return the same animator object for the duration of the transition.</p>
</blockquote>
<p>For more fine-grained control, we can have <a href="https://developer.apple.com/documentation/uikit/uipresentationcontroller">UIPresentationController</a></p>
<blockquote>
<p>From the time a view controller is presented until the time it is dismissed, UIKit uses a presentation controller to manage various aspects of the presentation process for that view controller. The presentation controller can add its own animations on top of those provided by animator objects, it can respond to size changes, and it can manage other aspects of how the view controller is presented onscreen.</p>
</blockquote>
<p>A lazy approach is to present without animation and do animation after</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">present(detailViewController, animated: <span class="literal">false</span>, completion: &#123;</span><br><span class="line">	<span class="keyword">let</span> animator = <span class="type">UIViewPropertyAnimator</span>()</span><br><span class="line">    animator.startAnimation()</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>If we don’t want to involve <code>UIViewController</code> then we can work on <code>UIView</code> level. This way we can animate hiding tab bar. Any <code>UIViewController</code> within <code>UITabBarController</code> has <code>tabBarController</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> animator = <span class="type">UIViewPropertyAnimator</span>()</span><br><span class="line">animator.addAnimations &#123;</span><br><span class="line">  <span class="keyword">self</span>.tabBarController?.tabBar.transform = <span class="type">CGAffineTransform</span>(translationX: <span class="number">0</span>, y: tabbar.frame.height)</span><br><span class="line">&#125;</span><br><span class="line">animator.startAnimation()</span><br></pre></td></tr></table></figure></div></article></div><nav class="pagination is-centered mt-4" role="navigation" aria-label="pagination"><div class="pagination-previous"><a href="/page/11/">Previous</a></div><div class="pagination-next"><a href="/page/13/">Next</a></div><ul class="pagination-list is-hidden-mobile"><li><a class="pagination-link" href="/">1</a></li><li><span class="pagination-ellipsis">&hellip;</span></li><li><a class="pagination-link" href="/page/11/">11</a></li><li><a class="pagination-link is-current" href="/page/12/">12</a></li><li><a class="pagination-link" href="/page/13/">13</a></li><li><span class="pagination-ellipsis">&hellip;</span></li><li><a class="pagination-link" href="/page/22/">22</a></li></ul></nav></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1"><div class="card widget"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="" src="https://avatars1.githubusercontent.com/u/2284279?s=460&amp;v=4" alt="onmyway133"></figure><p class="title is-size-4 is-block line-height-inherit">onmyway133</p><p class="is-size-6 is-block">iOS, macOS, Android, React. Serial maker. Writer. Speaker.</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Oslo, Norway</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Posts</p><a href="/archives"><p class="title">651</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Categories</p><a href="/categories"><p class="title">0</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Tags</p><a href="/tags"><p class="title">52</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/onmyway133" target="_blank" rel="noopener">Follow</a></div><div class="level is-mobile"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/onmyway133"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Twitter" href="https://twitter.com/onmyway133"><i class="fab fa-twitter"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Dribbble" href="https://dribbble.com"><i class="fab fa-dribbble"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/"><i class="fas fa-rss"></i></a></div></div></div><!--!--><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">Links</h3><ul class="menu-list"><li><a class="level is-mobile is-mobile" href="https://onmyway133.com/apps" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Apps</span></span><span class="level-right"><span class="level-item tag">onmyway133.com</span></span></a></li><li><a class="level is-mobile is-mobile" href="https://learntalks.com" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Learn Talks</span></span><span class="level-right"><span class="level-item tag">learntalks.com</span></span></a></li></ul></div></div></div><!--!--><div class="card widget"><div class="card-content"><h3 class="menu-label">Recent</h3><article class="media"><div class="media-content size-small"><p><time dateTime="2020-11-30T19:26:10.000Z">2020-11-30</time></p><p class="title is-6"><a class="link-muted" href="/blog/How-to-convert-from-paid-to-free-with-IAP/">How to convert from paid to free with IAP</a></p><p class="is-uppercase"></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2020-11-27T11:24:13.000Z">2020-11-27</time></p><p class="title is-6"><a class="link-muted" href="/blog/How-to-disable-NSTextView-in-SwiftUI/">How to disable NSTextView in SwiftUI</a></p><p class="is-uppercase"></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2020-11-20T04:22:58.000Z">2020-11-20</time></p><p class="title is-6"><a class="link-muted" href="/blog/How-to-add-under-highlight-to-text-in-css/">How to add under highlight to text in css</a></p><p class="is-uppercase"></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2020-11-18T05:29:22.000Z">2020-11-18</time></p><p class="title is-6"><a class="link-muted" href="/blog/How-to-use-default-system-fonts-in-React-apps/">How to use default system fonts in React apps</a></p><p class="is-uppercase"></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2020-11-18T05:13:03.000Z">2020-11-18</time></p><p class="title is-6"><a class="link-muted" href="/blog/How-to-make-simple-overlay-container-in-React/">How to make simple overlay container in React</a></p><p class="is-uppercase"></p></div></article></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">Archives</h3><ul class="menu-list"><li><a class="level is-mobile is-marginless" href="/archives/2020/11/"><span class="level-start"><span class="level-item">November 2020</span></span><span class="level-end"><span class="level-item tag">15</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/10/"><span class="level-start"><span class="level-item">October 2020</span></span><span class="level-end"><span class="level-item tag">11</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/09/"><span class="level-start"><span class="level-item">September 2020</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/08/"><span class="level-start"><span class="level-item">August 2020</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/06/"><span class="level-start"><span class="level-item">June 2020</span></span><span class="level-end"><span class="level-item tag">14</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/05/"><span class="level-start"><span class="level-item">May 2020</span></span><span class="level-end"><span class="level-item tag">11</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/04/"><span class="level-start"><span class="level-item">April 2020</span></span><span class="level-end"><span class="level-item tag">13</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/03/"><span class="level-start"><span class="level-item">March 2020</span></span><span class="level-end"><span class="level-item tag">21</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/02/"><span class="level-start"><span class="level-item">February 2020</span></span><span class="level-end"><span class="level-item tag">20</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/01/"><span class="level-start"><span class="level-item">January 2020</span></span><span class="level-end"><span class="level-item tag">30</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2019/12/"><span class="level-start"><span class="level-item">December 2019</span></span><span class="level-end"><span class="level-item tag">36</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2019/11/"><span class="level-start"><span class="level-item">November 2019</span></span><span class="level-end"><span class="level-item tag">38</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2019/10/"><span class="level-start"><span class="level-item">October 2019</span></span><span class="level-end"><span class="level-item tag">49</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2019/09/"><span class="level-start"><span class="level-item">September 2019</span></span><span class="level-end"><span class="level-item tag">50</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2019/08/"><span class="level-start"><span class="level-item">August 2019</span></span><span class="level-end"><span class="level-item tag">39</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2019/07/"><span class="level-start"><span class="level-item">July 2019</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2019/06/"><span class="level-start"><span class="level-item">June 2019</span></span><span class="level-end"><span class="level-item tag">41</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2019/05/"><span class="level-start"><span class="level-item">May 2019</span></span><span class="level-end"><span class="level-item tag">49</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2019/04/"><span class="level-start"><span class="level-item">April 2019</span></span><span class="level-end"><span class="level-item tag">27</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2019/03/"><span class="level-start"><span class="level-item">March 2019</span></span><span class="level-end"><span class="level-item tag">24</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2019/02/"><span class="level-start"><span class="level-item">February 2019</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2018/12/"><span class="level-start"><span class="level-item">December 2018</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2018/05/"><span class="level-start"><span class="level-item">May 2018</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2018/04/"><span class="level-start"><span class="level-item">April 2018</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2018/02/"><span class="level-start"><span class="level-item">February 2018</span></span><span class="level-end"><span class="level-item tag">9</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2018/01/"><span class="level-start"><span class="level-item">January 2018</span></span><span class="level-end"><span class="level-item tag">14</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2017/12/"><span class="level-start"><span class="level-item">December 2017</span></span><span class="level-end"><span class="level-item tag">14</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2017/11/"><span class="level-start"><span class="level-item">November 2017</span></span><span class="level-end"><span class="level-item tag">12</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2017/10/"><span class="level-start"><span class="level-item">October 2017</span></span><span class="level-end"><span class="level-item tag">18</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2017/09/"><span class="level-start"><span class="level-item">September 2017</span></span><span class="level-end"><span class="level-item tag">10</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2017/08/"><span class="level-start"><span class="level-item">August 2017</span></span><span class="level-end"><span class="level-item tag">9</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2017/07/"><span class="level-start"><span class="level-item">July 2017</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2017/06/"><span class="level-start"><span class="level-item">June 2017</span></span><span class="level-end"><span class="level-item tag">12</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2017/05/"><span class="level-start"><span class="level-item">May 2017</span></span><span class="level-end"><span class="level-item tag">36</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2017/04/"><span class="level-start"><span class="level-item">April 2017</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">Tags</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/algorithm/"><span class="tag">algorithm</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/android/"><span class="tag">android</span><span class="tag is-grey-lightest">34</span></a></div><div class="control"><a class="tags has-addons" href="/tags/apple-script/"><span class="tag">apple script</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/catalyst/"><span class="tag">catalyst</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ci/"><span class="tag">ci</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/cloud/"><span class="tag">cloud</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/cocoapods/"><span class="tag">cocoapods</span><span class="tag is-grey-lightest">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/combine/"><span class="tag">combine</span><span class="tag is-grey-lightest">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/core-data/"><span class="tag">core data</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/csharp/"><span class="tag">csharp</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/css/"><span class="tag">css</span><span class="tag is-grey-lightest">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/dart/"><span class="tag">dart</span><span class="tag is-grey-lightest">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/database/"><span class="tag">database</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/design/"><span class="tag">design</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/electron/"><span class="tag">electron</span><span class="tag is-grey-lightest">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/firebase/"><span class="tag">firebase</span><span class="tag is-grey-lightest">7</span></a></div><div class="control"><a class="tags has-addons" href="/tags/flutter/"><span class="tag">flutter</span><span class="tag is-grey-lightest">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/git/"><span class="tag">git</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/github/"><span class="tag">github</span><span class="tag is-grey-lightest">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/go/"><span class="tag">go</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/google/"><span class="tag">google</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/iOS/"><span class="tag">iOS</span><span class="tag is-grey-lightest">165</span></a></div><div class="control"><a class="tags has-addons" href="/tags/javascript/"><span class="tag">javascript</span><span class="tag is-grey-lightest">49</span></a></div><div class="control"><a class="tags has-addons" href="/tags/kotlin/"><span class="tag">kotlin</span><span class="tag is-grey-lightest">27</span></a></div><div class="control"><a class="tags has-addons" href="/tags/layout/"><span class="tag">layout</span><span class="tag is-grey-lightest">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/life/"><span class="tag">life</span><span class="tag is-grey-lightest">11</span></a></div><div class="control"><a class="tags has-addons" href="/tags/links/"><span class="tag">links</span><span class="tag is-grey-lightest">9</span></a></div><div class="control"><a class="tags has-addons" href="/tags/macOS/"><span class="tag">macOS</span><span class="tag is-grey-lightest">107</span></a></div><div class="control"><a class="tags has-addons" href="/tags/machine-learning/"><span class="tag">machine learning</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/maps/"><span class="tag">maps</span><span class="tag is-grey-lightest">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/networking/"><span class="tag">networking</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/node/"><span class="tag">node</span><span class="tag is-grey-lightest">11</span></a></div><div class="control"><a class="tags has-addons" href="/tags/objc/"><span class="tag">objc</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/react/"><span class="tag">react</span><span class="tag is-grey-lightest">23</span></a></div><div class="control"><a class="tags has-addons" href="/tags/react-native/"><span class="tag">react native</span><span class="tag is-grey-lightest">14</span></a></div><div class="control"><a class="tags has-addons" href="/tags/realm/"><span class="tag">realm</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/rx/"><span class="tag">rx</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/script/"><span class="tag">script</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/spm/"><span class="tag">spm</span><span class="tag is-grey-lightest">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/swift/"><span class="tag">swift</span><span class="tag is-grey-lightest">301</span></a></div><div class="control"><a class="tags has-addons" href="/tags/swiftUI/"><span class="tag">swiftUI</span><span class="tag is-grey-lightest">66</span></a></div><div class="control"><a class="tags has-addons" href="/tags/tech/"><span class="tag">tech</span><span class="tag is-grey-lightest">14</span></a></div><div class="control"><a class="tags has-addons" href="/tags/terminal/"><span class="tag">terminal</span><span class="tag is-grey-lightest">9</span></a></div><div class="control"><a class="tags has-addons" href="/tags/testing/"><span class="tag">testing</span><span class="tag is-grey-lightest">16</span></a></div><div class="control"><a class="tags has-addons" href="/tags/tool/"><span class="tag">tool</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/unity/"><span class="tag">unity</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/voip/"><span class="tag">voip</span><span class="tag is-grey-lightest">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/watchOS/"><span class="tag">watchOS</span><span class="tag is-grey-lightest">11</span></a></div><div class="control"><a class="tags has-addons" href="/tags/web/"><span class="tag">web</span><span class="tag is-grey-lightest">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/work/"><span class="tag">work</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/wwdc/"><span class="tag">wwdc</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/xcode/"><span class="tag">xcode</span><span class="tag is-grey-lightest">24</span></a></div></div></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">Subscribe to Updates</h3><form action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open(&#039;https://feedburner.google.com/fb/a/mailverify?uri=c2r59mmt2n5k0o5dt5vv3nq4u4&#039;,&#039;popupwindow&#039;,&#039;scrollbars=yes,width=550,height=520&#039;);return true"><input type="hidden" value="c2r59mmt2n5k0o5dt5vv3nq4u4" name="uri"><input type="hidden" name="loc" value="en_US"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button is-primary" type="submit" value="Subscribe"></div></div></form></div></div></div><div class="card widget"><div class="card-content"><div class="notification is-danger">You need to set <code>client_id</code> and <code>slot_id</code> to show this AD unit. Please set it in <code>_config.yml</code>.</div></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/z.png" alt="onmyway133" height="28"></a><p class="size-small"><span>&copy; 2020 Khoa Pham</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/onmyway133"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            site: {
                url: 'https://onmyway133.github.io',
                external_link: {"enable":true,"exclude":[]}
            },
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to Top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>