<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="generator" content="Hexo 4.2.0"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>onmyway133</title><meta description="What you don&amp;#39;t know is what you haven&amp;#39;t learned"><meta property="og:type" content="blog"><meta property="og:title" content="onmyway133"><meta property="og:url" content="https://onmyway133.github.io/"><meta property="og:site_name" content="onmyway133"><meta property="og:description" content="What you don&amp;#39;t know is what you haven&amp;#39;t learned"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://onmyway133.github.io/img/og_image.png"><meta property="article:author" content="Khoa Pham"><meta property="article:tag" content="ios"><meta property="article:tag" content=" android"><meta property="article:tag" content="javascript"><meta property="article:tag" content=" react"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/img/og_image.png"><meta property="twitter:creator" content="@onmyway133"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://onmyway133.github.io"},"headline":"onmyway133","image":["https://onmyway133.github.io/img/og_image.png"],"author":{"@type":"Person","name":"Khoa Pham"},"description":"What you don&#39;t know is what you haven&#39;t learned"}</script><link rel="alternative" href="/atom.xml" title="onmyway133" type="application/atom+xml"><link rel="icon" href="/img/favicon.ico"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><script src="https://www.googletagmanager.com/gtag/js?id=UA-40119591-5" async></script><script>window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
    
        gtag('config', 'UA-40119591-5');</script><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><script data-ad-client="ca-pub-3656459401405265" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js" async></script></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/z.png" alt="onmyway133" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/apps">Apps</a><a class="navbar-item" href="/gumroad">Gumroad</a><a class="navbar-item" href="/about">About</a><a class="navbar-item" href="/opensource">Open Source</a><a class="navbar-item" href="/writing">Writing</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/speaking">Speaking</a><a class="navbar-item" href="/news">News</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/onmyway133"><i class="fab fa-github"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-10-08T11:37:48.000Z" title="2019-10-08T11:37:48.000Z">2019-10-08</time><span class="level-item">a minute read (About 194 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-load-remote-image-in-SwiftUI/">How to load remote image in SwiftUI</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/448">#448</a></strong></p>
<p>Use <code>ObservableObject</code> and <code>onReceive</code> to receive event. <code>URLSession.dataTask</code> reports in background queue, so need to <code>.receive(on: RunLoop.main)</code> to receive events on main queue.</p>
<p>For better dependency injection, need to use <code>ImageLoader</code> from <a href="https://developer.apple.com/documentation/swiftui/environment">Environment</a></p>
<p>There should be a way to propagate event from <code>Publisher</code> to another <code>Publisher</code>, for now we use <code>sink</code></p>
<p><code>ImageLoader.swift</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Combine</span><br><span class="line"><span class="keyword">import</span> WatchKit</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ImageLoader</span>: <span class="title">ObservableObject</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> cancellable: <span class="type">AnyCancellable?</span></span><br><span class="line">    <span class="keyword">let</span> objectWillChange = <span class="type">PassthroughSubject</span>&lt;<span class="type">UIImage?</span>, <span class="type">Never</span>&gt;()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">load</span><span class="params">(url: URL)</span></span> &#123;</span><br><span class="line">        <span class="keyword">self</span>.cancellable = <span class="type">URLSession</span>.shared</span><br><span class="line">            .dataTaskPublisher(<span class="keyword">for</span>: url)</span><br><span class="line">            .<span class="built_in">map</span>(&#123; $<span class="number">0</span>.data &#125;)</span><br><span class="line">            .eraseToAnyPublisher()</span><br><span class="line">            .receive(on: <span class="type">RunLoop</span>.main)</span><br><span class="line">            .<span class="built_in">map</span>(&#123; <span class="type">UIImage</span>(data: $<span class="number">0</span>) &#125;)</span><br><span class="line">            .replaceError(with: <span class="literal">nil</span>)</span><br><span class="line">            .sink(receiveValue: &#123; image <span class="keyword">in</span></span><br><span class="line">                <span class="keyword">self</span>.objectWillChange.send(image)</span><br><span class="line">            &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">cancel</span><span class="params">()</span></span> &#123;</span><br><span class="line">        cancellable?.cancel()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>RemoteImage.swift</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> SwiftUI</span><br><span class="line"><span class="keyword">import</span> WatchKit</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">RemoteImage</span>: <span class="title">View</span> </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> url: <span class="type">URL</span></span><br><span class="line">    <span class="keyword">let</span> imageLoader = <span class="type">ImageLoader</span>()</span><br><span class="line">    @<span class="type">State</span> <span class="keyword">var</span> image: <span class="type">UIImage?</span> = <span class="literal">nil</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> body: some <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">Group</span> &#123;</span><br><span class="line">            makeContent()</span><br><span class="line">        &#125;</span><br><span class="line">        .onReceive(imageLoader.objectWillChange, perform: &#123; image <span class="keyword">in</span></span><br><span class="line">            <span class="keyword">self</span>.image = image</span><br><span class="line">        &#125;)</span><br><span class="line">        .onAppear(perform: &#123;</span><br><span class="line">            <span class="keyword">self</span>.imageLoader.load(url: <span class="keyword">self</span>.url)</span><br><span class="line">        &#125;)</span><br><span class="line">        .onDisappear(perform: &#123;</span><br><span class="line">            <span class="keyword">self</span>.imageLoader.cancel()</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">makeContent</span><span class="params">()</span></span> -&gt; some <span class="type">View</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">let</span> image = image &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="type">AnyView</span>(</span><br><span class="line">                <span class="type">Image</span>(uiImage: image)</span><br><span class="line">                    .resizable()</span><br><span class="line">                    .aspectRatio(contentMode: .fit)</span><br><span class="line">            )</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="type">AnyView</span>(<span class="type">Text</span>(<span class="string">"😢"</span>))</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-10-08T11:35:51.000Z" title="2019-10-08T11:35:51.000Z">2019-10-08</time><span class="level-item">a minute read (About 136 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-do-navigation-in-SwiftUI-in-watchOS/">How to do navigation in SwiftUI in watchOS</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/447">#447</a></strong></p>
<p><a href="https://developer.apple.com/documentation/swiftui/navigationview">NavigationView</a> is not available on <code>WatchKit</code>, but we can just use <code>NavigationLink</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">List</span>(services.<span class="built_in">map</span>(&#123; <span class="type">AnyService</span>($<span class="number">0</span>) &#125;)) &#123; anyService <span class="keyword">in</span></span><br><span class="line">    <span class="type">NavigationLink</span>(destination:</span><br><span class="line">        <span class="type">ItemsView</span>(service: anyService.service)</span><br><span class="line">            .navigationBarTitle(anyService.service.name)</span><br><span class="line">            .onDisappear(perform: &#123;</span><br><span class="line">                anyService.service.requestCancellable?.cancel()</span><br><span class="line">            &#125;)</span><br><span class="line">    ) &#123;</span><br><span class="line">        <span class="type">HStack</span> &#123;</span><br><span class="line">            <span class="type">Image</span>(anyService.service.name)</span><br><span class="line">                .resizable()</span><br><span class="line">                .frame(width: <span class="number">30</span>, height: <span class="number">30</span>, alignment: .leading)</span><br><span class="line">            <span class="type">Text</span>(anyService.service.name)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Adding <code>NavigationLink</code> to a View adds a round shadow cropping effect, which is usually not want we want. </p>
<p>But we shouldn’t wrap <code>Button</code> as <code>Button</code> handles its own touch event, plus it has double shadow effect.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">NavigationLink</span>(destination:</span><br><span class="line">    <span class="type">QRCodeView</span>(title: item.title, url: item.url)</span><br><span class="line">) &#123;</span><br><span class="line">    <span class="type">Button</span>(action: &#123;&#125;) &#123;</span><br><span class="line">         <span class="type">Text</span>(<span class="string">"Open"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Just use Text and it’s good to go</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">NavigationLink</span>(destination:</span><br><span class="line">    <span class="type">QRCodeView</span>(title: item.title, url: item.url)</span><br><span class="line">) &#123;</span><br><span class="line">    <span class="type">Text</span>(<span class="string">"Open"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-10-07T12:08:38.000Z" title="2019-10-07T12:08:38.000Z">2019-10-07</time><span class="level-item">a minute read (About 221 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-use-protocol-in-List-in-SwiftUI/">How to use protocol in List in SwiftUI</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/446">#446</a></strong></p>
<p>Suppose we have Service protocol, and want to use in List</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">Service</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> name: <span class="type">String</span> &#123; <span class="keyword">get</span> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">MainView</span>: <span class="title">View</span> </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> services = [</span><br><span class="line">        <span class="type">Car</span>()</span><br><span class="line">        <span class="type">Plane</span>()</span><br><span class="line">    ]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> body: some <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">List</span>(services) &#123; service <span class="keyword">in</span></span><br><span class="line">            <span class="type">HStack</span> &#123;</span><br><span class="line">                <span class="type">Image</span>(service.name)</span><br><span class="line">                <span class="type">Text</span>(service.name)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>This is not possible because item in List needs to conform to <code>Identifiable</code></p>
<blockquote>
<p>Protocol type ‘Service’ cannot conform to ‘Identifiable’ because only concrete types can conform to protocols</p>
</blockquote>
<h2 id="Type-eraser"><a href="#Type-eraser" class="headerlink" title="Type eraser"></a>Type eraser</h2><p>In the same way that SwiftUI uses type eraser, for example <code>AnyView</code>, we can introduce <code>AnyService</code> to work around this</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> body: some <span class="type">View</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> useImage &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="type">AnyView</span>(<span class="type">Image</span>(<span class="string">"my image"</span>))</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="type">AnyView</span>(<span class="type">Text</span>(<span class="string">"my text"</span>))</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Make AnyService conform to <code>Identifiable</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">AnyService</span>: <span class="title">Identifiable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> id: <span class="type">String</span></span><br><span class="line">    <span class="keyword">let</span> service: <span class="type">Service</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">init</span>(<span class="number">_</span> service: <span class="type">Service</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.service = service</span><br><span class="line">        <span class="keyword">self</span>.id = service.name</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Then in our View, we just need to declare services wrapped inside AnyService</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">MainView</span>: <span class="title">View</span> </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> services = [</span><br><span class="line">        <span class="type">AnyService</span>(<span class="type">Car</span>()),</span><br><span class="line">        <span class="type">AnyService</span>(<span class="type">Plane</span>())</span><br><span class="line">    ]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> body: some <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">List</span>(services) &#123; anyService <span class="keyword">in</span></span><br><span class="line">            <span class="type">HStack</span> &#123;</span><br><span class="line">                <span class="type">Image</span>(anyService.service.name)</span><br><span class="line">                <span class="type">Text</span>(anyService.service.name)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>A bit refactoring, we can just declare normal services and map them</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">MainView</span>: <span class="title">View</span> </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> services: [<span class="type">Service</span>] = [</span><br><span class="line">        <span class="type">Car</span>(),</span><br><span class="line">        <span class="type">Plane</span>()</span><br><span class="line">    ]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> body: some <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">List</span>(services.<span class="built_in">map</span>(&#123; <span class="type">AnyService</span>($<span class="number">0</span> &#125;)) &#123; anyService <span class="keyword">in</span></span><br><span class="line">            <span class="type">HStack</span> &#123;</span><br><span class="line">                <span class="type">Image</span>(anyService.service.name)</span><br><span class="line">                <span class="type">Text</span>(anyService.service.name)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-10-07T09:01:37.000Z" title="2019-10-07T09:01:37.000Z">2019-10-07</time><span class="level-item">2 minutes read (About 254 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-support-Swift-Package-Manager-for-existing-projects/">How to support Swift Package Manager for existing projects</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/445">#445</a></strong></p>
<h2 id="How-to-add-SPM"><a href="#How-to-add-SPM" class="headerlink" title="How to add SPM"></a>How to add SPM</h2><ul>
<li>Run <code>swift package init</code></li>
<li>Check enum for version for each platform <a href="https://developer.apple.com/documentation/swift_packages/supportedplatform/tvosversion">https://developer.apple.com/documentation/swift_packages/supportedplatform/tvosversion</a></li>
</ul>
<ul>
<li>Example <a href="https://github.com/onmyway133/Anchors/blob/master/Package.swift">https://github.com/onmyway133/Anchors/blob/master/Package.swift</a></li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// swift-tools-version:5.1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> PackageDescription</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> package = <span class="type">Package</span>(</span><br><span class="line">    name: <span class="string">"Anchors"</span>,</span><br><span class="line">    platforms: [</span><br><span class="line">        .macOS(.v10_11),</span><br><span class="line">        .iOS(.v9),</span><br><span class="line">        .tvOS(.v9)</span><br><span class="line">    ],</span><br><span class="line">    products: [</span><br><span class="line">        .library(</span><br><span class="line">            name: <span class="string">"Anchors"</span>,</span><br><span class="line">            targets: [<span class="string">"Anchors"</span>]),</span><br><span class="line">    ],</span><br><span class="line">    targets: [</span><br><span class="line">        .target(</span><br><span class="line">            name: <span class="string">"Anchors"</span>,</span><br><span class="line">            dependencies: [],</span><br><span class="line">            path: <span class="string">"Sources"</span></span><br><span class="line">		),</span><br><span class="line">        .testTarget(</span><br><span class="line">            name: <span class="string">"AnchorsTests"</span>,</span><br><span class="line">            dependencies: [<span class="string">"Anchors"</span>]),</span><br><span class="line">    ],</span><br><span class="line">    swiftLanguageVersions: [.v5]</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>To test, <code>swift test</code> to test locally, this should validate <code>Package.swift</code> too</p>
<h2 id="Support-multiple-platform"><a href="#Support-multiple-platform" class="headerlink" title="Support multiple platform"></a>Support multiple platform</h2><p>To support multiple platform, use platform check</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#<span class="keyword">if</span> canImport(<span class="type">UIKit</span>)</span><br><span class="line"><span class="keyword">import</span> UIKit</span><br><span class="line">#endif</span><br></pre></td></tr></table></figure>

<p>Use sources in Target </p>
<ul>
<li><a href="https://developer.apple.com/documentation/swift_packages/target/2880339-sources">https://developer.apple.com/documentation/swift_packages/target/2880339-sources</a></li>
<li><a href="https://github.com/onmyway133/EasyClosure/blob/master/Package.swift">https://github.com/onmyway133/EasyClosure/blob/master/Package.swift</a></li>
</ul>
<blockquote>
<p>If this property is nil, all valid source files in the target’s path will be included and specified paths are relative to the target path.</p>
</blockquote>
<blockquote>
<p>A path can be a path to a directory or an individual source file. In case of a directory, the Swift Package Manager searches for valid source files recursively inside it.</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">.target(</span><br><span class="line">    name: <span class="string">"EasyClosureiOS"</span>,</span><br><span class="line">    dependencies: [],</span><br><span class="line">    path: <span class="string">"Sources"</span>,</span><br><span class="line">    sources: [<span class="string">"Shared"</span>, <span class="string">"iOS"</span>]</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>Error</p>
<blockquote>
<p>error: target ‘EasyClosuremacOS’ has sources overlapping sources</p>
</blockquote>
<h2 id="How-to-use"><a href="#How-to-use" class="headerlink" title="How to use"></a>How to use</h2><ul>
<li>SPM packages are at <code>DerivedData/MyApp/SourcePackages/checkouts</code></li>
<li>Delete DerivedData for Xcode to fetch new contents from GitHub</li>
<li>Clean build folder as Xcode often caches changes from frameworks</li>
</ul>
<h2 id="Read-more"><a href="#Read-more" class="headerlink" title="Read more"></a>Read more</h2><ul>
<li><a href="https://dive.github.io/swift-package-manager/ios/2019/01/20/swift_package_manager_vs_ios.html">https://dive.github.io/swift-package-manager/ios/2019/01/20/swift_package_manager_vs_ios.html</a></li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-10-07T05:43:56.000Z" title="2019-10-07T05:43:56.000Z">2019-10-07</time><span class="level-item">a few seconds read (About 91 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-fix-unreadable-ASCII-characters-in-Swift/">How to fix unreadable ASCII characters in Swift</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/444">#444</a></strong></p>
<p>To avoid compiler error <code>Unprintable ASCII character found in source file</code>, from Swift 5, we can use <code>isASCII</code>.</p>
<p>Run this from the generator app that generates Swift code.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> normalized = weirdString.<span class="built_in">filter</span>(&#123; $<span class="number">0</span>.isASCII &#125;)</span><br></pre></td></tr></table></figure>

<p>For more check, see Character <a href="https://developer.apple.com/documentation/swift/character/3127011-isletter">https://developer.apple.com/documentation/swift/character/3127011-isletter</a></p>
<p>Watch out for</p>
<ul>
<li>Delete/House symbol ⌂ code 127 (0x7f)</li>
</ul>
<p>The above does not seem to work, use find to find <code></code> character (copy Sublime Text to see 0x7f character)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find .&#x2F; -type f -exec sed -i &#39;&#39; -e &#39;s&#x2F;&#x2F;&#x2F;&#39; &#123;&#125; \;</span><br></pre></td></tr></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-10-05T18:28:16.000Z" title="2019-10-05T18:28:16.000Z">2019-10-05</time><span class="level-item">a few seconds read (About 41 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-style-NSTextView-and-NSTextField-in-macOS/">How to style NSTextView and NSTextField in macOS</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/443">#443</a></strong></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> textField = <span class="type">NSTextField</span>()</span><br><span class="line">textField.focusRingType = .<span class="keyword">none</span></span><br></pre></td></tr></table></figure>

<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> textView = <span class="type">NSTextView</span>()</span><br><span class="line">textView.insertionPointColor = <span class="type">R</span>.color.caret</span><br><span class="line">textView.isRichText = <span class="literal">false</span></span><br><span class="line">textView.importsGraphics = <span class="literal">false</span></span><br><span class="line">textView.isEditable = <span class="literal">true</span></span><br><span class="line">textView.isSelectable = <span class="literal">true</span></span><br><span class="line">textView.drawsBackground = <span class="literal">false</span></span><br><span class="line">textView.allowsUndo = <span class="literal">true</span></span><br></pre></td></tr></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-10-04T08:37:42.000Z" title="2019-10-04T08:37:42.000Z">2019-10-04</time><span class="level-item">a few seconds read (About 40 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-center-NSWindow-in-screen/">How to center NSWindow in screen</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/442">#442</a></strong></p>
<p>On macOS, coordinate origin is bottom left</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> window = <span class="type">NSWindow</span>(contentRect: rect, styleMask: .borderless, backing: .buffered, <span class="keyword">defer</span>: <span class="literal">false</span>)</span><br><span class="line"></span><br><span class="line">window.center()</span><br><span class="line"><span class="keyword">let</span> frame = window.frame</span><br><span class="line">window.setFrameOrigin(<span class="type">CGPoint</span>(x: frame.origin.x, y: <span class="number">100</span>))</span><br></pre></td></tr></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-10-03T09:59:05.000Z" title="2019-10-03T09:59:05.000Z">2019-10-03</time><span class="level-item">a few seconds read (About 77 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-remove-duplicates-based-on-property-in-array-in-Swift/">How to remove duplicates based on property in array in Swift</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/441">#441</a></strong></p>
<p>Make object conform to <code>Equatable</code> and <code>Hashable</code> and use <code>Set</code> to eliminate duplications. <code>Set</code> loses order so we need to sort after uniquing</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">App</span>: <span class="title">Equatable</span>, <span class="title">Hashable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="function"><span class="keyword">func</span> == <span class="params">(lhs: App, rhs: App)</span></span> -&gt; <span class="type">Bool</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> lhs.name == rhs.name &amp;&amp; lhs.bundleId == rhs.bundleId</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">hash</span><span class="params">(into hasher: <span class="keyword">inout</span> Hasher)</span></span> &#123;</span><br><span class="line">        hasher.combine(name)</span><br><span class="line">        hasher.combine(bundleId)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> uniqueApps = <span class="type">Array</span>(<span class="type">Set</span>(unsortedApps))</span><br><span class="line"><span class="keyword">let</span> apps = uniqueApps.sorted(by: &#123; $<span class="number">0</span>.name.lowercased() &lt; $<span class="number">1</span>.name.lowercased() &#125;)</span><br></pre></td></tr></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-10-03T06:39:35.000Z" title="2019-10-03T06:39:35.000Z">2019-10-03</time><span class="level-item">a few seconds read (About 30 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-get-url-of-app-on-the-iOS-AppStore/">How to get url of app on the iOS AppStore</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/440">#440</a></strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;itunes.apple.com&#x2F;[country]&#x2F;app&#x2F;[App–Name]&#x2F;id[App-ID]?mt&#x3D;8</span><br></pre></td></tr></table></figure>

<p>For example <a href="https://apps.apple.com/nl/app/cutters/id1466739130">https://apps.apple.com/nl/app/cutters/id1466739130</a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-10-03T05:44:18.000Z" title="2019-10-03T05:44:18.000Z">2019-10-03</time><span class="level-item">a minute read (About 199 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-log-Error-in-Swift/">How to log Error in Swift</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/439">#439</a></strong></p>
<h2 id="Use-localizedDescription"><a href="#Use-localizedDescription" class="headerlink" title="Use localizedDescription"></a>Use localizedDescription</h2><p>We need to provide <code>NSLocalizedDescriptionKey</code> inside user info dictionary, otherwise the outputt string may not be what we want.</p>
<h3 id="NSError"><a href="#NSError" class="headerlink" title="NSError"></a>NSError</h3><p><a href="https://developer.apple.com/documentation/foundation/nserror/1414418-localizeddescription">https://developer.apple.com/documentation/foundation/nserror/1414418-localizeddescription</a></p>
<blockquote>
<p>A string containing the localized description of the error.<br>The object in the user info dictionary for the key NSLocalizedDescriptionKey. If the user info dictionary doesn’t contain a value for NSLocalizedDescriptionKey, a default string is constructed from the domain and code.</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> error = <span class="type">NSError</span>(domain: <span class="string">"com.onmyway133.MyApp"</span>, code: <span class="number">2</span>, userInfo: [</span><br><span class="line">    <span class="string">"status_code"</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">"status_message"</span>: <span class="string">"not enough power"</span></span><br><span class="line">])</span><br><span class="line"></span><br><span class="line">error.localizedDescription</span><br><span class="line"><span class="comment">// "The operation couldn’t be completed. (com.onmyway133.MyApp error 2.)"</span></span><br></pre></td></tr></table></figure>

<h3 id="Error"><a href="#Error" class="headerlink" title="Error"></a>Error</h3><p><a href="https://developer.apple.com/documentation/swift/error/2292912-localizeddescription">https://developer.apple.com/documentation/swift/error/2292912-localizeddescription</a></p>
<blockquote>
<p>Retrieve the localized description for this error.</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">AppError</span>: <span class="title">Error</span> </span>&#123;</span><br><span class="line">    <span class="keyword">case</span> request</span><br><span class="line">    <span class="keyword">case</span> invalid</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">AppError</span>.request.localizedDescription</span><br><span class="line"><span class="comment">// "The operation couldn’t be completed. (MyApp.AppError error 0.)"</span></span><br></pre></td></tr></table></figure>

<h2 id="Use-describing-String"><a href="#Use-describing-String" class="headerlink" title="Use describing String"></a>Use describing String</h2><p>To have better control, we can have <code>toString</code> which prints closly to what we expect</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Error</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">toString</span><span class="params">()</span></span> -&gt; <span class="type">String</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="type">String</span>(describing: <span class="keyword">self</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">AppError</span>.request.<span class="built_in">toString</span>()</span><br><span class="line"><span class="comment">// request</span></span><br><span class="line"></span><br><span class="line">nsError.<span class="built_in">toString</span>()</span><br><span class="line"><span class="comment">// Error Domain=com.onmyway133.MyApp Code=2 "(null)" UserInfo=&#123;status_message=not enough power, status_code=SwiftGRPC.StatusCode.powerRequired&#125;</span></span><br></pre></td></tr></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-10-02T10:47:06.000Z" title="2019-10-02T10:47:06.000Z">2019-10-02</time><span class="level-item">a minute read (About 135 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-handle-NSTextField-change-in-macOS/">How to handle NSTextField change in macOS</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/438">#438</a></strong></p>
<h2 id="Storyboard"><a href="#Storyboard" class="headerlink" title="Storyboard"></a>Storyboard</h2><p>In Storyboard, <code>NSTextField</code> has an Action option that specify whether <code>Send on</code>Send on Enter only` should be the default behaviour.</p>
<p><img src="https://user-images.githubusercontent.com/2284279/66045014-217d8100-e523-11e9-8e78-a7f835490245.png" alt="textfield"></p>
<h2 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h2><p>In code, <code>NSTextFieldDelegate</code> notifies whenever text field value changes, and <code>target action</code> notifies when Enter key is pressed</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Cocoa</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ViewController</span>: <span class="title">NSViewController</span>, <span class="title">NSTextFieldDelegate</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@IBOutlet</span> <span class="keyword">weak</span> <span class="keyword">var</span> textField: <span class="type">NSTextField!</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">super</span>.viewDidLoad()</span><br><span class="line">        </span><br><span class="line">        textField.delegate = <span class="keyword">self</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">controlTextDidChange</span><span class="params">(<span class="number">_</span> obj: Notification)</span></span> &#123;</span><br><span class="line">        <span class="keyword">let</span> textField = obj.object <span class="keyword">as</span>! <span class="type">NSTextField</span></span><br><span class="line">        <span class="built_in">print</span>(textField.stringValue)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Use-EasyClosure"><a href="#Use-EasyClosure" class="headerlink" title="Use EasyClosure"></a>Use EasyClosure</h2><p>If we use <a href="https://github.com/onmyway133/EasyClosure">EasyClosure</a> then this is easy</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> textField: <span class="type">NSTextField</span> = </span><br><span class="line"></span><br><span class="line">textField.on.action &#123; string <span class="keyword">in</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"User has pressed enter \(string)"</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">textField.on.change &#123; string <span class="keyword">in</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"Text field value has changed"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-10-02T10:04:41.000Z" title="2019-10-02T10:04:41.000Z">2019-10-02</time><span class="level-item">2 minutes read (About 329 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-add-section-header-to-NSCollectionView-in-macOS/">How to add section header to NSCollectionView in macOS</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/437">#437</a></strong></p>
<h2 id="Normal"><a href="#Normal" class="headerlink" title="Normal"></a>Normal</h2><p>Use <a href="https://github.com/onmyway133/Omnia">Omnia</a> for <code>itemId</code> extension</p>
<p><code>HeaderCell.swift</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">HeaderCell</span>: <span class="title">NSView</span>, <span class="title">NSCollectionViewSectionHeaderView</span> </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> label: <span class="type">NSTextField</span> = withObject(<span class="type">NSTextField</span>(labelWithString: <span class="string">""</span>)) &#123;</span><br><span class="line">        $<span class="number">0</span>.textColor = <span class="type">R</span>.color.header</span><br><span class="line">        $<span class="number">0</span>.font = <span class="type">R</span>.font.header</span><br><span class="line">        $<span class="number">0</span>.alignment = .<span class="keyword">left</span></span><br><span class="line">        $<span class="number">0</span>.lineBreakMode = .byTruncatingTail</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="keyword">init</span>(frame frameRect: <span class="type">NSRect</span>) &#123;</span><br><span class="line">        <span class="keyword">super</span>.<span class="keyword">init</span>(frame: frameRect)</span><br><span class="line"></span><br><span class="line">        addSubviews([label])</span><br><span class="line"></span><br><span class="line">        activate(</span><br><span class="line">            label.anchor.centerY,</span><br><span class="line">            label.anchor.<span class="keyword">left</span>.constant(<span class="number">8</span>)</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">required</span> <span class="keyword">init</span>?(coder: <span class="type">NSCoder</span>) &#123;</span><br><span class="line">        <span class="built_in">fatalError</span>()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>ViewController.swift</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">collectionView.register(</span><br><span class="line">    <span class="type">HeaderCell</span>.<span class="keyword">self</span>,</span><br><span class="line">    forSupplementaryViewOfKind: <span class="type">NSCollectionView</span>.elementKindSectionHeader,</span><br><span class="line">    withIdentifier: <span class="type">HeaderCell</span>.itemId</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">collectionView</span><span class="params">(<span class="number">_</span> collectionView: NSCollectionView, viewForSupplementaryElementOfKind kind: NSCollectionView.SupplementaryElementKind, at indexPath: IndexPath)</span></span> -&gt; <span class="type">NSView</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> kind == <span class="type">NSCollectionView</span>.elementKindSectionHeader &#123;</span><br><span class="line">        <span class="keyword">let</span> view = collectionView.makeSupplementaryView(</span><br><span class="line">            ofKind: kind,</span><br><span class="line">            withIdentifier: <span class="type">HeaderCell</span>.itemId,</span><br><span class="line">            <span class="keyword">for</span>: indexPath</span><br><span class="line">        ) <span class="keyword">as</span>! <span class="type">HeaderCell</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> menu = app.menus[indexPath.section]</span><br><span class="line">        view.label.stringValue = menu.name</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> view</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="type">NSView</span>()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="In-generic-subclass"><a href="#In-generic-subclass" class="headerlink" title="In generic subclass"></a>In generic subclass</h2><p>If use <code>CollectionViewHandler</code> from <a href="https://github.com/onmyway133/Omnia">Omnia</a>, then need to add <code>@objc</code> due to a bug in Swift compiler for subclassing generic class</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@objc</span> (collectionView:viewForSupplementaryElementOfKind:atIndexPath:)</span><br></pre></td></tr></table></figure>

<p><code>MyHandler.swift</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> AppKit</span><br><span class="line"><span class="keyword">import</span> Omnia</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyHandler</span>: <span class="title">CollectionViewHandler</span>&lt;<span class="title">App</span>.<span class="title">Key</span>, <span class="title">KeyCell</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">override</span> <span class="keyword">init</span>() &#123;</span><br><span class="line">        <span class="keyword">super</span>.<span class="keyword">init</span>()</span><br><span class="line"></span><br><span class="line">        layout.headerReferenceSize = <span class="type">NSSize</span>(width: <span class="number">300</span>, height: <span class="number">30</span>)</span><br><span class="line"></span><br><span class="line">        collectionView.register(</span><br><span class="line">            <span class="type">HeaderCell</span>.<span class="keyword">self</span>,</span><br><span class="line">            forSupplementaryViewOfKind: <span class="type">NSCollectionView</span>.elementKindSectionHeader,</span><br><span class="line">            withIdentifier: <span class="type">HeaderCell</span>.itemId</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@objc</span> (collectionView:viewForSupplementaryElementOfKind:atIndexPath:)</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">collectionView</span><span class="params">(<span class="number">_</span> collectionView: NSCollectionView, viewForSupplementaryElementOfKind kind: NSCollectionView.SupplementaryElementKind, at indexPath: IndexPath)</span></span> -&gt; <span class="type">NSView</span> &#123;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> kind == <span class="type">NSCollectionView</span>.elementKindSectionHeader &#123;</span><br><span class="line">            <span class="keyword">let</span> view = collectionView.makeSupplementaryView(</span><br><span class="line">                ofKind: kind,</span><br><span class="line">                withIdentifier: <span class="type">HeaderCell</span>.itemId,</span><br><span class="line">                <span class="keyword">for</span>: indexPath</span><br><span class="line">            ) <span class="keyword">as</span>! <span class="type">HeaderCell</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">let</span> menu = app.menus[indexPath.section]</span><br><span class="line">            view.label.stringValue = menu.name</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> view</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="type">NSView</span>()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Use-Omnia"><a href="#Use-Omnia" class="headerlink" title="Use Omnia"></a>Use Omnia</h2><p>Use <code>CollectionViewSectionHandler</code> from Omnia</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SectionHandler</span>: <span class="title">CollectionViewSectionHandler</span>&lt;<span class="title">App</span>.<span class="title">Key</span>, <span class="title">KeyCell</span>, <span class="title">HeaderCell</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">sectionHandler.configureHeader = &#123; section, view <span class="keyword">in</span></span><br><span class="line">    view.label.stringValue = section.name</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">sectionHandler.configure = &#123; item, cell <span class="keyword">in</span></span><br><span class="line">    cell.shortcutLabel.stringValue = item.shortcut</span><br><span class="line">    cell.nameLabel.stringValue = item.name</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">sectionHandler.itemSize = &#123; [<span class="keyword">weak</span> <span class="keyword">self</span>] <span class="keyword">in</span></span><br><span class="line">    <span class="keyword">guard</span> <span class="keyword">let</span> <span class="keyword">self</span> = <span class="keyword">self</span> <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> .zero</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> width = <span class="keyword">self</span>.sectionHandler.collectionView.frame.size.width</span><br><span class="line">        - <span class="keyword">self</span>.sectionHandler.layout.sectionInset.<span class="keyword">left</span></span><br><span class="line">        - <span class="keyword">self</span>.sectionHandler.layout.sectionInset.<span class="keyword">right</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="type">CGSize</span>(width: width, height: <span class="number">18</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Read-more"><a href="#Read-more" class="headerlink" title="Read more"></a>Read more</h2><ul>
<li><a href="https://www.raywenderlich.com/783-nscollectionview-tutorial#toc-anchor-020">https://www.raywenderlich.com/783-nscollectionview-tutorial#toc-anchor-020</a></li>
<li><a href="https://www.raywenderlich.com/1047-advanced-collection-views-in-os-x-tutorial">https://www.raywenderlich.com/1047-advanced-collection-views-in-os-x-tutorial</a></li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-10-01T10:03:09.000Z" title="2019-10-01T10:03:09.000Z">2019-10-01</time><span class="level-item">a few seconds read (About 28 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-show-log-in-Apple-Script/">How to show log in Apple Script</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/436">#436</a></strong></p>
<p>Open <code>Script Editor</code>, use <code>log</code> command and look for 4 tabs in bottom panel <code>Result</code>, <code>Messages</code>, <code>Events</code> and <code>Replies</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">log &quot;hello world&quot;</span><br></pre></td></tr></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-10-01T08:23:00.000Z" title="2019-10-01T08:23:00.000Z">2019-10-01</time><span class="level-item">a few seconds read (About 104 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-show-context-menu-from-NSButton-in-macOS/">How to show context menu from NSButton in macOS</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/435">#435</a></strong></p>
<p>Use <code>NSMenu</code> and <code>popUp</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">showQuitMenu</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">let</span> menu = <span class="type">NSMenu</span>()</span><br><span class="line">    <span class="keyword">let</span> aboutItem = <span class="type">NSMenuItem</span>(</span><br><span class="line">        title: <span class="string">"About"</span>,</span><br><span class="line">        action: #selector(onAboutTouched(<span class="number">_</span>:)),</span><br><span class="line">        keyEquivalent: <span class="string">""</span></span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> quitItem = <span class="type">NSMenuItem</span>(</span><br><span class="line">        title: <span class="string">"Quit Hacker Pad"</span>,</span><br><span class="line">        action: #selector(onQuitTouched(<span class="number">_</span>:)),</span><br><span class="line">        keyEquivalent: <span class="string">""</span></span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    aboutItem.target = <span class="keyword">self</span></span><br><span class="line">    quitItem.target = <span class="keyword">self</span></span><br><span class="line"></span><br><span class="line">    menu.addItem(aboutItem)</span><br><span class="line">    menu.addItem(quitItem)</span><br><span class="line"></span><br><span class="line">    menu.popUp(</span><br><span class="line">        positioning: aboutItem,</span><br><span class="line">        at: bottomView.quitButton.frame.origin,</span><br><span class="line">        <span class="keyword">in</span>: bottomView</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Use <a href="https://github.com/onmyway133/Omnia">Omnia</a></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> menuHandler = <span class="type">MenuHandler</span>()</span><br><span class="line">menuHandler.add(title: <span class="string">"About"</span>, action: &#123;</span><br><span class="line">    <span class="type">NSWorkspace</span>.shared.<span class="keyword">open</span>(<span class="type">URL</span>(string: <span class="string">"https://onmyway133.github.io/"</span>)!)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">menuHandler.add(title: <span class="string">"Quit Hacker Pad"</span>, action: &#123;</span><br><span class="line">    <span class="type">NSApp</span>.terminate(<span class="literal">nil</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">menuHandler.show(from: <span class="keyword">self</span>.bottomView.gearButton, <span class="keyword">in</span>: <span class="keyword">self</span>.bottomView)</span><br></pre></td></tr></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-09-30T18:15:00.000Z" title="2019-09-30T18:15:00.000Z">2019-09-30</time><span class="level-item">a few seconds read (About 39 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-handle-UICollectionView-reloadData-with-selected-index-path/">How to handle UICollectionView reloadData with selected index path</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/434">#434</a></strong></p>
<p>When calling <code>collectionView.reloadData()</code>, selected indexpath stays the same, but be aware that order of data may have changed</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> selectedData = ...</span><br><span class="line"><span class="keyword">let</span> indexPathForSelectedData = ...</span><br><span class="line"></span><br><span class="line">collectionView.scrollToItem(</span><br><span class="line">    at: indexPathForSelectedData,</span><br><span class="line">    at: .centeredHorizontally,</span><br><span class="line">    animated: <span class="literal">false</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-09-30T09:33:15.000Z" title="2019-09-30T09:33:15.000Z">2019-09-30</time><span class="level-item">a few seconds read (About 44 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-make-checked-NSButton-in-AppKit/">How to make checked NSButton in AppKit</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/433">#433</a></strong></p>
<ul>
<li>Use <a href="https://github.com/onmyway133/Omnia">Omnia</a> for convenient <code>style</code> and <code>isOn</code> property</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> checkButton = <span class="type">NSButton</span>(checkboxWithTitle: <span class="string">""</span>, target: <span class="literal">nil</span>, action: <span class="literal">nil</span>)</span><br><span class="line">checkButton.stylePlain(title: <span class="string">"Autosave"</span>, color: <span class="type">R</span>.color.text, font: <span class="type">R</span>.font.text)</span><br><span class="line">checkButton.isOn = <span class="literal">true</span></span><br></pre></td></tr></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-09-28T19:09:26.000Z" title="2019-09-28T19:09:26.000Z">2019-09-28</time><span class="level-item">a minute read (About 127 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-save-files-in-sandboxed-macOS-app/">How to save files in sandboxed macOS app</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/432">#432</a></strong></p>
<p>Read <a href="https://developer.apple.com/library/archive/documentation/Security/Conceptual/AppSandboxDesignGuide/AppSandboxInDepth/AppSandboxInDepth.html#//apple_ref/doc/uid/TP40011183-CH3-SW4">Container Directories and File System Access</a></p>
<blockquote>
<p>When you adopt App Sandbox, your application has access to the following locations:</p>
</blockquote>
<blockquote>
<p>The app container directory. Upon first launch, the operating system creates a special directory for use by your app—and only by your app—called a container. Each user on a system gets an individual container for your app, within their home directory; your app has unfettered read/write access to the container for the user who ran it.</p>
</blockquote>
<p>Use <a href="https://github.com/onmyway133/EasyStash">EasyStash</a></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> options = <span class="type">Options</span>()</span><br><span class="line">options.searchPathDirectory = .documentDirectory</span><br><span class="line">storage = <span class="keyword">try</span>! <span class="type">Storage</span>(options: options)</span><br></pre></td></tr></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-09-27T07:33:49.000Z" title="2019-09-27T07:33:49.000Z">2019-09-27</time><span class="level-item">a minute read (About 223 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-add-AdMob-to-Android-app/">How to add AdMob to Android app</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/431">#431</a></strong></p>
<h2 id="Use-AdMob-with-Firebase"><a href="#Use-AdMob-with-Firebase" class="headerlink" title="Use AdMob with Firebase"></a>Use AdMob with Firebase</h2><ul>
<li><a href="https://firebase.google.com/docs/admob/android/quick-start">https://firebase.google.com/docs/admob/android/quick-start</a></li>
</ul>
<p><code>build.gradle</code></p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">buildscript &#123;</span><br><span class="line">    repositories &#123;</span><br><span class="line">        google()</span><br><span class="line">        jcenter()</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    dependencies &#123;</span><br><span class="line">        classpath <span class="string">'com.google.gms:google-services:4.3.2'</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>app/build.gradle</code></p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Version</span> &#123;</span></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Firebase</span> &#123;</span></span><br><span class="line">        <span class="keyword">static</span> <span class="keyword">def</span> analytics = <span class="string">"17.2.0"</span></span><br><span class="line">        <span class="keyword">static</span> <span class="keyword">def</span> ads = <span class="string">"18.2.0"</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">dependencies &#123;</span><br><span class="line">    implementation <span class="string">"com.google.firebase:firebase-analytics:$Version.Firebase.analytics"</span></span><br><span class="line">    implementation <span class="string">"com.google.firebase:firebase-ads:$Version.Firebase.ads"</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">apply <span class="string">plugin:</span> <span class="string">'com.google.gms.google-services'</span></span><br></pre></td></tr></table></figure>

<p><code>Manifest.xml</code></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">manifest</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">application</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- Sample AdMob App ID: ca-app-pub-3940256099942544~3347511713 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta-data</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:name</span>=<span class="string">"com.google.android.gms.ads.APPLICATION_ID"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:value</span>=<span class="string">"[ADMOB_APP_ID]"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">application</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">manifest</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><code>MyApplication.kt</code></p>
<figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyApplication</span>: <span class="type">Application</span></span>() &#123;</span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onCreate</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate()</span><br><span class="line"></span><br><span class="line">        MobileAds.initialize(<span class="keyword">this</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="AdView"><a href="#AdView" class="headerlink" title="AdView"></a>AdView</h2><p><code>fragment.xml</code></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">com.google.android.gms.ads.AdView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">xmlns:ads</span>=<span class="string">"http://schemas.android.com/apk/res-auto"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/adView"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">ads:adSize</span>=<span class="string">"BANNER"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">ads:adUnitId</span>=<span class="string">"ca-app-pub-123456/123456"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">ads:layout_constraintBottom_toBottomOf</span>=<span class="string">"parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">ads:layout_constraintLeft_toLeftOf</span>=<span class="string">"parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">ads:layout_constraintRight_toRightOf</span>=<span class="string">"parent"</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<p><code>Fragment.kt</code></p>
<figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.google.android.gms.ads.AdRequest</span><br><span class="line"><span class="keyword">import</span> com.google.android.gms.ads.AdView</span><br><span class="line"></span><br><span class="line"><span class="keyword">val</span> request = AdRequest.Builder().build()</span><br><span class="line">adView.loadAd(request)</span><br></pre></td></tr></table></figure>

<h2 id="Troubleshooting"><a href="#Troubleshooting" class="headerlink" title="Troubleshooting"></a>Troubleshooting</h2><h3 id="Link-your-app-to-Firebase-option-not-showing"><a href="#Link-your-app-to-Firebase-option-not-showing" class="headerlink" title="Link your app to Firebase option not showing"></a>Link your app to Firebase option not showing</h3><ul>
<li><a href="https://support.google.com/admob/answer/6383165?authuser=0">https://support.google.com/admob/answer/6383165?authuser=0</a></li>
<li>Use standalone AdMob <a href="https://developers.google.com/admob/android/quick-start">https://developers.google.com/admob/android/quick-start</a></li>
</ul>
<p><code>app/build.gradle</code></p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dependencies &#123;</span><br><span class="line">    implementation <span class="string">'com.google.android.gms:play-services-ads:18.2.0'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Cannot-fit-requested-classes-in-a-single-dex-file"><a href="#Cannot-fit-requested-classes-in-a-single-dex-file" class="headerlink" title="Cannot fit requested classes in a single dex file"></a>Cannot fit requested classes in a single dex file</h3><ul>
<li><a href="https://stackoverflow.com/questions/48249633/errorcannot-fit-requested-classes-in-a-single-dex-file-try-supplying-a-main-dex">https://stackoverflow.com/questions/48249633/errorcannot-fit-requested-classes-in-a-single-dex-file-try-supplying-a-main-dex</a></li>
</ul>
<p><code>app/build.gradle</code></p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">android &#123;</span><br><span class="line">    defaultConfig &#123;</span><br><span class="line">        multiDexEnabled <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">dependencies &#123;</span><br><span class="line">    implementation <span class="string">'com.android.support:multidex:1.0.3'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Read-more"><a href="#Read-more" class="headerlink" title="Read more"></a>Read more</h2><ul>
<li><a href="http://thetechnocafe.com/a-complete-guide-to-integrating-admob-in-your-android-app/">http://thetechnocafe.com/a-complete-guide-to-integrating-admob-in-your-android-app/</a></li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-09-26T11:08:57.000Z" title="2019-09-26T11:08:57.000Z">2019-09-26</time><span class="level-item">3 minutes read (About 423 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-notarize-electron-app/">How to notarize electron app</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/430">#430</a></strong></p>
<h2 id="Use-electron-builder"><a href="#Use-electron-builder" class="headerlink" title="Use electron builder"></a>Use electron builder</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install electron-builder@latest --save-dev</span><br></pre></td></tr></table></figure>

<ul>
<li>Prefer electron-builder over electron-packager</li>
<li>Configuration <a href="https://www.electron.build/configuration/configuration">https://www.electron.build/configuration/configuration</a></li>
</ul>
<p><code>package.json</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">"name"</span>: <span class="string">"icon_generator"</span>,</span><br><span class="line">  <span class="string">"version"</span>: <span class="string">"1.3.0"</span>,</span><br><span class="line">  <span class="string">"description"</span>: <span class="string">"A macOS app to generate app icons"</span>,</span><br><span class="line">  <span class="string">"main"</span>: <span class="string">"babel/main.js"</span>,</span><br><span class="line">  <span class="string">"repository"</span>: <span class="string">"https://github.com/onmyway133/IconGenerator"</span>,</span><br><span class="line">  <span class="string">"author"</span>: <span class="string">"Khoa Pham"</span>,</span><br><span class="line">  <span class="string">"license"</span>: <span class="string">"MIT"</span>,</span><br><span class="line">  <span class="string">"scripts"</span>: &#123;</span><br><span class="line">    <span class="string">"start"</span>: <span class="string">"npm run babel &amp;&amp; electron ."</span>,</span><br><span class="line">    <span class="string">"babel"</span>: <span class="string">"babel ./src --out-dir ./babel --copy-files"</span>,</span><br><span class="line">    <span class="string">"dist"</span>: <span class="string">"npm run babel &amp;&amp; electron-builder"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"build"</span>: &#123;</span><br><span class="line">    <span class="string">"appId"</span>: <span class="string">"com.onmyway133.IconGenerator"</span>,</span><br><span class="line">    <span class="string">"buildVersion"</span>: <span class="string">"20"</span>,</span><br><span class="line">    <span class="string">"productName"</span>: <span class="string">"Icon Generator"</span>,</span><br><span class="line">    <span class="string">"icon"</span>: <span class="string">"./Icon/Icon.icns"</span>,</span><br><span class="line">    <span class="string">"mac"</span>: &#123;</span><br><span class="line">      <span class="string">"category"</span>: <span class="string">"public.app-category.productivity"</span>,</span><br><span class="line">      <span class="string">"hardenedRuntime"</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="string">"gatekeeperAssess"</span>: <span class="literal">false</span>,</span><br><span class="line">      <span class="string">"entitlements"</span>: <span class="string">"./entitlements.plist"</span>,</span><br><span class="line">      <span class="string">"entitlementsInherit"</span>: <span class="string">"./entitlements.plist"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">"win"</span>: &#123;</span><br><span class="line">      <span class="string">"target"</span>: <span class="string">"msi"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">"linux"</span>: &#123;</span><br><span class="line">      <span class="string">"target"</span>: [</span><br><span class="line">        <span class="string">"AppImage"</span>,</span><br><span class="line">        <span class="string">"deb"</span></span><br><span class="line">      ]</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">"afterSign"</span>: <span class="string">"./afterSignHook.js"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Declare-entitlements"><a href="#Declare-entitlements" class="headerlink" title="Declare entitlements"></a>Declare entitlements</h2><p><code>entitlements.plist</code></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd"&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">plist</span> <span class="attr">version</span>=<span class="string">"1.0"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dict</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">key</span>&gt;</span>com.apple.security.cs.allow-jit<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">true</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">key</span>&gt;</span>com.apple.security.cs.allow-unsigned-executable-memory<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">true</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">key</span>&gt;</span>com.apple.security.cs.allow-dyld-environment-variables<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">true</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dict</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plist</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="Use-electron-notarize"><a href="#Use-electron-notarize" class="headerlink" title="Use electron-notarize"></a>Use electron-notarize</h2><ul>
<li><a href="https://github.com/electron/electron-notarize">https://github.com/electron/electron-notarize</a></li>
</ul>
<p><code>afterSignHook.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"><span class="keyword">var</span> electron_notarize = <span class="built_in">require</span>(<span class="string">'electron-notarize'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = <span class="keyword">async</span> <span class="function"><span class="keyword">function</span> (<span class="params">params</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// Only notarize the app on Mac OS only.</span></span><br><span class="line">    <span class="keyword">if</span> (process.platform !== <span class="string">'darwin'</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'afterSign hook triggered'</span>, params);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Same appId in electron-builder.</span></span><br><span class="line">    <span class="keyword">let</span> appId = <span class="string">'com.onmyway133.IconGenerator'</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> appPath = path.join(params.appOutDir, <span class="string">`<span class="subst">$&#123;params.packager.appInfo.productFilename&#125;</span>.app`</span>);</span><br><span class="line">    <span class="keyword">if</span> (!fs.existsSync(appPath)) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">`Cannot find application at: <span class="subst">$&#123;appPath&#125;</span>`</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`Notarizing <span class="subst">$&#123;appId&#125;</span> found at <span class="subst">$&#123;appPath&#125;</span>`</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">await</span> electron_notarize.notarize(&#123;</span><br><span class="line">            appBundleId: appId,</span><br><span class="line">            appPath: appPath,</span><br><span class="line">            appleId: process.env.appleId,</span><br><span class="line">            appleIdPassword: process.env.appleIdPassword,</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">        <span class="built_in">console</span>.error(error);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`Done notarizing <span class="subst">$&#123;appId&#125;</span>`</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="Run"><a href="#Run" class="headerlink" title="Run"></a>Run</h2><p>Generate password for Apple Id because of 2FA</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">export appleId&#x3D;onmyway133@gmail.com</span><br><span class="line">export appleIdPassword&#x3D;1234-abcd-efgh-7890</span><br><span class="line">npm run dist</span><br></pre></td></tr></table></figure>

<h2 id="Check"><a href="#Check" class="headerlink" title="Check"></a>Check</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">spctl --assess --verbose Icon\ Generator.app</span><br></pre></td></tr></table></figure>

<h2 id="Troubleshooting"><a href="#Troubleshooting" class="headerlink" title="Troubleshooting"></a>Troubleshooting</h2><h3 id="babel"><a href="#babel" class="headerlink" title="babel"></a>babel</h3><ul>
<li>Since electron-builder create <code>dist</code> folder for distribution, for example <code>dist/mac/Icon Generator</code>, I’ve renamed babel generated code to <code>babel</code> directory</li>
</ul>
<h3 id="babel-6-regeneratorRuntime-is-not-defined"><a href="#babel-6-regeneratorRuntime-is-not-defined" class="headerlink" title="babel 6 regeneratorRuntime is not defined"></a>babel 6 regeneratorRuntime is not defined</h3><p>It is because of afterSignHook. Ignore in <code>.babelrc</code> not work</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;plugins&quot;: [</span><br><span class="line">    &quot;transform-react-jsx-source&quot;</span><br><span class="line">  ],</span><br><span class="line">  &quot;presets&quot;: [&quot;env&quot;, &quot;react&quot;],</span><br><span class="line">  &quot;ignore&quot;: [</span><br><span class="line">    &quot;afterSignHook.js&quot;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Should use babel 7 with <code>babel.config.js</code></p>
<ul>
<li><a href="https://babeljs.io/docs/en/config-files#project-wide-configuration">https://babeljs.io/docs/en/config-files#project-wide-configuration</a></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install --save @babel&#x2F;runtime </span><br><span class="line">npm install --save-dev @babel&#x2F;plugin-transform-runtime</span><br></pre></td></tr></table></figure>

<h2 id="Use-electron-forge"><a href="#Use-electron-forge" class="headerlink" title="Use electron-forge"></a>Use electron-forge</h2><p><a href="https://httptoolkit.tech/blog/notarizing-electron-apps-with-electron-forge/">https://httptoolkit.tech/blog/notarizing-electron-apps-with-electron-forge/</a></p>
<h2 id="Read-more"><a href="#Read-more" class="headerlink" title="Read more"></a>Read more</h2><ul>
<li><a href="https://medium.com/@TwitterArchiveEraser/notarize-electron-apps-7a5f988406db">https://medium.com/@TwitterArchiveEraser/notarize-electron-apps-7a5f988406db</a></li>
<li><a href="https://kilianvalkhof.com/2019/electron/notarizing-your-electron-application/">https://kilianvalkhof.com/2019/electron/notarizing-your-electron-application/</a></li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-09-26T07:07:11.000Z" title="2019-09-26T07:07:11.000Z">2019-09-26</time><span class="level-item">a few seconds read (About 80 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-use-marked-in-WKWebView-in-AppKit/">How to use marked in WKWebView in AppKit</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/429">#429</a></strong></p>
<p>Use <a href="https://github.com/markedjs/marked">https://github.com/markedjs/marked</a></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;!doctype html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">  &lt;meta charset=<span class="string">"utf-8"</span>/&gt;</span><br><span class="line">  &lt;title&gt;Marked <span class="keyword">in</span> the browser&lt;<span class="regexp">/title&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">  &lt;div id=<span class="string">"content"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  &lt;script src=<span class="string">"https://cdn.jsdelivr.net/npm/marked/marked.min.js"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">  &lt;script&gt;</span><br><span class="line">    <span class="built_in">document</span>.getElementById(<span class="string">'content'</span>).innerHTML =</span><br><span class="line">      marked(<span class="string">`# Marked in the browser\n\nRendered by **marked**.`</span>);</span><br><span class="line">  &lt;<span class="regexp">/script&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>body&gt;</span><br><span class="line">&lt;<span class="regexp">/html&gt;</span></span><br></pre></td></tr></table></figure>

<p>Should use back tick instead of <code>&#39;</code> to deal with multiline string, and escape back tick</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> markdown = markdown.replacingOccurrences(of: <span class="string">"`"</span>, with: <span class="string">"\\`"</span>)</span><br><span class="line">marked(`\(markdown)`);</span><br><span class="line"></span><br><span class="line">webView.loadHTMLString(string, baseURL: <span class="literal">nil</span>)</span><br></pre></td></tr></table></figure>

<p>For WKWebView to load even local content, need to enable <code>Outgoing connections</code>, and maybe <code>Incoming connections</code> in Sandbox</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-09-25T08:26:20.000Z" title="2019-09-25T08:26:20.000Z">2019-09-25</time><span class="level-item">a few seconds read (About 88 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-enable-NSMenuItem-in-AppKit/">How to enable NSMenuItem in AppKit</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/428">#428</a></strong></p>
<p>Need to set target</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> item = <span class="type">NSMenuItem</span>(</span><br><span class="line">    title: title,</span><br><span class="line">    action: #selector(onMenuItemClicked(<span class="number">_</span>:)),</span><br><span class="line">    keyEquivalent: <span class="string">""</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">item.target = <span class="keyword">self</span></span><br></pre></td></tr></table></figure>

<p>Sometimes, need to check <code>autoenablesItems</code></p>
<blockquote>
<p>Indicates whether the menu automatically enables and disables its menu items.</p>
</blockquote>
<blockquote>
<p>This property contains a Boolean value, indicating whether the menu automatically enables and disables its menu items. If set to true, menu items of the menu are automatically enabled and disabled according to rules computed by the NSMenuValidation informal protocol. By default, NSMenu objects autoenable their menu items.</p>
</blockquote>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-09-24T11:49:34.000Z" title="2019-09-24T11:49:34.000Z">2019-09-24</time><span class="level-item">2 minutes read (About 244 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-use-generic-NSCollectionView-in-macOS/">How to use generic NSCollectionView in macOS</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/427">#427</a></strong></p>
<p>See <a href="https://github.com/onmyway133/Omnia/blob/master/Sources/macOS/CollectionViewHandler.swift">CollectionViewHandler</a></p>
<p>Use <code>ClickedCollectionView</code> to detect clicked index for context menu.<br>Embed <code>NSCollectionView</code> inside <code>NSScrollView</code> to enable scrolling</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> AppKit</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CollectionViewHandler</span>&lt;<span class="title">Item</span>: <span class="title">Equatable</span>, <span class="title">Cell</span>: <span class="title">NSCollectionViewItem</span>&gt;</span></span><br><span class="line"><span class="class">: <span class="title">NSObject</span>, <span class="title">NSCollectionViewDataSource</span>, <span class="title">NSCollectionViewDelegateFlowLayout</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">let</span> layout = <span class="type">NSCollectionViewFlowLayout</span>()</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">let</span> scrollView = <span class="type">NSScrollView</span>()</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">let</span> collectionView = <span class="type">ClickedCollectionView</span>()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">var</span> items = [<span class="type">Item</span>]()</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">var</span> itemSize: () -&gt; <span class="type">CGSize</span> = &#123; .zero &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">var</span> configure: (<span class="type">Item</span>, <span class="type">Cell</span>) -&gt; <span class="type">Void</span> = &#123; <span class="number">_</span>, <span class="number">_</span> <span class="keyword">in</span> &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="keyword">init</span>() &#123;</span><br><span class="line">        <span class="keyword">super</span>.<span class="keyword">init</span>()</span><br><span class="line"></span><br><span class="line">        layout.minimumLineSpacing = <span class="number">4</span></span><br><span class="line">        layout.sectionInset = <span class="type">NSEdgeInsets</span>(top: <span class="number">4</span>, <span class="keyword">left</span>: <span class="number">4</span>, bottom: <span class="number">4</span>, <span class="keyword">right</span>: <span class="number">4</span>)</span><br><span class="line"></span><br><span class="line">        collectionView.dataSource = <span class="keyword">self</span></span><br><span class="line">        collectionView.delegate = <span class="keyword">self</span></span><br><span class="line">        collectionView.collectionViewLayout = layout</span><br><span class="line">        collectionView.allowsMultipleSelection = <span class="literal">false</span></span><br><span class="line">        collectionView.backgroundColors = [.clear]</span><br><span class="line">        collectionView.isSelectable = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">        collectionView.register(<span class="type">Cell</span>.<span class="keyword">self</span>, forItemWithIdentifier: <span class="type">Cell</span>.itemId)</span><br><span class="line"></span><br><span class="line">        scrollView.documentView = collectionView</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// MARK: - Items</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">add</span><span class="params">(item: Item)</span></span> &#123;</span><br><span class="line">        items.insert(item, at: <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">let</span> indexPath = <span class="type">IndexPath</span>(item: <span class="number">0</span>, section: <span class="number">0</span>)</span><br><span class="line">        collectionView.animator().insertItems(at: <span class="type">Set</span>(arrayLiteral: indexPath))</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">remove</span><span class="params">(item: Item)</span></span> &#123;</span><br><span class="line">        <span class="keyword">guard</span> <span class="keyword">let</span> index = items.firstIndex(<span class="keyword">where</span>: &#123; $<span class="number">0</span> == item &#125;) <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        remove(index: index)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">remove</span><span class="params">(index: Int)</span></span> &#123;</span><br><span class="line">        items.remove(at: index)</span><br><span class="line">        <span class="keyword">let</span> indexPath = <span class="type">IndexPath</span>(item: index, section: <span class="number">0</span>)</span><br><span class="line">        collectionView.animator().deleteItems(at: <span class="type">Set</span>(arrayLiteral: indexPath))</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// MARK: - NSCollectionViewDataSource</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">numberOfSections</span><span class="params">(<span class="keyword">in</span> collectionView: NSCollectionView)</span></span> -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">collectionView</span><span class="params">(<span class="number">_</span> collectionView: NSCollectionView, numberOfItemsInSection section: Int)</span></span> -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> items.<span class="built_in">count</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">collectionView</span><span class="params">(<span class="number">_</span> collectionView: NSCollectionView, itemForRepresentedObjectAt indexPath: IndexPath)</span></span> -&gt; <span class="type">NSCollectionViewItem</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> cell = collectionView.makeItem(withIdentifier: <span class="type">Cell</span>.itemId, <span class="keyword">for</span>: indexPath) <span class="keyword">as</span>! <span class="type">Cell</span></span><br><span class="line">        <span class="keyword">let</span> item = items[indexPath.item]</span><br><span class="line">        configure(item, cell)</span><br><span class="line">        <span class="keyword">return</span> cell</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// MARK: - NSCollectionViewDelegateFlowLayout</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">collectionView</span><span class="params">(<span class="number">_</span> collectionView: NSCollectionView, layout collectionViewLayout: NSCollectionViewLayout, sizeForItemAt indexPath: IndexPath)</span></span> -&gt; <span class="type">NSSize</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> itemSize()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-09-19T06:13:56.000Z" title="2019-09-19T06:13:56.000Z">2019-09-19</time><span class="level-item">2 minutes read (About 225 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-use-throttle-and-debounce-in-RxSwift/">How to use throttle and debounce in RxSwift</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/426">#426</a></strong></p>
<h2 id="throttle"><a href="#throttle" class="headerlink" title="throttle"></a>throttle</h2><p><a href="https://rxmarbles.com/#throttle">https://rxmarbles.com/#throttle</a></p>
<img width="846" alt="throttle" src="https://user-images.githubusercontent.com/2284279/65225775-fe37e800-dac5-11e9-8d07-864d80a25ead.png">

<blockquote>
<p>Returns an Observable that emits the first and the latest item emitted by the source Observable during sequential time windows of a specified duration.<br>This operator makes sure that no two elements are emitted in less then dueTime.</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.throttle(.milliseconds(<span class="number">500</span>), scheduler: <span class="type">MainScheduler</span>.instance)</span><br></pre></td></tr></table></figure>

<p>In a time window, only the first item gets emitted. </p>
<p>💡 In other words, in a time window, take first and discard following.</p>
<p>For example, when failure, we show error message but don’t want to show error messages consecutively. We can use throttle to discard consecutive errors.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">viewModel.fetchBooksFail</span><br><span class="line">     .observeOn(<span class="type">MainScheduler</span>.instance)</span><br><span class="line">     .throttle(.seconds(<span class="number">2</span>), scheduler: <span class="type">MainScheduler</span>.instance)</span><br></pre></td></tr></table></figure>

<h2 id="debounce"><a href="#debounce" class="headerlink" title="debounce"></a>debounce</h2><p><a href="https://rxmarbles.com/#debounce">https://rxmarbles.com/#debounce</a></p>
<img width="838" alt="debounce" src="https://user-images.githubusercontent.com/2284279/65225784-0132d880-dac6-11e9-85fe-891a5b316115.png">

<blockquote>
<p>Ignores elements from an observable sequence which are followed by another element within a specified relative time duration, using the specified scheduler to run throttling timers.</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.debounce(.milliseconds(<span class="number">500</span>), scheduler: <span class="type">MainScheduler</span>.instance)</span><br></pre></td></tr></table></figure>

<p>If an element is about to get emitted, wait for a time window to see if there are other elements emitted. If yes, start the waiting again.</p>
<p>💡 In other words, in a time window, wait and take last</p>
<p>For example, when receiving data, we may need to wait for the final data if there are many data events emitted consecutively</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">viewModel.fetchBooks</span><br><span class="line">    .<span class="built_in">filter</span>(&#123; !$<span class="number">0</span>.isEmpty &#125;)</span><br><span class="line">    .debounce(.milliseconds(<span class="number">500</span>), scheduler: <span class="type">MainScheduler</span>.instance)</span><br></pre></td></tr></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-09-19T05:41:24.000Z" title="2019-09-19T05:41:24.000Z">2019-09-19</time><span class="level-item">a few seconds read (About 21 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-use-flatMap-and-compactMap-in-Swift/">How to use flatMap and compactMap in Swift</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/425">#425</a></strong></p>
<p><code>flatMap</code>: map and flatten array of arrays<br><code>compactMap</code>: map and flatten array of optionals</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-09-17T11:05:11.000Z" title="2019-09-17T11:05:11.000Z">2019-09-17</time><span class="level-item">2 minutes read (About 287 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-use-Firebase-ID-token/">How to use Firebase ID token</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/424">#424</a></strong></p>
<ul>
<li><a href="https://medium.com/@jwngr/demystifying-firebase-auth-tokens-e0c533ed330c">https://medium.com/@jwngr/demystifying-firebase-auth-tokens-e0c533ed330c</a></li>
</ul>
<blockquote>
<p>One confusing point here that people often do not realize is that even though the custom token itself expires after one hour, a modern client SDK authenticated with that custom token will stay authenticated beyond that hour! What happens under the hood is that the custom token is sent to the Firebase Auth service in exchange for an ID token and refresh token pair which are used to keep the client SDK authenticated</p>
</blockquote>
<blockquote>
<p>As with custom tokens, ID tokens are short-lived JWTs, lasting for just one hour. In order to allow end users to stay logged in for more than one hour, the modern SDKs transparently refresh a user’s ID token on your behalf using a refresh token</p>
</blockquote>
<blockquote>
<p>If your app includes a custom backend server, ID tokens can and should be used to communicate securely with it. Instead of sending requests with a user’s raw uid which can be easily spoofed by a malicious client, send the user’s ID token which can be verified via a Firebase Admin SDK </p>
</blockquote>
<ul>
<li><a href="https://firebase.google.com/docs/auth/admin/verify-id-tokens#retrieve_id_tokens_on_clients">https://firebase.google.com/docs/auth/admin/verify-id-tokens#retrieve_id_tokens_on_clients</a></li>
</ul>
<blockquote>
<p>When a user or device successfully signs in, Firebase creates a corresponding ID token that uniquely identifies them and grants them access to several resources, such as Firebase Realtime Database and Cloud Storage. You can re-use that ID token to identify the user or device on your custom backend server. To retrieve the ID token from the client, make sure the user is signed in and then get the ID token from the signed-in user:</p>
</blockquote>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-09-17T09:40:48.000Z" title="2019-09-17T09:40:48.000Z">2019-09-17</time><span class="level-item">a few seconds read (About 40 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-use-custom-domain-for-GitHub-pages/">How to use custom domain for GitHub pages</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/423">#423</a></strong></p>
<h2 id="In-DNS-settings"><a href="#In-DNS-settings" class="headerlink" title="In DNS settings"></a>In DNS settings</h2><p>Add 4 A records</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">A @ 185.199.110.153</span><br><span class="line">A @	185.199.111.153</span><br><span class="line">A @	185.199.108.153</span><br><span class="line">A @	185.199.109.153</span><br></pre></td></tr></table></figure>

<p>and 1 CNAME record</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CNAME www learntalks.github.io</span><br></pre></td></tr></table></figure>

<h2 id="In-GitHub"><a href="#In-GitHub" class="headerlink" title="In GitHub"></a>In GitHub</h2><ul>
<li>Select custom domain and type <code>learntalks.com</code></li>
</ul>
<h2 id="In-source"><a href="#In-source" class="headerlink" title="In source"></a>In source</h2><p><code>public/CNAME</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">learntalks.com</span><br></pre></td></tr></table></figure>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-09-17T07:44:33.000Z" title="2019-09-17T07:44:33.000Z">2019-09-17</time><span class="level-item">a few seconds read (About 69 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-constrain-to-views-inside-UICollectionViewCell-in-iOS/">How to constrain to views inside UICollectionViewCell in iOS</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/422">#422</a></strong></p>
<p>To constrain views outside to elements inside <code>UICollectionViewCell</code>, we can use <code>UILayoutGuide</code>.</p>
<p>Need to make layout guide the same constraints as the real elements</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> imageViewGuide = <span class="type">UILayoutGuide</span>()</span><br><span class="line">collectionView.addLayoutGuide(imageViewGuide)</span><br><span class="line"><span class="type">NSLayoutConstraint</span>.on([</span><br><span class="line">    imageViewGuide.topAnchor.constraint(equalTo: collectionView.topAnchor, constant: <span class="number">16</span>),</span><br><span class="line">    imageViewGuide.heightAnchor.constraint(equalTo: collectionView.heightAnchor, multiplier: <span class="number">0.5</span>)</span><br><span class="line">])</span><br></pre></td></tr></table></figure>

<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">NSLayoutConstraint</span>.on([</span><br><span class="line">    loadingIndicator.centerXAnchor.constraint(equalTo: collectionView.centerXAnchor),</span><br><span class="line">    loadingIndicator.centerYAnchor.constraint(equalTo: imageViewGuide.centerYAnchor)</span><br><span class="line">])</span><br></pre></td></tr></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-09-16T09:14:07.000Z" title="2019-09-16T09:14:07.000Z">2019-09-16</time><span class="level-item">a few seconds read (About 92 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-secure-CVC-in-STPPaymentCardTextField-in-Stripe-for-iOS/">How to secure CVC in STPPaymentCardTextField in Stripe for iOS</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/421">#421</a></strong></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">maskCvcIfAny</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">guard</span></span><br><span class="line">        <span class="keyword">let</span> view = paymentTextField.subviews.first(<span class="keyword">where</span>: &#123; !($<span class="number">0</span> <span class="keyword">is</span> <span class="type">UIImageView</span>) &#125;),</span><br><span class="line">        <span class="keyword">let</span> cvcField = view.subviews</span><br><span class="line">			.compactMap(&#123; $<span class="number">0</span> <span class="keyword">as</span>? <span class="type">UITextField</span> &#125;)</span><br><span class="line">			.first(<span class="keyword">where</span>: &#123; $<span class="number">0</span>.tag == <span class="number">2</span> &amp;&amp; ($<span class="number">0</span>.accessibilityLabel ?? <span class="string">""</span>).lowercased().<span class="built_in">contains</span>(<span class="string">"cvc"</span>)  &#125;)</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    cvcField.isSecureTextEntry = <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>where tag is in <code>STPPaymentCardTextFieldViewModel.h</code></p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="built_in">NS_ENUM</span>(<span class="built_in">NSInteger</span>, STPCardFieldType) &#123;</span><br><span class="line">    STPCardFieldTypeNumber,</span><br><span class="line">    STPCardFieldTypeExpiration,</span><br><span class="line">    STPCardFieldTypeCVC,</span><br><span class="line">    STPCardFieldTypePostalCode,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>Also, need to check <code>accessibilityLabel</code> in <code>STPPaymentCardTextField.m</code></p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="built_in">NSString</span> *)defaultCVCPlaceholder &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">self</span>.viewModel.brand == STPCardBrandAmex) &#123;</span><br><span class="line">        <span class="keyword">return</span> STPLocalizedString(<span class="string">@"CVV"</span>, <span class="string">@"Label for entering CVV in text field"</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> STPLocalizedString(<span class="string">@"CVC"</span>, <span class="string">@"Label for entering CVC in text field"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-09-16T08:31:23.000Z" title="2019-09-16T08:31:23.000Z">2019-09-16</time><span class="level-item">a few seconds read (About 19 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-replace-all-occurrences-of-a-string-in-Javascript/">How to replace all occurrences of a string in Javascript</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/420">#420</a></strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> normalized = string</span><br><span class="line">   .replace(<span class="regexp">/\//g</span>, <span class="string">''</span>)</span><br><span class="line">   .replace(<span class="regexp">/\"/g</span>, <span class="string">''</span>)</span><br><span class="line">   .replace(<span class="regexp">/\(/g</span>, <span class="string">''</span>)</span><br><span class="line">   .replace(<span class="regexp">/\)/g</span>, <span class="string">''</span>)</span><br></pre></td></tr></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2019-09-16T07:09:20.000Z" title="2019-09-16T07:09:20.000Z">2019-09-16</time><span class="level-item">a few seconds read (About 84 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/blog/How-to-read-and-write-file-using-fs-in-node/">How to read and write file using fs in node</a></h1><div class="content"><p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/419">#419</a></strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">write</span>(<span class="params">json</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> data = <span class="built_in">JSON</span>.stringify(json)</span><br><span class="line">    <span class="keyword">const</span> year = json.date.getFullYear()</span><br><span class="line">    <span class="keyword">const</span> directory = <span class="string">`collected/<span class="subst">$&#123;slugify(className)&#125;</span>/<span class="subst">$&#123;year&#125;</span>`</span></span><br><span class="line"></span><br><span class="line">    fs.mkdirSync(directory, &#123; <span class="attr">recursive</span>: <span class="literal">true</span> &#125;)</span><br><span class="line">    fs.writeFileSync(</span><br><span class="line">        <span class="string">`<span class="subst">$&#123;directory&#125;</span>/<span class="subst">$&#123;slugify(studentName)&#125;</span>`</span>, </span><br><span class="line">        data,</span><br><span class="line">        &#123; <span class="attr">overwrite</span>: <span class="literal">true</span> &#125;</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">readAll</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> classes = fs.readdirSync(<span class="string">'classes'</span>)</span><br><span class="line">    classes.forEach(<span class="function">(<span class="params">class</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> years = fs.readdirSync(<span class="string">`classes/<span class="subst">$&#123;class&#125;</span>`</span>)</span><br><span class="line">        years.forEach(<span class="function">(<span class="params">year</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">const</span> students = fs.readdirSync(<span class="string">`classes/<span class="subst">$&#123;class&#125;</span>/<span class="subst">$&#123;year&#125;</span>`</span>)</span><br><span class="line">            students.forEach(<span class="function">(<span class="params">student</span>) =&gt;</span> &#123;</span><br><span class="line">            	<span class="keyword">const</span> data = fs.readFileSync(<span class="string">`classes/<span class="subst">$&#123;class&#125;</span>/<span class="subst">$&#123;year&#125;</span>/<span class="subst">$&#123;student&#125;</span>)</span></span><br><span class="line"><span class="string">            	const json = JSON.parse(data)</span></span><br><span class="line"><span class="string">            &#125;)</span></span><br><span class="line"><span class="string">        &#125;)</span></span><br><span class="line"><span class="string">    &#125;)</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure></div></article></div><nav class="pagination is-centered mt-4" role="navigation" aria-label="pagination"><div class="pagination-previous"><a href="/page/8/">Previous</a></div><div class="pagination-next"><a href="/page/10/">Next</a></div><ul class="pagination-list is-hidden-mobile"><li><a class="pagination-link" href="/">1</a></li><li><span class="pagination-ellipsis">&hellip;</span></li><li><a class="pagination-link" href="/page/8/">8</a></li><li><a class="pagination-link is-current" href="/page/9/">9</a></li><li><a class="pagination-link" href="/page/10/">10</a></li><li><span class="pagination-ellipsis">&hellip;</span></li><li><a class="pagination-link" href="/page/22/">22</a></li></ul></nav></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1"><div class="card widget"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="" src="https://avatars1.githubusercontent.com/u/2284279?s=460&amp;v=4" alt="onmyway133"></figure><p class="title is-size-4 is-block line-height-inherit">onmyway133</p><p class="is-size-6 is-block">iOS, macOS, Android, React. Serial maker. Writer. Speaker.</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Oslo, Norway</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Posts</p><a href="/archives"><p class="title">638</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Categories</p><a href="/categories"><p class="title">0</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Tags</p><a href="/tags"><p class="title">52</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/onmyway133" target="_blank" rel="noopener">Follow</a></div><div class="level is-mobile"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/onmyway133"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Twitter" href="https://twitter.com/onmyway133"><i class="fab fa-twitter"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Dribbble" href="https://dribbble.com"><i class="fab fa-dribbble"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/"><i class="fas fa-rss"></i></a></div></div></div><!--!--><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">Links</h3><ul class="menu-list"><li><a class="level is-mobile is-mobile" href="https://onmyway133.com/apps" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Apps</span></span><span class="level-right"><span class="level-item tag">onmyway133.com</span></span></a></li><li><a class="level is-mobile is-mobile" href="https://learntalks.com" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Learn Talks</span></span><span class="level-right"><span class="level-item tag">learntalks.com</span></span></a></li></ul></div></div></div><!--!--><div class="card widget"><div class="card-content"><h3 class="menu-label">Recent</h3><article class="media"><div class="media-content size-small"><p><time dateTime="2020-11-04T09:02:01.000Z">2020-11-04</time></p><p class="title is-6"><a class="link-muted" href="/blog/How-to-avoid-multiple-match-elements-in-UITests-from-iOS-13/">How to avoid multiple match elements in UITests from iOS 13</a></p><p class="is-uppercase"></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2020-11-04T08:28:50.000Z">2020-11-04</time></p><p class="title is-6"><a class="link-muted" href="/blog/How-to-use-accessibility-container-in-UITests/">How to use accessibility container in UITests</a></p><p class="is-uppercase"></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2020-11-03T04:19:35.000Z">2020-11-03</time></p><p class="title is-6"><a class="link-muted" href="/blog/How-to-make-full-size-content-view-in-SwiftUI-for-macOS/">How to make full size content view in SwiftUI for macOS</a></p><p class="is-uppercase"></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2020-10-31T04:53:31.000Z">2020-10-31</time></p><p class="title is-6"><a class="link-muted" href="/blog/How-to-override-styles-in-SwiftUI/">How to override styles in SwiftUI</a></p><p class="is-uppercase"></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2020-10-27T08:56:33.000Z">2020-10-27</time></p><p class="title is-6"><a class="link-muted" href="/blog/When-to-use-function-vs-property-in-Swift/">When to use function vs property in Swift</a></p><p class="is-uppercase"></p></div></article></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">Archives</h3><ul class="menu-list"><li><a class="level is-mobile is-marginless" href="/archives/2020/11/"><span class="level-start"><span class="level-item">November 2020</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/10/"><span class="level-start"><span class="level-item">October 2020</span></span><span class="level-end"><span class="level-item tag">11</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/09/"><span class="level-start"><span class="level-item">September 2020</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/08/"><span class="level-start"><span class="level-item">August 2020</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/06/"><span class="level-start"><span class="level-item">June 2020</span></span><span class="level-end"><span class="level-item tag">14</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/05/"><span class="level-start"><span class="level-item">May 2020</span></span><span class="level-end"><span class="level-item tag">11</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/04/"><span class="level-start"><span class="level-item">April 2020</span></span><span class="level-end"><span class="level-item tag">13</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/03/"><span class="level-start"><span class="level-item">March 2020</span></span><span class="level-end"><span class="level-item tag">21</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/02/"><span class="level-start"><span class="level-item">February 2020</span></span><span class="level-end"><span class="level-item tag">20</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/01/"><span class="level-start"><span class="level-item">January 2020</span></span><span class="level-end"><span class="level-item tag">30</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2019/12/"><span class="level-start"><span class="level-item">December 2019</span></span><span class="level-end"><span class="level-item tag">36</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2019/11/"><span class="level-start"><span class="level-item">November 2019</span></span><span class="level-end"><span class="level-item tag">38</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2019/10/"><span class="level-start"><span class="level-item">October 2019</span></span><span class="level-end"><span class="level-item tag">49</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2019/09/"><span class="level-start"><span class="level-item">September 2019</span></span><span class="level-end"><span class="level-item tag">50</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2019/08/"><span class="level-start"><span class="level-item">August 2019</span></span><span class="level-end"><span class="level-item tag">39</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2019/07/"><span class="level-start"><span class="level-item">July 2019</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2019/06/"><span class="level-start"><span class="level-item">June 2019</span></span><span class="level-end"><span class="level-item tag">41</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2019/05/"><span class="level-start"><span class="level-item">May 2019</span></span><span class="level-end"><span class="level-item tag">49</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2019/04/"><span class="level-start"><span class="level-item">April 2019</span></span><span class="level-end"><span class="level-item tag">27</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2019/03/"><span class="level-start"><span class="level-item">March 2019</span></span><span class="level-end"><span class="level-item tag">24</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2019/02/"><span class="level-start"><span class="level-item">February 2019</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2018/12/"><span class="level-start"><span class="level-item">December 2018</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2018/05/"><span class="level-start"><span class="level-item">May 2018</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2018/04/"><span class="level-start"><span class="level-item">April 2018</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2018/02/"><span class="level-start"><span class="level-item">February 2018</span></span><span class="level-end"><span class="level-item tag">9</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2018/01/"><span class="level-start"><span class="level-item">January 2018</span></span><span class="level-end"><span class="level-item tag">14</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2017/12/"><span class="level-start"><span class="level-item">December 2017</span></span><span class="level-end"><span class="level-item tag">14</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2017/11/"><span class="level-start"><span class="level-item">November 2017</span></span><span class="level-end"><span class="level-item tag">12</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2017/10/"><span class="level-start"><span class="level-item">October 2017</span></span><span class="level-end"><span class="level-item tag">18</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2017/09/"><span class="level-start"><span class="level-item">September 2017</span></span><span class="level-end"><span class="level-item tag">10</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2017/08/"><span class="level-start"><span class="level-item">August 2017</span></span><span class="level-end"><span class="level-item tag">9</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2017/07/"><span class="level-start"><span class="level-item">July 2017</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2017/06/"><span class="level-start"><span class="level-item">June 2017</span></span><span class="level-end"><span class="level-item tag">12</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2017/05/"><span class="level-start"><span class="level-item">May 2017</span></span><span class="level-end"><span class="level-item tag">35</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2017/04/"><span class="level-start"><span class="level-item">April 2017</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">Tags</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/algorithm/"><span class="tag">algorithm</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/android/"><span class="tag">android</span><span class="tag is-grey-lightest">34</span></a></div><div class="control"><a class="tags has-addons" href="/tags/apple-script/"><span class="tag">apple script</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/catalyst/"><span class="tag">catalyst</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ci/"><span class="tag">ci</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/cloud/"><span class="tag">cloud</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/cocoapods/"><span class="tag">cocoapods</span><span class="tag is-grey-lightest">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/combine/"><span class="tag">combine</span><span class="tag is-grey-lightest">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/core-data/"><span class="tag">core data</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/csharp/"><span class="tag">csharp</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/css/"><span class="tag">css</span><span class="tag is-grey-lightest">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/dart/"><span class="tag">dart</span><span class="tag is-grey-lightest">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/database/"><span class="tag">database</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/design/"><span class="tag">design</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/electron/"><span class="tag">electron</span><span class="tag is-grey-lightest">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/firebase/"><span class="tag">firebase</span><span class="tag is-grey-lightest">7</span></a></div><div class="control"><a class="tags has-addons" href="/tags/flutter/"><span class="tag">flutter</span><span class="tag is-grey-lightest">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/git/"><span class="tag">git</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/github/"><span class="tag">github</span><span class="tag is-grey-lightest">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/go/"><span class="tag">go</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/google/"><span class="tag">google</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/iOS/"><span class="tag">iOS</span><span class="tag is-grey-lightest">164</span></a></div><div class="control"><a class="tags has-addons" href="/tags/javascript/"><span class="tag">javascript</span><span class="tag is-grey-lightest">48</span></a></div><div class="control"><a class="tags has-addons" href="/tags/kotlin/"><span class="tag">kotlin</span><span class="tag is-grey-lightest">27</span></a></div><div class="control"><a class="tags has-addons" href="/tags/layout/"><span class="tag">layout</span><span class="tag is-grey-lightest">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/life/"><span class="tag">life</span><span class="tag is-grey-lightest">11</span></a></div><div class="control"><a class="tags has-addons" href="/tags/links/"><span class="tag">links</span><span class="tag is-grey-lightest">9</span></a></div><div class="control"><a class="tags has-addons" href="/tags/macOS/"><span class="tag">macOS</span><span class="tag is-grey-lightest">104</span></a></div><div class="control"><a class="tags has-addons" href="/tags/machine-learning/"><span class="tag">machine learning</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/maps/"><span class="tag">maps</span><span class="tag is-grey-lightest">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/networking/"><span class="tag">networking</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/node/"><span class="tag">node</span><span class="tag is-grey-lightest">11</span></a></div><div class="control"><a class="tags has-addons" href="/tags/objc/"><span class="tag">objc</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/react/"><span class="tag">react</span><span class="tag is-grey-lightest">21</span></a></div><div class="control"><a class="tags has-addons" href="/tags/react-native/"><span class="tag">react native</span><span class="tag is-grey-lightest">14</span></a></div><div class="control"><a class="tags has-addons" href="/tags/realm/"><span class="tag">realm</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/rx/"><span class="tag">rx</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/script/"><span class="tag">script</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/spm/"><span class="tag">spm</span><span class="tag is-grey-lightest">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/swift/"><span class="tag">swift</span><span class="tag is-grey-lightest">293</span></a></div><div class="control"><a class="tags has-addons" href="/tags/swiftUI/"><span class="tag">swiftUI</span><span class="tag is-grey-lightest">63</span></a></div><div class="control"><a class="tags has-addons" href="/tags/tech/"><span class="tag">tech</span><span class="tag is-grey-lightest">14</span></a></div><div class="control"><a class="tags has-addons" href="/tags/terminal/"><span class="tag">terminal</span><span class="tag is-grey-lightest">9</span></a></div><div class="control"><a class="tags has-addons" href="/tags/testing/"><span class="tag">testing</span><span class="tag is-grey-lightest">16</span></a></div><div class="control"><a class="tags has-addons" href="/tags/tool/"><span class="tag">tool</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/unity/"><span class="tag">unity</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/voip/"><span class="tag">voip</span><span class="tag is-grey-lightest">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/watchOS/"><span class="tag">watchOS</span><span class="tag is-grey-lightest">11</span></a></div><div class="control"><a class="tags has-addons" href="/tags/web/"><span class="tag">web</span><span class="tag is-grey-lightest">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/work/"><span class="tag">work</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/wwdc/"><span class="tag">wwdc</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/xcode/"><span class="tag">xcode</span><span class="tag is-grey-lightest">23</span></a></div></div></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">Subscribe to Updates</h3><form action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open(&#039;https://feedburner.google.com/fb/a/mailverify?uri=c2r59mmt2n5k0o5dt5vv3nq4u4&#039;,&#039;popupwindow&#039;,&#039;scrollbars=yes,width=550,height=520&#039;);return true"><input type="hidden" value="c2r59mmt2n5k0o5dt5vv3nq4u4" name="uri"><input type="hidden" name="loc" value="en_US"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button is-primary" type="submit" value="Subscribe"></div></div></form></div></div></div><div class="card widget"><div class="card-content"><div class="notification is-danger">You need to set <code>client_id</code> and <code>slot_id</code> to show this AD unit. Please set it in <code>_config.yml</code>.</div></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/z.png" alt="onmyway133" height="28"></a><p class="size-small"><span>&copy; 2020 Khoa Pham</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/onmyway133"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            site: {
                url: 'https://onmyway133.github.io',
                external_link: {"enable":true,"exclude":[]}
            },
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to Top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>