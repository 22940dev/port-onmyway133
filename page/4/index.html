<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">

  <!-- PACE Progress Bar START -->
  
    <script src="https://raw.githubusercontent.com/HubSpot/pace/v1.0.2/pace.min.js"></script>
    <link rel="stylesheet" href="https://github.com/HubSpot/pace/raw/master/themes/orange/pace-theme-flash.css">
  
  

  <!-- PACE Progress Bar START -->

  
  <title>onmyway133</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
    <meta name="keywords" content="ios, android, kotlin, mac, swift, electron, javascript, node">
  
  
  
  
  <meta name="description" content="What you don&apos;t know is what you haven&apos;t learned">
<meta name="keywords" content="ios, android,javascript, react">
<meta property="og:type" content="website">
<meta property="og:title" content="onmyway133">
<meta property="og:url" content="https://onmyway133.github.io/page/4/index.html">
<meta property="og:site_name" content="onmyway133">
<meta property="og:description" content="What you don&apos;t know is what you haven&apos;t learned">
<meta property="og:locale" content="en">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="onmyway133">
<meta name="twitter:description" content="What you don&apos;t know is what you haven&apos;t learned">
  
    <link rel="alternate" href="/atom.xml" title="onmyway133" type="application/atom+xml">
  
  <link rel="icon" href="/favicon.ico">
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link href="https://fonts.googleapis.com/css?family=Open+Sans|Montserrat:700" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Roboto:400,300,300italic,400italic" rel="stylesheet" type="text/css">
  <link href="https://cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">
  <style type="text/css">
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/9749f0/00000000000000000001008f/27/l?subset_id=2&fvd=n5) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/90cf9f/000000000000000000010091/27/l?subset_id=2&fvd=n7) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/8a5494/000000000000000000013365/27/l?subset_id=2&fvd=n4) format("woff2");font-weight:lighter;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/d337d8/000000000000000000010095/27/l?subset_id=2&fvd=i4) format("woff2");font-weight:400;font-style:italic;}</style>
    
  <link rel="stylesheet" id="athemes-headings-fonts-css" href="//fonts.googleapis.com/css?family=Yanone+Kaffeesatz%3A200%2C300%2C400%2C700&amp;ver=4.6.1" type="text/css" media="all">
  <link rel="stylesheet" href="/css/style.css">

  <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>

  <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.0.2/css/bootstrap.min.css">
  <link rel="stylesheet" href="/css/hiero.css">
  <link rel="stylesheet" href="/css/glyphs.css">
  

  <!-- Custom CSS -->
  <link rel="stylesheet" href="/css/my.css">
  <!-- Google Adsense -->
  
</head>
</html>
<script>
var themeMenus = {};

  themeMenus["/"] = "Home"; 

  themeMenus["/about/"] = "About"; 

  themeMenus["/writing/"] = "writing"; 

  themeMenus["/archives"] = "Archives"; 

  themeMenus["/speaking/"] = "speaking"; 

  themeMenus["/opensource/"] = "open source"; 

  themeMenus["/projects/"] = "projects"; 

  themeMenus["/news/"] = "news"; 

  themeMenus["/gumroad/"] = "gumroad"; 

  themeMenus["/atom.xml"] = "rss"; 

</script>


  <body>


  <header id="allheader" class="site-header" role="banner">
  <div class="clearfix container">
      <div class="site-branding">

          <h1 class="site-title">
            
              <a href="/" title="onmyway133" rel="home"> onmyway133 </a>
            
          </h1>

          
            <div class="site-description">What you don&#39;t know is what you haven&#39;t learned</div>
          
            
          <nav id="main-navigation" class="main-navigation" role="navigation">
            <a class="nav-open">Menu</a>
            <a class="nav-close">Close</a>
            <div class="clearfix sf-menu">

              <ul id="main-nav" class="nmenu sf-js-enabled">
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/">Home</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/about/">About</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/writing/">writing</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/archives">Archives</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/speaking/">speaking</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/opensource/">open source</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/projects/">projects</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/news/">news</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/gumroad/">gumroad</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/atom.xml">rss</a> </li>
                    
              </ul>
            </div>
          </nav>


      </div>
  </div>
</header>


  <div id="originBgDiv" style="background: #fff; width: 100%;">

      <div style="max-height:600px; overflow: hidden;  display: flex; display: -webkit-flex; align-items: center;">
        <img id="originBg" width="100%" alt="" src="">
      </div>

  </div>

  <script>
  function setAboutIMG(){
      var imgUrls = "https://avatars1.githubusercontent.com/u/2284279?s=460&v=4".split(",");
      var random = Math.floor((Math.random() * imgUrls.length ));
      if (imgUrls[random].startsWith('http') || imgUrls[random].indexOf('://') >= 0) {
        document.getElementById("originBg").src=imgUrls[random];
      } else {
        document.getElementById("originBg").src='/' + imgUrls[random];
      }
  }
  bgDiv=document.getElementById("originBgDiv");
  if(location.pathname.match('about')){
    setAboutIMG();
    bgDiv.style.display='block';
  }else{
    bgDiv.style.display='none';
  }
  </script>



  <div id="container">
    <div id="wrap">
            
      <div id="content" class="outer">
        
          <section id="main">
  
    <article id="post-How-to-use-index-in-SwiftUI-list"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-use-index-in-SwiftUI-list/">How to use index in SwiftUI list</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-use-index-in-SwiftUI-list/" class="article-date">
	  <time datetime="2019-11-22T20:34:37.000Z" itemprop="datePublished">November 22, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/515" target="_blank" rel="noopener">#515</a></strong></p>
<p>Use <code>enumerated</code> and <code>id: \.element.name</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">CountriesView</span>: <span class="title">View</span> </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> countries: [<span class="type">Country</span>]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> body: some <span class="type">View</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> withIndex = countries.enumerated().<span class="built_in">map</span>(&#123; $<span class="number">0</span> &#125;)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="type">List</span>(withIndex, id: \.element.name) &#123; index, country <span class="keyword">in</span></span><br><span class="line">            <span class="type">NavigationLink</span>(</span><br><span class="line">                destination: <span class="type">CountryView</span>(country: country),</span><br><span class="line">                label: &#123;</span><br><span class="line">                    <span class="type">VStack</span>(alignment: .leading) &#123;</span><br><span class="line">                        <span class="type">Text</span>(country.name)</span><br><span class="line">                            .styleMultiline()</span><br><span class="line">                    &#125;</span><br><span class="line">                    .paddingVertically()</span><br><span class="line">                &#125;</span><br><span class="line">            )</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swiftUI/">swiftUI</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-setup-multiple-git-accounts-for-GitHub-and-Bitbucket"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-setup-multiple-git-accounts-for-GitHub-and-Bitbucket/">How to setup multiple git accounts for GitHub and Bitbucket</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-setup-multiple-git-accounts-for-GitHub-and-Bitbucket/" class="article-date">
	  <time datetime="2019-11-22T11:52:44.000Z" itemprop="datePublished">November 22, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/514" target="_blank" rel="noopener">#514</a></strong></p>
<h2 id="Generate-SSH-keys"><a href="#Generate-SSH-keys" class="headerlink" title="Generate SSH keys"></a>Generate SSH keys</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa -C &quot;onmyway133@gmail.com&quot; -f &quot;id_rsa_github&quot;</span><br><span class="line">ssh-keygen -t rsa -C &quot;onmyway133bitbucket@gmail.com&quot; -f &quot;id_rsa_bitbucket&quot;</span><br><span class="line"></span><br><span class="line">pbcopy &lt; ~/.ssh/id_rsa_github.pub</span><br><span class="line">pbcopy &lt; ~/.ssh/id_rsa_bitbucket.pub</span><br><span class="line"></span><br><span class="line">ssh-add -D</span><br><span class="line">ssh-add id_rsa_github</span><br><span class="line">ssh-add id_rsa_bitbucket</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">vim ~/.ssh/config</span><br><span class="line"></span><br><span class="line">#Github (personal)</span><br><span class="line">  Host gh</span><br><span class="line">  HostName github.com</span><br><span class="line">  User git</span><br><span class="line">  IdentityFile ~/.ssh/id_rsa_github</span><br><span class="line"></span><br><span class="line">#Bitbucket (work)</span><br><span class="line">  Host bb</span><br><span class="line">  HostName bitbucket.org</span><br><span class="line">  User git</span><br><span class="line">  IdentityFile ~/.ssh/id_rsa_bitbucket</span><br></pre></td></tr></table></figure>

<h2 id="Config"><a href="#Config" class="headerlink" title="Config"></a>Config</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.email &quot;onmyway133@gmail.com&quot;</span><br><span class="line">git config --local user.email &quot;onmyway133bitbucket@gmail.com&quot;</span><br></pre></td></tr></table></figure>

<h2 id="Read-more"><a href="#Read-more" class="headerlink" title="Read more"></a>Read more</h2><ul>
<li><a href="https://medium.com/avocoders/github-and-bitbucket-accounts-in-a-same-pc-5f8c67fd89d2" target="_blank" rel="noopener">https://medium.com/avocoders/github-and-bitbucket-accounts-in-a-same-pc-5f8c67fd89d2</a></li>
<li><a href="https://www.atlassian.com/git/tutorials/setting-up-a-repository/git-config" target="_blank" rel="noopener">https://www.atlassian.com/git/tutorials/setting-up-a-repository/git-config</a></li>
</ul>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/git/">git</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/github/">github</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/terminal/">terminal</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-use-objectWillChange-in-Combine"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-use-objectWillChange-in-Combine/">How to use objectWillChange in Combine</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-use-objectWillChange-in-Combine/" class="article-date">
	  <time datetime="2019-11-21T21:19:47.000Z" itemprop="datePublished">November 21, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/513" target="_blank" rel="noopener">#513</a></strong></p>
<blockquote>
<p>A publisher that emits before the object has changed</p>
</blockquote>
<p>Use workaround <code>DispatchQueue</code> to wait another run loop to access <code>newValue</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">.onReceive(store.objectWillChange, perform: &#123;</span><br><span class="line">    <span class="type">DispatchQueue</span>.main.async &#123;</span><br><span class="line">        <span class="keyword">self</span>.reload()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">reload</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">self</span>.isFavorite = store.isFavorite(country: country)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Read-more"><a href="#Read-more" class="headerlink" title="Read more"></a>Read more</h2><ul>
<li><a href="https://forums.swift.org/t/combine-observableobject-in-uikit/28433" target="_blank" rel="noopener">https://forums.swift.org/t/combine-observableobject-in-uikit/28433</a></li>
<li><a href="https://twitter.com/luka_bernardi/status/1155944329363349504" target="_blank" rel="noopener">https://twitter.com/luka_bernardi/status/1155944329363349504</a></li>
</ul>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/combine/">combine</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swiftUI/">swiftUI</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-enable-z-and-zsh-autosuggestions-on-zsh"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-enable-z-and-zsh-autosuggestions-on-zsh/">How to enable z and zsh-autosuggestions on zsh</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-enable-z-and-zsh-autosuggestions-on-zsh/" class="article-date">
	  <time datetime="2019-11-19T07:29:04.000Z" itemprop="datePublished">November 19, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/512" target="_blank" rel="noopener">#512</a></strong></p>
<ul>
<li><a href="https://github.com/zsh-users/zsh-autosuggestions/blob/master/INSTALL.md" target="_blank" rel="noopener">https://github.com/zsh-users/zsh-autosuggestions/blob/master/INSTALL.md</a></li>
<li><a href="https://github.com/robbyrussell/oh-my-zsh/tree/master/plugins/z" target="_blank" rel="noopener">https://github.com/robbyrussell/oh-my-zsh/tree/master/plugins/z</a></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/zsh-users/zsh-autosuggestions $&#123;ZSH_CUSTOM:-~/.oh-my-zsh/custom&#125;/plugins/zsh-autosuggestions</span><br><span class="line"></span><br><span class="line">vim ~/.zsh.rc</span><br><span class="line">/plugins</span><br><span class="line">plugins=(</span><br><span class="line">  git</span><br><span class="line">  z</span><br><span class="line">  zsh-autosuggestions</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">source ~/.zshrc</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/terminal/">terminal</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-show-list-with-section-in-SwiftUI"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-show-list-with-section-in-SwiftUI/">How to show list with section in SwiftUI</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-show-list-with-section-in-SwiftUI/" class="article-date">
	  <time datetime="2019-11-16T21:57:51.000Z" itemprop="datePublished">November 16, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/511" target="_blank" rel="noopener">#511</a></strong></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">CountriesView</span>: <span class="title">View</span> </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> groups: [<span class="type">Group</span>]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">init</span>(countries: [<span class="type">Country</span>]) &#123;</span><br><span class="line">        <span class="keyword">self</span>.groups = <span class="type">CountryManager</span>.shared.groups(countries: countries)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> body: some <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">List</span> &#123;</span><br><span class="line">            <span class="type">ForEach</span>(groups) &#123; group <span class="keyword">in</span></span><br><span class="line">                <span class="type">Section</span>(</span><br><span class="line">                    header:</span><br><span class="line">                        <span class="type">Text</span>(group.initial)</span><br><span class="line">                            .foregroundColor(<span class="type">Color</span>.yellow)</span><br><span class="line">                            .styleTitle(),</span><br><span class="line">                    content: &#123;</span><br><span class="line">                        <span class="type">ForEach</span>(group.countries) &#123; country <span class="keyword">in</span></span><br><span class="line">                            <span class="type">CountryRow</span>(country: country)</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                )</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swiftUI/">swiftUI</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/watchOS/">watchOS</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-group-array-by-property-in-Swift"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-group-array-by-property-in-Swift/">How to  group array by property in  Swift</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-group-array-by-property-in-Swift/" class="article-date">
	  <time datetime="2019-11-16T21:29:38.000Z" itemprop="datePublished">November 16, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/510" target="_blank" rel="noopener">#510</a></strong></p>
<p>Use <code>Dictionary(grouping:by:)</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">groups</span><span class="params">(countries: [Country])</span></span> -&gt; [<span class="type">Group</span>] &#123;</span><br><span class="line">    <span class="keyword">let</span> dictionary = <span class="type">Dictionary</span>(grouping: countries, by: &#123; <span class="type">String</span>($<span class="number">0</span>.name.<span class="keyword">prefix</span>(<span class="number">1</span>)) &#125;)</span><br><span class="line">    <span class="keyword">let</span> groups = dictionary</span><br><span class="line">        .<span class="built_in">map</span>(&#123; (key: <span class="type">String</span>, value: [<span class="type">Country</span>]) -&gt; <span class="type">Group</span> <span class="keyword">in</span></span><br><span class="line">            <span class="keyword">return</span> <span class="type">Group</span>(initial: key, countries: value)</span><br><span class="line">        &#125;)</span><br><span class="line">        .sorted(by: &#123; $<span class="number">0</span>.initial &lt; $<span class="number">1</span>.initial &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> groups</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swift/">swift</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-Links-for-tools"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/Links-for-tools/">Links for tools</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/Links-for-tools/" class="article-date">
	  <time datetime="2019-11-15T18:42:18.000Z" itemprop="datePublished">November 15, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/509" target="_blank" rel="noopener">#509</a></strong></p>
<h2 id="Xcode"><a href="#Xcode" class="headerlink" title="Xcode"></a>Xcode</h2><ul>
<li><a href="https://learntalks.com/Pragma-Mark/2019/Pragma-Mark-2019-Pragma-Conference-2019-Mattt-Engineering-best-practices-mi-fan-un-baffo!/" target="_blank" rel="noopener">Engineering best practices</a></li>
<li><a href="https://fbflipper.com/" target="_blank" rel="noopener">https://fbflipper.com/</a></li>
<li><a href="https://www.wtfautolayout.com/" target="_blank" rel="noopener">https://www.wtfautolayout.com/</a></li>
<li><a href="https://quicktype.io/" target="_blank" rel="noopener">https://quicktype.io/</a></li>
<li><a href="https://github.com/woshiccm/Pecker" target="_blank" rel="noopener">https://github.com/woshiccm/Pecker</a></li>
<li><a href="https://github.com/rockbruno/SwiftInfo" target="_blank" rel="noopener">https://github.com/rockbruno/SwiftInfo</a></li>
<li><a href="https://github.com/IBDecodable/IBLinter" target="_blank" rel="noopener">https://github.com/IBDecodable/IBLinter</a></li>
<li><a href="https://github.com/ChargePoint/xcparse" target="_blank" rel="noopener">https://github.com/ChargePoint/xcparse</a></li>
</ul>
<h2 id="Terminal"><a href="#Terminal" class="headerlink" title="Terminal"></a>Terminal</h2><ul>
<li><a href="https://github.com/ggreer/the_silver_searcher" target="_blank" rel="noopener">https://github.com/ggreer/the_silver_searcher</a></li>
<li><a href="https://github.com/nodenv/nodenv" target="_blank" rel="noopener">https://github.com/nodenv/nodenv</a></li>
<li><a href="https://github.com/rbenv/rbenv" target="_blank" rel="noopener">https://github.com/rbenv/rbenv</a></li>
<li><a href="https://github.com/pyenv/pyenv" target="_blank" rel="noopener">https://github.com/pyenv/pyenv</a></li>
<li><a href="https://ohmyz.sh/" target="_blank" rel="noopener">https://ohmyz.sh/</a></li>
<li><a href="https://brew.sh/" target="_blank" rel="noopener">https://brew.sh/</a></li>
</ul>
<h2 id="Apps"><a href="#Apps" class="headerlink" title="Apps"></a>Apps</h2><ul>
<li><a href="https://sherlock.inspiredcode.io/" target="_blank" rel="noopener">https://sherlock.inspiredcode.io/</a></li>
<li><a href="https://www.mowglii.com/itsycal/" target="_blank" rel="noopener">https://www.mowglii.com/itsycal/</a></li>
<li><a href="https://github.com/eczarny/spectacle" target="_blank" rel="noopener">https://github.com/eczarny/spectacle</a></li>
<li><a href="https://www.sublimemerge.com/" target="_blank" rel="noopener">https://www.sublimemerge.com/</a></li>
</ul>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/terminal/">terminal</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/xcode/">xcode</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-make-full-width-list-row-in-SwiftUI"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-make-full-width-list-row-in-SwiftUI/">How to make full width list row in SwiftUI</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-make-full-width-list-row-in-SwiftUI/" class="article-date">
	  <time datetime="2019-11-14T13:44:23.000Z" itemprop="datePublished">November 14, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/508" target="_blank" rel="noopener">#508</a></strong></p>
<p>We need to use <code>frame(minWidth: 0, maxWidth: .infinity, alignment: .leading)</code>. Note that order is important, and <code>padding</code> should be first, and <code>background</code> after <code>frame</code> to apply color to the entire <code>frame</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">BooksScreen</span>: <span class="title">View</span> </span>&#123;</span><br><span class="line">    @<span class="type">ObservedObject</span> <span class="keyword">var</span> viewModel: <span class="type">BooksViewModel</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> body: some <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">List</span> &#123;</span><br><span class="line">            <span class="type">ForEach</span>(viewModel.books) &#123; book <span class="keyword">in</span></span><br><span class="line">                <span class="type">RowView</span>(vault: book)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        .listStyle(<span class="type">GroupedListStyle</span>())</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="class"><span class="keyword">struct</span> <span class="title">RowView</span>: <span class="title">View</span> </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> book: <span class="type">Book</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> body: some <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">VStack</span>(alignment: .leading) &#123;</span><br><span class="line">            <span class="type">Text</span>(book.name)</span><br><span class="line">                .foregroundColor(.white)</span><br><span class="line">                .font(.headline)</span><br><span class="line">            <span class="type">Text</span>(book.text)</span><br><span class="line">                .foregroundColor(.white)</span><br><span class="line">                .font(.subheadline)</span><br><span class="line">        &#125;</span><br><span class="line">        .padding()</span><br><span class="line">        .frame(minWidth: <span class="number">0</span>, maxWidth: .infinity, alignment: .leading)</span><br><span class="line">        .background(<span class="type">Color</span>(hex: book.color))</span><br><span class="line">        .cornerRadius(<span class="number">8</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swiftUI/">swiftUI</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-make-full-screen-TabView-in-SwiftUI"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-make-full-screen-TabView-in-SwiftUI/">How to make full screen TabView in SwiftUI</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-make-full-screen-TabView-in-SwiftUI/" class="article-date">
	  <time datetime="2019-11-14T11:27:24.000Z" itemprop="datePublished">November 14, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/507" target="_blank" rel="noopener">#507</a></strong></p>
<p><code>View</code> extends to the bottom, but not to the notch. We need to add <code>.edgesIgnoringSafeArea(.top)</code> to our <code>TabView</code> to tell <code>TabView</code> to extend all the way to the top.</p>
<p>Note that if we use <code>edgesIgnoringSafeArea(.all)</code> then <code>TabView</code> ‘s bar will be  dragged very down and broken.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">MainScreen</span>: <span class="title">View</span> </span>&#123;</span><br><span class="line">    <span class="keyword">init</span>() &#123;</span><br><span class="line">        <span class="type">UITabBar</span>.appearance().backgroundColor = <span class="type">R</span>.color.barBackground</span><br><span class="line">        <span class="type">UITableView</span>.appearance().backgroundColor = .clear</span><br><span class="line">        <span class="type">UITableViewCell</span>.appearance().backgroundColor = .clear</span><br><span class="line">        <span class="type">UITableView</span>.appearance().tableFooterView = <span class="type">UIView</span>()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> body: some <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">ZStack</span> &#123;</span><br><span class="line">            <span class="type">R</span>.color.background</span><br><span class="line">                .edgesIgnoringSafeArea(.all)</span><br><span class="line"></span><br><span class="line">            <span class="type">TabView</span> &#123;</span><br><span class="line">                <span class="type">PersonalScreen</span>()</span><br><span class="line">                    .tabItem(&#123;</span><br><span class="line">                        <span class="type">Image</span>(sfSymbol: .bagFill)</span><br><span class="line">                        <span class="type">Text</span>(<span class="string">"Personal"</span>)</span><br><span class="line">                            .styleTabBarItem()</span><br><span class="line">                    &#125;)</span><br><span class="line">                <span class="type">CloudScreen</span>()</span><br><span class="line">                    .tabItem(&#123;</span><br><span class="line">                        <span class="type">Image</span>(sfSymbol: .cloudFill)</span><br><span class="line">                        <span class="type">Text</span>(<span class="string">"Cloud"</span>)</span><br><span class="line">                            .styleTabBarItem()</span><br><span class="line">                    &#125;)</span><br><span class="line">                <span class="type">SettingsScreen</span>()</span><br><span class="line">                    .tabItem(&#123;</span><br><span class="line">                        <span class="type">Image</span>(sfSymbol: .gear)</span><br><span class="line">                        <span class="type">Text</span>(<span class="string">"Settings"</span>)</span><br><span class="line">                            .styleTabBarItem()</span><br><span class="line">                    &#125;)</span><br><span class="line">            &#125;</span><br><span class="line">            .edgesIgnoringSafeArea(.top)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swiftUI/">swiftUI</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-map-error-in-Combine"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-map-error-in-Combine/">How to map error in Combine</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-map-error-in-Combine/" class="article-date">
	  <time datetime="2019-11-14T09:23:12.000Z" itemprop="datePublished">November 14, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/506" target="_blank" rel="noopener">#506</a></strong></p>
<p>When a function expects <code>AnyPublisher&lt;[Book], Error&gt;</code> but in mock, we have <code>Just</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">getBooks</span><span class="params">()</span></span> -&gt; <span class="type">AnyPublisher</span>&lt;[<span class="type">Book</span>], <span class="type">Error</span>&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="type">Just</span>([</span><br><span class="line">        <span class="type">Book</span>(id: <span class="string">"1"</span>, name: <span class="string">"Book 1"</span>),</span><br><span class="line">        <span class="type">Book</span>(id: <span class="string">"2"</span>, name: <span class="string">"Book 2"</span>),</span><br><span class="line">    ])</span><br><span class="line">    .eraseToAnyPublisher()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>There will be a mismatch, hence compile error</p>
<blockquote>
<p>Cannot convert return expression of type ‘AnyPublisher&lt;[Book], Just<output>.Failure&gt;’ (aka ‘AnyPublisher&lt;Array<book>, Never&gt;’) to return type ‘AnyPublisher&lt;[Book], Error&gt;’</book></output></p>
</blockquote>
<p>The reason is because Just produces <code>Never</code>, not <code>Error</code>. The workaround is to introduce <code>Error</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">AppError</span>: <span class="title">Error</span> </span>&#123;</span><br><span class="line">    <span class="keyword">case</span> impossible</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">getBooks</span><span class="params">()</span></span> -&gt; <span class="type">AnyPublisher</span>&lt;[<span class="type">Book</span>], <span class="type">Error</span>&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="type">Just</span>([</span><br><span class="line">        <span class="type">Book</span>(id: <span class="string">"1"</span>, name: <span class="string">"Book 1"</span>),</span><br><span class="line">        <span class="type">Book</span>(id: <span class="string">"2"</span>, name: <span class="string">"Book 2"</span>),</span><br><span class="line">    ])</span><br><span class="line">    .mapError(&#123; <span class="number">_</span> <span class="keyword">in</span>  <span class="type">AppError</span>.impossible &#125;)</span><br><span class="line">    .eraseToAnyPublisher()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/combine/">combine</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swift/">swift</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-fix-unable-to-infer-complex-closure-return-type-in-SwiftUI"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-fix-unable-to-infer-complex-closure-return-type-in-SwiftUI/">How to fix unable to infer complex closure return type in SwiftUI</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-fix-unable-to-infer-complex-closure-return-type-in-SwiftUI/" class="article-date">
	  <time datetime="2019-11-13T19:48:58.000Z" itemprop="datePublished">November 13, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/505" target="_blank" rel="noopener">#505</a></strong></p>
<p>Make sure all <code>String</code> are passed into <code>Text</code>, not <code>Optional&lt;String&gt;</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">VStack</span> &#123;</span><br><span class="line">    <span class="type">Text</span>(data.title)</span><br><span class="line">    <span class="type">Text</span>(data.description!)</span><br><span class="line">    <span class="type">Text</span>(data.text!)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swiftUI/">swiftUI</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-make-Swift-Package-Manager-package-for-multiple-platforms"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-make-Swift-Package-Manager-package-for-multiple-platforms/">How to make Swift Package Manager package for multiple platforms</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-make-Swift-Package-Manager-package-for-multiple-platforms/" class="article-date">
	  <time datetime="2019-11-13T11:23:55.000Z" itemprop="datePublished">November 13, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/504" target="_blank" rel="noopener">#504</a></strong></p>
<p><a href="https://twitter.com/NeoNacho/status/1181245484867801088?s=20" target="_blank" rel="noopener">https://twitter.com/NeoNacho/status/1181245484867801088?s=20</a></p>
<blockquote>
<p>There’s no way to have platform specific sources or targets today, so you’ll have to take a different approach. I would recommend wrapping all OS specific files in #if os and just having one target. For tests, you could do something similar, one test target, but conditional tests</p>
</blockquote>
<p>Every files are in <code>Sources</code> folder, so we can use platform and version checks. For example <a href="https://github.com/onmyway133/Omnia" target="_blank" rel="noopener">Omnia</a> is a Swift Package Manager that supports iOS, tvOS, watchOS, macOS and Catalyst.</p>
<p>For macOS only code, need to check for AppKit and Catalyst</p>
<p><code>https://github.com/onmyway133/Omnia/blob/master/Sources/macOS/ClickedCollectionView.swift</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#<span class="keyword">if</span> canImport(<span class="type">AppKit</span>) &amp;&amp; !targetEnvironment(macCatalyst)</span><br></pre></td></tr></table></figure>

<p>For SwiftUI feature, need to check for iOS 13 and macOS 10.15</p>
<p><code>https://github.com/onmyway133/Omnia/blob/master/Sources/SwiftUI/Utils/ImageLoader.swift</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@available</span>(iOS <span class="number">13.0</span>, <span class="type">OSX</span> <span class="number">10.15</span>, tvOS <span class="number">13.0</span>, watchOS <span class="number">6.0</span>, *)</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/catalyst/">catalyst</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/">iOS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/macOS/">macOS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/spm/">spm</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swift/">swift</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/watchOS/">watchOS</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-make-simple-Redux-for-SwiftUI"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-make-simple-Redux-for-SwiftUI/">How to make simple Redux for SwiftUI</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-make-simple-Redux-for-SwiftUI/" class="article-date">
	  <time datetime="2019-11-13T10:10:29.000Z" itemprop="datePublished">November 13, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/502" target="_blank" rel="noopener">#502</a></strong></p>
<p><code>Mutation</code> is used to mutate state synchronously. <code>Action</code> is like intent, either from app or from user action. <code>Action</code> maps to <code>Mutation</code> in form of <code>Publisher</code> to work  with  async action, similar to <a href="https://github.com/redux-observable/redux-observable" target="_blank" rel="noopener">redux-observable</a></p>
<p><code>AnyReducer</code> is a type erasure that takes the <code>reduce</code> function</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Combine</span><br><span class="line"><span class="keyword">import</span> Foundation</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">protocol</span> <span class="title">Reducer</span> </span>&#123;</span><br><span class="line">    <span class="keyword">associatedtype</span> <span class="type">State</span></span><br><span class="line">    <span class="keyword">associatedtype</span> <span class="type">Mutation</span></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">reduce</span><span class="params">(state: State, mutation: Mutation)</span></span> -&gt; <span class="type">State</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">struct</span> <span class="title">AnyReducer</span>&lt;<span class="title">State</span>, <span class="title">Mutation</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">let</span> <span class="built_in">reduce</span>: (<span class="type">State</span>, <span class="type">Mutation</span>) -&gt; <span class="type">State</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">init</span>&lt;<span class="type">R</span>: <span class="type">Reducer</span>&gt;(reducer: <span class="type">R</span>) <span class="keyword">where</span> <span class="type">R</span>.<span class="type">State</span> == <span class="type">State</span>, <span class="type">R</span>.<span class="type">Mutation</span> == <span class="type">Mutation</span> &#123;</span><br><span class="line">        <span class="keyword">self</span>.<span class="built_in">reduce</span> = reducer.<span class="built_in">reduce</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">protocol</span> <span class="title">Action</span> </span>&#123;</span><br><span class="line">    <span class="keyword">associatedtype</span> <span class="type">Mutation</span></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">toMutation</span><span class="params">()</span></span> -&gt; <span class="type">AnyPublisher</span>&lt;<span class="type">Mutation</span>, <span class="type">Never</span>&gt;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">Store</span>&lt;<span class="title">State</span>, <span class="title">Mutation</span>&gt;: <span class="title">ObservableObject</span> </span>&#123;</span><br><span class="line">    @<span class="type">Published</span> <span class="keyword">public</span> <span class="keyword">private</span>(<span class="keyword">set</span>) <span class="keyword">var</span> state: <span class="type">State</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">let</span> reducer: <span class="type">AnyReducer</span>&lt;<span class="type">State</span>, <span class="type">Mutation</span>&gt;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">private</span>(<span class="keyword">set</span>) <span class="keyword">var</span> cancellables = <span class="type">Set</span>&lt;<span class="type">AnyCancellable</span>&gt;()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">init</span>(initialState: <span class="type">State</span>, reducer: <span class="type">AnyReducer</span>&lt;<span class="type">State</span>, <span class="type">Mutation</span>&gt;) &#123;</span><br><span class="line">        <span class="keyword">self</span>.state = initialState</span><br><span class="line">        <span class="keyword">self</span>.reducer = reducer</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">send</span>&lt;A: Action&gt;<span class="params">(action: A)</span></span> <span class="keyword">where</span> <span class="type">A</span>.<span class="type">Mutation</span> == <span class="type">Mutation</span> &#123;</span><br><span class="line">        action</span><br><span class="line">            .toMutation()</span><br><span class="line">            .receive(on: <span class="type">DispatchQueue</span>.main)</span><br><span class="line">            .sink(receiveValue: update(mutation:))</span><br><span class="line">            .store(<span class="keyword">in</span>: &amp;cancellables)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">update</span><span class="params">(mutation: Mutation)</span></span> &#123;</span><br><span class="line">        <span class="keyword">self</span>.state = reducer.<span class="built_in">reduce</span>(state, mutation)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>To use, conform to all the protocols. Also make typelias <code>AppStore</code> in order to easy specify type in <code>SwiftUI View</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> SwiftUI</span><br><span class="line"><span class="keyword">import</span> Combine</span><br><span class="line"></span><br><span class="line"><span class="keyword">typealias</span> <span class="type">AppStore</span> = <span class="type">Store</span>&lt;<span class="type">AppState</span>, <span class="type">AppMutation</span>&gt;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> appStore: <span class="type">AppStore</span> = <span class="type">AppStore</span>(</span><br><span class="line">    initialState: <span class="type">AppState</span>(),</span><br><span class="line">    reducer: appReducer</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">AppState</span>: <span class="title">Codable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> hasShownOnboaring = <span class="literal">false</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">AppReducer</span>: <span class="title">Reducer</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">reduce</span><span class="params">(state: AppState, mutation: AppMutation)</span></span> -&gt; <span class="type">AppState</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> state = state</span><br><span class="line">        <span class="keyword">switch</span> mutation &#123;</span><br><span class="line">        <span class="keyword">case</span> .finishOnboarding:</span><br><span class="line">            state.hasShownOnboaring = <span class="literal">true</span></span><br><span class="line">        @unknown <span class="keyword">default</span>:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> state</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">AppMutation</span> </span>&#123;</span><br><span class="line">    <span class="keyword">case</span> finishOnboarding</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Use in  SwiftUI</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">RootScreen</span>: <span class="title">View</span> </span>&#123;</span><br><span class="line">    @<span class="type">EnvironmentObject</span> <span class="keyword">var</span> store: <span class="type">AppStore</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> body: some <span class="type">View</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> store.state.hasShownOnboaring &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="type">Text</span>(<span class="string">"Welcome"</span>)</span><br><span class="line">                .eraseToAnyView()</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="type">OnboardingScreen</span>()</span><br><span class="line">                .eraseToAnyView()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">OnboardingScreen</span>: <span class="title">View</span> </span>&#123;</span><br><span class="line">    @<span class="type">EnvironmentObject</span> <span class="keyword">var</span> store: <span class="type">AppStore</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">done</span><span class="params">()</span></span> &#123;</span><br><span class="line">        store.send(action: <span class="type">AppAction</span>.finishOnboarding)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://swiftwithmajid.com/2019/09/18/redux-like-state-container-in-swiftui/" target="_blank" rel="noopener">https://swiftwithmajid.com/2019/09/18/redux-like-state-container-in-swiftui/</a></li>
<li><a href="https://github.com/mecid/swiftui-recipes-app" target="_blank" rel="noopener">https://github.com/mecid/swiftui-recipes-app</a></li>
</ul>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swiftUI/">swiftUI</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-use-Firebase-in-macOS"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-use-Firebase-in-macOS/">How to use Firebase in macOS</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-use-Firebase-in-macOS/" class="article-date">
	  <time datetime="2019-11-12T12:54:20.000Z" itemprop="datePublished">November 12, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/501" target="_blank" rel="noopener">#501</a></strong></p>
<ul>
<li>Use Catalyst</li>
<li>Add to CocoaPods</li>
</ul>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">platform <span class="symbol">:ios</span>, <span class="string">'13.0'</span></span><br><span class="line"></span><br><span class="line">target <span class="string">'MyApp'</span> <span class="keyword">do</span></span><br><span class="line">  use_frameworks!</span><br><span class="line"></span><br><span class="line">  pod <span class="string">'FirebaseCore'</span></span><br><span class="line">  pod <span class="string">'Firebase/Firestore'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<h2 id="Troubleshooting"><a href="#Troubleshooting" class="headerlink" title="Troubleshooting"></a>Troubleshooting</h2><h3 id="Select-a-team-for-gRPC-C-gRPCCertificates-Cpp"><a href="#Select-a-team-for-gRPC-C-gRPCCertificates-Cpp" class="headerlink" title="Select a team for gRPC-C++-gRPCCertificates-Cpp"></a>Select a team for <code>gRPC-C++-gRPCCertificates-Cpp</code></h3><img width="957" alt="Screenshot 2019-11-12 at 14 53 03" src="https://user-images.githubusercontent.com/2284279/68677350-3f93c380-055c-11ea-9782-00f124cffc89.png">

<h3 id="FIRAnalyticsConnector-building-for-Mac-Catalyst-but-linking-in-object-file-built-for-iOS-Simulator"><a href="#FIRAnalyticsConnector-building-for-Mac-Catalyst-but-linking-in-object-file-built-for-iOS-Simulator" class="headerlink" title="FIRAnalyticsConnector: building for Mac Catalyst, but linking in object file built for iOS Simulator"></a>FIRAnalyticsConnector: building for Mac Catalyst, but linking in object file built for iOS Simulator</h3><p><a href="https://stackoverflow.com/questions/57666155/firanalyticsconnector-building-for-mac-catalyst-but-linking-in-object-file-bui" target="_blank" rel="noopener">https://stackoverflow.com/questions/57666155/firanalyticsconnector-building-for-mac-catalyst-but-linking-in-object-file-bui</a></p>
<blockquote>
<p>The problem was related to the difference between Firebase/Core and FirebaseCore. The first is a subspec of the Firebase pod that depends on FirebaseAnalytics. The second is only the FirebaseCore pod. Only the latter should be used for macOS.</p>
</blockquote>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/firebase/">firebase</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/macOS/">macOS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swift/">swift</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-Links-for-Xcode"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/Links-for-Xcode/">Links for Xcode</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/Links-for-Xcode/" class="article-date">
	  <time datetime="2019-11-12T07:33:50.000Z" itemprop="datePublished">November 12, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/499" target="_blank" rel="noopener">#499</a></strong></p>
<h2 id="Build-setting"><a href="#Build-setting" class="headerlink" title="Build setting"></a>Build setting</h2><h3 id="Build-Library-For-Distribution"><a href="#Build-Library-For-Distribution" class="headerlink" title="Build Library For Distribution"></a>Build Library For Distribution</h3><ul>
<li><a href="https://developer.apple.com/videos/play/wwdc2019/416/?time=596" target="_blank" rel="noopener">Binary Frameworks in Swift</a></li>
</ul>
<blockquote>
<p>It turns on all the features that are necessary to build your library in such a way that it can be distributed</p>
</blockquote>
<blockquote>
<p>What does this error actually mean? Well, when the Swift compiler goes to import a module, it looks for a file called the Compiled Module for that library. If it finds one of these files, it reads off the manifest of public APIs that you can call into, and lets you use them. Now, this Compiled Module Format is a binary format that basically contains internal compiler data structures.</p>
</blockquote>
<blockquote>
<p> And since they’re just internal data structures, they’re subject to change with every version of the Swift Compiler. So what this means is that if one person tries to import a module using one version of Swift, and that module was created by another version of Swift, their compiler can’t understand it, and they won’t be able to use it.</p>
</blockquote>
<blockquote>
<p>Well, in order to solve this version lock, Xcode 11 introduces a new format for Swift Modules, called Swift Module Interfaces. And just like the Compiled Module Format, they list out all the public APIs of a module, but in a textual form that behaves more like source code. And since they behave like source code, then future versions of the Swift Compiler will be able to import module interfaces created with older versions. And when you enable Build Libraries for Distribution, you’re telling the compiler to generate one of these stable interfaces whenever it builds your framework</p>
</blockquote>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/links/">links</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/xcode/">xcode</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-use-Xcode"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-use-Xcode/">How to use Xcode</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-use-Xcode/" class="article-date">
	  <time datetime="2019-11-12T07:33:50.000Z" itemprop="datePublished">November 12, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/499" target="_blank" rel="noopener">#499</a></strong></p>
<h2 id="Build-setting"><a href="#Build-setting" class="headerlink" title="Build setting"></a>Build setting</h2><h3 id="Build-Library-For-Distribution"><a href="#Build-Library-For-Distribution" class="headerlink" title="Build Library For Distribution"></a>Build Library For Distribution</h3><ul>
<li><a href="https://developer.apple.com/videos/play/wwdc2019/416/?time=596" target="_blank" rel="noopener">Binary Frameworks in Swift</a></li>
</ul>
<blockquote>
<p>It turns on all the features that are necessary to build your library in such a way that it can be distributed</p>
</blockquote>
<blockquote>
<p>What does this error actually mean? Well, when the Swift compiler goes to import a module, it looks for a file called the Compiled Module for that library. If it finds one of these files, it reads off the manifest of public APIs that you can call into, and lets you use them. Now, this Compiled Module Format is a binary format that basically contains internal compiler data structures.</p>
</blockquote>
<blockquote>
<p> And since they’re just internal data structures, they’re subject to change with every version of the Swift Compiler. So what this means is that if one person tries to import a module using one version of Swift, and that module was created by another version of Swift, their compiler can’t understand it, and they won’t be able to use it.</p>
</blockquote>
<blockquote>
<p>Well, in order to solve this version lock, Xcode 11 introduces a new format for Swift Modules, called Swift Module Interfaces. And just like the Compiled Module Format, they list out all the public APIs of a module, but in a textual form that behaves more like source code. And since they behave like source code, then future versions of the Swift Compiler will be able to import module interfaces created with older versions. And when you enable Build Libraries for Distribution, you’re telling the compiler to generate one of these stable interfaces whenever it builds your framework</p>
</blockquote>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/links/">links</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/xcode/">xcode</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-access-view-in-fragment-in-Kotlin"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-access-view-in-fragment-in-Kotlin/">How to access view in fragment in Kotlin</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-access-view-in-fragment-in-Kotlin/" class="article-date">
	  <time datetime="2019-11-10T21:21:06.000Z" itemprop="datePublished">November 10, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/497" target="_blank" rel="noopener">#497</a></strong></p>
<p>Synthetic properties generated by <a href="https://kotlinlang.org/docs/tutorials/android-plugin.html" target="_blank" rel="noopener">Kotlin Android Extensions plugin</a> needs a <code>view</code> for <code>Fragment/Activity</code> to be set before hand.</p>
<p>In your case, for <code>Fragment</code>, you need to use <code>view.btn_K</code> in <code>onViewCreated</code></p>
<pre><code>override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?): View? {
    super.onCreateView(inflater, container, savedInstanceState)
    val view = inflater.inflate(R.layout.fragment_card_selector, container, false)
    view.btn_K.setOnClickListener{} // access with `view`
    return view
}</code></pre><p>Or better, you should only access synthetic properties in <code>onViewCreated</code></p>
<pre><code>override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?): View? {
    super.onCreateView(inflater, container, savedInstanceState)
    return inflater.inflate(R.layout.fragment_card_selector, container, false)
}

override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
    super.onViewCreated(view, savedInstanceState)
    btn_K.setOnClickListener{} // access without `view`
}</code></pre><p>Please notice that <code>savedInstanceState</code> parameter should be nullable <code>Bundle?</code>, and also check <a href="https://kotlinlang.org/docs/tutorials/android-plugin.html" target="_blank" rel="noopener">Importing synthetic properties</a></p>
<blockquote>
<p>It is convenient to import all widget properties for a specific layout<br>in one go:</p>
<p><code>import kotlinx.android.synthetic.main.&lt;layout&gt;.*</code></p>
<p>Thus if the layout filename is activity_main.xml, we’d import<br><code>kotlinx.android.synthetic.main.activity_main.*.</code></p>
<p>If we want to call the synthetic properties on View, we should also<br>import <code>kotlinx.android.synthetic.main.activity_main.view.*.</code></p>
</blockquote>
<hr>
<p>Original answer <a href="https://stackoverflow.com/questions/34541650/nullpointerexception-when-trying-to-access-views-in-a-kotlin-fragment/51674381#51674381" target="_blank" rel="noopener">https://stackoverflow.com/questions/34541650/nullpointerexception-when-trying-to-access-views-in-a-kotlin-fragment/51674381#51674381</a></p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/android/">android</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/kotlin/">kotlin</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-refresh-receipt-and-restore-in-app-purchase-in-iOS"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-refresh-receipt-and-restore-in-app-purchase-in-iOS/">How to refresh receipt and restore in app purchase in iOS</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-refresh-receipt-and-restore-in-app-purchase-in-iOS/" class="article-date">
	  <time datetime="2019-11-10T21:19:39.000Z" itemprop="datePublished">November 10, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/496" target="_blank" rel="noopener">#496</a></strong></p>
<p>Read this <a href="https://developer.apple.com/library/archive/documentation/NetworkingInternet/Conceptual/StoreKitGuide/Chapters/Restoring.html#//apple_ref/doc/uid/TP40008267-CH8-SW9" target="_blank" rel="noopener">Restoring Purchased Products</a> to understand the purposes between the 2.</p>
<p>From iOS 7, every app downloaded from the store has a receipt (for downloading/buying the app) at <code>appStoreReceiptURL</code>. When users purchases something via In App Purchase, the content at <code>appStoreReceiptURL</code> is updated with purchases information. Most of the cases, you just need to refresh the receipt (at <code>appStoreReceiptURL</code>) so that you know which transactions users have made.</p>
<blockquote>
<p>Users restore transactions to maintain access to content they’ve already purchased. For example, when they upgrade to a new phone, they don’t lose all of the items they purchased on the old phone. Include some mechanism in your app to let the user restore their purchases, such as a Restore Purchases button. Restoring purchases <strong>prompts for the user’s App Store credentials</strong>, which interrupts the flow of your app: because of this, don’t automatically restore purchases, especially not every time your app is launched.</p>
</blockquote>
<blockquote>
<p><strong>In most cases, all your app needs to do is refresh its receipt</strong> and deliver the products in its receipt. The refreshed receipt contains a record of the user’s purchases in this app, on this device or any other device. However, some apps need to take an alternate approach for one of the following reasons:</p>
</blockquote>
<blockquote>
<p>If you use <strong>Apple-hosted content</strong>, restoring completed transactions gives your app the transaction objects it uses to download the content.<br>If you need to support versions of iOS earlier than iOS 7, where the app receipt isn’t available, restore completed transactions instead.</p>
</blockquote>
<blockquote>
<p>Refreshing the receipt asks the App Store for the latest copy of the receipt. <strong>Refreshing a receipt does not create any new transactions.</strong></p>
</blockquote>
<blockquote>
<p>Restoring completed transactions creates a new transaction for every completed transaction the user made, essentially replaying history for your transaction queue observer.</p>
</blockquote>
<p>More about receipt, from WWDC 2017, What’s new in StoreKit session <a href="https://developer.apple.com/videos/play/wwdc2017/303/" target="_blank" rel="noopener">https://developer.apple.com/videos/play/wwdc2017/303/</a></p>
<p><a href="https://i.stack.imgur.com/XoZOv.png" target="_blank" rel="noopener"><img src="https://i.stack.imgur.com/XoZOv.png" alt="enter image description here"></a></p>
<p>You can also watch WWDC 2017, session Advanced StoreKit for more detail <a href="https://developer.apple.com/videos/play/wwdc2017/305/" target="_blank" rel="noopener">https://developer.apple.com/videos/play/wwdc2017/305/</a></p>
<p><a href="https://i.stack.imgur.com/h2cg9.png" target="_blank" rel="noopener"><img src="https://i.stack.imgur.com/h2cg9.png" alt="enter image description here"></a></p>
<hr>
<p>Original answer <a href="https://stackoverflow.com/questions/45615106/when-to-refresh-a-receipt-vs-restore-purchases-in-ios/52162283#52162283" target="_blank" rel="noopener">https://stackoverflow.com/questions/45615106/when-to-refresh-a-receipt-vs-restore-purchases-in-ios/52162283#52162283</a></p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/">iOS</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-edit-hexo-theme-hiero"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-edit-hexo-theme-hiero/">How to edit hexo theme hiero</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-edit-hexo-theme-hiero/" class="article-date">
	  <time datetime="2019-11-06T09:16:32.000Z" itemprop="datePublished">November 6, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/494" target="_blank" rel="noopener">#494</a></strong></p>
<h2 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h2><ul>
<li><a href="https://github.com/iTimeTraveler/hexo-theme-hiero" target="_blank" rel="noopener">https://github.com/iTimeTraveler/hexo-theme-hiero</a></li>
</ul>
<p>Remove <code>max-width</code> from <code>source/css/style.styl</code></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.outer</span></span><br><span class="line">  <span class="selector-tag">clearfix</span>()</span><br><span class="line">  // max-width: (column-width + gutter-width) * columns + gutter-width</span><br><span class="line">  <span class="selector-tag">margin</span>: 40<span class="selector-tag">px</span> <span class="selector-tag">auto</span></span><br><span class="line">  <span class="selector-tag">padding</span>: 0 <span class="selector-tag">gutter-width</span></span><br></pre></td></tr></table></figure>

<p>Change <code>font-size</code> of code block from <code>source/css/_partial/highlight.styl</code></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$code-block</span><br><span class="line">  background: $highlight-background</span><br><span class="line">  <span class="selector-tag">margin</span>: <span class="selector-tag">article-padding</span> <span class="selector-tag">article-padding</span> * 0</span><br><span class="line">  <span class="selector-tag">padding</span>: 15<span class="selector-tag">px</span> <span class="selector-tag">article-padding</span></span><br><span class="line">  <span class="selector-tag">border-style</span>: <span class="selector-tag">solid</span></span><br><span class="line">  <span class="selector-tag">border-color</span>: <span class="selector-tag">color-border</span></span><br><span class="line">  <span class="selector-tag">border-width</span>: 1<span class="selector-tag">px</span> 0</span><br><span class="line">  <span class="selector-tag">overflow</span>: <span class="selector-tag">auto</span></span><br><span class="line">  color: $highlight-foreground</span><br><span class="line">  <span class="selector-tag">font-size</span>: 1<span class="selector-class">.0em</span>;</span><br><span class="line">  <span class="selector-tag">line-height</span>: 1<span class="selector-tag">em</span></span><br></pre></td></tr></table></figure>

<p>Change <code>font-size</code> of <code>article-header</code> from <code>source/css/_partial/article.styl</code></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.article-header</span></span><br><span class="line">  <span class="selector-tag">h1</span></span><br><span class="line">    <span class="selector-tag">margin</span>: 0 0 3<span class="selector-tag">px</span> 0;</span><br><span class="line">    <span class="selector-tag">font-size</span>: 26<span class="selector-tag">px</span>;</span><br><span class="line">    <span class="selector-tag">line-height</span>: 1<span class="selector-class">.2</span>;</span><br><span class="line">    <span class="selector-tag">a</span></span><br><span class="line">      <span class="selector-tag">color</span>: <span class="selector-id">#404040</span>;</span><br><span class="line">      <span class="selector-tag">text-decoration</span>: <span class="selector-tag">none</span>;</span><br></pre></td></tr></table></figure>

<p>Change <code>font-size</code> of text from <code>source/css/_partial/article.styl</code></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.article-entry</span></span><br><span class="line">  @<span class="keyword">extend</span> $base-style</span><br><span class="line">  clearfix()</span><br><span class="line">  color: color-default</span><br><span class="line">  padding: <span class="number">0</span></span><br><span class="line">  p, table</span><br><span class="line">    line-height: line-height</span><br><span class="line">    margin: line-height <span class="number">0</span></span><br><span class="line">    font-size: <span class="number">1.1em</span></span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/css/">css</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-use-Firebase-RemoteConfig"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-use-Firebase-RemoteConfig/">How to use Firebase RemoteConfig</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-use-Firebase-RemoteConfig/" class="article-date">
	  <time datetime="2019-11-05T12:13:25.000Z" itemprop="datePublished">November 5, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/493" target="_blank" rel="noopener">#493</a></strong></p>
<p>Declare in Podfile</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pod <span class="string">'Firebase/Core'</span></span><br><span class="line">pod <span class="string">'Firebase/RemoteConfig'</span></span><br></pre></td></tr></table></figure>

<p>Use <code>RemoteConfigHandler</code> to encapsulate logic. We introduce <code>Key</code> with <code>CaseIterable</code> and <code>defaultValue</code> of type <code>NSNumber</code> to manage default values.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Firebase</span><br><span class="line"><span class="keyword">import</span> FirebaseRemoteConfig</span><br><span class="line"></span><br><span class="line"><span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">RemoteConfigHandler</span> </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> remoteConfig: <span class="type">RemoteConfig</span></span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">enum</span> <span class="title">Key</span>: <span class="title">String</span>, <span class="title">CaseIterable</span> </span>&#123;</span><br><span class="line">        <span class="keyword">case</span> interval = <span class="string">"fetch_interval"</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> defaultValue: <span class="type">NSNumber</span> &#123;</span><br><span class="line">            <span class="keyword">switch</span> <span class="keyword">self</span> &#123;</span><br><span class="line">            <span class="keyword">case</span> .periodicGetSalons: <span class="keyword">return</span> <span class="type">NSNumber</span>(value: <span class="number">300</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">init</span>() &#123;</span><br><span class="line">        <span class="keyword">self</span>.remoteConfig = <span class="type">RemoteConfig</span>.remoteConfig()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> settings = <span class="type">RemoteConfigSettings</span>()</span><br><span class="line">        settings.minimumFetchInterval = <span class="number">0</span></span><br><span class="line">        <span class="keyword">self</span>.remoteConfig.configSettings = settings</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> <span class="built_in">map</span> = <span class="type">Key</span>.allCases.<span class="built_in">reduce</span>([<span class="type">String</span>: <span class="type">NSObject</span>](), &#123; <span class="built_in">map</span>, key <span class="keyword">in</span></span><br><span class="line">            <span class="keyword">var</span> <span class="built_in">map</span> = <span class="built_in">map</span></span><br><span class="line">            <span class="built_in">map</span>[key.rawValue] = key.defaultValue</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">map</span></span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">self</span>.remoteConfig.setDefaults(<span class="built_in">map</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">update</span><span class="params">()</span></span>  &#123;</span><br><span class="line">        <span class="keyword">self</span>.remoteConfig.fetchAndActivate(completionHandler: &#123; status, error <span class="keyword">in</span></span><br><span class="line">            <span class="built_in">print</span>(status, error <span class="keyword">as</span> <span class="type">Any</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> fetchInterval: <span class="type">TimeInterval</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> getValue(key: .interval, transform: &#123; $<span class="number">0</span>.doubleValue &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">getValue</span>&lt;T&gt;<span class="params">(key: Key, transform: <span class="params">(NSNumber)</span></span></span> -&gt; <span class="type">T</span>) -&gt; <span class="type">T</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> number = remoteConfig.configValue(forKey: key.rawValue).numberValue ?? key.defaultValue</span><br><span class="line">        <span class="keyword">return</span> transform(number)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/firebase/">firebase</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swift/">swift</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-apply-translations-to-Localizable.strings"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-apply-translations-to-Localizable.strings/">How to apply translations to Localizable.strings</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-apply-translations-to-Localizable.strings/" class="article-date">
	  <time datetime="2019-11-05T08:35:11.000Z" itemprop="datePublished">November 5, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/492" target="_blank" rel="noopener">#492</a></strong></p>
<p>Suppose we have a base Localizable.strings</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&quot;open&quot; = &quot;Open&quot;;</span><br><span class="line">&quot;closed&quot; = &quot;Closed&quot;;</span><br></pre></td></tr></table></figure>

<p>After sending that file for translations, we get translated versions.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&quot;open&quot; = &quot;Åpen&quot;;</span><br><span class="line">&quot;closed&quot; = &quot;Stengt&quot;;</span><br></pre></td></tr></table></figure>

<p>Searching and copy pasting these to our Localizable.strings is tedious and time consuming. We can write a script to apply that.</p>
<p>Remember that we need to be aware of smart and dump quotes</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">.replace(<span class="regexp">/\"/g</span>, <span class="string">''</span>)</span><br><span class="line">.replace(<span class="regexp">/\"/g</span>, <span class="string">''</span>)</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> originalFile = <span class="string">'MyApp/Resources/nb.lproj/Localizable.strings'</span></span><br><span class="line"><span class="keyword">const</span> translationString = <span class="string">`</span></span><br><span class="line"><span class="string">"open" = "Åpen";</span></span><br><span class="line"><span class="string">"closed" = "Stengt";</span></span><br><span class="line"><span class="string">`</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Translation</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(key, value) &#123;</span><br><span class="line">        <span class="keyword">this</span>.key = key</span><br><span class="line">        <span class="keyword">this</span>.value = value</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Translation.make = <span class="function"><span class="keyword">function</span> <span class="title">make</span>(<span class="params">line</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!line.endsWith(<span class="string">';'</span>)) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Translation(<span class="string">''</span>, <span class="string">''</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> parts = line</span><br><span class="line">        .replace(<span class="string">';'</span>)</span><br><span class="line">        .split(<span class="string">" = "</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> key = parts[<span class="number">0</span>]</span><br><span class="line">        .replace(<span class="regexp">/\"/g</span>, <span class="string">''</span>)</span><br><span class="line">        .replace(<span class="regexp">/\”/g</span>, <span class="string">''</span>)</span><br><span class="line">    <span class="keyword">const</span> value = parts[<span class="number">1</span>]</span><br><span class="line">        .replace(<span class="regexp">/\"/g</span>, <span class="string">''</span>)</span><br><span class="line">        .replace(<span class="regexp">/\”/g</span>, <span class="string">''</span>)</span><br><span class="line">        .replace(<span class="string">'undefined'</span>, <span class="string">''</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Translation(key, value)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">main</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> translations = translationString</span><br><span class="line">        .split(<span class="regexp">/\r?\n/</span>)</span><br><span class="line">        .map(<span class="function">(<span class="params">line</span>) =&gt;</span> &#123; <span class="keyword">return</span> Translation.make(line) &#125;)</span><br><span class="line"></span><br><span class="line">    apply(translations, originalFile)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">apply</span>(<span class="params">translations, originalFile</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> originalData = fs.readFileSync(originalFile, <span class="string">'utf8'</span>)</span><br><span class="line">        <span class="keyword">const</span> originalLines = originalData.split(<span class="regexp">/\r?\n/</span>)</span><br><span class="line">        <span class="keyword">const</span> parsedLine = originalLines.map(<span class="function">(<span class="params">originalLine</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">const</span> originalTranslation = Translation.make(originalLine)</span><br><span class="line">            <span class="keyword">const</span> find = translations.find(<span class="function">(<span class="params">translation</span>) =&gt;</span> &#123; <span class="keyword">return</span> translation.key === originalTranslation.key &#125;)</span><br><span class="line">            <span class="keyword">if</span> (originalLine !== <span class="string">""</span> &amp;&amp; find !== <span class="literal">undefined</span> &amp;&amp;  find.key !== <span class="string">""</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="string">`"<span class="subst">$&#123;find.key&#125;</span>" = "<span class="subst">$&#123;find.value&#125;</span>";`</span></span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> originalLine</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">const</span> parsedData = parsedLine.join(<span class="string">'\n'</span>)</span><br><span class="line">        fs.writeFileSync(originalFile, parsedData, &#123; <span class="attr">overwrite</span>: <span class="literal">true</span> &#125;)</span><br><span class="line">    &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">        <span class="built_in">console</span>.error(err)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">main()</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/">javascript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/node/">node</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/script/">script</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-use-CreateML-to-classify-images"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-use-CreateML-to-classify-images/">How to use CreateML to classify images</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-use-CreateML-to-classify-images/" class="article-date">
	  <time datetime="2019-11-04T12:14:50.000Z" itemprop="datePublished">November 4, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/491" target="_blank" rel="noopener">#491</a></strong></p>
<img width="832" alt="createml" src="https://user-images.githubusercontent.com/2284279/68123467-4774b780-ff0d-11e9-9ac1-5ab2b21b5dc4.png">
<img width="1403" alt="createml data" src="https://user-images.githubusercontent.com/2284279/68123468-480d4e00-ff0d-11e9-80e5-6c3e8f8d92b3.png">
<img width="1403" alt="createml train" src="https://user-images.githubusercontent.com/2284279/68127306-e7364380-ff15-11e9-88e2-5f6d880df186.png">

<h2 id="CreateMLUI-Playground"><a href="#CreateMLUI-Playground" class="headerlink" title="CreateMLUI Playground"></a>CreateMLUI Playground</h2><img width="1680" alt="create ml ui" src="https://user-images.githubusercontent.com/2284279/68127301-e1d8f900-ff15-11e9-9b1e-3c8c3aeeb28b.png">

<h2 id="Read-more"><a href="#Read-more" class="headerlink" title="Read more"></a>Read more</h2><ul>
<li><a href="https://developer.apple.com/documentation/createml/creating_an_image_classifier_model" target="_blank" rel="noopener">https://developer.apple.com/documentation/createml/creating_an_image_classifier_model</a></li>
<li><a href="https://captechconsulting.com/blogs/hands-on-with-the-all-new-create-ml-app-machine-learning-for-the-masses" target="_blank" rel="noopener">https://captechconsulting.com/blogs/hands-on-with-the-all-new-create-ml-app-machine-learning-for-the-masses</a></li>
<li><a href="https://developer.apple.com/videos/play/wwdc2019/425/" target="_blank" rel="noopener">Training Sound Classification Models in Create ML - WWDC 2019</a></li>
<li><a href="https://developer.apple.com/videos/play/wwdc2019/426/" target="_blank" rel="noopener">Building Activity Classification Models in Create ML - WWDC 2019</a></li>
<li><a href="https://www.youtube.com/watch?v=a905KIBw1hs" target="_blank" rel="noopener">Create ML for Everyone</a></li>
</ul>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/machine-learning/">machine learning</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-use-Firebase-AutoML-Vision-Edge-to-classify-images"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-use-Firebase-AutoML-Vision-Edge-to-classify-images/">How to use Firebase AutoML Vision Edge to classify images</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-use-Firebase-AutoML-Vision-Edge-to-classify-images/" class="article-date">
	  <time datetime="2019-11-04T11:41:41.000Z" itemprop="datePublished">November 4, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/490" target="_blank" rel="noopener">#490</a></strong></p>
<h2 id="Create-project-on-Firebase-and-choose-Vision-Edge"><a href="#Create-project-on-Firebase-and-choose-Vision-Edge" class="headerlink" title="Create project on Firebase and choose Vision Edge"></a>Create project on Firebase and choose Vision Edge</h2><p>Vision Edge is part of MLKit, but for custom images training</p>
<p><a href="https://console.firebase.google.com/u/0/project/avengers-ad2ce/ml/" target="_blank" rel="noopener">https://console.firebase.google.com/u/0/project/avengers-ad2ce/ml/</a></p>
<img width="1527" alt="firebase vision edge" src="https://user-images.githubusercontent.com/2284279/68121743-cb787080-ff08-11e9-8fbf-bc3734e833e3.png">

<img width="1527" alt="firebase dataset" src="https://user-images.githubusercontent.com/2284279/68121742-cb787080-ff08-11e9-83a6-345d79126542.png">

<blockquote>
<p>Model Avengers_dataset_2019114133437 is training and may take several hours. You will receive an email once training is complete.</p>
</blockquote>
<img width="1403" alt="firebase evaluation" src="https://user-images.githubusercontent.com/2284279/68123651-e0a3ce00-ff0d-11e9-9264-33bb1a475e53.png">

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/cloud/">cloud</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/firebase/">firebase</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-use-Google-AutoML-to-classify-images"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-use-Google-AutoML-to-classify-images/">How to use Google AutoML to classify images</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-use-Google-AutoML-to-classify-images/" class="article-date">
	  <time datetime="2019-11-04T11:40:28.000Z" itemprop="datePublished">November 4, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/489" target="_blank" rel="noopener">#489</a></strong></p>
<h2 id="Create-bucket-on-Google-Cloud-Storage"><a href="#Create-bucket-on-Google-Cloud-Storage" class="headerlink" title="Create bucket on Google Cloud Storage"></a>Create bucket on Google Cloud Storage</h2><p><a href="https://console.cloud.google.com/storage" target="_blank" rel="noopener">https://console.cloud.google.com/storage</a></p>
<img width="1674" alt="cloud storage" src="https://user-images.githubusercontent.com/2284279/68121645-8d7b4c80-ff08-11e9-93f6-56c6b3f46f41.png">

<h2 id="Create-dataset-by-uploading-images-to-Google-AutoML-Vision"><a href="#Create-dataset-by-uploading-images-to-Google-AutoML-Vision" class="headerlink" title="Create dataset by uploading images to Google AutoML Vision"></a>Create dataset by uploading images to Google AutoML Vision</h2><p><a href="https://console.cloud.google.com/vision" target="_blank" rel="noopener">https://console.cloud.google.com/vision</a></p>
<img width="1239" alt="automl dataset" src="https://user-images.githubusercontent.com/2284279/68121669-9ff58600-ff08-11e9-95e0-20c6fa8e9cfa.png">

<img width="1675" alt="automl images" src="https://user-images.githubusercontent.com/2284279/68121894-404baa80-ff09-11e9-97ff-a2cd61167d38.png">

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/cloud/">cloud</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/machine-learning/">machine learning</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-get-Binding-via-dollar-prefix-in-SwiftUI"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-get-Binding-via-dollar-prefix-in-SwiftUI/">How to get Binding via dollar prefix in SwiftUI</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-get-Binding-via-dollar-prefix-in-SwiftUI/" class="article-date">
	  <time datetime="2019-11-02T22:46:18.000Z" itemprop="datePublished">November 2, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/488" target="_blank" rel="noopener">#488</a></strong></p>
<p>The dollar is not a prefix, it seems to be a generated code for property wrapper, and each kind of property wrapper can determine which value it return via this dollar sign</p>
<p><code>State</code> and <code>ObservedObject</code> are popular property wrappers in SwiftUI</p>
<h2 id="State"><a href="#State" class="headerlink" title="State"></a>State</h2><p>Read <a href="https://developer.apple.com/documentation/swiftui/state" target="_blank" rel="noopener">State</a></p>
<blockquote>
<p>A persistent value of a given type, through which a view reads and monitors the value.</p>
</blockquote>
<p>If we have a simple State, we can access its 3 forms</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@<span class="type">State</span> <span class="keyword">private</span> <span class="keyword">var</span> image: <span class="type">UIImage</span></span><br></pre></td></tr></table></figure>

<p>and here is what </p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">image <span class="comment">// UIImage</span></span><br><span class="line">_image <span class="comment">// State&lt;UIImage&gt;</span></span><br><span class="line">$image <span class="comment">// Binding&lt;UIImage&gt;</span></span><br></pre></td></tr></table></figure>

<p>Also, with State, we can access <code>Binding</code> via <code>projectedValue</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">_image.projectedValue // Binding&lt;UIImage&gt;</span><br></pre></td></tr></table></figure>

<h2 id="ObservableObject"><a href="#ObservableObject" class="headerlink" title="ObservableObject"></a>ObservableObject</h2><p>Read <a href="https://developer.apple.com/documentation/swiftui/observedobject" target="_blank" rel="noopener">ObservedObject</a></p>
<p>For a simple <code>ObservableObject</code>, we can see its 3 forms</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ViewModel</span>: <span class="title">ObservableObject</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> objectWillChange = <span class="type">ObservableObjectPublisher</span>()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> image: <span class="type">UIImage?</span> &#123;</span><br><span class="line">        <span class="keyword">didSet</span> &#123;</span><br><span class="line">            objectWillChange.send()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@<span class="type">ObservedObject</span> <span class="keyword">var</span> viewModel: <span class="type">ViewModel</span> = <span class="type">ViewModel</span>()</span><br></pre></td></tr></table></figure>

<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">viewModel <span class="comment">// ViewModel</span></span><br><span class="line">_viewModel <span class="comment">// ObservedObject&lt;ViewModel&gt;</span></span><br><span class="line">$viewModel <span class="comment">// ObservedObject&lt;ViewModel&gt;.Wrapper</span></span><br></pre></td></tr></table></figure>

<p>If we view the source code of <code>ObservableObject</code>, we can see its <code>Wrapper</code> which uses <code>dynamicMemberLookup</code> to provide <code>Binding</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">@propertyWrapper <span class="keyword">public</span> <span class="class"><span class="keyword">struct</span> <span class="title">ObservedObject</span>&lt;<span class="title">ObjectType</span>&gt; : <span class="title">DynamicProperty</span> <span class="title">where</span> <span class="title">ObjectType</span> : <span class="title">ObservableObject</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/// A wrapper of the underlying `ObservableObject` that can create</span></span><br><span class="line">    <span class="comment">/// `Binding`s to its properties using dynamic member lookup.</span></span><br><span class="line">    @dynamicMemberLookup <span class="keyword">public</span> <span class="class"><span class="keyword">struct</span> <span class="title">Wrapper</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/// Creates a `Binding` to a value semantic property of a</span></span><br><span class="line">        <span class="comment">/// reference type.</span></span><br><span class="line">        <span class="comment">///</span></span><br><span class="line">        <span class="comment">/// If `Value` is not value semantic, the updating behavior for</span></span><br><span class="line">        <span class="comment">/// any views that make use of the resulting `Binding` is</span></span><br><span class="line">        <span class="comment">/// unspecified.</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">subscript</span>&lt;<span class="type">Subject</span>&gt;(dynamicMember keyPath: <span class="type">ReferenceWritableKeyPath</span>&lt;<span class="type">ObjectType</span>, <span class="type">Subject</span>&gt;) -&gt; <span class="type">Binding</span>&lt;<span class="type">Subject</span>&gt; &#123; <span class="keyword">get</span> &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">init</span>(initialValue: <span class="type">ObjectType</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">init</span>(wrappedValue: <span class="type">ObjectType</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">var</span> wrappedValue: <span class="type">ObjectType</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">var</span> projectedValue: <span class="type">ObservedObject</span>&lt;<span class="type">ObjectType</span>&gt;.<span class="type">Wrapper</span> &#123; <span class="keyword">get</span> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Derived-State"><a href="#Derived-State" class="headerlink" title="Derived State"></a>Derived State</h2><p>If we have a struct with <code>@State</code> in a SwiftUI view, we can access its property as Binding. This derived state mechanism is done via Dynamic keypath member lookup  feature of Swift 5.1</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">ViewModel</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> image: <span class="type">UIImage?</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">MainView</span>: <span class="title">View</span> </span>&#123;</span><br><span class="line">    @<span class="type">State</span> <span class="keyword">private</span> <span class="keyword">var</span> viewModel: <span class="type">ViewModel</span> = <span class="type">ViewModel</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Take a look at the interface of <code>Binding</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/// A value and a means to mutate it.</span></span><br><span class="line"><span class="meta">@available</span>(iOS <span class="number">13.0</span>, <span class="type">OSX</span> <span class="number">10.15</span>, tvOS <span class="number">13.0</span>, watchOS <span class="number">6.0</span>, *)</span><br><span class="line">@propertyWrapper @dynamicMemberLookup <span class="keyword">public</span> <span class="class"><span class="keyword">struct</span> <span class="title">Binding</span>&lt;<span class="title">Value</span>&gt; </span>&#123;</span><br><span class="line">    <span class="comment">/// Creates a new `Binding` focused on `Subject` using a key path.</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">subscript</span>&lt;<span class="type">Subject</span>&gt;(dynamicMember keyPath: <span class="type">WritableKeyPath</span>&lt;<span class="type">Value</span>, <span class="type">Subject</span>&gt;) -&gt; <span class="type">Binding</span>&lt;<span class="type">Subject</span>&gt; &#123; <span class="keyword">get</span> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>So if use <code>$viewModel.image</code> we can access its property as Binding</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">viewModel.image <span class="comment">// UIImage?</span></span><br><span class="line">$viewModel.image <span class="comment">// Binding&lt;UIImage?&gt;</span></span><br><span class="line">$viewModel.$image <span class="comment">// Value of type 'ViewModel' has no member '$image'</span></span><br></pre></td></tr></table></figure>

<h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p>So now we know how to get <code>Binding</code> from <code>State</code> and <code>ObservableObject</code>, and the mysterious dollar sign. These are both convenient but confusing at first, but if we use it more, it will make more sense and hopefully we can learn to do the same for our own property wrappers</p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swiftUI/">swiftUI</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-modify-state-from-state-in-SwiftUI"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-modify-state-from-state-in-SwiftUI/">How to modify state from state in SwiftUI</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-modify-state-from-state-in-SwiftUI/" class="article-date">
	  <time datetime="2019-11-02T22:09:43.000Z" itemprop="datePublished">November 2, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/487" target="_blank" rel="noopener">#487</a></strong></p>
<p>In case we have to modify state when another state is known, we can encapsulate all those states in <code>ObservableObject</code> and use <code>onReceive</code> to check the state we want to act on.</p>
<p>See code <a href="https://github.com/onmyway133/Avengers/blob/master/Avengers/Features/MainView.swift" target="_blank" rel="noopener">Avengers</a></p>
<p>If we were to modify state from within <code>body</code> function call, we will get warnings</p>
<blockquote>
<p>Modifying state during view update, this will cause undefined behavior.</p>
</blockquote>
<p>This is similar to the warning when we change state inside <code>render</code> in React</p>
<p>For example, when we get an image, we want to do some logic based on that image and modify result state. Here we use <code>var objectWillChange = ObservableObjectPublisher()</code> to notify state change, and because <code>onReceive</code> requires <code>Publisher</code>, we use <code>let imagePublisher = PassthroughSubject&lt;UIImage, Never&gt;()</code></p>
<p>Note that we use <code>$</code> prefix from a variable to form <code>Binding</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> SwiftUI</span><br><span class="line"><span class="keyword">import</span> Combine</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ViewModel</span>: <span class="title">ObservableObject</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> objectWillChange = <span class="type">ObservableObjectPublisher</span>()</span><br><span class="line">    <span class="keyword">let</span> imagePublisher = <span class="type">PassthroughSubject</span>&lt;<span class="type">UIImage</span>, <span class="type">Never</span>&gt;()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> image: <span class="type">UIImage?</span> &#123;</span><br><span class="line">        <span class="keyword">willSet</span> &#123;</span><br><span class="line">            objectWillChange.send()</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">let</span> image = image &#123;</span><br><span class="line">                imagePublisher.send(image)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> isDetecting: <span class="type">Bool</span> = <span class="literal">false</span> &#123;</span><br><span class="line">        <span class="keyword">willSet</span> &#123;</span><br><span class="line">            objectWillChange.send()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> result: <span class="type">String?</span> &#123;</span><br><span class="line">        <span class="keyword">willSet</span> &#123;</span><br><span class="line">            objectWillChange.send()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">MainView</span>: <span class="title">View</span> </span>&#123;</span><br><span class="line">    @<span class="type">State</span> <span class="keyword">private</span> <span class="keyword">var</span> showImagePicker: <span class="type">Bool</span> = <span class="literal">false</span></span><br><span class="line">    @<span class="type">ObservedObject</span> <span class="keyword">var</span> viewModel: <span class="type">ViewModel</span> = <span class="type">ViewModel</span>()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">let</span> detector = <span class="type">Detector</span>()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> body: some <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">VStack</span> &#123;</span><br><span class="line">            makeImage()</span><br><span class="line">                .styleFit()</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> viewModel.isDetecting &#123;</span><br><span class="line">                <span class="type">ActivityIndicator</span>(</span><br><span class="line">                    isAnimating: $viewModel.isDetecting,</span><br><span class="line">                    style: .large</span><br><span class="line">                )</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            makeResult()</span><br><span class="line"></span><br><span class="line">            <span class="type">Button</span>(action: &#123;</span><br><span class="line">                <span class="keyword">self</span>.showImagePicker.toggle()</span><br><span class="line">            &#125;, label: &#123;</span><br><span class="line">                <span class="type">Text</span>(<span class="string">"Choose image"</span>)</span><br><span class="line">            &#125;)</span><br><span class="line">            .sheet(isPresented: $showImagePicker, content: &#123;</span><br><span class="line">                <span class="type">ImagePicker</span>(image: <span class="keyword">self</span>.$viewModel.image, isPresented: <span class="keyword">self</span>.$showImagePicker)</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">        .onReceive(viewModel.imagePublisher, perform: &#123; image <span class="keyword">in</span></span><br><span class="line">            <span class="keyword">self</span>.detect(image: image)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">makeImage</span><span class="params">()</span></span> -&gt; <span class="type">Image</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">let</span> image = <span class="keyword">self</span>.viewModel.image &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="type">Image</span>(uiImage: image)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="type">Image</span>(<span class="string">"placeholder"</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">makeResult</span><span class="params">()</span></span> -&gt; <span class="type">Text</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">let</span> result = viewModel.result &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="type">Text</span>(result)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="type">Text</span>(<span class="string">""</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">detect</span><span class="params">(image: UIImage)</span></span> &#123;</span><br><span class="line">        viewModel.isDetecting = <span class="literal">true</span></span><br><span class="line">        <span class="keyword">try</span>? detector.detect(image: image, completion: &#123; result <span class="keyword">in</span></span><br><span class="line">            <span class="keyword">switch</span> result &#123;</span><br><span class="line">            <span class="keyword">case</span> .success(<span class="keyword">let</span> string):</span><br><span class="line">                <span class="keyword">self</span>.viewModel.result = string</span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">                <span class="keyword">self</span>.viewModel.result = <span class="string">""</span></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">self</span>.viewModel.isDetecting = <span class="literal">false</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Use-Published"><a href="#Use-Published" class="headerlink" title="Use Published"></a>Use Published</h2><p>See <a href="https://developer.apple.com/documentation/combine/observableobject" target="_blank" rel="noopener">ObservableObject</a> </p>
<blockquote>
<p>By default an ObservableObject synthesizes an objectWillChange publisher that emits the changed value before any of its @Published properties changes.</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Contact</span>: <span class="title">ObservableObject</span> </span>&#123;</span><br><span class="line">    @<span class="type">Published</span> <span class="keyword">var</span> name: <span class="type">String</span></span><br><span class="line">    @<span class="type">Published</span> <span class="keyword">var</span> age: <span class="type">Int</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">init</span>(name: <span class="type">String</span>, age: <span class="type">Int</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.name = name</span><br><span class="line">        <span class="keyword">self</span>.age = age</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">haveBirthday</span><span class="params">()</span></span> -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">        age += <span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> age</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> john = <span class="type">Contact</span>(name: <span class="string">"John Appleseed"</span>, age: <span class="number">24</span>)</span><br><span class="line">john.objectWillChange.sink &#123; <span class="number">_</span> <span class="keyword">in</span> <span class="built_in">print</span>(<span class="string">"\(john.age) will change"</span>) &#125;</span><br><span class="line"><span class="built_in">print</span>(john.haveBirthday())</span><br><span class="line"><span class="comment">// Prints "24 will change"</span></span><br><span class="line"><span class="comment">// Prints "25"</span></span><br></pre></td></tr></table></figure>

<p>We should use <code>@Published</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ViewModel</span>: <span class="title">ObservableObject</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> objectWillChange = <span class="type">ObservableObjectPublisher</span>()</span><br><span class="line"></span><br><span class="line">    @<span class="type">Published</span> <span class="keyword">var</span> image: <span class="type">UIImage?</span></span><br><span class="line">    @<span class="type">Published</span> <span class="keyword">var</span> isDetecting: <span class="type">Bool</span> = <span class="literal">false</span></span><br><span class="line">    @<span class="type">Published</span> <span class="keyword">var</span> result: <span class="type">String?</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Note that we should not use <code>objectWillChange</code> as</p>
<blockquote>
<p>By default an ObservableObject synthesizes an objectWillChange publisher that emits the changed value before any of its @Published properties changes.</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">.onReceive(viewModel.$image, perform: &#123; image <span class="keyword">in</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">let</span> image = image &#123;</span><br><span class="line">        <span class="keyword">self</span>.detect(image: image)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>We need to manually notify using <code>objectWillChange</code> !! Maybe this is a SwiftUI bug</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">detect</span><span class="params">(image: UIImage)</span></span> &#123;</span><br><span class="line">    viewModel.isDetecting = <span class="literal">true</span></span><br><span class="line">    <span class="keyword">try</span>? detector.detect(image: image, completion: &#123; result <span class="keyword">in</span></span><br><span class="line">        <span class="keyword">switch</span> result &#123;</span><br><span class="line">        <span class="keyword">case</span> .success(<span class="keyword">let</span> string):</span><br><span class="line">            <span class="keyword">self</span>.viewModel.result = string</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            <span class="keyword">self</span>.viewModel.result = <span class="string">""</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">self</span>.viewModel.isDetecting = <span class="literal">false</span></span><br><span class="line">        <span class="keyword">self</span>.viewModel.objectWillChange.send()</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>If we remove the declaration of <code>var objectWillChange = ObservableObjectPublisher()</code>, then it works automatically</p>
<h2 id="objectWillChange"><a href="#objectWillChange" class="headerlink" title="objectWillChange"></a>objectWillChange</h2><p>Learn more about the history of <code>objectWillChange</code></p>
<p><a href="https://twitter.com/luka_bernardi/status/1155944329363349504?lang=no" target="_blank" rel="noopener">https://twitter.com/luka_bernardi/status/1155944329363349504?lang=no</a></p>
<blockquote>
<p>In Beta 5 ObjectBinding is now defined in Combine as ObservableObject (the property wrapper is now @ObservedObject). There is also a new property wrapper @Published where we automatically synthesize the objectWillChange publisher and call it on willSet.</p>
</blockquote>
<blockquote>
<p>It’ll objectWillChange.send() in the property willSet it’s defined on.<br>It just removes the boilerplate that you had to write before but otherwise behaves the same.</p>
</blockquote>
<h2 id="State-vs-ObservedObject"><a href="#State-vs-ObservedObject" class="headerlink" title="State vs ObservedObject"></a>State vs ObservedObject</h2><p>If we were to use <code>@State</code> instead of <code>@ObservedObject</code>, it still compiles, but after we pick an image, which should change the <code>image</code> property of our <code>viewModel</code>, the view is not reloaded.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">MainView</span>: <span class="title">View</span> </span>&#123;</span><br><span class="line">    @<span class="type">State</span> <span class="keyword">private</span> <span class="keyword">var</span> showImagePicker: <span class="type">Bool</span> = <span class="literal">false</span></span><br><span class="line">    @<span class="type">State</span> <span class="keyword">private</span> <span class="keyword">var</span> viewModel: <span class="type">ViewModel</span> = <span class="type">ViewModel</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Note that we can’t use <code>@Published</code> inside <code>struct</code></p>
<blockquote>
<p>‘wrappedValue’ is unavailable: @Published is only available on properties of classes</p>
</blockquote>
<p><code>@State</code> is for internal usage within a view, and should use struct and primitive  data structure. SwiftUI keeps <code>@State</code> property in a separate memory place to preserve it during many reload cycles.</p>
<p><code>@Observabled</code> is meant for sharing reference objects across views</p>
<p>To to use <code>@State</code> we should use struct, and to use <code>onReceive</code> we should introduce another <code>Publisher</code> like <code>imagePublisher</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">ViewModel</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> imagePublisher = <span class="type">PassthroughSubject</span>&lt;<span class="type">UIImage?</span>, <span class="type">Never</span>&gt;()</span><br><span class="line">    <span class="keyword">var</span> image: <span class="type">UIImage?</span> &#123;</span><br><span class="line">        <span class="keyword">didSet</span> &#123;</span><br><span class="line">            imagePublisher.send(image)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> isDetecting: <span class="type">Bool</span> = <span class="literal">false</span></span><br><span class="line">    <span class="keyword">var</span> result: <span class="type">String?</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">MainView</span>: <span class="title">View</span> </span>&#123;</span><br><span class="line">    @<span class="type">State</span> <span class="keyword">private</span> <span class="keyword">var</span> showImagePicker: <span class="type">Bool</span> = <span class="literal">false</span></span><br><span class="line">    @<span class="type">State</span> <span class="keyword">private</span> <span class="keyword">var</span> viewModel: <span class="type">ViewModel</span> = <span class="type">ViewModel</span>()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">let</span> detector = <span class="type">Detector</span>()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> body: some <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">VStack</span> &#123;</span><br><span class="line">            makeImage()</span><br><span class="line">                .styleFit()</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> viewModel.isDetecting &#123;</span><br><span class="line">                <span class="type">ActivityIndicator</span>(</span><br><span class="line">                    isAnimating: $viewModel.isDetecting,</span><br><span class="line">                    style: .large</span><br><span class="line">                )</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            makeResult()</span><br><span class="line"></span><br><span class="line">            <span class="type">Button</span>(action: &#123;</span><br><span class="line">                <span class="keyword">self</span>.showImagePicker.toggle()</span><br><span class="line">            &#125;, label: &#123;</span><br><span class="line">                <span class="type">Text</span>(<span class="string">"Choose image"</span>)</span><br><span class="line">            &#125;)</span><br><span class="line">            .sheet(isPresented: $showImagePicker, content: &#123;</span><br><span class="line">                <span class="type">ImagePicker</span>(image: <span class="keyword">self</span>.$viewModel.image, isPresented: <span class="keyword">self</span>.$showImagePicker)</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">        .onReceive(viewModel.imagePublisher, perform: &#123; image <span class="keyword">in</span></span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">let</span> image = image &#123;</span><br><span class="line">                <span class="keyword">self</span>.detect(image: image)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>The dollar sign for <code>State</code> to access nested properties, like <code>$viewModel.image</code> is called derived Binding, and is achieved via Keypath member lookup feature of Swift 5.1.</p>
<p>Take a look at <code>projectedValue: Binding&lt;Value&gt;</code> from <code>State</code> and <code>subscript&lt;Subject&gt;(dynamicMember keyPath</code> from <code>Binding</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@available</span>(iOS <span class="number">13.0</span>, <span class="type">OSX</span> <span class="number">10.15</span>, tvOS <span class="number">13.0</span>, watchOS <span class="number">6.0</span>, *)</span><br><span class="line">@propertyWrapper <span class="keyword">public</span> <span class="class"><span class="keyword">struct</span> <span class="title">State</span>&lt;<span class="title">Value</span>&gt; : <span class="title">DynamicProperty</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/// Initialize with the provided initial value.</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">init</span>(wrappedValue value: <span class="type">Value</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">/// Initialize with the provided initial value.</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">init</span>(initialValue value: <span class="type">Value</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">/// The current state value.</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">var</span> wrappedValue: <span class="type">Value</span> &#123; <span class="keyword">get</span> <span class="keyword">nonmutating</span> <span class="keyword">set</span> &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/// Produces the binding referencing this state value</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">var</span> projectedValue: <span class="type">Binding</span>&lt;<span class="type">Value</span>&gt; &#123; <span class="keyword">get</span> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/// A value and a means to mutate it.</span></span><br><span class="line"><span class="meta">@available</span>(iOS <span class="number">13.0</span>, <span class="type">OSX</span> <span class="number">10.15</span>, tvOS <span class="number">13.0</span>, watchOS <span class="number">6.0</span>, *)</span><br><span class="line">@propertyWrapper @dynamicMemberLookup <span class="keyword">public</span> <span class="class"><span class="keyword">struct</span> <span class="title">Binding</span>&lt;<span class="title">Value</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/// The transaction used for any changes to the binding's value.</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">var</span> transaction: <span class="type">Transaction</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/// Initializes from functions to read and write the value.</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">init</span>(<span class="keyword">get</span>: @escaping () -&gt; <span class="type">Value</span>, <span class="keyword">set</span>: @escaping (<span class="type">Value</span>) -&gt; <span class="type">Void</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">/// Initializes from functions to read and write the value.</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">init</span>(<span class="keyword">get</span>: @escaping () -&gt; <span class="type">Value</span>, <span class="keyword">set</span>: @escaping (<span class="type">Value</span>, <span class="type">Transaction</span>) -&gt; <span class="type">Void</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">/// Creates a binding with an immutable `value`.</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="function"><span class="keyword">func</span> <span class="title">constant</span><span class="params">(<span class="number">_</span> value: Value)</span></span> -&gt; <span class="type">Binding</span>&lt;<span class="type">Value</span>&gt;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/// The value referenced by the binding. Assignments to the value</span></span><br><span class="line">    <span class="comment">/// will be immediately visible on reading (assuming the binding</span></span><br><span class="line">    <span class="comment">/// represents a mutable location), but the view changes they cause</span></span><br><span class="line">    <span class="comment">/// may be processed asynchronously to the assignment.</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">var</span> wrappedValue: <span class="type">Value</span> &#123; <span class="keyword">get</span> <span class="keyword">nonmutating</span> <span class="keyword">set</span> &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/// The binding value, as "unwrapped" by accessing `$foo` on a `@Binding` property.</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">var</span> projectedValue: <span class="type">Binding</span>&lt;<span class="type">Value</span>&gt; &#123; <span class="keyword">get</span> &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/// Creates a new `Binding` focused on `Subject` using a key path.</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">subscript</span>&lt;<span class="type">Subject</span>&gt;(dynamicMember keyPath: <span class="type">WritableKeyPath</span>&lt;<span class="type">Value</span>, <span class="type">Subject</span>&gt;) -&gt; <span class="type">Binding</span>&lt;<span class="type">Subject</span>&gt; &#123; <span class="keyword">get</span> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Read-more"><a href="#Read-more" class="headerlink" title="Read more"></a>Read more</h2><ul>
<li><a href="https://www.freecodecamp.org/news/get-pro-with-react-setstate-in-10-minutes-d38251d1c781/" target="_blank" rel="noopener">https://www.freecodecamp.org/news/get-pro-with-react-setstate-in-10-minutes-d38251d1c781/</a></li>
<li><a href="https://stackoverflow.com/questions/56551131/what-does-the-dollar-sign-do-in-this-example" target="_blank" rel="noopener">https://stackoverflow.com/questions/56551131/what-does-the-dollar-sign-do-in-this-example</a></li>
<li><a href="https://stackoverflow.com/questions/44037611/how-to-avoid-setstate-inside-render-when-state-depends-on-render?rq=1" target="_blank" rel="noopener">https://stackoverflow.com/questions/44037611/how-to-avoid-setstate-inside-render-when-state-depends-on-render?rq=1</a></li>
<li><a href="https://stackoverflow.com/questions/57459727/why-an-observedobject-array-is-not-updated-in-my-swiftui-application" target="_blank" rel="noopener">https://stackoverflow.com/questions/57459727/why-an-observedobject-array-is-not-updated-in-my-swiftui-application</a></li>
<li><a href="https://www.pointfree.co/blog/posts/30-swiftui-and-state-management-corrections" target="_blank" rel="noopener">https://www.pointfree.co/blog/posts/30-swiftui-and-state-management-corrections</a></li>
<li><a href="https://www.hackingwithswift.com/quick-start/swiftui/whats-the-difference-between-observedobject-state-and-environmentobject" target="_blank" rel="noopener">https://www.hackingwithswift.com/quick-start/swiftui/whats-the-difference-between-observedobject-state-and-environmentobject</a></li>
<li><a href="https://swiftui-lab.com/state-changes/" target="_blank" rel="noopener">Safely Updating The View State</a></li>
</ul>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swiftUI/">swiftUI</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-show-loading-indicator-in-SwiftUI"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-show-loading-indicator-in-SwiftUI/">How to show loading indicator in SwiftUI</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-show-loading-indicator-in-SwiftUI/" class="article-date">
	  <time datetime="2019-11-02T21:02:33.000Z" itemprop="datePublished">November 2, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/486" target="_blank" rel="noopener">#486</a></strong></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> SwiftUI</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">ActivityIndicator</span>: <span class="title">UIViewRepresentable</span> </span>&#123;</span><br><span class="line">    @<span class="type">Binding</span> <span class="keyword">var</span> isAnimating: <span class="type">Bool</span></span><br><span class="line">    <span class="keyword">let</span> style: <span class="type">UIActivityIndicatorView</span>.<span class="type">Style</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">makeUIView</span><span class="params">(context: UIViewRepresentableContext&lt;ActivityIndicator&gt;)</span></span> -&gt; <span class="type">UIActivityIndicatorView</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="type">UIActivityIndicatorView</span>(style: style)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">updateUIView</span><span class="params">(<span class="number">_</span> uiView: UIActivityIndicatorView, context: UIViewRepresentableContext&lt;ActivityIndicator&gt;)</span></span> &#123;</span><br><span class="line">        isAnimating ? uiView.startAnimating() : uiView.stopAnimating()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">ActivityIndicator_Previews</span>: <span class="title">PreviewProvider</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">var</span> previews: some <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">ActivityIndicator</span>(isAnimating: .constant(<span class="literal">true</span>), style: .large)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swiftUI/">swiftUI</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-show-image-picker-in-SwiftUI"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-show-image-picker-in-SwiftUI/">How to show image picker in SwiftUI</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-show-image-picker-in-SwiftUI/" class="article-date">
	  <time datetime="2019-11-02T20:41:52.000Z" itemprop="datePublished">November 2, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/485" target="_blank" rel="noopener">#485</a></strong></p>
<p>The easiest way to show image picker in iOS is to use <code>UIImagePickerController</code>, and we can bridge that to SwiftUI via <code>UIViewControllerRepresentable</code></p>
<h2 id="First-attempt-use-Environment"><a href="#First-attempt-use-Environment" class="headerlink" title="First attempt, use Environment"></a>First attempt, use Environment</h2><p>We conform to <code>UIViewControllerRepresentable</code> and make a Coordinator, which is the recommended way to manage the bridging with <code>UIViewController</code>.</p>
<p>There’s some built in environment property we can use, one of those is <code>presentationMode</code> where we can call <code>dismiss</code> to dismiss the modal.</p>
<p>My first attempt looks like below</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> SwiftUI</span><br><span class="line"><span class="keyword">import</span> UIKit</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">struct</span> <span class="title">ImagePicker</span>: <span class="title">UIViewControllerRepresentable</span> </span>&#123;</span><br><span class="line">    @<span class="type">Environment</span>(\.presentationMode) <span class="keyword">private</span> <span class="keyword">var</span> presentationMode</span><br><span class="line">    @<span class="type">Binding</span> <span class="keyword">var</span> image: <span class="type">UIImage?</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">makeCoordinator</span><span class="params">()</span></span> -&gt; <span class="type">ImagePicker</span>.<span class="type">Coordinator</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="type">ImagePicker</span>.<span class="type">Coordinator</span>(</span><br><span class="line">            presentationMode: presentationMode,</span><br><span class="line">            image: $image</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">makeUIViewController</span><span class="params">(context: UIViewControllerRepresentableContext&lt;ImagePicker&gt;)</span></span> -&gt; <span class="type">UIImagePickerController</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> controller = <span class="type">UIImagePickerController</span>()</span><br><span class="line">        controller.delegate = context.coordinator</span><br><span class="line">        <span class="keyword">return</span> controller</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">updateUIViewController</span><span class="params">(<span class="number">_</span> uiViewController: UIImagePickerController, context: UIViewControllerRepresentableContext&lt;ImagePicker&gt;)</span></span> &#123;</span><br><span class="line">        <span class="comment">// No op</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">extension</span> <span class="title">ImagePicker</span> </span>&#123;</span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Coordinator</span>: <span class="title">NSObject</span>, <span class="title">UINavigationControllerDelegate</span> </span>&#123;</span><br><span class="line">        @<span class="type">Binding</span> <span class="keyword">var</span> presentationMode: <span class="type">PresentationMode</span></span><br><span class="line">        @<span class="type">Binding</span> <span class="keyword">var</span> image: <span class="type">UIImage?</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">init</span>(presentationMode: <span class="type">Binding</span>&lt;<span class="type">PresentationMode</span>&gt;, image: <span class="type">Binding</span>&lt;<span class="type">UIImage?</span>&gt;) &#123;</span><br><span class="line">            <span class="keyword">self</span>._presentationMode = presentationMode</span><br><span class="line">            <span class="keyword">self</span>._image = image</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">ImagePicker</span>.<span class="title">Coordinator</span>: <span class="title">UIImagePickerControllerDelegate</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">imagePickerController</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">        <span class="number">_</span> picker: UIImagePickerController,</span></span></span><br><span class="line"><span class="function"><span class="params">        didFinishPickingMediaWithInfo info: [UIImagePickerController.InfoKey: <span class="keyword">Any</span>])</span></span> &#123;</span><br><span class="line">        <span class="keyword">self</span>.image = info[<span class="type">UIImagePickerController</span>.<span class="type">InfoKey</span>.originalImage] <span class="keyword">as</span>? <span class="type">UIImage</span></span><br><span class="line">        presentationMode.dismiss()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">imagePickerControllerDidCancel</span><span class="params">(<span class="number">_</span> picker: UIImagePickerController)</span></span> &#123;</span><br><span class="line">        presentationMode.dismiss()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Signatures"><a href="#Signatures" class="headerlink" title="Signatures"></a>Signatures</h3><p>We need to be aware of the types of these property wrappers</p>
<p>Where we declare environment, <code>presentationMode</code> is of type <code>Binding&lt;PresentationMode&gt;</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@<span class="type">Environment</span>(\.presentationMode) <span class="keyword">private</span> <span class="keyword">var</span> presentationMode</span><br></pre></td></tr></table></figure>

<p>Given a Binding declaration, for example <code>@Binding var image: UIImage?</code>, <code>image</code> is of type <code>UIImage?</code> but <code>$image</code> is <code>Binding&lt;UIImage?&gt;</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">makeCoordinator</span><span class="params">()</span></span> -&gt; <span class="type">ImagePicker</span>.<span class="type">Coordinator</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="type">ImagePicker</span>.<span class="type">Coordinator</span>(</span><br><span class="line">        image: $image,</span><br><span class="line">        isPresented: $isPresented</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>When we want to assign to variables in <code>init</code>, we use <code>_image</code> to use mutable <code>Binding&lt;UIImage?&gt;</code> because <code>self.$image</code> gives us immutable <code>Binding&lt;UIImage?&gt;</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Coordinator</span>: <span class="title">NSObject</span>, <span class="title">UINavigationControllerDelegate</span> </span>&#123;</span><br><span class="line">    @<span class="type">Binding</span> <span class="keyword">var</span> presentationMode: <span class="type">PresentationMode</span></span><br><span class="line">    @<span class="type">Binding</span> <span class="keyword">var</span> image: <span class="type">UIImage?</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">init</span>(presentationMode: <span class="type">Binding</span>&lt;<span class="type">PresentationMode</span>&gt;, image: <span class="type">Binding</span>&lt;<span class="type">UIImage?</span>&gt;) &#123;</span><br><span class="line">        <span class="keyword">self</span>._presentationMode = presentationMode</span><br><span class="line">        <span class="keyword">self</span>._image = image</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="How-to-use"><a href="#How-to-use" class="headerlink" title="How to use"></a>How to use</h3><p>To show modal, we use <code>sheet</code> and use a state <code>@State var showImagePicker: Bool = false</code> to control its  presentation</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Button</span>(action: &#123;</span><br><span class="line">    <span class="keyword">self</span>.showImagePicker.toggle()</span><br><span class="line">&#125;, label: &#123;</span><br><span class="line">    <span class="type">Text</span>(<span class="string">"Choose image"</span>)</span><br><span class="line">&#125;)</span><br><span class="line">.sheet(isPresented: $showImagePicker, content: &#123;</span><br><span class="line">    <span class="type">ImagePicker</span>(image: <span class="keyword">self</span>.$image)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="Environment-outside-body"><a href="#Environment-outside-body" class="headerlink" title="Environment outside body"></a>Environment outside body</h3><p>If we run the above code, it will crash because of we access environment value <code>presentationMode</code> in <code>makeCoordinator</code> and this is outside <code>body</code></p>
<blockquote>
<p>Fatal error: Reading Environment&lt;Binding<presentationmode>&gt; outside View.body</presentationmode></p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">makeCoordinator</span><span class="params">()</span></span> -&gt; <span class="type">ImagePicker</span>.<span class="type">Coordinator</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="type">ImagePicker</span>.<span class="type">Coordinator</span>(</span><br><span class="line">        presentationMode: presentationMode,</span><br><span class="line">        image: $image</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Second-attempt-pass-closure"><a href="#Second-attempt-pass-closure" class="headerlink" title="Second attempt, pass closure"></a>Second attempt, pass closure</h2><p>So instead of passing environment <code>presentationMode</code>, we can pass closure, just like in React where we pass functions to child component.</p>
<p>So <code>ImagePicker</code> can just accept a closure called <code>onDone</code>, and the component that uses it can do the dismissal.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Button</span>(action: &#123;</span><br><span class="line">    <span class="keyword">self</span>.showImagePicker.toggle()</span><br><span class="line">&#125;, label: &#123;</span><br><span class="line">    <span class="type">Text</span>(<span class="string">"Choose image"</span>)</span><br><span class="line">&#125;)</span><br><span class="line">.sheet(isPresented: $showImagePicker, content: &#123;</span><br><span class="line">    <span class="type">ImagePicker</span>(image: <span class="keyword">self</span>.$image, onDone: &#123;</span><br><span class="line">        <span class="keyword">self</span>.presentationMode.wrappedValue.dismiss()</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>Unfortunately, although the <code>onDone</code> gets called, the modal is not dismissed.</p>
<h2 id="Use-Binding-instead-of-Environment"><a href="#Use-Binding-instead-of-Environment" class="headerlink" title="Use Binding instead of Environment"></a>Use Binding instead of Environment</h2><p>Maybe there are betters way, but we can use Binding to replace usage of Environment.</p>
<p>We can do that by accepting <code>Binding</code> and change the <code>isPresented</code> state</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> SwiftUI</span><br><span class="line"><span class="keyword">import</span> UIKit</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">struct</span> <span class="title">ImagePicker</span>: <span class="title">UIViewControllerRepresentable</span> </span>&#123;</span><br><span class="line">    @<span class="type">Binding</span> <span class="keyword">var</span> image: <span class="type">UIImage?</span></span><br><span class="line">    @<span class="type">Binding</span> <span class="keyword">var</span> isPresented: <span class="type">Bool</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">makeCoordinator</span><span class="params">()</span></span> -&gt; <span class="type">ImagePicker</span>.<span class="type">Coordinator</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="type">ImagePicker</span>.<span class="type">Coordinator</span>(</span><br><span class="line">            image: $image,</span><br><span class="line">            isPresented: $isPresented</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">makeUIViewController</span><span class="params">(context: UIViewControllerRepresentableContext&lt;ImagePicker&gt;)</span></span> -&gt; <span class="type">UIImagePickerController</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> controller = <span class="type">UIImagePickerController</span>()</span><br><span class="line">        controller.delegate = context.coordinator</span><br><span class="line">        <span class="keyword">return</span> controller</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">updateUIViewController</span><span class="params">(<span class="number">_</span> uiViewController: UIImagePickerController, context: UIViewControllerRepresentableContext&lt;ImagePicker&gt;)</span></span> &#123;</span><br><span class="line">        <span class="comment">// No op</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">extension</span> <span class="title">ImagePicker</span> </span>&#123;</span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Coordinator</span>: <span class="title">NSObject</span>, <span class="title">UINavigationControllerDelegate</span> </span>&#123;</span><br><span class="line">        @<span class="type">Binding</span> <span class="keyword">var</span> isPresented: <span class="type">Bool</span></span><br><span class="line">        @<span class="type">Binding</span> <span class="keyword">var</span> image: <span class="type">UIImage?</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">init</span>(image: <span class="type">Binding</span>&lt;<span class="type">UIImage?</span>&gt;, isPresented: <span class="type">Binding</span>&lt;<span class="type">Bool</span>&gt;) &#123;</span><br><span class="line">            <span class="keyword">self</span>._image = image</span><br><span class="line">            <span class="keyword">self</span>._isPresented = isPresented</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">ImagePicker</span>.<span class="title">Coordinator</span>: <span class="title">UIImagePickerControllerDelegate</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">imagePickerController</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">        <span class="number">_</span> picker: UIImagePickerController,</span></span></span><br><span class="line"><span class="function"><span class="params">        didFinishPickingMediaWithInfo info: [UIImagePickerController.InfoKey: <span class="keyword">Any</span>])</span></span> &#123;</span><br><span class="line">        <span class="keyword">self</span>.image = info[<span class="type">UIImagePickerController</span>.<span class="type">InfoKey</span>.originalImage] <span class="keyword">as</span>? <span class="type">UIImage</span></span><br><span class="line">        isPresented = <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">imagePickerControllerDidCancel</span><span class="params">(<span class="number">_</span> picker: UIImagePickerController)</span></span> &#123;</span><br><span class="line">        isPresented = <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>How to use it</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Button</span>(action: &#123;</span><br><span class="line">    <span class="keyword">self</span>.showImagePicker.toggle()</span><br><span class="line">&#125;, label: &#123;</span><br><span class="line">    <span class="type">Text</span>(<span class="string">"Choose image"</span>)</span><br><span class="line">&#125;)</span><br><span class="line">.sheet(isPresented: $showImagePicker, content: &#123;</span><br><span class="line">    <span class="type">ImagePicker</span>(image: <span class="keyword">self</span>.$image, isPresented: <span class="keyword">self</span>.$showImagePicker)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="Pass-ImagePicker-to-Coordinator"><a href="#Pass-ImagePicker-to-Coordinator" class="headerlink" title="Pass ImagePicker to Coordinator"></a>Pass ImagePicker to Coordinator</h2><ul>
<li><a href="https://www.youtube.com/watch?v=Ek_r-7aRp3A" target="_blank" rel="noopener">Using coordinators to manage SwiftUI view controllers</a></li>
</ul>
<p>So that we can call <code>parent.presentationMode.wrappedValue.dismiss()</code></p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swift/">swift</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swiftUI/">swiftUI</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-add-monkey-test-to-iOS-apps"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-add-monkey-test-to-iOS-apps/">How to add monkey test to iOS apps</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-add-monkey-test-to-iOS-apps/" class="article-date">
	  <time datetime="2019-11-01T08:48:43.000Z" itemprop="datePublished">November 1, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/484" target="_blank" rel="noopener">#484</a></strong></p>
<p>Use <a href="https://github.com/zalando/SwiftMonkey" target="_blank" rel="noopener">SwiftMonkey</a> which adds random UITests gestures</p>
<p>Add to UITests target</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">target <span class="string">'MyAppUITests'</span> <span class="keyword">do</span></span><br><span class="line">  pod <span class="string">'R.swift'</span>, <span class="string">'~&gt; 5.0'</span></span><br><span class="line">  pod <span class="string">'SwiftMonkey'</span>, <span class="string">'~&gt; 2.1.0'</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<h2 id="Troubleshooting"><a href="#Troubleshooting" class="headerlink" title="Troubleshooting"></a>Troubleshooting</h2><h3 id="Failed-to-determine-hittability-of-Button"><a href="#Failed-to-determine-hittability-of-Button" class="headerlink" title="Failed to determine hittability of Button"></a>Failed to determine hittability of Button</h3><blockquote>
<p>Failed to determine hittability of Button: Unable to fetch parameterized attribute XC_kAXXCParameterizedAttributeConvertHostedViewPositionFromContext, remote interface does not have this capability.</p>
</blockquote>
<p>This happens when using SwiftMonkey and somewhere in our code uses <code>isHittable</code>, so best to avoid that by having isolated monkey test only</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> XCTest</span><br><span class="line"><span class="keyword">import</span> SwiftMonkey</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MonkeyTests</span>: <span class="title">XCTestCase</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> app: <span class="type">XCUIApplication!</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">setUp</span><span class="params">()</span></span> &#123;</span><br><span class="line">        continueAfterFailure = <span class="literal">false</span></span><br><span class="line">        app = <span class="type">XCUIApplication</span>()</span><br><span class="line">        app.launch()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">testMonkey</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">let</span> monkey = <span class="type">Monkey</span>(frame: app.frame)</span><br><span class="line">        monkey.addDefaultUIAutomationActions()</span><br><span class="line">        monkey.addXCTestTapAlertAction(interval: <span class="number">100</span>, application: app)</span><br><span class="line">        monkey.monkeyAround()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Another workaround is possibly use <code>addDefaultXCTestPublicActions</code> other than <code>addDefaultUIAutomationActions</code></p>
<h3 id="UI-Test-Activity"><a href="#UI-Test-Activity" class="headerlink" title="UI Test Activity:"></a>UI Test Activity:</h3><blockquote>
<p>Assertion Failure: MonkeyXCTest.swift:33: Failed to get matching snapshots: Timed out while evaluating UI query.</p>
</blockquote>
<p>This seems related to SwiftMonkey trying to snapshot. Workaround is to remove</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">monkey.addXCTestTapAlertAction(interval: <span class="number">100</span>, application: app)</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/">iOS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/testing/">testing</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-use-array-of-strings-in-ForEach-in-SwiftUI"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-use-array-of-strings-in-ForEach-in-SwiftUI/">How to use array of strings in ForEach in SwiftUI</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-use-array-of-strings-in-ForEach-in-SwiftUI/" class="article-date">
	  <time datetime="2019-10-31T11:15:42.000Z" itemprop="datePublished">October 31, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/483" target="_blank" rel="noopener">#483</a></strong></p>
<p>Every item in list must be uniquely identifiable</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">List</span> &#123;</span><br><span class="line">    <span class="type">ForEach</span>(books, id: \.bookId) &#123; book <span class="keyword">in</span></span><br><span class="line">        <span class="type">NavigationLink</span>(destination:</span><br><span class="line">            <span class="type">BookView</span>(book: book)</span><br><span class="line">                .navigationBarTitle(book.name)</span><br><span class="line">        ) &#123;</span><br><span class="line">            <span class="type">VStack</span> &#123;</span><br><span class="line">                <span class="type">Text</span>(book.name)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>In case of primitive, we can just provide <code>id</code> to conform to <code>Identifiable</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">String</span>: <span class="title">Identifiable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">var</span> id: <span class="type">String</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">self</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swift/">swift</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swiftUI/">swiftUI</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/3/">Prev</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><a class="page-number" href="/page/6/">6</a><span class="space">&hellip;</span><a class="page-number" href="/page/19/">19</a><a class="extend next" rel="next" href="/page/5/">Next</a>
  </nav>

</section>
          <aside id="sidebar">
  
    <div class="widget-wrap" style="margin: 20px 0;">
	<div id="search-form-wrap">

    <form class="search-form">
        <label style="width: 75%;">
            <span class="screen-reader-text">Search for:</span>
            <input type="search" class="search-field" style="height: 42px;" placeholder=" Search…" value="" name="s" title="Search for:">
        </label>
        <input type="submit" class="search-form-submit" value="Search">
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="Type something..."/>
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'Posts',
            PAGES: 'Pages',
            CATEGORIES: 'Categories',
            TAGS: 'Tags',
            UNTITLED: '(Untitled)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="/js/insight.js"></script>

</div>
</div>
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Ohayou</h3>
    <div class="widget widget_athemes_social_icons">

    	<ul class="clearfix widget-social-icons">   
    	
          
     			  <li><a href="https://github.com/onmyway133" title="Github"><i class="fa fa-github" aria-hidden="true"></i></a></li> 
          
   		
          
     			  <li><a href="https://twitter.com/onmyway133" title="Twitter"><i class="fa fa-twitter" aria-hidden="true"></i></a></li> 
          
   		
          
            <li><a href="mailto:onmyway133@gmail.com?subject=Hello&body=World" title="email"><i class="fa fa-envelope" aria-hidden="true"></i></a></li> 
          
   		
   		</ul>


   		<!--
   		<ul class="clearfix widget-social-icons">   		
   		<li class="widget-si-twitter"><a href="http://twitter.com" title="Twitter"><i class="ico-twitter"></i></a></li> 
		<li class="widget-si-facebook"><a href="http://facebook.com" title="Facebook"><i class="ico-facebook"></i></a></li>
			<li class="widget-si-gplus"><a href="http://plus.google.com" title="Google+"><i class="ico-gplus"></i></a></li>
			<li class="widget-si-pinterest"><a href="http://pinterest.com" title="Pinterest"><i class="ico-pinterest"></i></a></li>
			<li class="widget-si-flickr"><a href="http://flickr.com" title="Flickr"><i class="ico-flickr"></i></a></li>
			<li class="widget-si-instagram"><a href="http://instagram.com" title="Instagram"><i class="ico-instagram"></i></a></li>
		</ul> -->

    </div>
  </div>


  
    
  <div class="widget_athemes_tabs">
    <ul id="widget-tab" class="clearfix widget-tab-nav">
      <li class="active"><a>Recent Posts</a></li>
    </ul>
    <div class="widget">
      <ul>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="/blog/How-to-edit-selected-item-in-list-in-SwiftUI/">How to edit selected item in list in SwiftUI</a></h6>
              <span>February 14, 2020</span>
            </div>

          </li>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="/blog/How-to-log-in-SwiftUI/">How to log in SwiftUI</a></h6>
              <span>February 14, 2020</span>
            </div>

          </li>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="/blog/How-to-mask-with-UILabel/">How to mask with UILabel</a></h6>
              <span>February 13, 2020</span>
            </div>

          </li>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="/blog/How-to-avoid-pitfalls-in-SwiftUI/">How to avoid pitfalls in SwiftUI</a></h6>
              <span>February 12, 2020</span>
            </div>

          </li>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="/blog/How-to-use-application-will-terminate-in-macOS/">How to use application will terminate in macOS</a></h6>
              <span>February 12, 2020</span>
            </div>

          </li>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="/blog/How-to-sync-multiple-CAAnimation/">How to sync multiple CAAnimation</a></h6>
              <span>February 11, 2020</span>
            </div>

          </li>
        
      </ul>
    </div>
  </div>

  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/algorithm/" style="font-size: 10px;">algorithm</a> <a href="/tags/android/" style="font-size: 17.78px;">android</a> <a href="/tags/apple-script/" style="font-size: 11.11px;">apple script</a> <a href="/tags/catalyst/" style="font-size: 10px;">catalyst</a> <a href="/tags/ci/" style="font-size: 11.11px;">ci</a> <a href="/tags/cloud/" style="font-size: 10.56px;">cloud</a> <a href="/tags/cocoapods/" style="font-size: 11.67px;">cocoapods</a> <a href="/tags/combine/" style="font-size: 12.22px;">combine</a> <a href="/tags/csharp/" style="font-size: 10px;">csharp</a> <a href="/tags/css/" style="font-size: 10.56px;">css</a> <a href="/tags/dart/" style="font-size: 11.67px;">dart</a> <a href="/tags/database/" style="font-size: 10.56px;">database</a> <a href="/tags/design/" style="font-size: 10.56px;">design</a> <a href="/tags/electron/" style="font-size: 11.67px;">electron</a> <a href="/tags/firebase/" style="font-size: 12.22px;">firebase</a> <a href="/tags/flutter/" style="font-size: 11.67px;">flutter</a> <a href="/tags/git/" style="font-size: 11.11px;">git</a> <a href="/tags/github/" style="font-size: 12.22px;">github</a> <a href="/tags/go/" style="font-size: 10.56px;">go</a> <a href="/tags/google/" style="font-size: 10px;">google</a> <a href="/tags/iOS/" style="font-size: 19.44px;">iOS</a> <a href="/tags/javascript/" style="font-size: 18.33px;">javascript</a> <a href="/tags/kotlin/" style="font-size: 16.67px;">kotlin</a> <a href="/tags/layout/" style="font-size: 11.67px;">layout</a> <a href="/tags/life/" style="font-size: 13.33px;">life</a> <a href="/tags/links/" style="font-size: 14.44px;">links</a> <a href="/tags/macOS/" style="font-size: 18.89px;">macOS</a> <a href="/tags/machine-learning/" style="font-size: 10.56px;">machine learning</a> <a href="/tags/maps/" style="font-size: 11.67px;">maps</a> <a href="/tags/networking/" style="font-size: 10px;">networking</a> <a href="/tags/node/" style="font-size: 12.78px;">node</a> <a href="/tags/objc/" style="font-size: 10.56px;">objc</a> <a href="/tags/react/" style="font-size: 11.11px;">react</a> <a href="/tags/react-native/" style="font-size: 15px;">react native</a> <a href="/tags/realm/" style="font-size: 10px;">realm</a> <a href="/tags/rx/" style="font-size: 11.11px;">rx</a> <a href="/tags/script/" style="font-size: 10.56px;">script</a> <a href="/tags/spm/" style="font-size: 12.22px;">spm</a> <a href="/tags/swift/" style="font-size: 20px;">swift</a> <a href="/tags/swiftUI/" style="font-size: 17.22px;">swiftUI</a> <a href="/tags/tech/" style="font-size: 15.56px;">tech</a> <a href="/tags/terminal/" style="font-size: 13.33px;">terminal</a> <a href="/tags/testing/" style="font-size: 13.33px;">testing</a> <a href="/tags/tool/" style="font-size: 10px;">tool</a> <a href="/tags/unity/" style="font-size: 10px;">unity</a> <a href="/tags/voip/" style="font-size: 11.67px;">voip</a> <a href="/tags/watchOS/" style="font-size: 13.89px;">watchOS</a> <a href="/tags/web/" style="font-size: 10.56px;">web</a> <a href="/tags/wwdc/" style="font-size: 10px;">wwdc</a> <a href="/tags/xcode/" style="font-size: 16.11px;">xcode</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>

    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">February 2020</a><span class="archive-list-count">14</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">January 2020</a><span class="archive-list-count">30</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a><span class="archive-list-count">36</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a><span class="archive-list-count">39</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a><span class="archive-list-count">49</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a><span class="archive-list-count">50</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a><span class="archive-list-count">42</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a><span class="archive-list-count">41</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a><span class="archive-list-count">48</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a><span class="archive-list-count">27</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a><span class="archive-list-count">24</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a><span class="archive-list-count">14</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a><span class="archive-list-count">14</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a><span class="archive-list-count">12</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a><span class="archive-list-count">18</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a><span class="archive-list-count">12</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a><span class="archive-list-count">35</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a><span class="archive-list-count">6</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/algorithm/">algorithm</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/android/">android</a><span class="tag-list-count">35</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/apple-script/">apple script</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/catalyst/">catalyst</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ci/">ci</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cloud/">cloud</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cocoapods/">cocoapods</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/combine/">combine</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/csharp/">csharp</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/css/">css</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/dart/">dart</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/database/">database</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/design/">design</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/electron/">electron</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/firebase/">firebase</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/flutter/">flutter</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/github/">github</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/go/">go</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/google/">google</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/iOS/">iOS</a><span class="tag-list-count">157</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/javascript/">javascript</a><span class="tag-list-count">37</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/kotlin/">kotlin</a><span class="tag-list-count">25</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/layout/">layout</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/life/">life</a><span class="tag-list-count">10</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/links/">links</a><span class="tag-list-count">12</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/macOS/">macOS</a><span class="tag-list-count">81</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/machine-learning/">machine learning</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/maps/">maps</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/networking/">networking</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/node/">node</a><span class="tag-list-count">9</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/objc/">objc</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/react/">react</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/react-native/">react native</a><span class="tag-list-count">14</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/realm/">realm</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/rx/">rx</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/script/">script</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/spm/">spm</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/swift/">swift</a><span class="tag-list-count">239</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/swiftUI/">swiftUI</a><span class="tag-list-count">33</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tech/">tech</a><span class="tag-list-count">15</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/terminal/">terminal</a><span class="tag-list-count">10</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/testing/">testing</a><span class="tag-list-count">10</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tool/">tool</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/unity/">unity</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/voip/">voip</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/watchOS/">watchOS</a><span class="tag-list-count">11</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/web/">web</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/wwdc/">wwdc</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/xcode/">xcode</a><span class="tag-list-count">22</span></li></ul>
    </div>
  </div>


  
</aside>
        
      </div>
      <footer id="footer" class="site-footer">
  

  <div class="clearfix container">
      <div class="site-info">
	      &copy; 2020 onmyway133 All Rights Reserved.
          
      </div>
      <div class="site-credit">
        Theme by <a href="https://github.com/iTimeTraveler/hexo-theme-hiero" target="_blank">hiero</a>
      </div>
  </div>
</footer>


<!-- min height -->

<script>
    var contentdiv = document.getElementById("content");

    contentdiv.style.minHeight = document.body.offsetHeight - document.getElementById("allheader").offsetHeight - document.getElementById("footer").offsetHeight + "px";
</script>

<!-- Custome JS -->
<script src="/js/my.js"></script>
    </div>
    <!-- <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/about/" class="mobile-nav-link">About</a>
  
    <a href="/writing/" class="mobile-nav-link">Writing</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/speaking/" class="mobile-nav-link">Speaking</a>
  
    <a href="/opensource/" class="mobile-nav-link">Open Source</a>
  
    <a href="/projects/" class="mobile-nav-link">Projects</a>
  
    <a href="/news/" class="mobile-nav-link">News</a>
  
    <a href="/gumroad/" class="mobile-nav-link">Gumroad</a>
  
    <a href="/atom.xml" class="mobile-nav-link">RSS</a>
  
</nav> -->
    

<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>



  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.js"></script>


<script src="/js/scripts.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script src="/js/main.js"></script>


<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-40119591-5', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->












  </div>

  <a id="rocket" href="#top" class=""></a>
  <script type="text/javascript" src="/js/totop.js" async=""></script>
</body>
</html>
