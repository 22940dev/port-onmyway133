<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">

  <!-- PACE Progress Bar START -->
  
    <script src="https://raw.githubusercontent.com/HubSpot/pace/v1.0.2/pace.min.js"></script>
    <link rel="stylesheet" href="https://github.com/HubSpot/pace/raw/master/themes/orange/pace-theme-flash.css">
  
  

  <!-- PACE Progress Bar START -->

  
  <title>onmyway133</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
    <meta name="keywords" content="ios, android, kotlin, mac, swift, electron, javascript, node">
  
  
  
  
  <meta name="description" content="What you don&apos;t know is what you haven&apos;t learned">
<meta name="keywords" content="ios, android,javascript, react">
<meta property="og:type" content="website">
<meta property="og:title" content="onmyway133">
<meta property="og:url" content="https://onmyway133.github.io/page/18/index.html">
<meta property="og:site_name" content="onmyway133">
<meta property="og:description" content="What you don&apos;t know is what you haven&apos;t learned">
<meta property="og:locale" content="en">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="onmyway133">
<meta name="twitter:description" content="What you don&apos;t know is what you haven&apos;t learned">
  
    <link rel="alternate" href="/atom.xml" title="onmyway133" type="application/atom+xml">
  
  <link rel="icon" href="/favicon.ico">
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link href="https://fonts.googleapis.com/css?family=Open+Sans|Montserrat:700" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Roboto:400,300,300italic,400italic" rel="stylesheet" type="text/css">
  <link href="https://cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">
  <style type="text/css">
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/9749f0/00000000000000000001008f/27/l?subset_id=2&fvd=n5) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/90cf9f/000000000000000000010091/27/l?subset_id=2&fvd=n7) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/8a5494/000000000000000000013365/27/l?subset_id=2&fvd=n4) format("woff2");font-weight:lighter;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/d337d8/000000000000000000010095/27/l?subset_id=2&fvd=i4) format("woff2");font-weight:400;font-style:italic;}</style>
    
  <link rel="stylesheet" id="athemes-headings-fonts-css" href="//fonts.googleapis.com/css?family=Yanone+Kaffeesatz%3A200%2C300%2C400%2C700&amp;ver=4.6.1" type="text/css" media="all">
  <link rel="stylesheet" href="/css/style.css">

  <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>

  <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.0.2/css/bootstrap.min.css">
  <link rel="stylesheet" href="/css/hiero.css">
  <link rel="stylesheet" href="/css/glyphs.css">
  

  <!-- Custom CSS -->
  <link rel="stylesheet" href="/css/my.css">
  <!-- Google Adsense -->
  
</head>
</html>
<script>
var themeMenus = {};

  themeMenus["/"] = "Home"; 

  themeMenus["/about/"] = "About"; 

  themeMenus["/writing/"] = "writing"; 

  themeMenus["/archives"] = "Archives"; 

  themeMenus["/speaking/"] = "speaking"; 

  themeMenus["/opensource/"] = "open source"; 

  themeMenus["/projects/"] = "projects"; 

  themeMenus["/news/"] = "news"; 

  themeMenus["/gumroad/"] = "gumroad"; 

  themeMenus["/atom.xml"] = "rss"; 

</script>


  <body>


  <header id="allheader" class="site-header" role="banner">
  <div class="clearfix container">
      <div class="site-branding">

          <h1 class="site-title">
            
              <a href="/" title="onmyway133" rel="home"> onmyway133 </a>
            
          </h1>

          
            <div class="site-description">What you don&#39;t know is what you haven&#39;t learned</div>
          
            
          <nav id="main-navigation" class="main-navigation" role="navigation">
            <a class="nav-open">Menu</a>
            <a class="nav-close">Close</a>
            <div class="clearfix sf-menu">

              <ul id="main-nav" class="nmenu sf-js-enabled">
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/">Home</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/about/">About</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/writing/">writing</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/archives">Archives</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/speaking/">speaking</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/opensource/">open source</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/projects/">projects</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/news/">news</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/gumroad/">gumroad</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/atom.xml">rss</a> </li>
                    
              </ul>
            </div>
          </nav>


      </div>
  </div>
</header>


  <div id="originBgDiv" style="background: #fff; width: 100%;">

      <div style="max-height:600px; overflow: hidden;  display: flex; display: -webkit-flex; align-items: center;">
        <img id="originBg" width="100%" alt="" src="">
      </div>

  </div>

  <script>
  function setAboutIMG(){
      var imgUrls = "https://avatars1.githubusercontent.com/u/2284279?s=460&v=4".split(",");
      var random = Math.floor((Math.random() * imgUrls.length ));
      if (imgUrls[random].startsWith('http') || imgUrls[random].indexOf('://') >= 0) {
        document.getElementById("originBg").src=imgUrls[random];
      } else {
        document.getElementById("originBg").src='/' + imgUrls[random];
      }
  }
  bgDiv=document.getElementById("originBgDiv");
  if(location.pathname.match('about')){
    setAboutIMG();
    bgDiv.style.display='block';
  }else{
    bgDiv.style.display='none';
  }
  </script>



  <div id="container">
    <div id="wrap">
            
      <div id="content" class="outer">
        
          <section id="main">
  
    <article id="post-How-to-support-copy-paste-in-electron"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-support-copy-paste-in-electron/">How to support copy paste in electron</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-support-copy-paste-in-electron/" class="article-date">
	  <time datetime="2017-08-21T10:14:39.000Z" itemprop="datePublished">August 21, 2017</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/67" target="_blank" rel="noopener">#67</a></strong></p>
<p>After running <code>electron-packager</code>, the app does not accept copy, paste anymore. This is because the release build does not have menu with key binding to the clipboard by default. We can solve this by manually declaring the menu</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123;app&#125; = <span class="built_in">require</span>(<span class="string">'electron'</span>)</span><br><span class="line"><span class="keyword">const</span> Menu = <span class="built_in">require</span>(<span class="string">'electron'</span>).Menu</span><br><span class="line"></span><br><span class="line">app.on(<span class="string">'ready'</span>, () =&gt; &#123;</span><br><span class="line">  createWindow()</span><br><span class="line">  createMenu()</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createMenu</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> application = &#123;</span><br><span class="line">    label: <span class="string">"Application"</span>,</span><br><span class="line">    submenu: [</span><br><span class="line">      &#123;</span><br><span class="line">        label: <span class="string">"About Application"</span>,</span><br><span class="line">        selector: <span class="string">"orderFrontStandardAboutPanel:"</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        type: <span class="string">"separator"</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        label: <span class="string">"Quit"</span>,</span><br><span class="line">        accelerator: <span class="string">"Command+Q"</span>,</span><br><span class="line">        click: <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">          app.quit()</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> edit = &#123;</span><br><span class="line">    label: <span class="string">"Edit"</span>,</span><br><span class="line">    submenu: [</span><br><span class="line">      &#123;</span><br><span class="line">        label: <span class="string">"Undo"</span>,</span><br><span class="line">        accelerator: <span class="string">"CmdOrCtrl+Z"</span>,</span><br><span class="line">        selector: <span class="string">"undo:"</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        label: <span class="string">"Redo"</span>,</span><br><span class="line">        accelerator: <span class="string">"Shift+CmdOrCtrl+Z"</span>,</span><br><span class="line">        selector: <span class="string">"redo:"</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        type: <span class="string">"separator"</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        label: <span class="string">"Cut"</span>,</span><br><span class="line">        accelerator: <span class="string">"CmdOrCtrl+X"</span>,</span><br><span class="line">        selector: <span class="string">"cut:"</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        label: <span class="string">"Copy"</span>,</span><br><span class="line">        accelerator: <span class="string">"CmdOrCtrl+C"</span>,</span><br><span class="line">        selector: <span class="string">"copy:"</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        label: <span class="string">"Paste"</span>,</span><br><span class="line">        accelerator: <span class="string">"CmdOrCtrl+V"</span>,</span><br><span class="line">        selector: <span class="string">"paste:"</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        label: <span class="string">"Select All"</span>,</span><br><span class="line">        accelerator: <span class="string">"CmdOrCtrl+A"</span>,</span><br><span class="line">        selector: <span class="string">"selectAll:"</span></span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> template = [</span><br><span class="line">    application,</span><br><span class="line">    edit</span><br><span class="line">  ]</span><br><span class="line"></span><br><span class="line">  Menu.setApplicationMenu(Menu.buildFromTemplate(template))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://pracucci.com/atom-electron-enable-copy-and-paste.html" target="_blank" rel="noopener">Electron - Enable copy and paste</a></li>
<li><a href="https://github.com/electron/electron/issues/2591" target="_blank" rel="noopener">Paste into input field doesn’t work after packaging up app</a></li>
</ul>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-change-app-icon-in-electron"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-change-app-icon-in-electron/">How to change app icon in electron</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-change-app-icon-in-electron/" class="article-date">
	  <time datetime="2017-08-15T05:03:41.000Z" itemprop="datePublished">August 15, 2017</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/66" target="_blank" rel="noopener">#66</a></strong></p>
<h3 id="Generate-icns"><a href="#Generate-icns" class="headerlink" title="Generate icns"></a>Generate icns</h3><ul>
<li>Generate <code>.iconset</code></li>
<li>Run <code>iconutil -c icns &quot;Icon.iconset&quot;</code>. Note that icon names must be first letter lowsercased, and use <code>_</code> instead of <code>-</code></li>
</ul>
<p><img src="https://user-images.githubusercontent.com/2284279/29305228-da1a8560-8197-11e7-8826-6a278157abf2.png" alt="icns"></p>
<h3 id="Use-icns"><a href="#Use-icns" class="headerlink" title="Use icns"></a>Use icns</h3><ul>
<li>In <code>main.js</code>, specify <code>icon</code></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">win = <span class="keyword">new</span> BrowserWindow(&#123;</span><br><span class="line">  width: <span class="number">800</span>, </span><br><span class="line">  height: <span class="number">600</span>,</span><br><span class="line">  icon: __dirname +  <span class="string">'/Icon/Icon.icns'</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>You can also use helper url methods</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>)</span><br><span class="line"><span class="keyword">const</span> url = <span class="built_in">require</span>(<span class="string">'url'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> iconUrl = url.format(&#123;</span><br><span class="line">  pathname: path.join(__dirname, <span class="string">'Icon/Icon.icns'</span>),</span><br><span class="line">  protocol: <span class="string">'file:'</span>,</span><br><span class="line">  slashes: <span class="literal">true</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="If-app-icon-is-not-updated"><a href="#If-app-icon-is-not-updated" class="headerlink" title="If app icon is not updated"></a>If app icon is not updated</h3><ul>
<li>I get a problem that electron always shows default app icon. I tried using <code>png</code>, <code>NativeImage</code>, different icon sizes but still the problem. When I use <code>electron-packager</code> to make release build, the icon shows correctly, so it must be because of Electron caching or somehow 😠 </li>
<li>Go to <code>node_modules -&gt; electron -&gt; dist</code>, right click on <code>Electron</code>, choose <code>View Info</code></li>
<li>Drag another <code>icns</code> into the icon on the top left</li>
</ul>
<p><img src="https://user-images.githubusercontent.com/2284279/29305340-83c8d058-8198-11e7-8057-742f904e2c1c.png" alt="info"></p>
<h3 id="Release-with-electron-packager"><a href="#Release-with-electron-packager" class="headerlink" title="Release with electron-packager"></a>Release with <code>electron-packager</code></h3><ul>
<li><code>icon</code> must be specified with <code>__dirname</code> (we already did) for <code>electron-packager</code> to pick up correct icons</li>
</ul>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-Another-layer-of-abstraction"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/Another-layer-of-abstraction/">Another layer of abstraction</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/Another-layer-of-abstraction/" class="article-date">
	  <time datetime="2017-08-09T11:57:51.000Z" itemprop="datePublished">August 9, 2017</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/65" target="_blank" rel="noopener">#65</a></strong></p>
<p><a href="https://sandofsky.com/blog/third-party-libraries.html" target="_blank" rel="noopener">https://sandofsky.com/blog/third-party-libraries.html</a></p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-do-implement-notification-in-iOS-with-Firebase"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-do-implement-notification-in-iOS-with-Firebase/">How to do implement notification in iOS with Firebase</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-do-implement-notification-in-iOS-with-Firebase/" class="article-date">
	  <time datetime="2017-08-09T06:29:51.000Z" itemprop="datePublished">August 9, 2017</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/64" target="_blank" rel="noopener">#64</a></strong></p>
<p>Note: This applies to Firebase 4.0.4</p>
<h2 id="Preparing-push-notification-certificate"><a href="#Preparing-push-notification-certificate" class="headerlink" title="Preparing push notification certificate"></a>Preparing push notification certificate</h2><p>Go to <a href="https://developer.apple.com/account/ios/certificate/distribution/create" target="_blank" rel="noopener">Member Center</a> -&gt; <code>Certificates</code> -&gt; <code>Production</code></p>
<h3 id="Certificate"><a href="#Certificate" class="headerlink" title="Certificate"></a>Certificate</h3><p>You can now use 1 certificate for both sandbox and production environment<br><img src="https://user-images.githubusercontent.com/2284279/29111626-5617e09c-7ceb-11e7-9f56-c1f9ceab3cd1.png" alt="push"></p>
<h3 id="Auth-Key"><a href="#Auth-Key" class="headerlink" title="Auth Key"></a>Auth Key</h3><ul>
<li>If you like to use <a href="https://developer.apple.com/account/ios/authkey/create" target="_blank" rel="noopener">Auth Key</a>, read <a href="https://developer.apple.com/library/content/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/CommunicatingwithAPNs.html#//apple_ref/doc/uid/TP40008194-CH11-SW3" target="_blank" rel="noopener">Provider Authentication Tokens</a></li>
</ul>
<h2 id="Configure-push-notification"><a href="#Configure-push-notification" class="headerlink" title="Configure push notification"></a>Configure push notification</h2><ul>
<li>Go to <a href="https://console.firebase.google.com/" target="_blank" rel="noopener">Firebase Console</a> -&gt; <code>Settings</code> -&gt; <code>Project Settings</code> -&gt; <code>Cloud Messaging</code> -&gt; <code>iOS app configuration</code><ul>
<li>If you use certificate, use just 1 <code>Apple Push Notification service SSL</code> for both fields</li>
<li>If you use Authenticate Key, fill in <code>APNS auth key</code></li>
</ul>
</li>
</ul>
<p><img src="https://user-images.githubusercontent.com/2284279/29111784-f0dfcbe4-7ceb-11e7-8aff-db1a50ea3ee5.png" alt="firebase"></p>
<h2 id="Adding-pod"><a href="#Adding-pod" class="headerlink" title="Adding pod"></a>Adding pod</h2><p>In your <code>Podfile</code>, declare</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pod <span class="string">'Firebase/Core'</span></span><br><span class="line">pod <span class="string">'Firebase/Messaging'</span></span><br></pre></td></tr></table></figure>

<h2 id="Disabling-app-delegate-swizzling"><a href="#Disabling-app-delegate-swizzling" class="headerlink" title="Disabling app delegate swizzling"></a>Disabling app delegate swizzling</h2><ul>
<li>Read <a href="https://firebase.google.com/docs/cloud-messaging/ios/client" target="_blank" rel="noopener">Method swizzling in Firebase Cloud Messaging</a></li>
<li>You should say NO to swizzling. Do this in your <code>Info.plist</code></li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">key</span>&gt;</span>FirebaseAppDelegateProxyEnabled<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">false</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<p>Read more on <code>Messaging.messaging().apnsToken</code></p>
<blockquote>
<p>This property is used to set the APNS Token received by the application delegate.<br>FIRMessaging uses method swizzling to ensure the APNS token is set automatically. However, if you have disabled swizzling by setting <code>FirebaseAppDelegateProxyEnabled</code> to <code>NO</code> in your app’s Info.plist, you should manually set the APNS token in your application delegate’s -application:didRegisterForRemoteNotificationsWithDeviceToken: method.<br>If you would like to set the type of the APNS token, rather than relying on automatic detection, see: -setAPNSToken:type:.</p>
</blockquote>
<h2 id="Configuring-Firebase"><a href="#Configuring-Firebase" class="headerlink" title="Configuring Firebase"></a>Configuring Firebase</h2><p>You can and should configure Firebase in code</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Firebase</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> options = <span class="type">FirebaseOptions</span>(googleAppID: <span class="string">""</span>, gcmSenderID: <span class="string">""</span>)</span><br><span class="line">options.bundleID = <span class="string">""</span></span><br><span class="line">options.apiKey = <span class="string">""</span></span><br><span class="line">options.projectID = <span class="string">""</span></span><br><span class="line">options.clientID = <span class="string">""</span></span><br><span class="line"><span class="type">FirebaseApp</span>.configure(options: options)</span><br></pre></td></tr></table></figure>

<h2 id="Handling-device-token"><a href="#Handling-device-token" class="headerlink" title="Handling device token"></a>Handling device token</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Firebase</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">application</span><span class="params">(<span class="number">_</span> application: UIApplication, didRegisterForRemoteNotificationsWithDeviceToken deviceToken: Data)</span></span> &#123;</span><br><span class="line">  <span class="type">Messaging</span>.messaging().apnsToken = deviceToken</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Getting-FCM-token"><a href="#Getting-FCM-token" class="headerlink" title="Getting FCM token"></a>Getting FCM token</h2><h3 id="Retrieving-FCM-token"><a href="#Retrieving-FCM-token" class="headerlink" title="Retrieving FCM token"></a>Retrieving FCM token</h3><p>Read <a href="https://firebase.google.com/docs/cloud-messaging/ios/first-message" target="_blank" rel="noopener">Access the registration token</a></p>
<blockquote>
<p>By default, the FCM SDK generates a registration token for the client app instance on initial startup of your app. Similar to the APNs device token, this token allows you to target notification messages to this particular instance of the app.</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Messaging</span>.messaging().fcmToken</span><br></pre></td></tr></table></figure>

<h3 id="Observing-for-FCM-token-change"><a href="#Observing-for-FCM-token-change" class="headerlink" title="Observing for FCM token change"></a>Observing for FCM token change</h3><p>Read <a href="https://firebase.google.com/docs/cloud-messaging/ios/first-message#access_the_registration_token" target="_blank" rel="noopener">Monitor token generation</a></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Messaging</span>.messaging().delegate = <span class="keyword">self</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// MARK: - MessagingDelegate</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">messaging</span><span class="params">(<span class="number">_</span> messaging: Messaging, didRefreshRegistrationToken fcmToken: String)</span></span> &#123;</span><br><span class="line">  <span class="built_in">print</span>(fcmToken)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/">iOS</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-use-JSON-Codable-in-Swift-4"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-use-JSON-Codable-in-Swift-4/">How to use JSON Codable in Swift 4</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-use-JSON-Codable-in-Swift-4/" class="article-date">
	  <time datetime="2017-08-06T11:56:28.000Z" itemprop="datePublished">August 6, 2017</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/63" target="_blank" rel="noopener">#63</a></strong></p>
<p><code>Codable</code> in Swift 4 changes the game. It deprecates lots of existing JSON libraries.</p>
<h2 id="Generic-model"><a href="#Generic-model" class="headerlink" title="Generic model"></a>Generic model</h2><p>API responses is usually in form of an object container with a key. Then it will be either nested array or object. We can deal with it by introducing a <code>data holder</code>. Take a look <a href="https://github.com/onmyway133/PhotoFeed/blob/finish/PhotoFeed/Models/DataHolder.swift" target="_blank" rel="noopener">DataHolder</a></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"data"</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"comment_id"</span>: <span class="number">1</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"comment_id"</span>: <span class="number">2</span></span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">ListHolder</span>&lt;<span class="title">T</span>: <span class="title">Codable</span>&gt;: <span class="title">Codable</span> </span>&#123;</span><br><span class="line">  <span class="class"><span class="keyword">enum</span> <span class="title">CodingKeys</span>: <span class="title">String</span>, <span class="title">CodingKey</span> </span>&#123;</span><br><span class="line">    <span class="keyword">case</span> list = <span class="string">"data"</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> list: [<span class="type">T</span>]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">OneHolder</span>&lt;<span class="title">T</span>: <span class="title">Codable</span>&gt;: <span class="title">Codable</span> </span>&#123;</span><br><span class="line">  <span class="class"><span class="keyword">enum</span> <span class="title">CodingKeys</span>: <span class="title">String</span>, <span class="title">CodingKey</span> </span>&#123;</span><br><span class="line">    <span class="keyword">case</span> one = <span class="string">"data"</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> one: <span class="type">T</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>then with <code>Alamofire</code>, we can just parse to data holder</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">loadComments</span><span class="params">(mediaId: String, completion: @escaping <span class="params">([Comment])</span></span></span> -&gt; <span class="type">Void</span>) &#123;</span><br><span class="line">  request(<span class="string">"https://api.instagram.com/v1/media/\(mediaId)/comments"</span>,</span><br><span class="line">    parameters: parameters)</span><br><span class="line">  .responseData(completionHandler: &#123; (response) <span class="keyword">in</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">let</span> data = response.result.value &#123;</span><br><span class="line">      <span class="keyword">do</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> holder = <span class="keyword">try</span> <span class="type">JSONDecoder</span>().decode(<span class="type">ListHolder</span>&lt;<span class="type">Comment</span>&gt;.<span class="keyword">self</span>, from: data)</span><br><span class="line">        <span class="type">DispatchQueue</span>.main.async &#123;</span><br><span class="line">          completion(holder.list)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125; <span class="keyword">catch</span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(error)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Read-more"><a href="#Read-more" class="headerlink" title="Read more"></a>Read more</h2><ul>
<li><a href="http://benscheirman.com/2017/06/ultimate-guide-to-json-parsing-with-swift-4/" target="_blank" rel="noopener">http://benscheirman.com/2017/06/ultimate-guide-to-json-parsing-with-swift-4/</a></li>
</ul>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-Learning-flexbox"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/Learning-flexbox/">Learning flexbox</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/Learning-flexbox/" class="article-date">
	  <time datetime="2017-08-04T09:03:55.000Z" itemprop="datePublished">August 4, 2017</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/62" target="_blank" rel="noopener">#62</a></strong></p>
<h2 id="CSS"><a href="#CSS" class="headerlink" title="CSS"></a>CSS</h2><ul>
<li>body height <a href="https://www.kirupa.com/html5/make_body_take_up_full_browser_height.htm" target="_blank" rel="noopener">https://www.kirupa.com/html5/make_body_take_up_full_browser_height.htm</a></li>
</ul>
<h2 id="Flexbox"><a href="#Flexbox" class="headerlink" title="Flexbox"></a>Flexbox</h2><ul>
<li>Properties of flex <a href="https://codepen.io/enxaneta/full/adLPwv" target="_blank" rel="noopener">https://codepen.io/enxaneta/full/adLPwv</a></li>
<li>Visual guide to flexbox <a href="https://scotch.io/tutorials/a-visual-guide-to-css3-flexbox-properties" target="_blank" rel="noopener">https://scotch.io/tutorials/a-visual-guide-to-css3-flexbox-properties</a></li>
<li>align-items vs align-content <a href="https://stackoverflow.com/questions/27539262/whats-the-difference-between-align-content-and-align-items" target="_blank" rel="noopener">https://stackoverflow.com/questions/27539262/whats-the-difference-between-align-content-and-align-items</a></li>
<li>align-items vs justify-content <a href="https://stackoverflow.com/questions/35049262/difference-between-justify-content-vs-align-items" target="_blank" rel="noopener">https://stackoverflow.com/questions/35049262/difference-between-justify-content-vs-align-items</a></li>
<li>multiple line <a href="https://stackoverflow.com/questions/41789278/first-child-full-width-in-flexbox" target="_blank" rel="noopener">https://stackoverflow.com/questions/41789278/first-child-full-width-in-flexbox</a></li>
</ul>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/">javascript</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-When-to-use-hamburger-menu-in-iOS"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/When-to-use-hamburger-menu-in-iOS/">When to use hamburger menu in iOS</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/When-to-use-hamburger-menu-in-iOS/" class="article-date">
	  <time datetime="2017-07-31T10:10:33.000Z" itemprop="datePublished">July 31, 2017</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/61" target="_blank" rel="noopener">#61</a></strong></p>
<p>You can read everywhere that hamburger is mostly not recommended. Every navigation structure has their use cases, and for hamburger, I find these posts to have their points</p>
<ul>
<li>As a secondary navigation <a href="http://babich.biz/hamburger-good-ux/" target="_blank" rel="noopener">http://babich.biz/hamburger-good-ux/</a></li>
<li>When it does not interfere with the existing navigation <a href="http://www.ios-coding.com/blog/2015/11/01/maintaining-viewdeck/" target="_blank" rel="noopener">http://www.ios-coding.com/blog/2015/11/01/maintaining-viewdeck/</a></li>
<li>Slack app <a href="https://slack.com/downloads/ios" target="_blank" rel="noopener">https://slack.com/downloads/ios</a></li>
</ul>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-deal-with-windows-1252-encoding-in-Node"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-deal-with-windows-1252-encoding-in-Node/">How to deal with windows-1252 encoding in Node</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-deal-with-windows-1252-encoding-in-Node/" class="article-date">
	  <time datetime="2017-07-08T20:18:42.000Z" itemprop="datePublished">July 8, 2017</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/60" target="_blank" rel="noopener">#60</a></strong></p>
<p>Today I use <a href="https://github.com/bitinn/node-fetch" target="_blank" rel="noopener">node-fetch</a> and <a href="https://github.com/cheeriojs/cheerio" target="_blank" rel="noopener">cheerio</a> to fetch a webpage. It looks good in Chrome and Sublime Text when it displays <a href="https://www.w3schools.com/html/html_entities.asp" target="_blank" rel="noopener">html entities</a> like <code>&amp;#7901</code></p>
<p>However, it does not render correctly in iTerm, Terminal and Visual Studio Code. It just shows <a href="http://www.fileformat.info/info/unicode/char/0fffd/index.htm" target="_blank" rel="noopener">fffd</a></p>
<p>I think the problem is because of my code, so I change to <a href="https://github.com/request/request" target="_blank" rel="noopener">request</a> and try to play with different options in cheerio but still the problem.</p>
<p>It didn’t take me long to figure it out that the format of the html is <code>windows-1252</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span><span class="tag">&lt;<span class="name">head</span>&gt;</span><span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"Content-Type"</span> <span class="attr">content</span>=<span class="string">"text/html; charset=windows-1252"</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>So I need to use <a href="https://github.com/mathiasbynens/windows-1252" target="_blank" rel="noopener">windows-1252</a>, <a href="https://github.com/ForbesLindesay/legacy-encoding" target="_blank" rel="noopener">legacy-encoding</a>, <a href="https://github.com/ashtuchkin/iconv-lite" target="_blank" rel="noopener">iconv-lite</a></p>
<p>FYI</p>
<ul>
<li><a href="https://stackoverflow.com/questions/31834790/node-js-how-to-http-get-and-decode-encode-response-in-custom-format" target="_blank" rel="noopener">https://stackoverflow.com/questions/31834790/node-js-how-to-http-get-and-decode-encode-response-in-custom-format</a></li>
</ul>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-Pixel-and-point"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/Pixel-and-point/">Pixel and point</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/Pixel-and-point/" class="article-date">
	  <time datetime="2017-06-16T09:13:15.000Z" itemprop="datePublished">June 16, 2017</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/59" target="_blank" rel="noopener">#59</a></strong></p>
<p>TL;DR: Don’t use <code>nativeScale</code> and <code>nativeBounds</code>, unless you’re doing some very low level stuff</p>
<h3 id="What-is-point-and-pixel"><a href="#What-is-point-and-pixel" class="headerlink" title="What is point and pixel"></a>What is point and pixel</h3><p>From <a href="https://developer.apple.com/library/content/documentation/2DDrawing/Conceptual/DrawingPrintingiOS/GraphicsDrawingOverview/GraphicsDrawingOverview.html" target="_blank" rel="noopener">https://developer.apple.com/library/content/documentation/2DDrawing/Conceptual/DrawingPrintingiOS/GraphicsDrawingOverview/GraphicsDrawingOverview.html</a></p>
<blockquote>
<p>In iOS there is a distinction between the coordinates you specify in your drawing code and the pixels of the underlying device</p>
</blockquote>
<blockquote>
<p>The purpose of using points (and the logical coordinate system) is to provide a consistent size of output that is device independent. For most purposes, the actual size of a point is irrelevant. The goal of points is to provide a relatively consistent scale that you can use in your code to specify the size and position of views and rendered content</p>
</blockquote>
<blockquote>
<p>On a standard-resolution screen, the scale factor is typically 1.0. On a high-resolution screen, the scale factor is typically 2.0</p>
</blockquote>
<h3 id="How-about-scale-and-nativeScale"><a href="#How-about-scale-and-nativeScale" class="headerlink" title="How about scale and nativeScale"></a>How about <code>scale</code> and <code>nativeScale</code></h3><p>From <a href="https://developer.apple.com/documentation/uikit/uiscreen" target="_blank" rel="noopener">https://developer.apple.com/documentation/uikit/uiscreen</a></p>
<ul>
<li>var bounds: CGRect: The bounding rectangle of the screen, measured in <strong>points</strong>.</li>
<li>var nativeBounds: CGRect: The bounding rectangle of the physical screen, measured in <strong>pixels</strong>.</li>
<li>var scale: CGFloat: The natural scale factor associated with the <strong>screen</strong>.</li>
<li>var nativeScale: CGFloat: The native scale factor for the <strong>physical screen</strong>.</li>
</ul>
<h3 id="The-scale-factor-and-display-mode"><a href="#The-scale-factor-and-display-mode" class="headerlink" title="The scale factor and display mode"></a>The scale factor and display mode</h3><p>See this for a whole list of devices and their scale factors <a href="https://www.paintcodeapp.com/news/ultimate-guide-to-iphone-resolutions" target="_blank" rel="noopener">https://www.paintcodeapp.com/news/ultimate-guide-to-iphone-resolutions</a></p>
<p>The iPhone 6 and 6+ introduced <strong>display mode</strong> <a href="https://www.cnet.com/how-to/explaining-display-zoom-on-iphone-6-and-6-plus/" target="_blank" rel="noopener">https://www.cnet.com/how-to/explaining-display-zoom-on-iphone-6-and-6-plus/</a></p>
<p>You can see that currently the iPhone 6+, 6s+, 7+ phones have scale factor of 2.88 in zoomed mode, and 2.6 in standard mode</p>
<p>You can also see that in zoomed mode, iPhone 6 has the same <strong>logical size</strong> as the iPhone 5</p>
<h3 id="Simulator-vs-device"><a href="#Simulator-vs-device" class="headerlink" title="Simulator vs device"></a>Simulator vs device</h3><p>This is to show you the differences in <code>nativeScale</code> in simulators and devices in <strong>zoomed mode</strong>, hence differences in <code>nativeBounds</code>.</p>
<p>iPhone 6+ simulator</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">(lldb) po <span class="type">UIScreen</span>.main.scale</span><br><span class="line"><span class="number">3.0</span></span><br><span class="line"></span><br><span class="line">(lldb) po <span class="type">UIScreen</span>.main.bounds</span><br><span class="line">▿ (<span class="number">0.0</span>, <span class="number">0.0</span>, <span class="number">414.0</span>, <span class="number">736.0</span>)</span><br><span class="line">  ▿ origin : (<span class="number">0.0</span>, <span class="number">0.0</span>)</span><br><span class="line">    - x : <span class="number">0.0</span></span><br><span class="line">    - y : <span class="number">0.0</span></span><br><span class="line">  ▿ size : (<span class="number">414.0</span>, <span class="number">736.0</span>)</span><br><span class="line">    - width : <span class="number">414.0</span></span><br><span class="line">    - height : <span class="number">736.0</span></span><br><span class="line"></span><br><span class="line">(lldb) po <span class="type">UIScreen</span>.main.nativeScale</span><br><span class="line"><span class="number">3.0</span></span><br><span class="line"></span><br><span class="line">(lldb) po <span class="type">UIScreen</span>.main.nativeBounds</span><br><span class="line">▿ (<span class="number">0.0</span>, <span class="number">0.0</span>, <span class="number">1242.0</span>, <span class="number">2208.0</span>)</span><br><span class="line">  ▿ origin : (<span class="number">0.0</span>, <span class="number">0.0</span>)</span><br><span class="line">    - x : <span class="number">0.0</span></span><br><span class="line">    - y : <span class="number">0.0</span></span><br><span class="line">  ▿ size : (<span class="number">1242.0</span>, <span class="number">2208.0</span>)</span><br><span class="line">    - width : <span class="number">1242.0</span></span><br><span class="line">    - height : <span class="number">2208.0</span></span><br></pre></td></tr></table></figure>

<p>iPhone 6+ device</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">(lldb) po <span class="type">UIScreen</span>.main.scale</span><br><span class="line"><span class="number">3.0</span></span><br><span class="line"></span><br><span class="line">(lldb) po <span class="type">UIScreen</span>.main.bounds</span><br><span class="line">▿ (<span class="number">0.0</span>, <span class="number">0.0</span>, <span class="number">375.0</span>, <span class="number">667.0</span>)</span><br><span class="line">  ▿ origin : (<span class="number">0.0</span>, <span class="number">0.0</span>)</span><br><span class="line">    - x : <span class="number">0.0</span></span><br><span class="line">    - y : <span class="number">0.0</span></span><br><span class="line">  ▿ size : (<span class="number">375.0</span>, <span class="number">667.0</span>)</span><br><span class="line">    - width : <span class="number">375.0</span></span><br><span class="line">    - height : <span class="number">667.0</span></span><br><span class="line"></span><br><span class="line">(lldb) po <span class="type">UIScreen</span>.main.nativeScale</span><br><span class="line"><span class="number">2.88</span></span><br><span class="line"></span><br><span class="line">(lldb) po <span class="type">UIScreen</span>.main.nativeBounds</span><br><span class="line">▿ (<span class="number">0.0</span>, <span class="number">0.0</span>, <span class="number">1080.0</span>, <span class="number">1920.0</span>)</span><br><span class="line">  ▿ origin : (<span class="number">0.0</span>, <span class="number">0.0</span>)</span><br><span class="line">    - x : <span class="number">0.0</span></span><br><span class="line">    - y : <span class="number">0.0</span></span><br><span class="line">  ▿ size : (<span class="number">1080.0</span>, <span class="number">1920.0</span>)</span><br><span class="line">    - width : <span class="number">1080.0</span></span><br><span class="line">    - height : <span class="number">1920.0</span></span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/">iOS</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-Optional-of-optional-in-Swift"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/Optional-of-optional-in-Swift/">Optional of optional in Swift</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/Optional-of-optional-in-Swift/" class="article-date">
	  <time datetime="2017-06-14T04:07:31.000Z" itemprop="datePublished">June 14, 2017</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/58" target="_blank" rel="noopener">#58</a></strong></p>
<p>Do you know that an optional can itself contain an optional, that contains another optional? In that case, we need to unwrap multiple times</p>
<p><img src="https://user-images.githubusercontent.com/2284279/27117791-83128f50-50d8-11e7-93dd-604ed704e890.png" alt="optionals"></p>
<p>You mostly see it when you try to access <code>window</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> window = <span class="type">UIApplication</span>.shared.delegate?.window <span class="comment">// UIWindow??</span></span><br></pre></td></tr></table></figure>

<p>It is because <code>delegate</code> can be nil, and its <code>window</code> can be nil too.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">window??.backgroundColor = .yellow</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swift/">swift</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-Package-node.js-application"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/Package-node.js-application/">Package node.js application</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/Package-node.js-application/" class="article-date">
	  <time datetime="2017-06-13T08:36:39.000Z" itemprop="datePublished">June 13, 2017</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/57" target="_blank" rel="noopener">#57</a></strong></p>
<p>I like <code>node.js</code> because it has many cool packages. I wish the same goes for macOS. Fortunately, the below solutions provide a way to package <code>node.js</code> modules and use them inside macOS applications. It can be slow, but you save time by using existing <code>node.js</code> modules. Let’s give it a try. </p>
<ul>
<li><a href="https://github.com/zeit/pkg" target="_blank" rel="noopener">pkg</a> Package your Node.js project into an executable 🚀 </li>
<li><a href="https://github.com/nexe/nexe" target="_blank" rel="noopener">nexe</a> create a single executable out of your node.js apps</li>
<li><a href="https://github.com/igorklopov/enclose" target="_blank" rel="noopener">enclose js</a> Compile your Node.js project into an executable <a href="http://enclosejs.com" target="_blank" rel="noopener">http://enclosejs.com</a></li>
</ul>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/node/">node</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-Favorite-WWDC-2017-sessions"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/Favorite-WWDC-2017-sessions/">Favorite WWDC 2017 sessions</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/Favorite-WWDC-2017-sessions/" class="article-date">
	  <time datetime="2017-06-10T09:41:21.000Z" itemprop="datePublished">June 10, 2017</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/56" target="_blank" rel="noopener">#56</a></strong></p>
<ul>
<li>Source <a href="https://developer.apple.com/videos/wwdc2017/" target="_blank" rel="noopener">WWDC 2017</a></li>
</ul>
<ol>
<li><a href="https://developer.apple.com/videos/play/wwdc2017/703/" target="_blank" rel="noopener">Introducing Core ML</a></li>
</ol>
<ul>
<li>Core ML<br><img src="https://devimages-cdn.apple.com/wwdc-services/images/7/1572/1572_wide_250x141_2x.jpg" alt></li>
</ul>
<ol start="2">
<li><a href="https://developer.apple.com/videos/play/wwdc2017/602/" target="_blank" rel="noopener">Introducing ARKit: Augmented Reality for iOS</a></li>
</ol>
<ul>
<li>ARKit<br><img src="https://devimages-cdn.apple.com/wwdc-services/images/7/1662/1662_wide_250x141_2x.jpg" alt></li>
</ul>
<ol start="3">
<li><a href="https://developer.apple.com/videos/play/wwdc2017/402/" target="_blank" rel="noopener">What’s New in Swift</a></li>
</ol>
<ul>
<li>String</li>
<li>Generic</li>
<li>Codable<br><img src="https://devimages-cdn.apple.com/wwdc-services/images/7/1673/1673_wide_250x141_2x.jpg" alt></li>
</ul>
<ol start="4">
<li><a href="https://developer.apple.com/videos/play/wwdc2017/230/" target="_blank" rel="noopener">Advanced Animations with UIKit</a></li>
</ol>
<ul>
<li>Multiple animation</li>
<li>Interactive animation<br><img src="https://devimages-cdn.apple.com/wwdc-services/images/7/1557/1557_wide_250x141_2x.jpg" alt></li>
</ul>
<ol start="5">
<li><a href="https://developer.apple.com/videos/play/wwdc2017/208/" target="_blank" rel="noopener">Natural Language Processing and your Apps</a></li>
</ol>
<ul>
<li>NSLinguisticTagger<br><img src="https://devimages-cdn.apple.com/wwdc-services/images/7/1543/1543_wide_250x141_2x.jpg" alt></li>
</ul>
<ol start="6">
<li><a href="https://developer.apple.com/videos/play/wwdc2017/201/" target="_blank" rel="noopener">What’s New in Cocoa Touch</a></li>
</ol>
<ul>
<li>Large title</li>
<li>Drag and drop</li>
<li>File management</li>
<li>Safe area<br><img src="https://devimages-cdn.apple.com/wwdc-services/images/7/1548/1548_wide_250x141_2x.jpg" alt></li>
</ul>
<ol start="7">
<li><a href="https://developer.apple.com/videos/play/wwdc2017/212/" target="_blank" rel="noopener">What’s New in Foundation</a></li>
</ol>
<ul>
<li>KeyPath</li>
<li>Observe</li>
<li>Codable<br><img src="https://devimages-cdn.apple.com/wwdc-services/images/7/1620/1620_wide_250x141_2x.jpg" alt></li>
</ul>
<ol start="8">
<li><a href="https://developer.apple.com/videos/play/wwdc2017/404/" target="_blank" rel="noopener">Debugging with Xcode 9</a></li>
</ol>
<ul>
<li>Wireless debugging</li>
<li>View controller debugging<br><img src="https://devimages-cdn.apple.com/wwdc-services/images/7/1681/1681_wide_250x141_2x.jpg" alt></li>
</ul>
<ol start="9">
<li><a href="https://developer.apple.com/videos/play/wwdc2017/710/" target="_blank" rel="noopener">Core ML in depth</a></li>
</ol>
<ul>
<li>Model</li>
<li>Core ML tools<br><img src="https://devimages-cdn.apple.com/wwdc-services/images/7/1573/1573_wide_250x141_2x.jpg" alt></li>
</ul>
<ol start="10">
<li><a href="https://developer.apple.com/videos/play/wwdc2017/506/" target="_blank" rel="noopener">Vision Framework: Building on Core ML</a></li>
</ol>
<ul>
<li>Detection</li>
<li>Track<br><img src="https://devimages-cdn.apple.com/wwdc-services/images/7/1618/1618_wide_250x141_2x.jpg" alt></li>
</ul>
<ol start="11">
<li><a href="https://developer.apple.com/videos/play/wwdc2017/409/" target="_blank" rel="noopener">What’s New in Testing</a></li>
</ol>
<ul>
<li>Parallel testing</li>
<li>Wait</li>
<li>Screenshot</li>
<li>Multiple app scenario<br><img src="https://devimages-cdn.apple.com/wwdc-services/images/7/1677/1677_wide_250x141_2x.jpg" alt></li>
</ul>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/">iOS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/wwdc/">wwdc</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-implement-a-tracker-in-Swift"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-implement-a-tracker-in-Swift/">How to implement a tracker in Swift</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-implement-a-tracker-in-Swift/" class="article-date">
	  <time datetime="2017-06-10T09:13:13.000Z" itemprop="datePublished">June 10, 2017</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/55" target="_blank" rel="noopener">#55</a></strong></p>
<p>I’m trying to implement a tracker, so the idea is that it can inject <code>subscription</code> upon method calls. It is best suit for logging, analytics, and it leverages <code>RxCocoa</code></p>
<h3 id="Usage"><a href="#Usage" class="headerlink" title="Usage"></a>Usage</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">track(<span class="type">ListController</span>.<span class="keyword">self</span>) &#123; <span class="number">_</span> <span class="keyword">in</span></span><br><span class="line">  <span class="built_in">print</span>(<span class="string">""</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">track(<span class="type">ListController</span>.<span class="keyword">self</span>, selector: #selector(<span class="type">ListController</span>.hello)) &#123; <span class="number">_</span> <span class="keyword">in</span></span><br><span class="line">  <span class="built_in">print</span>(<span class="string">""</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">track(<span class="type">DetailController</span>.<span class="keyword">self</span>) &#123; <span class="number">_</span> <span class="keyword">in</span></span><br><span class="line">  <span class="built_in">print</span>(<span class="string">""</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="The-code"><a href="#The-code" class="headerlink" title="The code"></a>The code</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> UIKit</span><br><span class="line"><span class="keyword">import</span> RxSwift</span><br><span class="line"><span class="keyword">import</span> RxCocoa</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> mapping: [<span class="type">String</span>: [<span class="type">Item</span>]] = [:]</span><br><span class="line"><span class="keyword">var</span> hasSwizzled = <span class="literal">false</span></span><br><span class="line"><span class="keyword">let</span> bag = <span class="type">DisposeBag</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">track</span>&lt;T: UIViewController&gt;<span class="params">(<span class="number">_</span> type: T.<span class="keyword">Type</span>, selector: Selector? = <span class="literal">nil</span>, block: @escaping <span class="params">(T)</span></span></span> -&gt; <span class="type">Void</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> typeName = <span class="type">NSStringFromClass</span>(type)</span><br><span class="line">  <span class="keyword">if</span> !hasSwizzled &#123;</span><br><span class="line">    <span class="keyword">let</span> original = #selector(<span class="type">UIViewController</span>.viewDidLoad)</span><br><span class="line">    <span class="keyword">let</span> swizled = #selector(<span class="type">UIViewController</span>.trackers_viewDidLoad)</span><br><span class="line">    swizzle(kClass: <span class="type">UIViewController</span>.<span class="keyword">self</span>, originalSelector: original, swizzledSelector: swizled)</span><br><span class="line">    hasSwizzled = <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> selector = selector ?? #selector(<span class="type">UIViewController</span>.viewDidAppear(<span class="number">_</span>:))</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> item = <span class="type">Item</span>(selector: selector, block: &#123; (controller) <span class="keyword">in</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">let</span> controller = controller <span class="keyword">as</span>? <span class="type">T</span> &#123;</span><br><span class="line">      block(controller)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> <span class="keyword">var</span> items = mapping[typeName] &#123;</span><br><span class="line">    items.append(item)</span><br><span class="line">    mapping[typeName] = items</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    mapping[typeName] = [item]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Item</span> </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> selector: <span class="type">Selector</span></span><br><span class="line">  <span class="keyword">let</span> block: (<span class="type">UIViewController</span>) -&gt; <span class="type">Void</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">init</span>(selector: <span class="type">Selector</span>, block: @escaping (<span class="type">UIViewController</span>) -&gt; <span class="type">Void</span>) &#123;</span><br><span class="line">    <span class="keyword">self</span>.selector = selector</span><br><span class="line">    <span class="keyword">self</span>.block = block</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">UIViewController</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">func</span> <span class="title">trackers_viewDidLoad</span><span class="params">()</span></span> &#123;</span><br><span class="line">    trackers_viewDidLoad()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> typeName = <span class="type">NSStringFromClass</span>(type(of: <span class="keyword">self</span>))</span><br><span class="line">    <span class="keyword">let</span> items = mapping[typeName]</span><br><span class="line">    items?.forEach(&#123; (item) <span class="keyword">in</span></span><br><span class="line">      <span class="keyword">self</span></span><br><span class="line">        .rx</span><br><span class="line">        .sentMessage(item.selector)</span><br><span class="line">        .subscribe(onNext: &#123; <span class="number">_</span> <span class="keyword">in</span></span><br><span class="line">          item.block(<span class="keyword">self</span>)</span><br><span class="line">        &#125;, onCompleted: &#123;</span><br><span class="line">          <span class="built_in">print</span>(<span class="string">"completed"</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">        .disposed(by: bag)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">swizzle</span><span class="params">(kClass: AnyClass, originalSelector: Selector, swizzledSelector: Selector)</span></span> &#123;</span><br><span class="line">  <span class="keyword">let</span> originalMethod = class_getInstanceMethod(kClass, originalSelector)</span><br><span class="line">  <span class="keyword">let</span> swizzledMethod = class_getInstanceMethod(kClass, swizzledSelector)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> didAddMethod = class_addMethod(kClass, originalSelector, method_getImplementation(swizzledMethod), method_getTypeEncoding(swizzledMethod))</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> didAddMethod &#123;</span><br><span class="line">    class_replaceMethod(kClass, swizzledSelector, method_getImplementation(originalMethod), method_getTypeEncoding(originalMethod))</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    method_exchangeImplementations(originalMethod, swizzledMethod)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="entry-meta entry-footer">
      
      
      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-change-year-in-Date-in-Swift"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-change-year-in-Date-in-Swift/">How to change year in Date in Swift</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-change-year-in-Date-in-Swift/" class="article-date">
	  <time datetime="2017-06-09T08:53:47.000Z" itemprop="datePublished">June 9, 2017</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/54" target="_blank" rel="noopener">#54</a></strong></p>
<p>Today I’m trying to change the year of a <code>Date</code> object to 2000 in Swift.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> date = <span class="type">Date</span>()</span><br></pre></td></tr></table></figure>

<p>Firstly, I tried with <code>date(bySetting:)</code> but it does not work with past year. It simply returns nil</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Calendar</span>.current.date(bySetting: .year, value: <span class="number">2000</span>, of: date)</span><br></pre></td></tr></table></figure>

<p>Secondly, I tried with <code>dateComponents</code>. The <code>component.year</code> has changed, but it <code>calendar</code> still returns the original date, very strange !!. No matter what timezone and calendar I use, it still has this problem</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> component = calendar.dateComponents(<span class="keyword">in</span>: <span class="type">TimeZone</span>.current, from: base)</span><br><span class="line">component.year = year</span><br><span class="line"><span class="type">Calendar</span>.current.date(from: component)</span><br></pre></td></tr></table></figure>

<p>Finally, I tried to be more explicit, and it works 🎉 </p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> component = calendar.dateComponents([.year, .month, .day, .hour, .minute, .second], from: base)</span><br><span class="line">component.year = year</span><br><span class="line"><span class="type">Calendar</span>.current.date(from: component)</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swift/">swift</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-test-for-viewDidLoad-in-iOS"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-test-for-viewDidLoad-in-iOS/">How to test for viewDidLoad in iOS</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-test-for-viewDidLoad-in-iOS/" class="article-date">
	  <time datetime="2017-06-07T09:58:15.000Z" itemprop="datePublished">June 7, 2017</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/52" target="_blank" rel="noopener">#52</a></strong></p>
<p>Suppose we have the following view controller</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ListController</span>: <span class="title">UIViewController</span> </span>&#123;</span><br><span class="line">  <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">super</span>.viewDidLoad()</span><br><span class="line">    view.backgroundColor = .white</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Get-to-know-viewDidLoad"><a href="#Get-to-know-viewDidLoad" class="headerlink" title="Get to know viewDidLoad"></a>Get to know <code>viewDidLoad</code></h3><p>We know that <code>viewDidLoad</code> is called when view is created the first time. So in the the Unit Test, if you use <code>viewDidLoad</code> to trigger, you will fall into a trap</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">testSetup</span><span class="params">()</span></span> &#123;</span><br><span class="line">  <span class="keyword">let</span> controller = <span class="type">ListController</span>()</span><br><span class="line">  controller.viewDidLoad()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Why-is-viewDidLoad-called-twice"><a href="#Why-is-viewDidLoad-called-twice" class="headerlink" title="Why is viewDidLoad called twice?"></a>Why is <code>viewDidLoad</code> called twice?</h3><ul>
<li>It is called once in your test</li>
<li>And in your <code>viewDidLoad</code> method, you access <code>view</code>, which is created the first time, hence it will trigger <code>viewDidLoad</code> again</li>
</ul>
<h3 id="The-correct-way"><a href="#The-correct-way" class="headerlink" title="The correct way"></a>The correct way</h3><p>The best practice is not to trigger events yourself, but do something to make event happen. In Unit Test, we just access <code>view</code> to trigger <code>viewDidLoad</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">testSetup</span><span class="params">()</span></span> &#123;</span><br><span class="line">  <span class="keyword">let</span> controller = <span class="type">ListController</span>()</span><br><span class="line">  <span class="keyword">let</span> <span class="number">_</span> = controller.view</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="entry-meta entry-footer">
      
      
      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-initialize-Enums-With-Optionals-in-Swift"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-initialize-Enums-With-Optionals-in-Swift/">How to initialize Enums With Optionals in Swift</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-initialize-Enums-With-Optionals-in-Swift/" class="article-date">
	  <time datetime="2017-06-02T11:07:40.000Z" itemprop="datePublished">June 2, 2017</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/49" target="_blank" rel="noopener">#49</a></strong></p>
<p>Today someone showed me <a href="https://medium.com/@_Easy_E/initializing-enums-with-optionals-in-swift-bf246ce20e4c" target="_blank" rel="noopener">https://medium.com/@_Easy_E/initializing-enums-with-optionals-in-swift-bf246ce20e4c</a> which tries to init enum with optional value.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">Planet</span>: <span class="title">String</span> </span>&#123;</span><br><span class="line">  <span class="keyword">case</span> mercury</span><br><span class="line">  <span class="keyword">case</span> venus</span><br><span class="line">  <span class="keyword">case</span> earth</span><br><span class="line">  <span class="keyword">case</span> mars</span><br><span class="line">  <span class="keyword">case</span> jupiter</span><br><span class="line">  <span class="keyword">case</span> saturn</span><br><span class="line">  <span class="keyword">case</span> uranus</span><br><span class="line">  <span class="keyword">case</span> neptune</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">RawRepresentable</span> </span>&#123;</span><br><span class="line">  <span class="keyword">init</span>?(optionalValue: <span class="type">RawValue?</span>) &#123;</span><br><span class="line">    <span class="keyword">guard</span> <span class="keyword">let</span> value = optionalValue <span class="keyword">else</span> &#123; <span class="keyword">return</span> <span class="literal">nil</span> &#125;</span><br><span class="line">    <span class="keyword">self</span>.<span class="keyword">init</span>(rawValue: value)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> name: <span class="type">String?</span> = <span class="string">"venus"</span></span><br><span class="line"><span class="keyword">let</span> planet = <span class="type">Planet</span>(optionalValue: name)</span><br></pre></td></tr></table></figure>

<p>One interesting fact about optional, is that it is a monad, so it has <code>map</code> and <code>flatMap</code>. Since <code>enum</code> <code>init(rawValue:)</code> returns an optional, we need to use <code>flatMap</code>. It looks like this</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> name: <span class="type">String?</span> = <span class="string">"venus"</span></span><br><span class="line"><span class="keyword">let</span> planet = name.flatMap(&#123; <span class="type">Planet</span>(rawValue: $<span class="number">0</span>) &#125;)</span><br></pre></td></tr></table></figure>

<p>🎉 </p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-run-UI-Test-with-system-alert-in-iOS"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-run-UI-Test-with-system-alert-in-iOS/">How to run UI Test with system alert in iOS</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-run-UI-Test-with-system-alert-in-iOS/" class="article-date">
	  <time datetime="2017-06-02T10:59:14.000Z" itemprop="datePublished">June 2, 2017</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/48" target="_blank" rel="noopener">#48</a></strong></p>
<p>Continue my post <a href="https://github.com/onmyway133/blog/issues/45" target="_blank" rel="noopener">https://github.com/onmyway133/blog/issues/45</a>. When you work with features, like map view, you mostly need permissions, and in UITests you need to test for system alerts.</p>
<h3 id="Add-interruption-monitor"><a href="#Add-interruption-monitor" class="headerlink" title="Add interruption monitor"></a>Add interruption monitor</h3><p>This is the code. Note that you need to call <code>app.tap()</code> to interact with the app again, in order for interruption monitor to work</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">addUIInterruptionMonitor(withDescription: <span class="string">"Location permission"</span>, handler: &#123; alert <span class="keyword">in</span></span><br><span class="line">  alert.buttons[<span class="string">"Allow"</span>].tap()</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">app.tap()</span><br></pre></td></tr></table></figure>

<p>Note that you don’t always need to handle the returned value of <code>addUIInterruptionMonitor</code></p>
<h3 id="Only-tap-when-needed"><a href="#Only-tap-when-needed" class="headerlink" title="Only tap when needed"></a>Only tap when needed</h3><p>One problem with this approach is that when there is no system alert (you already touched to allow before), then <code>app.tap()</code> will tap on your main screen. In my app which uses map view, it will tap on some pins, which will present another screen, which is not correct.</p>
<p>Since <code>app.alerts</code> does not work, my 2nd attempt is to check for <code>app.windows.count</code>. Unfortunately, it always shows 5 windows whether alert is showing or not. I know 1 is for main window, 1 is for status bar, the other 3 windows I have no idea.</p>
<p>The 3rd attempt is to check that underlying elements (behind alert) can’t be touched, which is to use <code>isHittable</code>. This property does not work, it always returns <code>true</code></p>
<h3 id="Check-the-content"><a href="#Check-the-content" class="headerlink" title="Check the content"></a>Check the content</h3><p>This uses the assumption that we only tests for when user hits <code>Allow</code> button. So only if alert is answered with <code>Allow</code>, then we have permission to display our content. For my map view, I check that there are some pins on the map. See <a href="https://github.com/onmyway133/blog/issues/45" target="_blank" rel="noopener">https://github.com/onmyway133/blog/issues/45</a> on how to mock location and identify the pins</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">if app.otherElements.matching(identifier: &quot;myPin&quot;).count == 0 &#123;</span><br><span class="line">  app.tap()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="When-there-is-no-permission"><a href="#When-there-is-no-permission" class="headerlink" title="When there is no permission"></a>When there is no permission</h3><p>So how can we test that user has denied your request? In my map view, if user does not allow location permission, I show a popup asking user to go to Settings and change it, otherwise, they can’t interact with the map.</p>
<p>I don’t know how to toggle location in <code>Privacy</code> in <code>Settings</code>, maybe <code>XCUISiriService</code> can help. But 1 thing we can do is to mock the application</p>
<p>Before you launch the app in <code>UITests</code>, add some arguments</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app.launchArguments.append(&quot;--UITests-mockNoLocationPermission&quot;)</span><br></pre></td></tr></table></figure>

<p>and in the app, we need to check for this <code>arguments</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">checkLocationPermission</span><span class="params">()</span></span> &#123;</span><br><span class="line">  <span class="keyword">if</span> <span class="type">CommandLine</span>.arguments.<span class="built_in">contains</span>(<span class="string">"--UITests-mockNoLocationPermission"</span>) &#123;</span><br><span class="line">    showNoLocationPopupAndAskUserToEnableInSettings()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>That’s it. In <code>UITests</code>, we can test whether that <code>no location permission popup</code> appears or not</p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-master-Auto-Layout-Visual-Format-Language"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-master-Auto-Layout-Visual-Format-Language/">How to master Auto Layout Visual Format Language</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-master-Auto-Layout-Visual-Format-Language/" class="article-date">
	  <time datetime="2017-06-02T10:17:14.000Z" itemprop="datePublished">June 2, 2017</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/47" target="_blank" rel="noopener">#47</a></strong></p>
<p>No, you don’t</p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/layout/">layout</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-Getting-started-with-Swift"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/Getting-started-with-Swift/">Getting started with Swift</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/Getting-started-with-Swift/" class="article-date">
	  <time datetime="2017-06-02T05:15:46.000Z" itemprop="datePublished">June 2, 2017</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/46" target="_blank" rel="noopener">#46</a></strong></p>
<p>Hi, here are some materials I found that are useful for learning Swift and iOS</p>
<ul>
<li><a href="https://itunes.apple.com/us/book/app-development-with-swift/id1219117996?mt=11" target="_blank" rel="noopener">App Development with Swift</a></li>
<li><a href="https://www.hackingwithswift.com/read" target="_blank" rel="noopener">Hacking with Swift</a></li>
<li><a href="https://swifteducation.github.io/teaching_app_development_with_swift/" target="_blank" rel="noopener">Teaching App Development with Swift</a></li>
<li><a href="http://guides.codepath.com/ios" target="_blank" rel="noopener">CodePath iOS Guides</a></li>
<li><a href="https://github.com/nettlep/learn-swift" target="_blank" rel="noopener">learn-swift</a></li>
<li><a href="https://developer.apple.com/library/content/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/Introduction/Introduction.html" target="_blank" rel="noopener">About iOS App Architecture</a></li>
<li><a href="https://developer.apple.com/library/content/referencelibrary/GettingStarted/DevelopiOSAppsSwift/index.html#//apple_ref/doc/uid/TP40015214-CH2-SW1" target="_blank" rel="noopener">Start Developing iOS Apps (Swift)</a></li>
</ul>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-run-UITests-with-map-view-in-iOS"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-run-UITests-with-map-view-in-iOS/">How to run UITests with map view in iOS</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-run-UITests-with-map-view-in-iOS/" class="article-date">
	  <time datetime="2017-06-01T07:32:19.000Z" itemprop="datePublished">June 1, 2017</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/45" target="_blank" rel="noopener">#45</a></strong></p>
<h2 id="Mock-a-location"><a href="#Mock-a-location" class="headerlink" title="Mock a location"></a>Mock a location</h2><p>You should mock a location to ensure reliable test</p>
<h3 id="Create-the-gpx-file"><a href="#Create-the-gpx-file" class="headerlink" title="Create the gpx file"></a>Create the gpx file</h3><p>Go to <code>Xcode -&gt; File -&gt; New -&gt; GPX File</code></p>
<p><img src="https://cloud.githubusercontent.com/assets/2284279/26673256/8472a1a8-46bc-11e7-95ce-1931032c97bb.png" alt="gpx"></p>
<p>It looks like</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">gpx</span> <span class="attr">version</span>=<span class="string">"1.1"</span> <span class="attr">creator</span>=<span class="string">"Xcode"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">wpt</span> <span class="attr">lat</span>=<span class="string">"59.913590"</span> <span class="attr">lon</span>=<span class="string">"10.733750"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>Oslo S<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">time</span>&gt;</span>2017-05-31T14:55:37Z<span class="tag">&lt;/<span class="name">time</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">wpt</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">wpt</span> <span class="attr">lat</span>=<span class="string">"59.913590"</span> <span class="attr">lon</span>=<span class="string">"10.733750"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>Oslo S<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">time</span>&gt;</span>2017-05-31T14:55:40Z<span class="tag">&lt;/<span class="name">time</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">wpt</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">gpx</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>The <code>gpx</code> file is very powerful, as it allows you to specify a route with different movement speed.</p>
<blockquote>
<p>Provide one or more waypoints containing a latitude/longitude pair. If you provide one<br>waypoint, Xcode will simulate that specific location. If you provide multiple waypoints,<br>Xcode will simulate a route visiting each waypoint.</p>
</blockquote>
<blockquote>
<p>Optionally provide a time element for each waypoint. Xcode will interpolate movement<br>at a rate of speed based on the time elapsed between each waypoint. If you do not provide<br>a time element, then Xcode will use a fixed rate of speed. Waypoints must be sorted by time in ascending order.</p>
</blockquote>
<h3 id="Use-the-gpx-file"><a href="#Use-the-gpx-file" class="headerlink" title="Use the gpx file"></a>Use the gpx file</h3><ul>
<li>Declare the <code>gpx</code> file in <strong>app target</strong>, not UITests target. Go to your <code>app scheme -&gt; Run -&gt; Options</code></li>
</ul>
<p><img src="https://cloud.githubusercontent.com/assets/2284279/26673340/cfa90716-46bc-11e7-92b3-d1ee932090f1.png" alt="location"></p>
<ul>
<li>Go to <code>Simulator -&gt; Debug -&gt; Location -&gt; Custom Location</code> and select that same location, just to make sure. It does not need to be the same, but I see that without <code>Custom Location</code>, it does not work in <code>UITests</code></li>
</ul>
<h2 id="Test-that-you’re-near-the-initial-location"><a href="#Test-that-you’re-near-the-initial-location" class="headerlink" title="Test that you’re near the initial location"></a>Test that you’re near the initial location</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="built_in">map</span> = app.maps.element(boundBy: <span class="number">0</span>)</span><br><span class="line"><span class="keyword">let</span> predicate = <span class="type">NSPredicate</span>(format: <span class="string">"label CONTAINS 'City Hall'"</span>)</span><br><span class="line"><span class="keyword">let</span> cityHall = <span class="built_in">map</span>.otherElements.matching(predicate).element(boundBy: <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// wait for the map to finish loading and zooming</span></span><br><span class="line">wait(<span class="keyword">for</span>: cityHall, timeout: <span class="number">2</span>)</span><br><span class="line"><span class="type">XCTAssertTrue</span>(cityHall.exists)</span><br></pre></td></tr></table></figure>

<p>The <code>wait</code> function is from <a href="https://github.com/onmyway133/blog/issues/44" target="_blank" rel="noopener">https://github.com/onmyway133/blog/issues/44</a></p>
<h2 id="Test-that-you-can-interact-with-your-custom-pin"><a href="#Test-that-you-can-interact-with-your-custom-pin" class="headerlink" title="Test that you can interact with your custom pin"></a>Test that you can interact with your custom pin</h2><p>You need to specify <code>accessibilityIdentifier</code>, like</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyPin</span>: <span class="title">MKAnnotationView</span> </span>&#123;</span><br><span class="line">  <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">didMoveToSuperview</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">super</span>.didMoveToSuperview()</span><br><span class="line"></span><br><span class="line">    accessibilityIdentifier = <span class="string">"myPin"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>and then query for that pin. Not that it is not inside <code>map</code>, it is inside <code>app</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> pin = app.otherElements.matching(identifier: <span class="string">"myPin"</span>).element(boundBy: <span class="number">0</span>)</span><br><span class="line"><span class="type">XCTAssertTrue</span>(pin.exists)</span><br></pre></td></tr></table></figure>

<h2 id="You-should-use-accessibilityIdentifier"><a href="#You-should-use-accessibilityIdentifier" class="headerlink" title="You should use accessibilityIdentifier"></a>You should use <code>accessibilityIdentifier</code></h2><p><code>accessibilityIdentifier</code> is from <code>UIAccessibilityIdentification</code> protocol. You should not use <code>accessibilityLabel</code>, see <a href="https://github.com/kif-framework/KIF/issues/243" target="_blank" rel="noopener">https://github.com/kif-framework/KIF/issues/243</a></p>
<blockquote>
<p>Given that accessibilityLabel is an outwardly-facing string that is actually used by accessibility screen readers (and should be localized to the device user’s language), Apple now provides an alternate property (iOS 5+) that is specifically intended for UI Automation purposes</p>
</blockquote>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/">iOS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swift/">swift</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-run-UI-Test-with-Facebook-login"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-run-UI-Test-with-Facebook-login/">How to run UI Test with Facebook login</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-run-UI-Test-with-Facebook-login/" class="article-date">
	  <time datetime="2017-05-30T13:32:17.000Z" itemprop="datePublished">May 30, 2017</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/44" target="_blank" rel="noopener">#44</a></strong></p>
<p>Today I’m trying to run some UITest on my app, which uses Facebook login. And here are some of my notes on it.</p>
<div align="center">
<img src="https://cloud.githubusercontent.com/assets/2284279/26590229/49c0c782-455a-11e7-876d-bf4bec92fdea.gif" width="300" height="510">
</div>

<h3 id="Challenges"><a href="#Challenges" class="headerlink" title="Challenges"></a>Challenges</h3><ul>
<li>The challenges with Facebook is it uses <code>Safari controller</code>, we we deal mostly with <code>web view</code> for now. Starting from iOS 9+, Facebook decided to use <code>safari</code> instead of <code>native facebook app</code> to avoid app switching. You can read the detail here <a href="https://developers.facebook.com/blog/post/2015/10/29/Facebook-Login-iOS9/" target="_blank" rel="noopener">Building the Best Facebook Login Experience for People on iOS 9</a></li>
<li>It does not have wanted <code>accessibilityIdentifier</code> or <code>accessibilityLabel</code></li>
<li>The webview content may change in the future 😸 </li>
</ul>
<h3 id="Create-a-Facebook-test-user"><a href="#Create-a-Facebook-test-user" class="headerlink" title="Create a Facebook test user"></a>Create a Facebook test user</h3><p>Luckily, you don’t have to create your own Facebook user to test. Facebook supports test users that you can manage permissions and friends, very handy</p>
<p><img src="https://cloud.githubusercontent.com/assets/2284279/26590445/e032fe1a-455a-11e7-8e6d-84dce3b21152.png" alt="test user"></p>
<p>When creating the test user, you have the option to select language. That will be the displayed language in Safari web view. I choose <code>Norwegian</code> 🇳🇴  for now</p>
<p><img src="https://cloud.githubusercontent.com/assets/2284279/26590675/8168357a-455b-11e7-831d-0df899ea51c5.png" alt="language"></p>
<h3 id="Click-the-login-button-and-show-Facebook-login"><a href="#Click-the-login-button-and-show-Facebook-login" class="headerlink" title="Click the login button and show Facebook login"></a>Click the login button and show Facebook login</h3><p>Here we use the default <code>FBSDKLoginButton</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> showFacebookLoginFormButton: <span class="type">XCUIElement</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> buttons[<span class="string">"Continue with Facebook"</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>And then tap it</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app.showFacebookLoginFormButton.tap()</span><br></pre></td></tr></table></figure>

<h3 id="Check-login-status"><a href="#Check-login-status" class="headerlink" title="Check login status"></a>Check login status</h3><p>When going to safari Facebook form, user may have already logged in or not. So we need to handle these 2 cases. When user has logged in, Facebook will say something like “you have already logged in” or the <code>OK</code> button.</p>
<p>The advice here is to put breakpoint and <code>po app.staticTexts</code>, <code>po app.buttons</code> to see which UI elements are at a certain point.</p>
<p>You can check for the static text, or simply just the <code>OK</code> button</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> isAlreadyLoggedInSafari: <span class="type">Bool</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> buttons[<span class="string">"OK"</span>].exists || staticTexts[<span class="string">"Du har allerede godkjent Blue Sea."</span>].exists</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Wait-and-refresh"><a href="#Wait-and-refresh" class="headerlink" title="Wait and refresh"></a>Wait and refresh</h3><p>But Facebook form is a webview, so its content is a bit dynamic. And UITest seems to cache content for fast query, so before checking <code>staticTexts</code>, we need to <code>wait</code> and <code>refresh the cache</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app.clearCachedStaticTexts()</span><br></pre></td></tr></table></figure>

<p>This is the <code>wait</code> function</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">XCTestCase</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">func</span> <span class="title">wait</span><span class="params">(<span class="keyword">for</span> duration: TimeInterval)</span></span> &#123;</span><br><span class="line">    <span class="keyword">let</span> waitExpectation = expectation(description: <span class="string">"Waiting"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> when = <span class="type">DispatchTime</span>.now() + duration</span><br><span class="line">    <span class="type">DispatchQueue</span>.main.asyncAfter(deadline: when) &#123;</span><br><span class="line">      waitExpectation.fulfill()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// We use a buffer here to avoid flakiness with Timer on CI</span></span><br><span class="line">    waitForExpectations(timeout: duration + <span class="number">0.5</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Wait-for-element-to-appear"><a href="#Wait-for-element-to-appear" class="headerlink" title="Wait for element to appear"></a>Wait for element to appear</h3><p>But a more solid approach would be to wait for element to appear. For Facebook login form, they should display a <code>Facebook</code> label after loading. So we should wait for this element</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">XCTestCase</span> </span>&#123;</span><br><span class="line">  <span class="comment">/// Wait for element to appear</span></span><br><span class="line">  <span class="function"><span class="keyword">func</span> <span class="title">wait</span><span class="params">(<span class="keyword">for</span> element: XCUIElement, timeout duration: TimeInterval)</span></span> &#123;</span><br><span class="line">    <span class="keyword">let</span> predicate = <span class="type">NSPredicate</span>(format: <span class="string">"exists == true"</span>)</span><br><span class="line">    <span class="keyword">let</span> <span class="number">_</span> = expectation(<span class="keyword">for</span>: predicate, evaluatedWith: element, handler: <span class="literal">nil</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Here we don't need to call `waitExpectation.fulfill()`</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// We use a buffer here to avoid flakiness with Timer on CI</span></span><br><span class="line">    waitForExpectations(timeout: duration + <span class="number">0.5</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>And call this before you do any further inspection on elements in Facebook login form</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wait(<span class="keyword">for</span>: app.staticTexts[<span class="string">"Facebook"</span>], timeout: <span class="number">5</span>)</span><br></pre></td></tr></table></figure>

<h3 id="If-user-is-logged-in"><a href="#If-user-is-logged-in" class="headerlink" title="If user is logged in"></a>If user is logged in</h3><p>After login, my app shows the main controller with a map view inside. So a basic test would be to check the existence of that map</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> app.isAlreadyLoggedInSafari &#123;</span><br><span class="line">  app.okButton.tap()</span><br><span class="line"></span><br><span class="line">  handleLocationPermission()</span><br><span class="line">  <span class="comment">// Check for the map</span></span><br><span class="line">  <span class="type">XCTAssertTrue</span>(app.maps.element(boundBy: <span class="number">0</span>).exists)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Handle-interruption"><a href="#Handle-interruption" class="headerlink" title="Handle interruption"></a>Handle interruption</h3><p>You know that when showing the map with location, <code>Core Location</code> will ask for permission. So we need to handle that interruption as well. You need to ensure to call it early before the alert happens</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fileprivate</span> <span class="function"><span class="keyword">func</span> <span class="title">handleLocationPermission</span><span class="params">()</span></span> &#123;</span><br><span class="line">  addUIInterruptionMonitor(withDescription: <span class="string">"Location permission"</span>, handler: &#123; alert <span class="keyword">in</span></span><br><span class="line">    alert.buttons.element(boundBy: <span class="number">1</span>).tap()</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>There is another problem, this <code>monitor</code> won’t be called. So the workaround is to call <code>app.tap()</code> again when the alert will happen. In my case, I call <code>app.tap()</code> when my <code>map</code> has been shown for 1,2 seconds, just to make sure <code>app.tap()</code> is called after alert is shown</p>
<p>For a more detailed guide, please read <a href="https://github.com/onmyway133/blog/issues/48" target="_blank" rel="noopener">https://github.com/onmyway133/blog/issues/48</a></p>
<h3 id="If-user-is-not-logged-in"><a href="#If-user-is-not-logged-in" class="headerlink" title="If user is not logged in"></a>If user is not logged in</h3><p>In this case, we need to fill in email and password. You can take a look at the <code>The full source code</code> section below. When things don’t work or <code>po</code> does not show you the elements you needed, it’s probably because of caching or you need to wait until dynamic content finishes rendering. </p>
<p>You need to wait for element to appear</p>
<h3 id="Tap-on-the-text-field"><a href="#Tap-on-the-text-field" class="headerlink" title="Tap on the text field"></a>Tap on the text field</h3><p>You may get <code>Neither element nor any descendant has keyboard focus</code>, here are the workaround</p>
<ul>
<li>If you test on Simulator, make sure <code>Simulator -&gt; Hardware -&gt; Keyboard -&gt; Connect Hardware Keyboard</code> is not checked</li>
<li><code>wait</code> a bit after tap</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app.emailTextField.tap()</span><br></pre></td></tr></table></figure>

<h3 id="Clear-all-the-text"><a href="#Clear-all-the-text" class="headerlink" title="Clear all the text"></a>Clear all the text</h3><p>The idea is to move the caret to the end of the textField, then apply each <code>delete key</code> for each character, then type the next text</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">XCUIElement</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">func</span> <span class="title">deleteAllText</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">guard</span> <span class="keyword">let</span> string = value <span class="keyword">as</span>? <span class="type">String</span> <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> lowerRightCorner = coordinate(withNormalizedOffset: <span class="type">CGVector</span>(dx: <span class="number">0.9</span>, dy: <span class="number">0.9</span>))</span><br><span class="line">    lowerRightCorner.tap()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> deletes = string.characters.<span class="built_in">map</span>(&#123; <span class="number">_</span> <span class="keyword">in</span> <span class="type">XCUIKeyboardKeyDelete</span> &#125;).joined(separator: <span class="string">""</span>)</span><br><span class="line">    typeText(deletes)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Change-language"><a href="#Change-language" class="headerlink" title="Change language"></a>Change language</h3><p>For my case, I want to test in Norwegian, so we need to find the <code>Norwegian</code> option and tap on that. It is identified as <code>static text</code> by <code>UI Test</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> norwegianText: <span class="type">XCUIElement</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> staticTexts[<span class="string">"Norsk (bokmål)"</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wait(<span class="keyword">for</span>: app.norwegianText, timeout: <span class="number">1</span>)</span><br><span class="line">app.norwegianText.tap()</span><br></pre></td></tr></table></figure>

<h3 id="The-email-text-field"><a href="#The-email-text-field" class="headerlink" title="The email text field"></a>The email text field</h3><p>Luckily, email text field is detected by <code>UI Test</code> as <code>text field</code> element, so we can query for that. This uses predicate</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> emailTextField: <span class="type">XCUIElement</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> predicate = <span class="type">NSPredicate</span>(format: <span class="string">"placeholderValue == %@"</span>, <span class="string">"E-post eller mobil"</span>)</span><br><span class="line">  <span class="keyword">return</span> textFields.element(matching: predicate)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="The-password-text-field"><a href="#The-password-text-field" class="headerlink" title="The password text field"></a>The password text field</h3><p><code>UI Test</code> can’t seem to identify the password text field, so we need to search for it by <code>coordinate</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> passwordCoordinate: <span class="type">XCUICoordinate</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> vector = <span class="type">CGVector</span>(dx: <span class="number">1</span>, dy: <span class="number">1.5</span>)</span><br><span class="line">  <span class="keyword">return</span> emailTextField.coordinate(withNormalizedOffset: vector)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>This is the document for <code>func coordinate(withNormalizedOffset normalizedOffset: CGVector) -&gt; XCUICoordinate</code></p>
<blockquote>
<p>Creates and returns a new coordinate with a normalized offset.<br>The coordinate’s screen point is computed by adding normalizedOffset multiplied by the size of the element’s frame to the origin of the element’s frame.</p>
</blockquote>
<p>Then type the password</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">app.passwordCoordinate.tap()</span><br><span class="line">app.typeText(<span class="string">"My password"</span>)</span><br></pre></td></tr></table></figure>

<p>We should not use <code>app.passwordCoordinate.referencedElement</code> because it will point to email text field ❗️ 😢 </p>
<h3 id="Run-that-test-again"><a href="#Run-that-test-again" class="headerlink" title="Run that test again"></a>Run that test again</h3><p>Go to <code>Xcode -&gt; Product -&gt; Perform Actions -&gt; Test Again</code> to run the previous test again</p>
<p><img src="https://cloud.githubusercontent.com/assets/2284279/26591784/015636a8-455f-11e7-9b37-c02cc7a072b2.png" alt="again"></p>
<h3 id="The-full-source-code"><a href="#The-full-source-code" class="headerlink" title="The full source code"></a>The full source code</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> XCTest</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LoginTests</span>: <span class="title">XCTestCase</span> </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> app: <span class="type">XCUIApplication!</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">func</span> <span class="title">testLogin</span><span class="params">()</span></span> &#123;</span><br><span class="line">    continueAfterFailure = <span class="literal">false</span></span><br><span class="line">    app = <span class="type">XCUIApplication</span>()</span><br><span class="line">    app.launch()</span><br><span class="line"></span><br><span class="line">    passLogin()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">LoginTests</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">func</span> <span class="title">passLogin</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="comment">// Tap login</span></span><br><span class="line">    app.showFacebookLoginFormButton.tap()</span><br><span class="line">    wait(<span class="keyword">for</span>: app.staticTexts[<span class="string">"Facebook"</span>], timeout: <span class="number">5</span>) <span class="comment">// This requires a high timeout</span></span><br><span class="line">     </span><br><span class="line">    <span class="comment">// There may be location permission popup when showing map</span></span><br><span class="line">    handleLocationPermission()    </span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> app.isAlreadyLoggedInSafari &#123;</span><br><span class="line">      app.okButton.tap()</span><br><span class="line"></span><br><span class="line">      <span class="comment">// Show map</span></span><br><span class="line">      <span class="keyword">let</span> <span class="built_in">map</span> = app.maps.element(boundBy: <span class="number">0</span>)</span><br><span class="line">      wait(<span class="keyword">for</span>: <span class="built_in">map</span>, timeout: <span class="number">2</span>)</span><br><span class="line">      <span class="type">XCTAssertTrue</span>(<span class="built_in">map</span>.exists)</span><br><span class="line"></span><br><span class="line">      <span class="comment">// Need to interact with the app for interruption monitor to work</span></span><br><span class="line">      app.tap()</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// Choose norsk</span></span><br><span class="line">     wait(<span class="keyword">for</span>: app.norwegianText, timeout: <span class="number">1</span>)</span><br><span class="line">      app.norwegianText.tap()</span><br><span class="line"></span><br><span class="line">      app.emailTextField.tap()</span><br><span class="line">      app.emailTextField.deleteAllText()</span><br><span class="line">      app.emailTextField.typeText(<span class="string">"mujyhwhbby_1496155833@tfbnw.net"</span>)</span><br><span class="line"></span><br><span class="line">      app.passwordCoordinate.tap()</span><br><span class="line">      app.typeText(<span class="string">"Bob Alageaiecghfb Sharpeman"</span>)</span><br><span class="line"></span><br><span class="line">      <span class="comment">// login</span></span><br><span class="line">      app.facebookLoginButton.tap()</span><br><span class="line"></span><br><span class="line">      <span class="comment">// press OK</span></span><br><span class="line">      app.okButton.tap()</span><br><span class="line"></span><br><span class="line">      <span class="comment">// Show map</span></span><br><span class="line">      <span class="keyword">let</span> <span class="built_in">map</span> = app.maps.element(boundBy: <span class="number">0</span>)</span><br><span class="line">      wait(<span class="keyword">for</span>: <span class="built_in">map</span>, timeout: <span class="number">2</span>)</span><br><span class="line">      <span class="type">XCTAssertTrue</span>(<span class="built_in">map</span>.exists)</span><br><span class="line"></span><br><span class="line">      <span class="comment">// Need to interact with the app for interruption monitor to work</span></span><br><span class="line">      app.tap()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">fileprivate</span> <span class="function"><span class="keyword">func</span> <span class="title">handleLocationPermission</span><span class="params">()</span></span> &#123;</span><br><span class="line">    addUIInterruptionMonitor(withDescription: <span class="string">"Location permission"</span>, handler: &#123; alert <span class="keyword">in</span></span><br><span class="line">      alert.buttons.element(boundBy: <span class="number">1</span>).tap()</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fileprivate</span> <span class="class"><span class="keyword">extension</span> <span class="title">XCUIApplication</span> </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> showFacebookLoginFormButton: <span class="type">XCUIElement</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> buttons[<span class="string">"Continue with Facebook"</span>]</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> isAlreadyLoggedInSafari: <span class="type">Bool</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> buttons[<span class="string">"OK"</span>].exists || staticTexts[<span class="string">"Du har allerede godkjent Blue Sea."</span>].exists</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> okButton: <span class="type">XCUIElement</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> buttons[<span class="string">"OK"</span>]</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> norwegianText: <span class="type">XCUIElement</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> staticTexts[<span class="string">"Norsk (bokmål)"</span>]</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> emailTextField: <span class="type">XCUIElement</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> predicate = <span class="type">NSPredicate</span>(format: <span class="string">"placeholderValue == %@"</span>, <span class="string">"E-post eller mobil"</span>)</span><br><span class="line">    <span class="keyword">return</span> textFields.element(matching: predicate)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> passwordCoordinate: <span class="type">XCUICoordinate</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> vector = <span class="type">CGVector</span>(dx: <span class="number">1</span>, dy: <span class="number">1.5</span>)</span><br><span class="line">    <span class="keyword">return</span> emailTextField.coordinate(withNormalizedOffset: vector)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> facebookLoginButton: <span class="type">XCUIElement</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> buttons[<span class="string">"Logg inn"</span>]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">XCTestCase</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">func</span> <span class="title">wait</span><span class="params">(<span class="keyword">for</span> duration: TimeInterval)</span></span> &#123;</span><br><span class="line">    <span class="keyword">let</span> waitExpectation = expectation(description: <span class="string">"Waiting"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> when = <span class="type">DispatchTime</span>.now() + duration</span><br><span class="line">    <span class="type">DispatchQueue</span>.main.asyncAfter(deadline: when) &#123;</span><br><span class="line">      waitExpectation.fulfill()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// We use a buffer here to avoid flakiness with Timer on CI</span></span><br><span class="line">    waitForExpectations(timeout: duration + <span class="number">0.5</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// Wait for element to appear</span></span><br><span class="line">  <span class="function"><span class="keyword">func</span> <span class="title">wait</span><span class="params">(<span class="keyword">for</span> element: XCUIElement, timeout duration: TimeInterval)</span></span> &#123;</span><br><span class="line">    <span class="keyword">let</span> predicate = <span class="type">NSPredicate</span>(format: <span class="string">"exists == true"</span>)</span><br><span class="line">    <span class="keyword">let</span> <span class="number">_</span> = expectation(<span class="keyword">for</span>: predicate, evaluatedWith: element, handler: <span class="literal">nil</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// We use a buffer here to avoid flakiness with Timer on CI</span></span><br><span class="line">    waitForExpectations(timeout: duration + <span class="number">0.5</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">XCUIApplication</span> </span>&#123;</span><br><span class="line">  <span class="comment">// Because of "Use cached accessibility hierarchy"</span></span><br><span class="line">  <span class="function"><span class="keyword">func</span> <span class="title">clearCachedStaticTexts</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="number">_</span> = staticTexts.<span class="built_in">count</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">func</span> <span class="title">clearCachedTextFields</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="number">_</span> = textFields.<span class="built_in">count</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">func</span> <span class="title">clearCachedTextViews</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="number">_</span> = textViews.<span class="built_in">count</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">XCUIElement</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">func</span> <span class="title">deleteAllText</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">guard</span> <span class="keyword">let</span> string = value <span class="keyword">as</span>? <span class="type">String</span> <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> lowerRightCorner = coordinate(withNormalizedOffset: <span class="type">CGVector</span>(dx: <span class="number">0.9</span>, dy: <span class="number">0.9</span>))</span><br><span class="line">    lowerRightCorner.tap()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> deletes = string.characters.<span class="built_in">map</span>(&#123; <span class="number">_</span> <span class="keyword">in</span> <span class="type">XCUIKeyboardKeyDelete</span> &#125;).joined(separator: <span class="string">""</span>)</span><br><span class="line">    typeText(deletes)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Read-more"><a href="#Read-more" class="headerlink" title="Read more"></a>Read more</h3><p>I found these guides to cover many aspects of UITests, worth taking a look</p>
<ul>
<li><a href="https://github.com/joemasilotti/UI-Testing-Cheat-Sheet" target="_blank" rel="noopener">UI-Testing-Cheat-Sheet</a></li>
<li><a href="http://samwize.com/2016/02/28/everything-about-xcode-ui-testing-snapshot/" target="_blank" rel="noopener">Everything About Xcode UI Testing</a></li>
</ul>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-Debugging-iOS-app"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/Debugging-iOS-app/">Debugging iOS app</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/Debugging-iOS-app/" class="article-date">
	  <time datetime="2017-05-29T09:10:45.000Z" itemprop="datePublished">May 29, 2017</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/43" target="_blank" rel="noopener">#43</a></strong></p>
<ul>
<li><a href="http://ryanipete.com/blog/ios/swift/objective-c/uidebugginginformationoverlay/" target="_blank" rel="noopener">UIDebuggingInformationOverlay</a></li>
<li><a href="https://github.com/Flipboard/FLEX" target="_blank" rel="noopener">FLEX</a> An in-app debugging and exploration tool for iOS</li>
</ul>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-Some-investment-stories"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/Some-investment-stories/">Some investment stories</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/Some-investment-stories/" class="article-date">
	  <time datetime="2017-05-24T09:40:41.000Z" itemprop="datePublished">May 24, 2017</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/42" target="_blank" rel="noopener">#42</a></strong></p>
<p>We will never know how life will go</p>
<ul>
<li><a href="http://www.ibtimes.co.uk/apple-40-spare-thought-co-founder-ronald-wayne-steve-jobs-pal-who-threw-away-62bn-1552467" target="_blank" rel="noopener">Apple at 40: Spare a thought for co-founder Ronald Wayne, Steve Jobs’ pal who threw away $62bn</a></li>
<li><a href="http://www.businessinsider.com/bitcoin-pizza-day-passes-2000-20-million-2017-5?r=UK&IR=T" target="_blank" rel="noopener">Someone in 2010 bought 2 pizzas with 10,000 bitcoins — which today would be worth $20 million</a></li>
<li><a href="https://bits.blogs.nytimes.com/2012/02/07/facebook-graffiti-artist-could-be-worth-500-million/?_r=0" target="_blank" rel="noopener">Facebook Graffiti Artist Could be Worth $500 Million</a></li>
</ul>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/life/">life</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-use-assertionFailure-and-Optimization-Level-in-iOS"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-use-assertionFailure-and-Optimization-Level-in-iOS/">How to use assertionFailure and Optimization Level in iOS</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-use-assertionFailure-and-Optimization-Level-in-iOS/" class="article-date">
	  <time datetime="2017-05-23T11:23:16.000Z" itemprop="datePublished">May 23, 2017</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/39" target="_blank" rel="noopener">#39</a></strong></p>
<p>We used to use <code>assertionFailure</code> to mark programmer error or something that shouldn’t happen. </p>
<p>From <a href="https://developer.apple.com/reference/swift/1539616-assertionfailure" target="_blank" rel="noopener">assertionFailure</a></p>
<blockquote>
<p>Indicates that an internal sanity check failed.</p>
</blockquote>
<blockquote>
<p>Use this function to stop the program, without impacting the performance of shipping code, when control flow is not expected to reach the call—for example, in the default case of a switch where you have knowledge that one of the other cases must be satisfied. To protect code from invalid usage in Release builds, see preconditionFailure(_:file:line:).</p>
<ul>
<li>In playgrounds and -Onone builds (the default for Xcode’s Debug configuration), stop program execution in a debuggable state after printing message.</li>
<li>In -O builds, has no effect.</li>
<li>In -Ounchecked builds, the optimizer may assume that this function is never called. Failure to satisfy that assumption is a serious programming error.</li>
</ul>
</blockquote>
<p>So go to your target settings, and check <code>Optimization Level</code>, make sure it is not <code>-Onone</code> for release configuration. </p>
<p>The difference between debug and release is this <code>SWIFT_OPTIMIZATION_LEVEL</code>. If <code>-Onone</code> then your configuration is considered debug, and <code>assertionFailure</code> will crash your apps</p>
<p>Read more</p>
<ul>
<li><a href="http://blog.krzyzanowskim.com/2015/03/09/swift-asserts-the-missing-manual/" target="_blank" rel="noopener">http://blog.krzyzanowskim.com/2015/03/09/swift-asserts-the-missing-manual/</a></li>
</ul>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-perform-platform-check-with-typealias-and-@available"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-perform-platform-check-with-typealias-and-@available/">How to perform platform check with typealias and @available</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-perform-platform-check-with-typealias-and-@available/" class="article-date">
	  <time datetime="2017-05-17T20:25:59.000Z" itemprop="datePublished">May 17, 2017</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/38" target="_blank" rel="noopener">#38</a></strong></p>
<p>The other day, I was building <a href="https://github.com/onmyway133/Anchors" target="_blank" rel="noopener">Anchors</a> which needs to support iOS and macOS. What’s clever way to not use <code>#if os(iOS) || os(tvOS)</code> in all files? Use <code>typealias</code></p>
<p>This is the first version. I’m trying to support iOS 8, macOS 10.10</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">#<span class="keyword">if</span> os(iOS) || os(tvOS)</span><br><span class="line">  <span class="keyword">import</span> UIKit</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">typealias</span> <span class="type">View</span> = <span class="type">UIView</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">typealias</span> <span class="type">LayoutGuide</span> = <span class="type">UILayoutGuide</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">typealias</span> <span class="type">EdgeInsets</span> = <span class="type">UIEdgeInsets</span></span><br><span class="line">#elseif os(<span class="type">OSX</span>)</span><br><span class="line">  <span class="keyword">import</span> AppKit</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">typealias</span> <span class="type">View</span> = <span class="type">NSView</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">typealias</span> <span class="type">LayoutGuide</span> = <span class="type">NSLayoutGuide</span></span><br><span class="line">#endif</span><br></pre></td></tr></table></figure>

<p>But then because of <code>LayoutGuide</code>, I need to bump deployment target to iOS 9, macOS 10.11. Which is not what I want. <code>@available</code> to the rescue, but it will affect everything below it. The solution is to split the platform check, the first as normal, the second with <code>@available</code> check</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">#<span class="keyword">if</span> os(iOS) || os(tvOS)</span><br><span class="line">  <span class="keyword">import</span> UIKit</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">typealias</span> <span class="type">View</span> = <span class="type">UIView</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">typealias</span> <span class="type">EdgeInsets</span> = <span class="type">UIEdgeInsets</span></span><br><span class="line">#elseif os(<span class="type">OSX</span>)</span><br><span class="line">  <span class="keyword">import</span> AppKit</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">typealias</span> <span class="type">View</span> = <span class="type">NSView</span></span><br><span class="line">#endif</span><br><span class="line"></span><br><span class="line">#<span class="keyword">if</span> os(iOS) || os(tvOS)</span><br><span class="line">  <span class="keyword">import</span> UIKit</span><br><span class="line">  <span class="meta">@available</span>(iOS <span class="number">9.0</span>, *)</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">typealias</span> <span class="type">LayoutGuide</span> = <span class="type">UILayoutGuide</span></span><br><span class="line">#elseif os(<span class="type">OSX</span>)</span><br><span class="line">  <span class="keyword">import</span> AppKit</span><br><span class="line">  <span class="meta">@available</span>(macOS <span class="number">10.11</span>, *)</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">typealias</span> <span class="type">LayoutGuide</span> = <span class="type">NSLayoutGuide</span></span><br><span class="line">#endif</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="entry-meta entry-footer">
      
      
      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-use-Controller-and-View-in-iOS"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-use-Controller-and-View-in-iOS/">How to use Controller and View in iOS</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-use-Controller-and-View-in-iOS/" class="article-date">
	  <time datetime="2017-05-12T05:37:48.000Z" itemprop="datePublished">May 12, 2017</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/37" target="_blank" rel="noopener">#37</a></strong></p>
<p>I like to write UI in code, and with Auto Layout, it is an easy task. However that leaves ViewController with a lots of code. One way we can do is to separate <code>V</code> from <code>C</code> in <code>MVC</code>, by using a dedicated view</p>
<p>We can do that with generic, that initialises a view and replace the <code>view</code>, let’s call it <code>root</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> UIKit</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BaseController</span>&lt;<span class="title">T</span>: <span class="title">UIView</span>&gt;: <span class="title">UIViewController</span> </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> root = <span class="type">T</span>()</span><br><span class="line"></span><br><span class="line">  <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">loadView</span><span class="params">()</span></span> &#123;</span><br><span class="line">    view = root</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Now we can have a <code>UIView</code> subclass, like <code>LoginView</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">LoginView</span>: <span class="title">UIView</span> </span>&#123;</span><br><span class="line"> <span class="built_in">lazy</span> <span class="keyword">var</span> textField: <span class="type">UITextField</span> = <span class="type">UITextField</span>().then &#123;</span><br><span class="line">    $<span class="number">0</span>.textAlignment = .center</span><br><span class="line">    $<span class="number">0</span>.borderStyle = .roundedRect</span><br><span class="line">    $<span class="number">0</span>.keyboardType = .phonePad</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">lazy</span> <span class="keyword">var</span> button: <span class="type">UIButton</span> = <span class="type">UIButton</span>().then &#123;</span><br><span class="line">    $<span class="number">0</span>.setTitleColor(.black, <span class="keyword">for</span>: .normal)</span><br><span class="line">    $<span class="number">0</span>.backgroundColor = .lightGray</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">override</span> <span class="keyword">init</span>(frame: <span class="type">CGRect</span>) &#123;</span><br><span class="line">    <span class="keyword">super</span>.<span class="keyword">init</span>(frame: frame)</span><br><span class="line"></span><br><span class="line">    addSubviews(</span><br><span class="line">      textField,</span><br><span class="line">      button</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    <span class="type">Constraint</span>.on(</span><br><span class="line">      textField.centerXAnchor.constraint(equalTo: textField.superview!.centerXAnchor),</span><br><span class="line">      textField.centerYAnchor.constraint(equalTo: textField.superview!.centerYAnchor),</span><br><span class="line">      textField.widthAnchor.constraint(equalTo: textField.superview!.widthAnchor, constant: -<span class="number">20</span>),</span><br><span class="line"></span><br><span class="line">      button.topAnchor.constraint(equalTo: textField.bottomAnchor, constant: <span class="number">20</span>),</span><br><span class="line">      button.centerXAnchor.constraint(equalTo: button.superview!.centerXAnchor),</span><br><span class="line">      button.widthAnchor.constraint(equalTo: textField.widthAnchor, multiplier: <span class="number">0.8</span>),</span><br><span class="line">      button.heightAnchor.constraint(equalToConstant: <span class="number">44</span>)</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">required</span> <span class="keyword">init</span>?(coder aDecoder: <span class="type">NSCoder</span>) &#123;</span><br><span class="line">    <span class="built_in">fatalError</span>()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>And then the <code>LoginController</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">LoginController</span>: <span class="title">BaseController</span>&lt;<span class="title">LoginView</span>&gt; </span>&#123;</span><br><span class="line">  <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">super</span>.viewDidLoad()</span><br><span class="line"></span><br><span class="line">    view.backgroundColor = .white</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> gr = <span class="type">UITapGestureRecognizer</span>(target: <span class="keyword">self</span>, action: #selector(viewTapped))</span><br><span class="line">    root.addGestureRecognizer(gr)</span><br><span class="line"></span><br><span class="line">    root.button.setTitle(<span class="string">"Login"</span>, <span class="keyword">for</span>: .normal)</span><br><span class="line">    root.button.addTarget(<span class="keyword">self</span>, action: #selector(loginButtonTouched), <span class="keyword">for</span>: .touchUpInside)</span><br><span class="line">    root.button.isEnabled = <span class="literal">false</span></span><br><span class="line">    root.button.showsTouchWhenHighlighted = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">    root.textField.placeholder = <span class="string">"Phone number"</span></span><br><span class="line">    root.textField.delegate = <span class="keyword">self</span></span><br><span class="line">    root.textField.text = dependencyContainer.phoneService.<span class="keyword">prefix</span></span><br><span class="line">    root.textField.addTarget(<span class="keyword">self</span>, action: #selector(textFieldDidChange), <span class="keyword">for</span>: .editingChanged)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>And this is how we declare the <code>LoginController</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> loginController = <span class="type">LoginController</span>()</span><br><span class="line">navigationController.viewControllers = [loginController]</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="entry-meta entry-footer">
      
      
      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-use-MainController-in-iOS"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-use-MainController-in-iOS/">How to use MainController in iOS</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-use-MainController-in-iOS/" class="article-date">
	  <time datetime="2017-05-12T05:37:42.000Z" itemprop="datePublished">May 12, 2017</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/36" target="_blank" rel="noopener">#36</a></strong></p>
<p>Usually in an app, we have these flows: onboarding, login, main. And we usually set <code>OnboardingController</code>, <code>LoginController</code> and <code>MainController</code> as the root view controller respectively depending on the state.</p>
<p>I find it useful to have the <code>MainController</code> as the container for main flow. It can be a tab controller, swipe menu controller or contains just 1 child view controller. The screens are provided by child view controllers, but the <code>MainController</code> does the following jobs</p>
<ul>
<li>Status bar style</li>
</ul>
<p>We usually need to call <code>preferredStatusBarStyle</code> on the parent controller. See <a href="https://stackoverflow.com/questions/19022210/preferredstatusbarstyle-isnt-called" target="_blank" rel="noopener">https://stackoverflow.com/questions/19022210/preferredstatusbarstyle-isnt-called</a></p>
<ul>
<li>App did become active</li>
</ul>
<p>Usually when app is brought to foreground, we need to fetch logged in user profile to see if there’s changes. We do this by listening to <code>app did become active</code> in <code>MainController</code>. </p>
<ul>
<li>Mock to open</li>
</ul>
<p>This can be anti pattern. But in UI Tests, for laziness, we can just use some <a href="http://nshipster.com/launch-arguments-and-environment-variables/" target="_blank" rel="noopener">launch arguments</a> and check to present some specific screens to test, because <code>MainController</code> is the root for main flow.</p>
<ul>
<li>Logout</li>
</ul>
<p>Because things originate from <code>MainController</code>, things can terminate in <code>MainController</code>. We can handle <code>logout</code>, clear states, and tell <code>MainController</code> to tell <code>AppDelegate</code> to switch to another root controller</p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/">iOS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swift/">swift</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-handle-Auto-Layout-with-different-screen-sizes"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-handle-Auto-Layout-with-different-screen-sizes/">How to handle Auto Layout with different screen sizes</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-handle-Auto-Layout-with-different-screen-sizes/" class="article-date">
	  <time datetime="2017-05-12T04:22:18.000Z" itemprop="datePublished">May 12, 2017</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/35" target="_blank" rel="noopener">#35</a></strong></p>
<p>Auto Layout is awesome. Just declare the constraints and the views are resized accordingly to their parent ‘s <code>bounds</code> changes. But sometimes it does not look good, because we have fixed values for padding, width, height, and even fixed font size.</p>
<p>Read more <a href="https://medium.com/flawless-app-stories/how-to-make-auto-layout-more-convenient-in-ios-df3b42fed37f" target="_blank" rel="noopener">How to make Auto Layout more convenient in iOS</a></p>
<p>This can be solved by some degree using <code>Size Class</code>. The idea of <code>size class</code> is that we have many sets of constraints, and based on the device traits, we enabled some of them. This is more convenient to do in Storyboard (although very hard to reason about), but if we’re doing in code (my prefer way), then it is a lot of code. And a lot of code means a lot of bugs.</p>
<p>If you take a look at <a href="http://iosres.com/" target="_blank" rel="noopener">iOSRes</a>, we see the ratio <code>16:9</code> (<code>height:width</code>)</p>
<ul>
<li>iPhone SE (320 x 568): 1.775</li>
<li>iPhone 6 (375 x 667): 1.778</li>
<li>iPhone 6+ (414 x 736): 1.778</li>
</ul>
<p>They mostly have the same ratio. So we can have a simple approach, that scale elements based on ratio. Given the fact that the designer usually designs for <code>iPhone 6 size</code>, we can make that a base.</p>
<p>In this approach, the content will scale up or down depending on its ratio. You may argue that the idea of bigger phone is to display more, not to show the same content bigger. You may be right, in that case you need to create different constraints and different UIs. But if you want simple solutions that work, this is one of them</p>
<p>This is the technique I used when doing <code>Windows Phone development</code>, but it applies to many platforms as well</p>
<h3 id="Calculate-the-ratio"><a href="#Calculate-the-ratio" class="headerlink" title="Calculate the ratio"></a>Calculate the ratio</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Device</span> </span>&#123;</span><br><span class="line">  <span class="comment">// Base width in point, use iPhone 6</span></span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">let</span> base: <span class="type">CGFloat</span> = <span class="number">375</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">var</span> ratio: <span class="type">CGFloat</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="type">UIScreen</span>.main.bounds.width / base</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Extension-to-make-it-convenient"><a href="#Extension-to-make-it-convenient" class="headerlink" title="Extension to make it convenient"></a>Extension to make it convenient</h3><p>We can have a computed property called <code>adjusted</code> that adjusts the size based on the ratio</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">CGFloat</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> adjusted: <span class="type">CGFloat</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">self</span> * <span class="type">Device</span>.ratio</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Double</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> adjusted: <span class="type">CGFloat</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="type">CGFloat</span>(<span class="keyword">self</span>) * <span class="type">Device</span>.ratio</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Int</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> adjusted: <span class="type">CGFloat</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="type">CGFloat</span>(<span class="keyword">self</span>) * <span class="type">Device</span>.ratio</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Use-the-ratio"><a href="#Use-the-ratio" class="headerlink" title="Use the ratio"></a>Use the ratio</h3><p>You can adjust as much as you want</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">label.font = UIFont.systemFont(ofSize: 23.adjusted)</span><br><span class="line"></span><br><span class="line">phoneTextField.leftAnchor.constraint(equalTo: container.leftAnchor, constant: 30.adjusted),</span><br><span class="line">phoneTextField.rightAnchor.constraint(equalTo: container.rightAnchor, constant: -30.adjusted),</span><br><span class="line"></span><br><span class="line">imageView.widthAnchor.constraint(equalToConstant: 80.adjusted), imageView.heightAnchor.constraint(equalToConstant: 90.adjusted),</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/">iOS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swift/">swift</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-NSApplicationDelegate-and-notification"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/NSApplicationDelegate-and-notification/">NSApplicationDelegate and notification</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/NSApplicationDelegate-and-notification/" class="article-date">
	  <time datetime="2017-05-10T20:18:22.000Z" itemprop="datePublished">May 10, 2017</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/34" target="_blank" rel="noopener">#34</a></strong></p>
<p>In an iOS project, we often see this in <code>AppDelegate</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@UIApplicationMain</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AppDelegate</span>: <span class="title">UIResponder</span>, <span class="title">UIApplicationDelegate</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> window: <span class="type">UIWindow?</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">application</span><span class="params">(application: UIApplication, didFinishLaunchingWithOptions launchOptions: [NSObject: AnyObject]?)</span></span> -&gt; <span class="type">Bool</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>But in a Cocoa project, we see this instead</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@NSApplicationMain</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AppDelegate</span>: <span class="title">NSObject</span>, <span class="title">NSApplicationDelegate</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">applicationDidFinishLaunching</span><span class="params">(aNotification: NSNotification)</span></span> &#123;</span><br><span class="line">        <span class="comment">// Insert code here to initialize your application</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">applicationWillTerminate</span><span class="params">(aNotification: NSNotification)</span></span> &#123;</span><br><span class="line">        <span class="comment">// Insert code here to tear down your application</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>In this case the param is of type <code>NSNotification</code></p>
<h2 id="Delegate-and-notification"><a href="#Delegate-and-notification" class="headerlink" title="Delegate and notification"></a>Delegate and notification</h2><p>Reading <a href="https://developer.apple.com/library/mac/documentation/General/Conceptual/DevPedia-CocoaCore/Delegation.html" target="_blank" rel="noopener">Cocoa Core Competencies - Delegation</a></p>
<blockquote>
<p>The delegate of most Cocoa framework classes is automatically registered as an observer of notifications posted by the delegating object. The delegate need only implement a notification method declared by the framework class to receive a particular notification message. Following the example above, a window object posts an NSWindowWillCloseNotification to observers but sends a windowShouldClose: message to its delegate.</p>
</blockquote>
<p>So the pattern is that the delegate should strip the <code>NS</code> and <code>Notification</code>, like <code>NSWindowWillCloseNotification</code> to <code>windowShouldClose:</code></p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/macOS/">macOS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swift/">swift</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-Understanding-SDK-and-Deployment-Target-in-iOS"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/Understanding-SDK-and-Deployment-Target-in-iOS/">Understanding SDK and Deployment Target in iOS</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/Understanding-SDK-and-Deployment-Target-in-iOS/" class="article-date">
	  <time datetime="2017-05-10T20:18:05.000Z" itemprop="datePublished">May 10, 2017</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/33" target="_blank" rel="noopener">#33</a></strong></p>
<p>I see that my answer to the question <a href="http://stackoverflow.com/questions/18568572/whats-the-meaning-of-base-sdk-ios-deployment-target-target-and-project-in-xc/22536773#22536773" target="_blank" rel="noopener">What’s the meaning of Base SDK, iOS deployment target, Target, and Project in xcode</a> gets lots of views, so I think I need to elaborate more about it</p>
<p>Good read</p>
<ul>
<li><a href="https://developer.apple.com/tech-talks/videos/" target="_blank" rel="noopener"> iOS 7 TechTalk - Architecting Modern Apps, Part 2</a></li>
<li><a href="https://developer.apple.com/library/ios/documentation/DeveloperTools/Conceptual/cross_development/Configuring/configuring.html" target="_blank" rel="noopener">Configuring a Project for SDK-Based Development</a></li>
</ul>
<p><img src="http://i.stack.imgur.com/CJF6Y.png" alt></p>
<h2 id="Base-SDK"><a href="#Base-SDK" class="headerlink" title="Base SDK"></a>Base SDK</h2><ul>
<li>We can’t configure this anymore, as Xcode will use the latest SDK. For Xcode 7, the SDK is iOS 9</li>
<li>If we upgrade Xcode, it will use the newer version of the SDK. Like Xcode 7.2, the SDK is iOS 9.1</li>
<li><blockquote>
<p>Choosing the latest SDK for your project lets you use the new APIs introduced in the OS update that corresponds to that SDK. When new functionality is added as part of a system update, the system update itself does not typically contain updated header files reflecting the change. The SDKs, however, do contain updated header files.</p>
</blockquote>
</li>
</ul>
<h2 id="Deployment-Target"><a href="#Deployment-Target" class="headerlink" title="Deployment Target"></a>Deployment Target</h2><ul>
<li>We can set in Xcode -&gt; Target -&gt; Deployment Info -&gt; Deployment Target</li>
<li>State that we support this iOS version</li>
</ul>
<h2 id="What-does-it-mean"><a href="#What-does-it-mean" class="headerlink" title="What does it mean"></a>What does it mean</h2><blockquote>
<p>So, a modern App might use iOS 9 as the Target SDK, and iOS 7 as the deployment target. This means that you can run on iOS 7, iOS 8 and iOS 9, and that you have available to you any iOS 9 calls when actually running on iOS 9.</p>
</blockquote>
<p>.</p>
<blockquote>
<p>Each .sdk directory resembles the directory hierarchy of the operating system release it represents: It has usr, System, and Developer directories at its top level. OS X .sdk directories also contain a Library directory. Each of these directories in turn contains subdirectories with the headers and libraries that are present in the corresponding version of the operating system with Xcode installed.</p>
</blockquote>
<p>.</p>
<blockquote>
<p>The libraries in an iOS or OS X SDK are stubs for linking only; they do not contain executable code but just the exported symbols. SDK support works only with native build targets.</p>
</blockquote>
<p>So the SDK is just like stub and header only. It means that we can use certain APIs, but on OS that does not have the real symbols for those APIs, it crashes</p>
<h2 id="available"><a href="#available" class="headerlink" title="available"></a>available</h2><p>Swift 2 introduces <code>available</code> construct that guards against failure when trying to use newer APIs.</p>
<p>Note that <code>available</code> is runtime, not compile time. All the code is inside your executable</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> #available(iOS <span class="number">9</span>, <span class="type">OSX</span> <span class="number">10.10</span>, *) &#123;</span><br><span class="line">    <span class="comment">// Code to execute on iOS 9, OS X 10.10</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="deprecated-APIs"><a href="#deprecated-APIs" class="headerlink" title="deprecated APIs"></a>deprecated APIs</h2><ul>
<li><a href="https://developer.apple.com/library/ios/documentation/DeveloperTools/Conceptual/cross_development/Using/using.html#//apple_ref/doc/uid/20002000-SW6" target="_blank" rel="noopener">Finding Instances of Deprecated API Usage</a></li>
</ul>
<blockquote>
<p>Always check to see if you are using deprecated APIs; though still available, deprecated APIs are not guaranteed to be available in the future</p>
</blockquote>
<h2 id="Compile-time-vs-Runtime"><a href="#Compile-time-vs-Runtime" class="headerlink" title="Compile time vs Runtime"></a>Compile time vs Runtime</h2><ul>
<li><a href="https://developer.apple.com/library/ios/documentation/DeveloperTools/Conceptual/cross_development/Using/using.html#//apple_ref/doc/uid/20002000-SW5" target="_blank" rel="noopener">Conditionally Compiling for Different SDKs</a></li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#<span class="keyword">if</span> (arch(i386) || arch(x86_64)) &amp;&amp; os(iOS)</span><br><span class="line">    <span class="comment">// code inside gets inserted into executable when builds for simulator</span></span><br><span class="line">#<span class="keyword">else</span></span><br><span class="line">    <span class="comment">// code inside gets inserted into executable when builds for device</span></span><br><span class="line">#endif</span><br></pre></td></tr></table></figure>

<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#<span class="keyword">if</span> os(<span class="type">OSX</span>)</span><br><span class="line">    <span class="keyword">import</span> Cocoa</span><br><span class="line">#elseif os(iOS)</span><br><span class="line">    <span class="keyword">import</span> UIKit</span><br><span class="line">#endif</span><br></pre></td></tr></table></figure>

<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// All the code gets inserted into executable, but is run depending on the version of the OS</span></span><br><span class="line"><span class="keyword">if</span> #available(iOS <span class="number">9</span>, *) &#123;</span><br><span class="line">    <span class="comment">// use UIStackView</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// show your manual Auto Layout skill</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Weakly-vs-strongly-linked"><a href="#Weakly-vs-strongly-linked" class="headerlink" title="Weakly vs strongly linked"></a>Weakly vs strongly linked</h2><ul>
<li><a href="https://developer.apple.com/library/ios/documentation/DeveloperTools/Conceptual/cross_development/Configuring/configuring.html#//apple_ref/doc/uid/10000163i-CH1-SW2" target="_blank" rel="noopener">Weak Linking and Apple Frameworks</a></li>
<li><a href="http://stackoverflow.com/questions/16922013/what-does-it-mean-to-weak-link-a-framework" target="_blank" rel="noopener">What does it mean to “weak-link” a framework?</a></li>
<li><a href="https://developer.apple.com/library/mac/documentation/MacOSX/Conceptual/BPFrameworks/Concepts/WeakLinking.html" target="_blank" rel="noopener">Frameworks and Weak Linking</a></li>
</ul>
<blockquote>
<p>For example, suppose in Xcode you set the deployment target (minimum required version) to “OS X v10.5” and the base SDK (maximum allowed version) to “OS X v10.6”. During compilation, the compiler would weakly link interfaces that were introduced in OS X v10.6 while strongly linking interfaces defined in earlier versions of the OS. This would allow your application to run in OS X v10.5 and take advantage of newer features when available.</p>
</blockquote>
<p>.</p>
<blockquote>
<p>None of the (platform) frameworks is really “included in the bundle”. Instead, your app has a reference (“link”) to a framework once you add it to the “Link Binary with Library” build phase. The frameworks are pre-installed on the devices. When you run an app, all the app’s framework references are resolved by the dynamic linker (on the device), which means the framework code is loaded so your app can use it.</p>
</blockquote>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="http://useyourloaf.com/blog/checking-api-availability-with-swift.html" target="_blank" rel="noopener">Checking API Availability With Swift</a></li>
</ul>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/17/">Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/16/">16</a><a class="page-number" href="/page/17/">17</a><span class="page-number current">18</span><a class="page-number" href="/page/19/">19</a><a class="page-number" href="/page/20/">20</a><a class="extend next" rel="next" href="/page/19/">Next</a>
  </nav>

</section>
          <aside id="sidebar">
  
    <div class="widget-wrap" style="margin: 20px 0;">
	<div id="search-form-wrap">

    <form class="search-form">
        <label style="width: 75%;">
            <span class="screen-reader-text">Search for:</span>
            <input type="search" class="search-field" style="height: 42px;" placeholder=" Search…" value="" name="s" title="Search for:">
        </label>
        <input type="submit" class="search-form-submit" value="Search">
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="Type something..."/>
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'Posts',
            PAGES: 'Pages',
            CATEGORIES: 'Categories',
            TAGS: 'Tags',
            UNTITLED: '(Untitled)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="/js/insight.js"></script>

</div>
</div>
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Ohayou</h3>
    <div class="widget widget_athemes_social_icons">

    	<ul class="clearfix widget-social-icons">   
    	
          
     			  <li><a href="https://github.com/onmyway133" title="Github"><i class="fa fa-github" aria-hidden="true"></i></a></li> 
          
   		
          
     			  <li><a href="https://twitter.com/onmyway133" title="Twitter"><i class="fa fa-twitter" aria-hidden="true"></i></a></li> 
          
   		
          
            <li><a href="mailto:onmyway133@gmail.com?subject=Hello&body=World" title="email"><i class="fa fa-envelope" aria-hidden="true"></i></a></li> 
          
   		
   		</ul>


   		<!--
   		<ul class="clearfix widget-social-icons">   		
   		<li class="widget-si-twitter"><a href="http://twitter.com" title="Twitter"><i class="ico-twitter"></i></a></li> 
		<li class="widget-si-facebook"><a href="http://facebook.com" title="Facebook"><i class="ico-facebook"></i></a></li>
			<li class="widget-si-gplus"><a href="http://plus.google.com" title="Google+"><i class="ico-gplus"></i></a></li>
			<li class="widget-si-pinterest"><a href="http://pinterest.com" title="Pinterest"><i class="ico-pinterest"></i></a></li>
			<li class="widget-si-flickr"><a href="http://flickr.com" title="Flickr"><i class="ico-flickr"></i></a></li>
			<li class="widget-si-instagram"><a href="http://instagram.com" title="Instagram"><i class="ico-instagram"></i></a></li>
		</ul> -->

    </div>
  </div>


  
    
  <div class="widget_athemes_tabs">
    <ul id="widget-tab" class="clearfix widget-tab-nav">
      <li class="active"><a>Recent Posts</a></li>
    </ul>
    <div class="widget">
      <ul>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="/blog/How-to-update-FetchRequest-with-predicate-in-SwiftUI/">How to update FetchRequest with predicate in SwiftUI</a></h6>
              <span>March 14, 2020</span>
            </div>

          </li>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="/blog/How-to-make-TextField-focus-in-SwiftUI-for-macOS/">How to make TextField focus in SwiftUI for macOS</a></h6>
              <span>March 13, 2020</span>
            </div>

          </li>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="/blog/How-to-manage-work/">How to manage work</a></h6>
              <span>March 12, 2020</span>
            </div>

          </li>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="/blog/How-to-show-popover-for-item-in-ForEach-in-SwiftUI/">How to show popover for item in ForEach in SwiftUI</a></h6>
              <span>March 11, 2020</span>
            </div>

          </li>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="/blog/How-to-make-tooltip-in-SwiftUI-for-macOS/">How to make tooltip in SwiftUI for macOS</a></h6>
              <span>March 11, 2020</span>
            </div>

          </li>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="/blog/How-to-use-vital-git-commands/">How to use vital git commands</a></h6>
              <span>March 9, 2020</span>
            </div>

          </li>
        
      </ul>
    </div>
  </div>

  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/algorithm/" style="font-size: 10px;">algorithm</a> <a href="/tags/android/" style="font-size: 17.22px;">android</a> <a href="/tags/apple-script/" style="font-size: 11.11px;">apple script</a> <a href="/tags/catalyst/" style="font-size: 10px;">catalyst</a> <a href="/tags/ci/" style="font-size: 11.11px;">ci</a> <a href="/tags/cloud/" style="font-size: 10.56px;">cloud</a> <a href="/tags/cocoapods/" style="font-size: 11.67px;">cocoapods</a> <a href="/tags/combine/" style="font-size: 12.22px;">combine</a> <a href="/tags/csharp/" style="font-size: 10px;">csharp</a> <a href="/tags/css/" style="font-size: 10.56px;">css</a> <a href="/tags/dart/" style="font-size: 11.67px;">dart</a> <a href="/tags/database/" style="font-size: 10.56px;">database</a> <a href="/tags/design/" style="font-size: 10.56px;">design</a> <a href="/tags/electron/" style="font-size: 11.67px;">electron</a> <a href="/tags/firebase/" style="font-size: 12.22px;">firebase</a> <a href="/tags/flutter/" style="font-size: 11.67px;">flutter</a> <a href="/tags/git/" style="font-size: 11.67px;">git</a> <a href="/tags/github/" style="font-size: 12.22px;">github</a> <a href="/tags/go/" style="font-size: 10.56px;">go</a> <a href="/tags/google/" style="font-size: 10px;">google</a> <a href="/tags/iOS/" style="font-size: 19.44px;">iOS</a> <a href="/tags/javascript/" style="font-size: 17.78px;">javascript</a> <a href="/tags/kotlin/" style="font-size: 16.67px;">kotlin</a> <a href="/tags/layout/" style="font-size: 11.67px;">layout</a> <a href="/tags/life/" style="font-size: 13.33px;">life</a> <a href="/tags/links/" style="font-size: 14.44px;">links</a> <a href="/tags/macOS/" style="font-size: 18.89px;">macOS</a> <a href="/tags/machine-learning/" style="font-size: 10.56px;">machine learning</a> <a href="/tags/maps/" style="font-size: 11.67px;">maps</a> <a href="/tags/networking/" style="font-size: 10px;">networking</a> <a href="/tags/node/" style="font-size: 12.78px;">node</a> <a href="/tags/objc/" style="font-size: 10.56px;">objc</a> <a href="/tags/react/" style="font-size: 11.11px;">react</a> <a href="/tags/react-native/" style="font-size: 15px;">react native</a> <a href="/tags/realm/" style="font-size: 10px;">realm</a> <a href="/tags/rx/" style="font-size: 11.11px;">rx</a> <a href="/tags/script/" style="font-size: 10.56px;">script</a> <a href="/tags/spm/" style="font-size: 12.22px;">spm</a> <a href="/tags/swift/" style="font-size: 20px;">swift</a> <a href="/tags/swiftUI/" style="font-size: 18.33px;">swiftUI</a> <a href="/tags/tech/" style="font-size: 15.56px;">tech</a> <a href="/tags/terminal/" style="font-size: 13.33px;">terminal</a> <a href="/tags/testing/" style="font-size: 13.33px;">testing</a> <a href="/tags/tool/" style="font-size: 10px;">tool</a> <a href="/tags/unity/" style="font-size: 10px;">unity</a> <a href="/tags/voip/" style="font-size: 11.67px;">voip</a> <a href="/tags/watchOS/" style="font-size: 13.89px;">watchOS</a> <a href="/tags/web/" style="font-size: 10.56px;">web</a> <a href="/tags/work/" style="font-size: 10px;">work</a> <a href="/tags/wwdc/" style="font-size: 10px;">wwdc</a> <a href="/tags/xcode/" style="font-size: 16.11px;">xcode</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>

    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">March 2020</a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">February 2020</a><span class="archive-list-count">20</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">January 2020</a><span class="archive-list-count">30</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a><span class="archive-list-count">36</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a><span class="archive-list-count">39</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a><span class="archive-list-count">49</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a><span class="archive-list-count">50</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a><span class="archive-list-count">42</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a><span class="archive-list-count">41</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a><span class="archive-list-count">48</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a><span class="archive-list-count">27</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a><span class="archive-list-count">24</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a><span class="archive-list-count">14</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a><span class="archive-list-count">14</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a><span class="archive-list-count">12</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a><span class="archive-list-count">18</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a><span class="archive-list-count">12</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a><span class="archive-list-count">35</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a><span class="archive-list-count">6</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/algorithm/">algorithm</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/android/">android</a><span class="tag-list-count">35</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/apple-script/">apple script</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/catalyst/">catalyst</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ci/">ci</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cloud/">cloud</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cocoapods/">cocoapods</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/combine/">combine</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/csharp/">csharp</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/css/">css</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/dart/">dart</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/database/">database</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/design/">design</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/electron/">electron</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/firebase/">firebase</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/flutter/">flutter</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/github/">github</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/go/">go</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/google/">google</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/iOS/">iOS</a><span class="tag-list-count">157</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/javascript/">javascript</a><span class="tag-list-count">37</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/kotlin/">kotlin</a><span class="tag-list-count">25</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/layout/">layout</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/life/">life</a><span class="tag-list-count">10</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/links/">links</a><span class="tag-list-count">12</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/macOS/">macOS</a><span class="tag-list-count">88</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/machine-learning/">machine learning</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/maps/">maps</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/networking/">networking</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/node/">node</a><span class="tag-list-count">9</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/objc/">objc</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/react/">react</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/react-native/">react native</a><span class="tag-list-count">14</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/realm/">realm</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/rx/">rx</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/script/">script</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/spm/">spm</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/swift/">swift</a><span class="tag-list-count">250</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/swiftUI/">swiftUI</a><span class="tag-list-count">41</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tech/">tech</a><span class="tag-list-count">15</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/terminal/">terminal</a><span class="tag-list-count">10</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/testing/">testing</a><span class="tag-list-count">10</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tool/">tool</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/unity/">unity</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/voip/">voip</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/watchOS/">watchOS</a><span class="tag-list-count">11</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/web/">web</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/work/">work</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/wwdc/">wwdc</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/xcode/">xcode</a><span class="tag-list-count">22</span></li></ul>
    </div>
  </div>


  
</aside>
        
      </div>
      <footer id="footer" class="site-footer">
  

  <div class="clearfix container">
      <div class="site-info">
	      &copy; 2020 onmyway133 All Rights Reserved.
          
      </div>
      <div class="site-credit">
        Theme by <a href="https://github.com/iTimeTraveler/hexo-theme-hiero" target="_blank">hiero</a>
      </div>
  </div>
</footer>


<!-- min height -->

<script>
    var contentdiv = document.getElementById("content");

    contentdiv.style.minHeight = document.body.offsetHeight - document.getElementById("allheader").offsetHeight - document.getElementById("footer").offsetHeight + "px";
</script>

<!-- Custome JS -->
<script src="/js/my.js"></script>
    </div>
    <!-- <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/about/" class="mobile-nav-link">About</a>
  
    <a href="/writing/" class="mobile-nav-link">Writing</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/speaking/" class="mobile-nav-link">Speaking</a>
  
    <a href="/opensource/" class="mobile-nav-link">Open Source</a>
  
    <a href="/projects/" class="mobile-nav-link">Projects</a>
  
    <a href="/news/" class="mobile-nav-link">News</a>
  
    <a href="/gumroad/" class="mobile-nav-link">Gumroad</a>
  
    <a href="/atom.xml" class="mobile-nav-link">RSS</a>
  
</nav> -->
    

<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>



  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.js"></script>


<script src="/js/scripts.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script src="/js/main.js"></script>


<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-40119591-5', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->












  </div>

  <a id="rocket" href="#top" class=""></a>
  <script type="text/javascript" src="/js/totop.js" async=""></script>
</body>
</html>
