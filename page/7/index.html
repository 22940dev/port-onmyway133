<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">

  <!-- PACE Progress Bar START -->
  
    <script src="https://raw.githubusercontent.com/HubSpot/pace/v1.0.2/pace.min.js"></script>
    <link rel="stylesheet" href="https://github.com/HubSpot/pace/raw/master/themes/orange/pace-theme-flash.css">
  
  

  <!-- PACE Progress Bar START -->

  
  <title>onmyway133</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  
  
  
  <meta name="description" content="What you don&apos;t know is what you haven&apos;t learned">
<meta name="keywords" content="ios, android,javascript, react">
<meta property="og:type" content="website">
<meta property="og:title" content="onmyway133">
<meta property="og:url" content="https://onmyway133.github.io/page/7/index.html">
<meta property="og:site_name" content="onmyway133">
<meta property="og:description" content="What you don&apos;t know is what you haven&apos;t learned">
<meta property="og:locale" content="en">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="onmyway133">
<meta name="twitter:description" content="What you don&apos;t know is what you haven&apos;t learned">
  
    <link rel="alternate" href="/atom.xml" title="onmyway133" type="application/atom+xml">
  
  <link rel="icon" href="/favicon.ico">
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link href="https://fonts.googleapis.com/css?family=Open+Sans|Montserrat:700" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Roboto:400,300,300italic,400italic" rel="stylesheet" type="text/css">
  <link href="https://cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">
  <style type="text/css">
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/9749f0/00000000000000000001008f/27/l?subset_id=2&fvd=n5) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/90cf9f/000000000000000000010091/27/l?subset_id=2&fvd=n7) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/8a5494/000000000000000000013365/27/l?subset_id=2&fvd=n4) format("woff2");font-weight:lighter;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/d337d8/000000000000000000010095/27/l?subset_id=2&fvd=i4) format("woff2");font-weight:400;font-style:italic;}</style>
    
  <link rel="stylesheet" id="athemes-headings-fonts-css" href="//fonts.googleapis.com/css?family=Yanone+Kaffeesatz%3A200%2C300%2C400%2C700&amp;ver=4.6.1" type="text/css" media="all">
  <link rel="stylesheet" href="/css/style.css">

  <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>

  <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.0.2/css/bootstrap.min.css">
  <link rel="stylesheet" href="/css/hiero.css">
  <link rel="stylesheet" href="/css/glyphs.css">
  

  <!-- Custom CSS -->
  <link rel="stylesheet" href="/css/my.css">
  <!-- Google Adsense -->
  
</head>
</html>
<script>
var themeMenus = {};

  themeMenus["/"] = "Home"; 

  themeMenus["/about/"] = "About"; 

  themeMenus["/writing/"] = "writing"; 

  themeMenus["/archives"] = "Archives"; 

  themeMenus["/speaking/"] = "speaking"; 

  themeMenus["/opensource/"] = "open source"; 

  themeMenus["/projects/"] = "projects"; 

  themeMenus["/news/"] = "news"; 

  themeMenus["/gumroad/"] = "gumroad"; 

  themeMenus["/atom.xml"] = "rss"; 

</script>


  <body>


  <header id="allheader" class="site-header" role="banner">
  <div class="clearfix container">
      <div class="site-branding">

          <h1 class="site-title">
            
              <a href="/" title="onmyway133" rel="home"> onmyway133 </a>
            
          </h1>

          
            <div class="site-description">What you don&#39;t know is what you haven&#39;t learned</div>
          
            
          <nav id="main-navigation" class="main-navigation" role="navigation">
            <a class="nav-open">Menu</a>
            <a class="nav-close">Close</a>
            <div class="clearfix sf-menu">

              <ul id="main-nav" class="nmenu sf-js-enabled">
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/">Home</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/about/">About</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/writing/">writing</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/archives">Archives</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/speaking/">speaking</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/opensource/">open source</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/projects/">projects</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/news/">news</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/gumroad/">gumroad</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/atom.xml">rss</a> </li>
                    
              </ul>
            </div>
          </nav>


      </div>
  </div>
</header>


  <div id="originBgDiv" style="background: #fff; width: 100%;">

      <div style="max-height:600px; overflow: hidden;  display: flex; display: -webkit-flex; align-items: center;">
        <img id="originBg" width="100%" alt="" src="">
      </div>

  </div>

  <script>
  function setAboutIMG(){
      var imgUrls = "css/images/pose.jpg,https://avatars1.githubusercontent.com/u/2284279?s=460&v=4".split(",");
      var random = Math.floor((Math.random() * imgUrls.length ));
      if (imgUrls[random].startsWith('http') || imgUrls[random].indexOf('://') >= 0) {
        document.getElementById("originBg").src=imgUrls[random];
      } else {
        document.getElementById("originBg").src='/' + imgUrls[random];
      }
  }
  bgDiv=document.getElementById("originBgDiv");
  if(location.pathname.match('about')){
    setAboutIMG();
    bgDiv.style.display='block';
  }else{
    bgDiv.style.display='none';
  }
  </script>



  <div id="container">
    <div id="wrap">
            
      <div id="content" class="outer">
        
          <section id="main">
  
    <article id="post-What&#39;s-new-in-iOS"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/What's-new-in-iOS/">What&#39;s new in iOS</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/What's-new-in-iOS/" class="article-date">
	  <time datetime="2019-06-17T10:53:31.000Z" itemprop="datePublished">June 17, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/313" target="_blank" rel="noopener">#313</a></strong></p>
<h2 id="iOS-10"><a href="#iOS-10" class="headerlink" title="iOS 10"></a>iOS 10</h2><p>➕<a href="https://developer.apple.com/documentation/usernotifications" target="_blank" rel="noopener">UserNotifications</a></p>
<blockquote>
<p>Push user-facing notifications to the user’s device from a server, or generate them locally from your app.</p>
</blockquote>
<p>➕<a href="https://developer.apple.com/documentation/uikit/uiviewpropertyanimator" target="_blank" rel="noopener">UIViewPropertyAnimator</a></p>
<blockquote>
<p>A class that animates changes to views and allows the dynamic modification of those animations.</p>
</blockquote>
<p>➕<a href="https://developer.apple.com/documentation/coredata/nspersistentcontainer" target="_blank" rel="noopener">NSPersistentContainer</a></p>
<blockquote>
<p>A container that encapsulates the Core Data stack in your app.</p>
</blockquote>
<p>➕<a href="https://developer.apple.com/documentation/uikit/uifeedbackgenerator" target="_blank" rel="noopener">UIFeedbackGenerator</a></p>
<blockquote>
<p>The abstract superclass for all feedback generators.</p>
</blockquote>
<h2 id="iOS-10-3"><a href="#iOS-10-3" class="headerlink" title="iOS 10.3"></a>iOS 10.3</h2><p>➕<a href="https://developer.apple.com/documentation/storekit/skstorereviewcontroller" target="_blank" rel="noopener">SKStoreReviewController</a></p>
<blockquote>
<p>An object that controls the process of requesting App Store ratings and reviews from users.</p>
</blockquote>
<h2 id="iOS-11"><a href="#iOS-11" class="headerlink" title="iOS 11"></a>iOS 11</h2><p>➕<a href="https://developer.apple.com/documentation/uikit/uiview/2891102-safearealayoutguide" target="_blank" rel="noopener">safeAreaLayoutGuide</a></p>
<blockquote>
<p>The layout guide representing the portion of your view that is unobscured by bars and other content.</p>
</blockquote>
<p>➕<a href="https://developer.apple.com/documentation/coreml" target="_blank" rel="noopener">CoreML</a></p>
<blockquote>
<p>Integrate machine learning models into your app.</p>
</blockquote>
<p>➕<a href="https://developer.apple.com/documentation/vision" target="_blank" rel="noopener">Vision</a></p>
<blockquote>
<p>Apply computer vision algorithms to perform a variety of tasks on input images and video.</p>
</blockquote>
<p>➕<a href="https://developer.apple.com/documentation/arkit" target="_blank" rel="noopener">ARKit</a></p>
<blockquote>
<p>Integrate iOS device camera and motion features to produce augmented reality experiences in your app or game.</p>
</blockquote>
<p>➕<a href="https://developer.apple.com/documentation/devicecheck" target="_blank" rel="noopener">DeviceCheck</a></p>
<blockquote>
<p>Access per-device, per-developer data that your associated server can use in its business logic.</p>
</blockquote>
<p>➕<a href="https://developer.apple.com/documentation/uikit/drag_and_drop" target="_blank" rel="noopener">Drag and Drop</a></p>
<blockquote>
<p>Bring drag and drop to your app by using interaction APIs with your views.</p>
</blockquote>
<p>➕<a href="https://developer.apple.com/documentation/corenfc" target="_blank" rel="noopener">CoreNFC</a></p>
<blockquote>
<p>Detect NFC tags and read messages that contain NDEF data.</p>
</blockquote>
<p>➕<a href="https://developer.apple.com/documentation/quartzcore/calayer/2877488-maskedcorners" target="_blank" rel="noopener">maskedCorners</a></p>
<blockquote>
<p>Animatable corner radius</p>
</blockquote>
<h2 id="iOS-12"><a href="#iOS-12" class="headerlink" title="iOS 12"></a>iOS 12</h2><p>➕<a href="https://developer.apple.com/documentation/authenticationservices" target="_blank" rel="noopener">AuthenticationServices</a></p>
<blockquote>
<p>Make it easy for users to log into apps and services.</p>
</blockquote>
<h2 id="iOS-13"><a href="#iOS-13" class="headerlink" title="iOS 13"></a>iOS 13</h2><p>➕<a href="https://developer.apple.com/documentation/swiftui" target="_blank" rel="noopener">SwiftUI</a></p>
<blockquote>
<p>Declare the user interface and behavior for your app on every platform.</p>
</blockquote>
<p>➕<a href="https://developer.apple.com/documentation/combine" target="_blank" rel="noopener">Combine</a></p>
<blockquote>
<p>Customize handling of asynchronous events by combining event-processing operators.</p>
</blockquote>
<p>➕<a href="https://developer.apple.com/documentation/cryptokit" target="_blank" rel="noopener">CryptoKit</a></p>
<blockquote>
<p>Perform cryptographic operations securely and efficiently.</p>
</blockquote>
<p>➕<a href="https://developer.apple.com/documentation/uikit/uisearchtextfield" target="_blank" rel="noopener">UISearchTextField</a></p>
<blockquote>
<p>Expose UISearchTextField on UISearchBar</p>
</blockquote>
<p>➕<a href="https://developer.apple.com/documentation/metrickit" target="_blank" rel="noopener">MetricKit</a></p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/">iOS</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-What-is-new-in-iOS"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/What-is-new-in-iOS/">What is new in iOS</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/What-is-new-in-iOS/" class="article-date">
	  <time datetime="2019-06-17T10:53:31.000Z" itemprop="datePublished">June 17, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/313" target="_blank" rel="noopener">#313</a></strong></p>
<h2 id="iOS-10"><a href="#iOS-10" class="headerlink" title="iOS 10"></a>iOS 10</h2><p>➕<a href="https://developer.apple.com/documentation/usernotifications" target="_blank" rel="noopener">UserNotifications</a></p>
<blockquote>
<p>Push user-facing notifications to the user’s device from a server, or generate them locally from your app.</p>
</blockquote>
<p>➕<a href="https://developer.apple.com/documentation/uikit/uiviewpropertyanimator" target="_blank" rel="noopener">UIViewPropertyAnimator</a></p>
<blockquote>
<p>A class that animates changes to views and allows the dynamic modification of those animations.</p>
</blockquote>
<p>➕<a href="https://developer.apple.com/documentation/coredata/nspersistentcontainer" target="_blank" rel="noopener">NSPersistentContainer</a></p>
<blockquote>
<p>A container that encapsulates the Core Data stack in your app.</p>
</blockquote>
<p>➕<a href="https://developer.apple.com/documentation/uikit/uifeedbackgenerator" target="_blank" rel="noopener">UIFeedbackGenerator</a></p>
<blockquote>
<p>The abstract superclass for all feedback generators.</p>
</blockquote>
<h2 id="iOS-10-3"><a href="#iOS-10-3" class="headerlink" title="iOS 10.3"></a>iOS 10.3</h2><p>➕<a href="https://developer.apple.com/documentation/storekit/skstorereviewcontroller" target="_blank" rel="noopener">SKStoreReviewController</a></p>
<blockquote>
<p>An object that controls the process of requesting App Store ratings and reviews from users.</p>
</blockquote>
<h2 id="iOS-11"><a href="#iOS-11" class="headerlink" title="iOS 11"></a>iOS 11</h2><p>➕<a href="https://developer.apple.com/documentation/uikit/uiview/2891102-safearealayoutguide" target="_blank" rel="noopener">safeAreaLayoutGuide</a></p>
<blockquote>
<p>The layout guide representing the portion of your view that is unobscured by bars and other content.</p>
</blockquote>
<p>➕<a href="https://developer.apple.com/documentation/coreml" target="_blank" rel="noopener">CoreML</a></p>
<blockquote>
<p>Integrate machine learning models into your app.</p>
</blockquote>
<p>➕<a href="https://developer.apple.com/documentation/vision" target="_blank" rel="noopener">Vision</a></p>
<blockquote>
<p>Apply computer vision algorithms to perform a variety of tasks on input images and video.</p>
</blockquote>
<p>➕<a href="https://developer.apple.com/documentation/arkit" target="_blank" rel="noopener">ARKit</a></p>
<blockquote>
<p>Integrate iOS device camera and motion features to produce augmented reality experiences in your app or game.</p>
</blockquote>
<p>➕<a href="https://developer.apple.com/documentation/devicecheck" target="_blank" rel="noopener">DeviceCheck</a></p>
<blockquote>
<p>Access per-device, per-developer data that your associated server can use in its business logic.</p>
</blockquote>
<p>➕<a href="https://developer.apple.com/documentation/uikit/drag_and_drop" target="_blank" rel="noopener">Drag and Drop</a></p>
<blockquote>
<p>Bring drag and drop to your app by using interaction APIs with your views.</p>
</blockquote>
<p>➕<a href="https://developer.apple.com/documentation/corenfc" target="_blank" rel="noopener">CoreNFC</a></p>
<blockquote>
<p>Detect NFC tags and read messages that contain NDEF data.</p>
</blockquote>
<p>➕<a href="https://developer.apple.com/documentation/quartzcore/calayer/2877488-maskedcorners" target="_blank" rel="noopener">maskedCorners</a></p>
<blockquote>
<p>Animatable corner radius</p>
</blockquote>
<h2 id="iOS-12"><a href="#iOS-12" class="headerlink" title="iOS 12"></a>iOS 12</h2><p>➕<a href="https://developer.apple.com/documentation/authenticationservices" target="_blank" rel="noopener">AuthenticationServices</a></p>
<blockquote>
<p>Make it easy for users to log into apps and services.</p>
</blockquote>
<h2 id="iOS-13"><a href="#iOS-13" class="headerlink" title="iOS 13"></a>iOS 13</h2><ul>
<li><a href="https://www.hackingwithswift.com/articles/193/whats-new-in-ios-13" target="_blank" rel="noopener">https://www.hackingwithswift.com/articles/193/whats-new-in-ios-13</a></li>
<li><a href="https://onesignal.com/blog/ios-13-introduces-4-breaking-changes-to-notifications/" target="_blank" rel="noopener">https://onesignal.com/blog/ios-13-introduces-4-breaking-changes-to-notifications/</a></li>
</ul>
<p>➕<a href="https://developer.apple.com/documentation/swiftui" target="_blank" rel="noopener">SwiftUI</a></p>
<blockquote>
<p>Declare the user interface and behavior for your app on every platform.</p>
</blockquote>
<p>➕<a href="https://developer.apple.com/documentation/combine" target="_blank" rel="noopener">Combine</a></p>
<blockquote>
<p>Customize handling of asynchronous events by combining event-processing operators.</p>
</blockquote>
<p>➕<a href="https://developer.apple.com/documentation/cryptokit" target="_blank" rel="noopener">CryptoKit</a></p>
<blockquote>
<p>Perform cryptographic operations securely and efficiently.</p>
</blockquote>
<p>➕<a href="https://developer.apple.com/documentation/uikit/uisearchtextfield" target="_blank" rel="noopener">UISearchTextField</a></p>
<blockquote>
<p>Expose UISearchTextField on UISearchBar</p>
</blockquote>
<p>➕<a href="https://developer.apple.com/documentation/metrickit" target="_blank" rel="noopener">MetricKit</a></p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/">iOS</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-avoid-crash-when-closing-NSWindow-for-agent-macOS-app"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-avoid-crash-when-closing-NSWindow-for-agent-macOS-app/">How to avoid crash when closing NSWindow for agent macOS app</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-avoid-crash-when-closing-NSWindow-for-agent-macOS-app/" class="article-date">
	  <time datetime="2019-06-16T16:21:48.000Z" itemprop="datePublished">June 16, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/312" target="_blank" rel="noopener">#312</a></strong></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ClosableWindow</span>: <span class="title">NSWindow</span> </span>&#123;</span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">close</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">self</span>.orderOut(<span class="type">NSApp</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> window = <span class="type">ClosableWindow</span>(</span><br><span class="line">    contentRect: rect,</span><br><span class="line">    styleMask: [.titled, .closable],</span><br><span class="line">    backing: .buffered,</span><br><span class="line">    <span class="keyword">defer</span>: <span class="literal">false</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">window.makeKeyAndOrderFront(<span class="type">NSApp</span>)</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/macOS/">macOS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swift/">swift</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-get-cell-at-center-during-scroll-in-UICollectionView"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-get-cell-at-center-during-scroll-in-UICollectionView/">How to get cell at center during scroll in UICollectionView</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-get-cell-at-center-during-scroll-in-UICollectionView/" class="article-date">
	  <time datetime="2019-06-14T09:28:25.000Z" itemprop="datePublished">June 14, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/311" target="_blank" rel="noopener">#311</a></strong></p>
<p>See Omnia <a href="https://github.com/onmyway133/Omnia/blob/master/Sources/iOS/UICollectionView.swift#L30" target="_blank" rel="noopener">https://github.com/onmyway133/Omnia/blob/master/Sources/iOS/UICollectionView.swift#L30</a></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">HorizontalUsersViewController</span>: <span class="title">UIScrollViewDelegate</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">scrollViewDidEndDecelerating</span><span class="params">(<span class="number">_</span> scrollView: UIScrollView)</span></span> &#123;</span><br><span class="line">        <span class="keyword">let</span> point = view.convert(collectionView.center, to: collectionView)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">guard</span></span><br><span class="line">            <span class="keyword">let</span> indexPath = collectionView.indexPathForItem(at: point),</span><br><span class="line">            indexPath.item &lt; users.<span class="built_in">count</span></span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> user = users[indexPath.item]</span><br><span class="line">        delegate?.didScrollTo(user)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/">iOS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swift/">swift</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-downsample-image-in-iOS"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-downsample-image-in-iOS/">How to downsample image in iOS</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-downsample-image-in-iOS/" class="article-date">
	  <time datetime="2019-06-14T09:27:14.000Z" itemprop="datePublished">June 14, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/310" target="_blank" rel="noopener">#310</a></strong></p>
<ul>
<li><a href="https://www.swiftjectivec.com/optimizing-images/" target="_blank" rel="noopener">https://www.swiftjectivec.com/optimizing-images/</a></li>
<li><a href="https://nshipster.com/image-resizing/" target="_blank" rel="noopener">https://nshipster.com/image-resizing/</a></li>
</ul>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/">iOS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swift/">swift</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-show-location-in-Apple-Maps-and-Google-Maps-app-in-iOS"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-show-location-in-Apple-Maps-and-Google-Maps-app-in-iOS/">How to show location in Apple Maps and Google Maps app in iOS</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-show-location-in-Apple-Maps-and-Google-Maps-app-in-iOS/" class="article-date">
	  <time datetime="2019-06-13T12:02:15.000Z" itemprop="datePublished">June 13, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/309" target="_blank" rel="noopener">#309</a></strong></p>
<h2 id="Apple-Maps"><a href="#Apple-Maps" class="headerlink" title="Apple Maps"></a>Apple Maps</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> placemark = <span class="type">MKPlacemark</span>(coordinate: coordinate, addressDictionary: <span class="literal">nil</span>)</span><br><span class="line"><span class="keyword">let</span> mapItem = <span class="type">MKMapItem</span>(placemark: placemark)</span><br><span class="line">mapItem.name = shop.name</span><br><span class="line">mapItem.openInMaps(launchOptions: [:])</span><br></pre></td></tr></table></figure>

<h2 id="Google-Maps"><a href="#Google-Maps" class="headerlink" title="Google Maps"></a>Google Maps</h2><ul>
<li><a href="https://developers.google.com/maps/documentation/urls/ios-urlscheme" target="_blank" rel="noopener">https://developers.google.com/maps/documentation/urls/ios-urlscheme</a></li>
<li>Use <code>q</code> to show pin</li>
</ul>
<p>Since iOS 9, we need to declare <code>LSApplicationQueriesSchemes</code></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">key</span>&gt;</span>LSApplicationQueriesSchemes<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">array</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">string</span>&gt;</span>comgooglemaps<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">array</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">var</span> string = <span class="string">"comgooglemaps://"</span></span><br><span class="line">string += <span class="string">"?q=Food"</span></span><br><span class="line">string += <span class="string">"&amp;center=\(coordinate.latitude),\(coordinate.longitude)"</span></span><br><span class="line">string += <span class="string">"&amp;zoom=15"</span></span><br><span class="line"><span class="keyword">let</span> googleUrl = <span class="type">URL</span>(string: string)!</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="type">UIApplication</span>.shared.canOpenURL(<span class="type">URL</span>(string: <span class="string">"comgooglemaps://"</span>)!) &#123;</span><br><span class="line">    <span class="type">UIApplication</span>.shared.<span class="keyword">open</span>(googleUrl)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/">iOS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swift/">swift</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-make-convenient-touch-handler-for-UIButton-in-iOS"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-make-convenient-touch-handler-for-UIButton-in-iOS/">How to make convenient touch handler for UIButton in iOS</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-make-convenient-touch-handler-for-UIButton-in-iOS/" class="article-date">
	  <time datetime="2019-06-13T11:29:10.000Z" itemprop="datePublished">June 13, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/308" target="_blank" rel="noopener">#308</a></strong></p>
<p>If you don’t want to use <a href="https://github.com/onmyway133/EasyClosure" target="_blank" rel="noopener">https://github.com/onmyway133/EasyClosure</a> yet, it’s easy to roll out a closure based <code>UIButton</code>. The cool thing about closure is it captures variables</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">ClosureButton</span>: <span class="title">UIButton</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> didTouch: (() -&gt; <span class="type">Void</span>)?</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="keyword">init</span>(frame: <span class="type">CGRect</span>) &#123;</span><br><span class="line">        <span class="keyword">super</span>.<span class="keyword">init</span>(frame: frame)</span><br><span class="line"></span><br><span class="line">        addTarget(<span class="keyword">self</span>, action: #selector(buttonTouched(<span class="number">_</span>:)), <span class="keyword">for</span>: .touchUpInside)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">required</span> <span class="keyword">init</span>?(coder aDecoder: <span class="type">NSCoder</span>) &#123;</span><br><span class="line">        <span class="built_in">fatalError</span>()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@objc</span> <span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">buttonTouched</span><span class="params">(<span class="number">_</span>: UIButton)</span></span> &#123;</span><br><span class="line">        didTouch?()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Then in <code>cellForItem</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">collectionView</span><span class="params">(<span class="number">_</span> collectionView: UICollectionView, cellForItemAt indexPath: IndexPath)</span></span> -&gt; <span class="type">UICollectionViewCell</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> cell: <span class="type">UserCell</span> = collectionView.dequeue(<span class="keyword">for</span>: indexPath)!</span><br><span class="line">    <span class="keyword">let</span> user = users[indexPath.item]</span><br><span class="line">    cell.powerButton.didTouch = &#123; [<span class="keyword">weak</span> <span class="keyword">self</span>] <span class="keyword">in</span></span><br><span class="line">        <span class="keyword">self</span>?.openPowerView(user)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> cell</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>With this we can even forward touch event to another button</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">forwardTouchEvent</span><span class="params">(button: ClosureButton)</span></span> &#123;</span><br><span class="line">    didTouch = &#123; [<span class="keyword">weak</span> button] <span class="keyword">in</span></span><br><span class="line">        button?.didTouch?()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Another benefit is that we can apply <a href="https://onmyway133.github.io/blog/How-to-do-throttle-and-debounce-using-DispatchWorkItem-in-Swift/">debouncing</a> to avoid successive tap on button</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> debouncer = <span class="type">Debouncer</span>(timeInterval: <span class="number">0.2</span>)</span><br><span class="line"><span class="meta">@objc</span> <span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">buttonTouched</span><span class="params">(<span class="number">_</span>: UIButton)</span></span> &#123;</span><br><span class="line">    debouncer.run &#123; [<span class="keyword">weak</span> <span class="keyword">self</span>] <span class="keyword">in</span></span><br><span class="line">        <span class="keyword">self</span>?.didTouch?() </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swift/">swift</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-format-distance-in-iOS"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-format-distance-in-iOS/">How to format distance in iOS</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-format-distance-in-iOS/" class="article-date">
	  <time datetime="2019-06-13T09:49:44.000Z" itemprop="datePublished">June 13, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/307" target="_blank" rel="noopener">#307</a></strong></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> MapKit</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> formatter = <span class="type">MKDistanceFormatter</span>()</span><br><span class="line">formatter.unitStyle = .abbreviated</span><br><span class="line">formatter.units = .metric</span><br><span class="line">distanceLabel.text = formatter.string(fromDistance: <span class="built_in">distance</span>) <span class="comment">// 700m, 1.7km</span></span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/">iOS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swift/">swift</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-mock-grpc-model-in-Swift"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-mock-grpc-model-in-Swift/">How to mock grpc model in Swift</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-mock-grpc-model-in-Swift/" class="article-date">
	  <time datetime="2019-06-13T06:03:11.000Z" itemprop="datePublished">June 13, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/306" target="_blank" rel="noopener">#306</a></strong></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> json: [<span class="type">String</span>: <span class="type">Any</span>] = [</span><br><span class="line">    <span class="string">"id"</span>: <span class="string">"123"</span>,</span><br><span class="line">    <span class="string">"name"</span>: <span class="string">"Thor"</span>,</span><br><span class="line">    <span class="string">"isInMarvel"</span>: <span class="literal">true</span></span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> data = <span class="keyword">try</span> <span class="type">JSONSerialization</span>.data(withJSONObject: json, options: [])</span><br><span class="line"><span class="keyword">let</span> string = <span class="type">String</span>(data: data, encoding: .utf8)!</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">try</span> <span class="type">Hero</span>(jsonString: string)</span><br></pre></td></tr></table></figure>

<p>If we use <code>withValue</code> from <a href="https://github.com/onmyway133/blog/issues/354" target="_blank" rel="noopener">How to simplify struct mutating in Swift</a> then we can mock easily</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Hero</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="function"><span class="keyword">func</span> <span class="title">mock</span><span class="params">()</span></span> -&gt; <span class="type">Hero</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> withValue(<span class="type">Hero</span>()) &#123;</span><br><span class="line">            $<span class="number">0</span>.id = <span class="string">"123"</span></span><br><span class="line">            $<span class="number">0</span>.name = <span class="string">"Thor"</span></span><br><span class="line">            $<span class="number">0</span>.isInMarvel = <span class="literal">true</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swift/">swift</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-Favorite-WWDC-2019-sessions"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/Favorite-WWDC-2019-sessions/">Favorite WWDC 2019 sessions</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/Favorite-WWDC-2019-sessions/" class="article-date">
	  <time datetime="2019-06-12T20:12:46.000Z" itemprop="datePublished">June 12, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/305" target="_blank" rel="noopener">#305</a></strong></p>
<p><img src="https://user-images.githubusercontent.com/2284279/59388887-40d28180-8d6d-11e9-9a02-582ce19d6f81.jpeg" alt="w1"></p>
<p>This year I’m lucky enough to get the ticket to WWDC and I couldn’t be more satisfied. 5 conference days full of awesomeness, talks, labs and networking, all make WWDC special and memorial conference for every attendee.</p>
<p>As predicted by many, Marzipan (now officially called Project Catalyst) a technology that could allow iOS apps to be ported to macOS, would be the main topic for this year. But WWDC went more spectacular than that, with dark mode on iOS, independent watchOS apps, and SwiftUI being the star of the show. With over 150 sessions and extra videos, it can be a bit overwhelming to catch up, so I sum up 10 essential sessions to get started. It’s good to catch up with the latest technology, but be aware that frameworks and APIs come and get deprecated very often. It’s better to understand why they are introduced, how to learn the skills and mindset so we can apply them in our apps to delight user experience.</p>
<p>Firstly, a little tip to get the most of WWDC videos. Although you can watch on <a href="https://developer.apple.com/videos/wwdc2019" target="_blank" rel="noopener">Apple developer website</a>, there’s <a href="https://wwdc.io/" target="_blank" rel="noopener">WWDC for macOS app</a> that allows much more comfortable watching experience. There we can tweak playing speed, picture in picture view mode, favorite and download videos for offline watching. </p>
<p>Secondly, for those of you who want to search some texts in the talks, there is <a href="https://asciiwwdc.com/" target="_blank" rel="noopener">ASCIIwwdc</a> that provides full transcripts of all the talks.</p>
<h2 id="1-Platform-State-of-the-Union"><a href="#1-Platform-State-of-the-Union" class="headerlink" title="1. Platform State of the Union"></a>1. <a href="https://developer.apple.com/videos/play/wwdc2019/103/" target="_blank" rel="noopener">Platform State of the Union</a></h2><p>If you only have time for 1 video, this is it. Right after the <a href="https://developer.apple.com/videos/play/wwdc2019/101/" target="_blank" rel="noopener">Keynote</a>, Platform State of the Union is like keynote for developers as it highlights important development changes.</p>
<ul>
<li>macOS 10.15, iOS 13, watchOS 6 and tvOS 13: As usual we get version bumps on all major platforms, which brings lots of new features and enhancement. macOS 10.15 is caleld Catalina and there’s a whole new platform for iPad called iPadOS.</li>
<li>Security and Privacy: Adding to security enhancement from last year, this year shows how Apple really commits into this. There are one-time location permission, signing with Apple, security protocol for HomeKit, new crypto framework which marks MD5 as insecure. Also, apps that target kids can’t display ad or include analytics.</li>
<li>tvOS 13 gets multiple user support</li>
<li>watchOS 6 makes way for independent watch apps, which does not require accompanying iOS apps. There’s also dedicated watch appstore.</li>
<li>iOS 13 now can live in the dark, but dropping support for iPhone 5S, 6 and below. Also, there is ability to toggle language setting per app only.</li>
<li>iPadOS is a spinoff version of iOS for now, they look the same but they are expected to take different paths. It includes mouse support and requires iPad Air 2 and newer devices.</li>
<li>macOS 10.15 introduces a replacement of bash with zsh. It also supports SideCar which allows iPad as an external display. Last but not least, there is Project Catalyst that enables iPad apps to run on the mac.</li>
<li>Xcode 11 includes Swift 5.1 that can target latest SDKs. It brings a new look and feel with tons of features like minimap, Xcode preview, official support for Swift Package Manager, source control enhancement and test plan.</li>
</ul>
<h2 id="2-What’s-New-in-Swift"><a href="#2-What’s-New-in-Swift" class="headerlink" title="2. What’s New in Swift"></a>2. <a href="https://developer.apple.com/videos/play/wwdc2019/402/" target="_blank" rel="noopener">What’s New in Swift</a></h2><p>Although <a href="https://github.com/apple/swift" target="_blank" rel="noopener">Swift is developed in the open</a>, it’s easy to lose track of in tons of proposals and changes. Swift 5.1 brings lots of cool features that power SwiftUI and Combine, so it’s a prerequisite. </p>
<ul>
<li>Module stability: This looks unimportant but this may be the most key feature of Swift 5.1. Unlike ABI stability we get in Swift 5, module stability helps resolves differences at compile time. In other words, this ensures a Swift 5 library will work with the future Swift compilers.</li>
</ul>
<img width="682" alt="a1" src="https://user-images.githubusercontent.com/2284279/59390812-a8d79680-8d72-11e9-8503-1266788e9177.png">

<ul>
<li>A single expression can be declared without return keyword</li>
<li>Function builder, with marker <code>@_functionBuilder</code> which works pretty much like function with receiver in Kotlin, allows for some very neat DSL syntax.</li>
<li>Property wrapper, a counterpart of Kotlin delegated property, allows property accessors to be used in a convenient way. Shipped with Swift 5.1, we can use that with <code>@propertyWrapper</code> annotation.</li>
<li>Opaque return type with <code>some</code> keyword remedies limitation of Swift protocol with Self or associcated types requirements.</li>
<li>Among other things, there are other cool features like universal <code>Self</code>, static subscripts, collection diffing and matching against optional.</li>
</ul>
<h2 id="3-Introducing-SwiftUI-Building-Your-First-App"><a href="#3-Introducing-SwiftUI-Building-Your-First-App" class="headerlink" title="3. Introducing SwiftUI: Building Your First App"></a>3. <a href="https://developer.apple.com/videos/play/wwdc2019/204/" target="_blank" rel="noopener">Introducing SwiftUI: Building Your First App</a></h2><p>Welcome to the spotlight of WWDC 2019, SwiftUI. It may be the most exciting announcement since Swift was introduced in 2014. SwiftUI is not just a new framework, it’s a complete paradigm shift from imperative programming with UIKit/AppKit to a declarative world. I was amazed by how quickly React and Flutter allows fast prototyping and developing, so I’m very happy Apple finally makes this available natively on all platforms.</p>
<img width="1063" alt="w2" src="https://user-images.githubusercontent.com/2284279/59391590-0a990000-8d75-11e9-90bd-3926f7fbc1b9.png">

<p>The cool thing about SwiftUI is that it is expressive and has consistent syntax across platforms. So it is a learn once, write anywhere concept. Together with hot reloading of Xcode Preview, this ends the long debate among iOS community about whether to write UI in code or Storyboard, as the source of truth is now the concise code, but users are free to change any UI details via interactive Preview.</p>
<p>Not only SwiftUI handles consistent UI according to Apple design guideline, it also provides many features for free like accessibility, dark mode and other bookkeeping.</p>
<p>SwiftUI supports latest platform versions and no backward compatibility, so some of us have to wait 1 or 2 more years until iOS 13 is widely adopted. To learn more about SwiftUI, there are other advanced sesions like </p>
<ul>
<li><a href="https://developer.apple.com/videos/play/wwdc2019/216/" target="_blank" rel="noopener">SwiftUI Essentials</a></li>
<li><a href="https://developer.apple.com/videos/play/wwdc2019/237/" target="_blank" rel="noopener">Building Custom Views with SwiftUI</a></li>
<li><a href="https://developer.apple.com/videos/play/wwdc2019/226/" target="_blank" rel="noopener">Data Flow Through SwiftUI</a> </li>
<li><a href="https://developer.apple.com/videos/play/wwdc2019/240/" target="_blank" rel="noopener">SwiftUI On All Devices</a></li>
<li><a href="https://developer.apple.com/videos/play/wwdc2019/231/" target="_blank" rel="noopener">Integrating SwiftUI</a></li>
</ul>
<h2 id="4-Implementing-Dark-Mode-on-iOS"><a href="#4-Implementing-Dark-Mode-on-iOS" class="headerlink" title="4. Implementing Dark Mode on iOS"></a>4. <a href="https://developer.apple.com/videos/play/wwdc2019/214/" target="_blank" rel="noopener">Implementing Dark Mode on iOS</a></h2><p>As much as I was excited about Dark theme in Android Q, Dark Mode in iOS is something that eases my eyes. Some apps also support Dark theme by their owns, but with iOS 13, supporting Dark mode to our apps is not a daunting task. There are more vibrancy materials, system colors that adapts automatically to dark and light modes. We can also select images for each mode in Asset Catalog easily.</p>
<img width="1110" alt="w4" src="https://user-images.githubusercontent.com/2284279/59392111-c9a1eb00-8d76-11e9-8083-6ba6e9054410.png">

<h2 id="5-Introducing-Combine-and-Advances-in-Foundation"><a href="#5-Introducing-Combine-and-Advances-in-Foundation" class="headerlink" title="5. Introducing Combine and Advances in Foundation"></a>5. <a href="https://developer.apple.com/videos/play/wwdc2019/711/" target="_blank" rel="noopener">Introducing Combine and Advances in Foundation</a></h2><p>Combine is a unified declarative framework for processing values over time. As a huge fan of Rx, Combine looks like home. It was thrilled to see this finnaly get supported official by Apple. This simplifying asyncrhonous programming a lot, also streamline other communication patterns like KVO and notification center.</p>
<img width="1159" alt="w5" src="https://user-images.githubusercontent.com/2284279/59392379-be02f400-8d77-11e9-8daa-923cbb20caa0.png">

<p>Combine is the force the powers reactive nature in SwiftUI with <code>Binding</code> and <code>BindableObject</code>. There’s also lots of improvements to Foundation like collection diffing, new list and relative formatters, and notably Combine syntax for <code>URLSession</code>, which makes networking a breeze.</p>
<p>To learn more about Combine, there’s <a href="https://developer.apple.com/videos/play/wwdc2019/721/" target="_blank" rel="noopener">Combine in Practice</a> where we can learn more about error handling, schedule work and many operators on streams.</p>
<img width="1001" alt="w6" src="https://user-images.githubusercontent.com/2284279/59392558-55684700-8d78-11e9-8c52-27e2ecd18d89.png">


<h2 id="6-Modernizing-Your-UI-for-iOS-13"><a href="#6-Modernizing-Your-UI-for-iOS-13" class="headerlink" title="6. Modernizing Your UI for iOS 13"></a>6. <a href="https://developer.apple.com/videos/play/wwdc2019/224/" target="_blank" rel="noopener">Modernizing Your UI for iOS 13</a></h2><p>Take a look at this talk to learn about new features in iOS 13 that we should be aware in our apps. Newly in iOS 13, we can take advantage of card style modal presentation that is very cumbersome to replicate ourselves. There’s also new <code>UISearchBarTextField</code> with advanced customizations for token and inputs. Lastly, the new <code>UIMenu</code> makes showing context menu trivial and make way for iPad apps to behave like native on the mac.</p>
<img width="996" alt="w8" src="https://user-images.githubusercontent.com/2284279/59392862-7c734880-8d79-11e9-9281-0c164b0876bb.png">

<h2 id="7-Modern-Swift-API-Design"><a href="#7-Modern-Swift-API-Design" class="headerlink" title="7. Modern Swift API Design"></a>7. <a href="https://developer.apple.com/videos/play/wwdc2019/415/" target="_blank" rel="noopener">Modern Swift API Design</a></h2><p>If you’re developing iOS apps, chances are that you have already stumbled upon <a href="https://swift.org/documentation/api-design-guidelines/" target="_blank" rel="noopener">API Design Guidelines</a> which contains valuable guides to structuring our Swift code.</p>
<img width="933" alt="w7" src="https://user-images.githubusercontent.com/2284279/59392647-b263fd00-8d78-11e9-9c70-ec3d4686f98c.png">

<p>This highlights my most favorite programming advice “Clarity at the point of use”, because things we declare are written only once, but read many many times, so we should make those concise and clear. There’s also mention of preferring generic over protocol which reminds me of protocol witness technique.</p>
<p>This talk details how Apple engineers themselves design Swift code in their RealityKit and SwiftUI frameworks.</p>
<h2 id="8-Optimizing-App-Launch"><a href="#8-Optimizing-App-Launch" class="headerlink" title="8. Optimizing App Launch"></a>8. <a href="https://developer.apple.com/videos/play/wwdc2019/423/" target="_blank" rel="noopener">Optimizing App Launch</a></h2><p>The launch time of your app can be decisive in user experience, it needs to be fast and do just the necessary things. With enhancements via shared and cached frameworks, apps now load faster on iOS 13. But there’s more thing we can do to improve this, thanks to the new App Launch profiler in Xcode 11, together with app launch time measurement in XCTests. The 3 words we can take away from this talk is minimize, prioritize, and optimize work at this critical launch time.</p>
<img width="887" alt="w9" src="https://user-images.githubusercontent.com/2284279/59392966-d96efe80-8d79-11e9-98ab-eecaaf363db2.png">

<h2 id="9-Introducing-iPad-Apps-for-Mac"><a href="#9-Introducing-iPad-Apps-for-Mac" class="headerlink" title="9. Introducing iPad Apps for Mac"></a>9. <a href="https://developer.apple.com/videos/play/wwdc2019/205/" target="_blank" rel="noopener">Introducing iPad Apps for Mac</a></h2><p>Starting with iOS 13 with Project Catalyst, there’s a new target environment check called UIKitForMac, which allows iPad apps to target the mac while using the same code base. Most of the UI after porting have the correct look and feel like a native macOS app with many features provided for free like window management. There are, kind of obviously, some frameworks that are designed specifically for phone and tablet experience, can’t be supported in macOS.</p>
<img width="1147" alt="w11" src="https://user-images.githubusercontent.com/2284279/59393110-729e1500-8d7a-11e9-9ed8-f6b91ccd03f1.png">

<p>There are other sesions like <a href="https://developer.apple.com/videos/play/wwdc2019/235/" target="_blank" rel="noopener">Taking iPad Apps for Mac to the Next Level</a> where we can learn more about this.</p>
<h2 id="10-Creating-Independent-Watch-Apps"><a href="#10-Creating-Independent-Watch-Apps" class="headerlink" title="10. Creating Independent Watch Apps"></a>10. <a href="https://developer.apple.com/videos/play/wwdc2019/208/" target="_blank" rel="noopener">Creating Independent Watch Apps</a></h2><img width="1088" alt="w13" src="https://user-images.githubusercontent.com/2284279/59393274-21daec00-8d7b-11e9-8ddf-0fd809b0570c.png">

<p>watchOS finally gets its own Appstore and the ability to run independent watchOS apps without a companying iOS app. With the introduction of URLSession and streaming APIs for the watch, together with enhancements in push notifications, Apple sign in, debugging, this can’t be a better time to start developing for the watch.</p>
<hr>
<p>It is stunning to see how Apple comes up with so many cool announcements this year while keeping innovation and quality high. There are more sessions to explore, head over to <a href="https://developer.apple.com/videos/wwdc2019" target="_blank" rel="noopener">WWDC 2019 developer website</a> to learn more.</p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swift/">swift</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-Support-IP-handover-in-rtpproxy-for-VoIP-applications"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/Support-IP-handover-in-rtpproxy-for-VoIP-applications/">Support IP handover in rtpproxy for VoIP applications</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/Support-IP-handover-in-rtpproxy-for-VoIP-applications/" class="article-date">
	  <time datetime="2019-06-12T19:33:28.000Z" itemprop="datePublished">June 12, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/304" target="_blank" rel="noopener">#304</a></strong></p>
<p>If you do <a href="https://github.com/onmyway133/blog/issues/284" target="_blank" rel="noopener">VoIP applications</a>, especially with open sources like pjsip, you may encounter <a href="https://www.kamailio.org/w/" target="_blank" rel="noopener">kamalio</a> and <a href="http://www.rtpproxy.org/" target="_blank" rel="noopener">rtpproxy</a> to serve SIP requests. Due to limitation of NAT traversals, rtpproxy is needed to work around NAT. All SIP handshake requests go through a proxy server, but rtpproxy can also relay voice, video or any RTP stream of data. When I played with rtpproxy, it was before version <a href="http://www.rtpproxy.org/post/v2release/" target="_blank" rel="noopener">2.0</a> and I need to handle IP handover. This refers to the scenario when user switches between different network, for example from Wifi to 4G and they get new IP. Normally this means ending in the SIP call, but the expectation is that we can retry and continue the call if possible for users.</p>
<p>That’s why I forked rtpproxy and add IP handover support. You can check the GitHub repo at <a href="https://github.com/onmyway133/rtpproxy" target="_blank" rel="noopener">rtpproxy</a>.</p>
<p>Use src_cnt to track the number of consecutive packets from different address. When this number exceeds THRESHOLD (10 for RTP and 2 for RTCP), I switch to this new address</p>
<p>This way</p>
<ul>
<li><p>Client can ALWAYS change IP when he switches from 3G to Wifi, or from this Wifi hotspot to another</p>
</li>
<li><p>There’s no chance for attack, unless attacker sends &gt; 10 (RTP THRESHOLD) packets in 20ms (supposed my client sends packets every 20ms)</p>
</li>
</ul>
<p>This idea is borrowed from <a href="http://www.pjsip.org/pjmedia/docs/html/group__PJMEDIA__CONFIG.htm" target="_blank" rel="noopener">http://www.pjsip.org/pjmedia/docs/html/group__PJMEDIA__CONFIG.htm</a></p>
<p>There is a macro PJMEDIA_RTP_NAT_PROBATION_CNT. Basically, it is</p>
<blockquote>
<p><em>“See if source address of RTP packet is different than the configured address, and switch RTP remote address to source packet address after several consecutive packets have been received.”</em></p>
</blockquote>
<p>Mobile clients now change IP frequently, from these hotspots to those. So if rtpproxy can support this feature, it would be nicer.</p>
<p>Take a look at <a href="https://github.com/onmyway133/rtpproxy/blob/master/rtpp_session.h" target="_blank" rel="noopener">https://github.com/onmyway133/rtpproxy/blob/master/rtpp_session.h</a></p>
<pre><code>// IP Handover Count how many consecutive different packets are received, 0 is for callee, 1 is for caller    unsigned int src_count[2];</code></pre><p>And how it actions in <a href="https://github.com/onmyway133/rtpproxy/blob/master/main.c" target="_blank" rel="noopener">https://github.com/onmyway133/rtpproxy/blob/master/main.c</a></p>
<pre><code>static void
rxmit_packets(struct cfg *cf, struct rtpp_session *sp, int ridx,
  double dtime)
{
    int ndrain, i, port;
    struct rtp_packet *packet = NULL;

/* Repeat since we may have several packets queued on the same socket */
    for (ndrain = 0; ndrain &lt; 5; ndrain++) {
 if (packet != NULL)
     rtp_packet_free(packet);

packet = rtp_recv(sp-&gt;fds[ridx]);
 if (packet == NULL)
     break;
 packet-&gt;laddr = sp-&gt;laddr[ridx];
 packet-&gt;rport = sp-&gt;ports[ridx];
 packet-&gt;rtime = dtime;

i = 0;
 // IP Handover do not need canupdate
 // Use src_count
 if (sp-&gt;addr[ridx] != NULL) {
     /* Check that the packet is authentic, drop if it isn&apos;t */
     if (sp-&gt;asymmetric[ridx] == 0) {
  /*
  if (memcmp(sp-&gt;addr[ridx], &amp;packet-&gt;raddr, packet-&gt;rlen) != 0) {
      if (sp-&gt;canupdate[ridx] == 0) {
   //
   // Continue, since there could be good packets in
   // queue.
   //
   continue;
      }

      // Signal that an address has to be updated
      rtpp_log_write(RTPP_LOG_ERR, cf-&gt;glog, &quot;IP Handover Set i 1st ridx %d&quot;,ridx);
      i = 1;
  } else if (sp-&gt;canupdate[ridx] != 0 &amp;&amp;
    sp-&gt;last_update[ridx] != 0 &amp;&amp;
    dtime - sp-&gt;last_update[ridx] &gt; UPDATE_WINDOW) 
  {
      sp-&gt;canupdate[ridx] = 0;
      rtpp_log_write(RTPP_LOG_ERR, cf-&gt;glog, &quot;IP Handover Set canupdate to 0 1st ridx %d&quot;,ridx);
  }
  */

  if (memcmp(sp-&gt;addr[ridx], &amp;packet-&gt;raddr, packet-&gt;rlen) == 0) { 
   sp-&gt;src_count[ridx] = 0;
  } 
  else {
   sp-&gt;src_count[ridx]++;
   // IP Handover RTCP packet sends at larger interval, so must use smaller THRESHOLD
   // Check to see if port is odd or even
   if(sp-&gt;ports[ridx] % 2 == 0) {
    if(sp-&gt;src_count[ridx] &gt;= 10) {
     i = 1;
    } 
   }
   else {
    if(sp-&gt;src_count[ridx] &gt;= 2) {
     i = 1;
    }
   }

  }

} else {
  /*
   * For asymmetric clients don&apos;t check
   * source port since it may be different.
   */
  rtpp_log_write(RTPP_LOG_ERR, cf-&gt;glog, &quot;IP Handover We are in asymmetric ridx %d&quot;,ridx);
  if (!ishostseq(sp-&gt;addr[ridx], sstosa(&amp;packet-&gt;raddr)))
      /*
       * Continue, since there could be good packets in
       * queue.
       */
      continue;
     }
     sp-&gt;pcount[ridx]++;
 } else {
     sp-&gt;pcount[ridx]++;
     sp-&gt;addr[ridx] = malloc(packet-&gt;rlen);
     if (sp-&gt;addr[ridx] == NULL) {
  sp-&gt;pcount[3]++;
  rtpp_log_write(RTPP_LOG_ERR, sp-&gt;log,
    &quot;can&apos;t allocate memory for remote address - &quot;
    &quot;removing session&quot;);
  remove_session(cf, GET_RTP(sp));
  /* Break, sp is invalid now */
  break;
     }
     /* Signal that an address have to be updated. */
     rtpp_log_write(RTPP_LOG_ERR, cf-&gt;glog, &quot;IP Handover Set i 2nd ridx %d&quot;,ridx); 
     i = 1;
 }

/*
  * Update recorded address if it&apos;s necessary. Set &quot;untrusted address&quot;
  * flag in the session state, so that possible future address updates
  * from that client won&apos;t get address changed immediately to some
  * bogus one.
  */
 if (i != 0) {
     sp-&gt;untrusted_addr[ridx] = 1;
     memcpy(sp-&gt;addr[ridx], &amp;packet-&gt;raddr, packet-&gt;rlen);

     // IP Handover Do not use canupdate
     // After update, reset src_count
     /*
     if (sp-&gt;prev_addr[ridx] == NULL || memcmp(sp-&gt;prev_addr[ridx],
       &amp;packet-&gt;raddr, packet-&gt;rlen) != 0) 
     {
         sp-&gt;canupdate[ridx] = 0;
  if(sp-&gt;prev_addr[ridx] == NULL)
  {
     rtpp_log_write(RTPP_LOG_ERR, cf-&gt;glog, &quot;IP Handover prev_addr NULL ridx %d&quot;,ridx); 
  }
  rtpp_log_write(RTPP_LOG_ERR, cf-&gt;glog, &quot;IP Handover Set canupdate to 0 2nd ridx %d&quot;,ridx);
     }
     */

sp-&gt;src_count[ridx] = 0;

port = ntohs(satosin(&amp;packet-&gt;raddr)-&gt;sin_port);

rtpp_log_write(RTPP_LOG_INFO, sp-&gt;log,
       &quot;%s&apos;s address filled in: %s:%d (%s)&quot;,
       (ridx == 0) ? &quot;callee&quot; : &quot;caller&quot;,
       addr2char(sstosa(&amp;packet-&gt;raddr)), port,
       (sp-&gt;rtp == NULL) ? &quot;RTP&quot; : &quot;RTCP&quot;);

/*
      * Check if we have updated RTP while RTCP is still
      * empty or contains address that differs from one we
      * used when updating RTP. Try to guess RTCP if so,
      * should be handy for non-NAT&apos;ed clients, and some
      * NATed as well.
      */
     if (sp-&gt;rtcp != NULL &amp;&amp; (sp-&gt;rtcp-&gt;addr[ridx] == NULL ||
       !ishostseq(sp-&gt;rtcp-&gt;addr[ridx], sstosa(&amp;packet-&gt;raddr)))) {
  if (sp-&gt;rtcp-&gt;addr[ridx] == NULL) {
      sp-&gt;rtcp-&gt;addr[ridx] = malloc(packet-&gt;rlen);
      if (sp-&gt;rtcp-&gt;addr[ridx] == NULL) {
   sp-&gt;pcount[3]++;
   rtpp_log_write(RTPP_LOG_ERR, sp-&gt;log,
     &quot;can&apos;t allocate memory for remote address - &quot;
     &quot;removing session&quot;);
   remove_session(cf, sp);
   /* Break, sp is invalid now */
   break;
      }
  }
  memcpy(sp-&gt;rtcp-&gt;addr[ridx], &amp;packet-&gt;raddr, packet-&gt;rlen);
  satosin(sp-&gt;rtcp-&gt;addr[ridx])-&gt;sin_port = htons(port + 1);
  /* Use guessed value as the only true one for asymmetric clients */
  sp-&gt;rtcp-&gt;canupdate[ridx] = NOT(sp-&gt;rtcp-&gt;asymmetric[ridx]);
  rtpp_log_write(RTPP_LOG_INFO, sp-&gt;log, &quot;guessing RTCP port &quot;
    &quot;for %s to be %d&quot;,
    (ridx == 0) ? &quot;callee&quot; : &quot;caller&quot;, port + 1);
     }
 }

if (sp-&gt;resizers[ridx].output_nsamples &gt; 0)
     rtp_resizer_enqueue(&amp;sp-&gt;resizers[ridx], &amp;packet);
 if (packet != NULL)
     send_packet(cf, sp, ridx, packet);
    }

if (packet != NULL)
 rtp_packet_free(packet);
}</code></pre><p>Here are some useful resources that I read</p>
<ul>
<li><a href="http://stackoverflow.com/questions/18200089/how-does-rtpproxy-handle-handover" target="_blank" rel="noopener">http://stackoverflow.com/questions/18200089/how-does-rtpproxy-handle-handover</a></li>
<li><a href="http://lists.sip-router.org/pipermail/sr-users/2008-March/062795.html" target="_blank" rel="noopener">http://lists.sip-router.org/pipermail/sr-users/2008-March/062795.html</a></li>
<li><a href="http://sourceforge.net/p/sippy/rtpproxy/ci/c71201d897ee7c5620d88bb7d56412cd9dc3362a/tree//main.c?diff=5d030295ce90f2f6ff292b0d65bae1d4318db02a" target="_blank" rel="noopener">http://sourceforge.net/p/sippy/rtpproxy/ci/c71201d897ee7c5620d88bb7d56412cd9dc3362a/tree//main.c?diff=5d030295ce90f2f6ff292b0d65bae1d4318db02a</a></li>
</ul>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-test-drive-view-in-iOS"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-test-drive-view-in-iOS/">How to test drive view in iOS</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-test-drive-view-in-iOS/" class="article-date">
	  <time datetime="2019-06-12T09:11:26.000Z" itemprop="datePublished">June 12, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/303" target="_blank" rel="noopener">#303</a></strong></p>
<p>Instead of setting up custom framework and Playground, we can just display that specific view as root view controller</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">window.rootViewController = makeTestPlayground()</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">makeTestPlayground</span><span class="params">()</span></span> -&gt; <span class="type">UIViewController</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> content = <span class="type">UserCell</span>()</span><br><span class="line">    content.nameLabel.text = <span class="string">"Thor"</span></span><br><span class="line">    content.streetLabel.text = <span class="string">"Asgard"</span></span><br><span class="line">    content.weaponLabel.text = <span class="string">"Hammer"</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> viewController = <span class="type">UIViewController</span>()</span><br><span class="line">    viewController.view.backgroundColor = .white</span><br><span class="line">    viewController.view.addSubview(content)</span><br><span class="line"></span><br><span class="line">    <span class="type">NSLayoutConstraint</span>.on([</span><br><span class="line">        content.centerXAnchor.constraint(equalTo: viewController.view.centerXAnchor),</span><br><span class="line">        content.centerYAnchor.constraint(equalTo: viewController.view.centerYAnchor),</span><br><span class="line">        content.widthAnchor.constraint(equalTo: viewController.view.widthAnchor, multiplier0.<span class="number">9</span>),</span><br><span class="line">        content.heightAnchor.constraint(equalToConstant: <span class="number">200</span>)</span><br><span class="line">    ]</span><br><span class="line">    <span class="keyword">return</span> viewController</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/">iOS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swift/">swift</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-make-carousel-layout-for-UICollectionView-in-iOS"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-make-carousel-layout-for-UICollectionView-in-iOS/">How to make carousel layout for UICollectionView in iOS</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-make-carousel-layout-for-UICollectionView-in-iOS/" class="article-date">
	  <time datetime="2019-06-12T08:35:42.000Z" itemprop="datePublished">June 12, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/302" target="_blank" rel="noopener">#302</a></strong></p>
<h3 id="Based-on-AnimatedCollectionViewLayout"><a href="#Based-on-AnimatedCollectionViewLayout" class="headerlink" title="Based on AnimatedCollectionViewLayout"></a>Based on <a href="https://github.com/KelvinJin/AnimatedCollectionViewLayout" target="_blank" rel="noopener">AnimatedCollectionViewLayout</a></h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">CarouselLayout</span>: <span class="title">UICollectionViewFlowLayout</span> </span>&#123;</span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">layoutAttributesForElements</span><span class="params">(<span class="keyword">in</span> rect: CGRect)</span></span> -&gt; [<span class="type">UICollectionViewLayoutAttributes</span>]? &#123;</span><br><span class="line">        <span class="keyword">guard</span> <span class="keyword">let</span> attributes = <span class="keyword">super</span>.layoutAttributesForElements(<span class="keyword">in</span>: rect) <span class="keyword">else</span> &#123; <span class="keyword">return</span> <span class="literal">nil</span> &#125;</span><br><span class="line">        <span class="keyword">guard</span> <span class="keyword">let</span> collectionView = collectionView <span class="keyword">else</span> &#123; <span class="keyword">return</span> <span class="literal">nil</span> &#125;</span><br><span class="line">        <span class="keyword">return</span> attributes.<span class="built_in">map</span>(&#123; transform(collectionView: collectionView, attribute: $<span class="number">0</span>) &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">shouldInvalidateLayout</span><span class="params">(forBoundsChange newBounds: CGRect)</span></span> -&gt; <span class="type">Bool</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">transform</span><span class="params">(collectionView: UICollectionView, attribute: UICollectionViewLayoutAttributes)</span></span> -&gt; <span class="type">UICollectionViewLayoutAttributes</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> a = attribute</span><br><span class="line">        <span class="keyword">let</span> width = collectionView.frame.size.width</span><br><span class="line">        <span class="keyword">let</span> itemOffset = a.center.x - collectionView.contentOffset.x</span><br><span class="line">        <span class="keyword">let</span> middleOffset = (itemOffset / width) - <span class="number">0.5</span></span><br><span class="line"></span><br><span class="line">        change(</span><br><span class="line">            width: collectionView.frame.size.width,</span><br><span class="line">            attribute: attribute,</span><br><span class="line">            middleOffset: middleOffset</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> attribute</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">change</span><span class="params">(width: CGFloat, attribute: UICollectionViewLayoutAttributes, middleOffset: CGFloat)</span></span> &#123;</span><br><span class="line">        <span class="keyword">let</span> alpha: <span class="type">CGFloat</span> = <span class="number">0.8</span></span><br><span class="line">        <span class="keyword">let</span> itemSpacing: <span class="type">CGFloat</span> = <span class="number">0.21</span></span><br><span class="line">        <span class="keyword">let</span> scale: <span class="type">CGFloat</span> = <span class="number">1.0</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> scaleFactor = scale - <span class="number">0.1</span> * <span class="built_in">abs</span>(middleOffset)</span><br><span class="line">        <span class="keyword">let</span> scaleTransform = <span class="type">CGAffineTransform</span>(scaleX: scaleFactor, y: scaleFactor)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> translationX = -(width * itemSpacing * middleOffset)</span><br><span class="line">        <span class="keyword">let</span> translationTransform = <span class="type">CGAffineTransform</span>(translationX: translationX, y: <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">        attribute.alpha = <span class="number">1.0</span> - <span class="built_in">abs</span>(middleOffset) + alpha</span><br><span class="line">        attribute.transform = translationTransform.concatenating(scaleTransform)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>How to use</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> layout = <span class="type">CarouselLayout</span>()</span><br><span class="line"></span><br><span class="line">layout.scrollDirection = .horizontal</span><br><span class="line">layout.sectionInset = .zero</span><br><span class="line">layout.minimumInteritemSpacing = <span class="number">0</span></span><br><span class="line">layout.minimumLineSpacing = <span class="number">0</span></span><br></pre></td></tr></table></figure>

<p>We can inset cell content and use <code>let scale: CGFloat = 1.0</code> to avoid scaling down center cell</p>
<h3 id="Based-on-CityCollectionViewFlowLayout"><a href="#Based-on-CityCollectionViewFlowLayout" class="headerlink" title="Based on CityCollectionViewFlowLayout"></a>Based on <a href="https://github.com/appcoda/Interactive-Animation/blob/master/CityGuide/Layout/CityCollectionViewFlowLayout.swift" target="_blank" rel="noopener">CityCollectionViewFlowLayout</a></h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> UIKit</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CityCollectionViewFlowLayout</span>: <span class="title">UICollectionViewFlowLayout</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">fileprivate</span> <span class="keyword">var</span> lastCollectionViewSize: <span class="type">CGSize</span> = <span class="type">CGSize</span>.zero</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> scaleOffset: <span class="type">CGFloat</span> = <span class="number">200</span></span><br><span class="line">    <span class="keyword">var</span> scaleFactor: <span class="type">CGFloat</span> = <span class="number">0.9</span></span><br><span class="line">    <span class="keyword">var</span> alphaFactor: <span class="type">CGFloat</span> = <span class="number">0.3</span></span><br><span class="line">    <span class="keyword">var</span> lineSpacing: <span class="type">CGFloat</span> = <span class="number">25.0</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">required</span> <span class="keyword">init</span>?(coder <span class="number">_</span>: <span class="type">NSCoder</span>) &#123;</span><br><span class="line">        <span class="built_in">fatalError</span>()</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">init</span>(itemSize: <span class="type">CGSize</span>) &#123;</span><br><span class="line">        <span class="keyword">super</span>.<span class="keyword">init</span>()</span><br><span class="line">        <span class="keyword">self</span>.itemSize = itemSize</span><br><span class="line">        minimumLineSpacing = lineSpacing</span><br><span class="line">        scrollDirection = .horizontal</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">setItemSize</span><span class="params">(itemSize: CGSize)</span></span> &#123;</span><br><span class="line">        <span class="keyword">self</span>.itemSize = itemSize</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">invalidateLayout</span><span class="params">(with context: UICollectionViewLayoutInvalidationContext)</span></span> &#123;</span><br><span class="line">        <span class="keyword">super</span>.invalidateLayout(with: context)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">guard</span> <span class="keyword">let</span> collectionView = <span class="keyword">self</span>.collectionView <span class="keyword">else</span> &#123; <span class="keyword">return</span> &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> collectionView.bounds.size != lastCollectionViewSize &#123;</span><br><span class="line">            configureContentInset()</span><br><span class="line">            lastCollectionViewSize = collectionView.bounds.size</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">targetContentOffset</span><span class="params">(forProposedContentOffset proposedContentOffset: CGPoint, withScrollingVelocity velocity: CGPoint)</span></span> -&gt; <span class="type">CGPoint</span> &#123;</span><br><span class="line">        <span class="keyword">guard</span> <span class="keyword">let</span> collectionView = <span class="keyword">self</span>.collectionView <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> proposedContentOffset</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">let</span> proposedRect = <span class="type">CGRect</span>(x: proposedContentOffset.x, y: <span class="number">0</span>, width: collectionView.bounds.width, height: collectionView.bounds.height)</span><br><span class="line">        <span class="keyword">guard</span> <span class="keyword">let</span> layoutAttributes = <span class="keyword">self</span>.layoutAttributesForElements(<span class="keyword">in</span>: proposedRect) <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> proposedContentOffset</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">var</span> candidateAttributes: <span class="type">UICollectionViewLayoutAttributes?</span></span><br><span class="line">        <span class="keyword">let</span> proposedContentOffsetCenterX = proposedContentOffset.x + collectionView.bounds.width / <span class="number">2</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> attributes <span class="keyword">in</span> layoutAttributes &#123;</span><br><span class="line">            <span class="keyword">if</span> attributes.representedElementCategory != .cell &#123;</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span> candidateAttributes == <span class="literal">nil</span> &#123;</span><br><span class="line">                candidateAttributes = attributes</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">abs</span>(attributes.center.x - proposedContentOffsetCenterX) &lt; <span class="built_in">abs</span>(candidateAttributes!.center.x - proposedContentOffsetCenterX) &#123;</span><br><span class="line">                candidateAttributes = attributes</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">guard</span> <span class="keyword">let</span> aCandidateAttributes = candidateAttributes <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> proposedContentOffset</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">var</span> newOffsetX = aCandidateAttributes.center.x - collectionView.bounds.size.width / <span class="number">2</span></span><br><span class="line">        <span class="keyword">let</span> offset = newOffsetX - collectionView.contentOffset.x</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> (velocity.x &lt; <span class="number">0</span> &amp;&amp; offset &gt; <span class="number">0</span>) || (velocity.x &gt; <span class="number">0</span> &amp;&amp; offset &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">let</span> pageWidth = itemSize.width + minimumLineSpacing</span><br><span class="line">            newOffsetX += velocity.x &gt; <span class="number">0</span> ? pageWidth : -pageWidth</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> <span class="type">CGPoint</span>(x: newOffsetX, y: proposedContentOffset.y)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">shouldInvalidateLayout</span><span class="params">(forBoundsChange <span class="number">_</span>: CGRect)</span></span> -&gt; <span class="type">Bool</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">layoutAttributesForElements</span><span class="params">(<span class="keyword">in</span> rect: CGRect)</span></span> -&gt; [<span class="type">UICollectionViewLayoutAttributes</span>]? &#123;</span><br><span class="line">        <span class="keyword">guard</span> <span class="keyword">let</span> collectionView = <span class="keyword">self</span>.collectionView,</span><br><span class="line">            <span class="keyword">let</span> superAttributes = <span class="keyword">super</span>.layoutAttributesForElements(<span class="keyword">in</span>: rect) <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">super</span>.layoutAttributesForElements(<span class="keyword">in</span>: rect)</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">let</span> contentOffset = collectionView.contentOffset</span><br><span class="line">        <span class="keyword">let</span> size = collectionView.bounds.size</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">let</span> visibleRect = <span class="type">CGRect</span>(x: contentOffset.x, y: contentOffset.y, width: size.width, height: size.height)</span><br><span class="line">        <span class="keyword">let</span> visibleCenterX = visibleRect.midX</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">guard</span> <span class="keyword">case</span> <span class="keyword">let</span> newAttributesArray <span class="keyword">as</span> [<span class="type">UICollectionViewLayoutAttributes</span>] = <span class="type">NSArray</span>(array: superAttributes, copyItems: <span class="literal">true</span>) <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        newAttributesArray.forEach &#123;</span><br><span class="line">            <span class="keyword">let</span> distanceFromCenter = visibleCenterX - $<span class="number">0</span>.center.x</span><br><span class="line">            <span class="keyword">let</span> absDistanceFromCenter = <span class="built_in">min</span>(<span class="built_in">abs</span>(distanceFromCenter), <span class="keyword">self</span>.scaleOffset)</span><br><span class="line">            <span class="keyword">let</span> scale = absDistanceFromCenter * (<span class="keyword">self</span>.scaleFactor - <span class="number">1</span>) / <span class="keyword">self</span>.scaleOffset + <span class="number">1</span></span><br><span class="line">            $<span class="number">0</span>.transform3D = <span class="type">CATransform3DScale</span>(<span class="type">CATransform3DIdentity</span>, scale, scale, <span class="number">1</span>)</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">let</span> alpha = absDistanceFromCenter * (<span class="keyword">self</span>.alphaFactor - <span class="number">1</span>) / <span class="keyword">self</span>.scaleOffset + <span class="number">1</span></span><br><span class="line">            $<span class="number">0</span>.alpha = alpha</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> newAttributesArray</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">configureContentInset</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">guard</span> <span class="keyword">let</span> collectionView = <span class="keyword">self</span>.collectionView <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">let</span> inset = collectionView.bounds.size.width / <span class="number">2</span> - itemSize.width / <span class="number">2</span></span><br><span class="line">        collectionView.contentInset = <span class="type">UIEdgeInsets</span>.<span class="keyword">init</span>(top: <span class="number">0</span>, <span class="keyword">left</span>: inset, bottom: <span class="number">0</span>, <span class="keyword">right</span>: inset)</span><br><span class="line">        collectionView.contentOffset = <span class="type">CGPoint</span>(x: -inset, y: <span class="number">0</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">resetContentInset</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">guard</span> <span class="keyword">let</span> collectionView = <span class="keyword">self</span>.collectionView <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        collectionView.contentInset = <span class="type">UIEdgeInsets</span>.<span class="keyword">init</span>(top: <span class="number">0</span>, <span class="keyword">left</span>: <span class="number">0</span>, bottom: <span class="number">0</span>, <span class="keyword">right</span>: <span class="number">0</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/">iOS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swift/">swift</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-make-simple-pan-to-dismiss-view-in-iOS"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-make-simple-pan-to-dismiss-view-in-iOS/">How to make simple pan to dismiss view in iOS</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-make-simple-pan-to-dismiss-view-in-iOS/" class="article-date">
	  <time datetime="2019-06-12T06:30:14.000Z" itemprop="datePublished">June 12, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/301" target="_blank" rel="noopener">#301</a></strong></p>
<p>Make it more composable using <code>UIViewController</code> subclass and <code>ThroughView</code> to pass hit events to underlying views.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PanViewController</span>: <span class="title">UIViewController</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> animator = <span class="type">UIViewPropertyAnimator</span>(duration: <span class="number">0</span>, curve: .easeOut)</span><br><span class="line">    <span class="built_in">lazy</span> <span class="keyword">var</span> panGR = <span class="type">UIPanGestureRecognizer</span>(target: <span class="keyword">self</span>, action: #selector(handlePan(<span class="number">_</span>: )))</span><br><span class="line">    <span class="keyword">let</span> slideView = <span class="type">UIView</span>()</span><br><span class="line">    <span class="keyword">let</span> gripView = <span class="type">UIView</span>()</span><br><span class="line">    <span class="keyword">var</span> options: <span class="type">Options</span> = <span class="type">Options</span>()</span><br><span class="line">    <span class="keyword">var</span> didHide: (() -&gt; <span class="type">Void</span>)?</span><br><span class="line">    <span class="keyword">let</span> pullDownVelocity: <span class="type">CGFloat</span> = <span class="number">70</span></span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Options</span> </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> contentView: <span class="type">UIView</span> = <span class="type">UIView</span>()</span><br><span class="line">        <span class="keyword">var</span> percentHeight: <span class="type">CGFloat</span> = <span class="number">0.24</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">loadView</span><span class="params">()</span></span> &#123;</span><br><span class="line">        view = <span class="type">ThroughView</span>()</span><br><span class="line">        view.translatesAutoresizingMaskIntoConstraints = <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">super</span>.viewDidLoad()</span><br><span class="line"></span><br><span class="line">        setup()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">setup</span><span class="params">()</span></span> &#123;</span><br><span class="line">        slideView.layer.cornerRadius = <span class="number">10</span></span><br><span class="line">        slideView.clipsToBounds = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">        gripView.backgroundColor = <span class="type">UIColor</span>.yellow</span><br><span class="line">        gripView.layer.cornerRadius = <span class="number">1</span></span><br><span class="line"></span><br><span class="line">        view.addSubview(slideView)</span><br><span class="line">        slideView.addSubview(gripView)</span><br><span class="line">        slideView.addGestureRecognizer(panGR)</span><br><span class="line"></span><br><span class="line">        <span class="type">NSLayoutConstraint</span>.on([</span><br><span class="line">            slideView.leftAnchor.constraint(equalTo: view.leftAnchor),</span><br><span class="line">            slideView.rightAnchor.constraint(equalTo: view.rightAnchor),</span><br><span class="line">            slideView.heightAnchor.constraint(equalTo: view.heightAnchor),</span><br><span class="line">            slideView.topAnchor.constraint(equalTo: view.bottomAnchor)</span><br><span class="line">        ])</span><br><span class="line"></span><br><span class="line">        <span class="type">NSLayoutConstraint</span>.on([</span><br><span class="line">            gripView.centerXAnchor.constraint(equalTo: slideView.centerXAnchor),</span><br><span class="line">            gripView.topAnchor.constraint(equalTo: slideView.topAnchor, constant: <span class="number">16</span>),</span><br><span class="line">            gripView.widthAnchor.constraint(equalToConstant: <span class="number">30</span>),</span><br><span class="line">            gripView.heightAnchor.constraint(equalToConstant: <span class="number">2</span>)</span><br><span class="line">        ])</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">apply</span><span class="params">(options: Options)</span></span> &#123;</span><br><span class="line">        <span class="keyword">self</span>.options.contentView.removeFromSuperview()</span><br><span class="line">        slideView.insertSubview(options.contentView, at: <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">        <span class="type">NSLayoutConstraint</span>.on([</span><br><span class="line">            options.contentView.leftAnchor.constraint(equalTo: slideView.leftAnchor),</span><br><span class="line">            options.contentView.rightAnchor.constraint(equalTo: slideView.rightAnchor),</span><br><span class="line">            options.contentView.topAnchor.constraint(equalTo: slideView.topAnchor),</span><br><span class="line">            options.contentView.heightAnchor.constraint(equalTo: slideView.heightAnchor, multiplier: options.percentHeight)</span><br><span class="line">        ])</span><br><span class="line"></span><br><span class="line">        <span class="keyword">self</span>.options = options</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@objc</span> <span class="function"><span class="keyword">func</span> <span class="title">handlePan</span><span class="params">(<span class="number">_</span> gr: UIPanGestureRecognizer)</span></span> &#123;</span><br><span class="line">        <span class="keyword">switch</span> gr.state &#123;</span><br><span class="line">        <span class="keyword">case</span> .began:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">case</span> .changed:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">case</span> .ended:</span><br><span class="line">            <span class="keyword">let</span> velocity = gr.velocity(<span class="keyword">in</span>: slideView)</span><br><span class="line">            <span class="keyword">if</span> velocity.y &gt; pullDownVelocity &#123;</span><br><span class="line">                hide()</span><br><span class="line">            &#125;</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">show</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">guard</span> <span class="keyword">let</span> parentView = view.superview <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        animator = <span class="keyword">self</span>.makeAnimator()</span><br><span class="line">        animator.addAnimations &#123;</span><br><span class="line">            <span class="keyword">self</span>.slideView.transform = <span class="type">CGAffineTransform</span>(</span><br><span class="line">                translationX: <span class="number">0</span>,</span><br><span class="line">                y: -parentView.bounds.height * <span class="keyword">self</span>.options.percentHeight - parentView.safeAreaInsets.bottom</span><br><span class="line">            )</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        animator.startAnimation()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">hide</span><span class="params">()</span></span> &#123;</span><br><span class="line">        animator = <span class="keyword">self</span>.makeAnimator()</span><br><span class="line">        animator.addAnimations &#123;</span><br><span class="line">            <span class="keyword">self</span>.slideView.transform = <span class="type">CGAffineTransform</span>.identity</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        animator.addCompletion(&#123; <span class="number">_</span> <span class="keyword">in</span></span><br><span class="line">            <span class="keyword">self</span>.didHide?()</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">        animator.startAnimation()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">makeAnimator</span><span class="params">()</span></span> -&gt; <span class="type">UIViewPropertyAnimator</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="type">UIViewPropertyAnimator</span>(duration: <span class="number">0.25</span>, dampingRatio: <span class="number">1.0</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ThroughView</span>: <span class="title">UIView</span> </span>&#123;</span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">didMoveToSuperview</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">super</span>.didMoveToSuperview()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">guard</span> <span class="keyword">let</span> superview = superview <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">NSLayoutConstraint</span>.on([pinEdges(view: superview)])</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">point</span><span class="params">(inside point: CGPoint, with event: UIEvent?)</span></span> -&gt; <span class="type">Bool</span> &#123;</span><br><span class="line">        <span class="keyword">guard</span> <span class="keyword">let</span> slideView = subviews.first <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> slideView.hitTest(convert(point, to: slideView), with: event) != <span class="literal">nil</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/">iOS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swift/">swift</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-Links-for-SwiftUI"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/Links-for-SwiftUI/">Links for SwiftUI</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/Links-for-SwiftUI/" class="article-date">
	  <time datetime="2019-06-11T07:34:21.000Z" itemprop="datePublished">June 11, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/300" target="_blank" rel="noopener">#300</a></strong></p>
<h2 id="SwiftUI"><a href="#SwiftUI" class="headerlink" title="SwiftUI"></a>SwiftUI</h2><ul>
<li><a href="https://mecid.github.io/2019/09/18/redux-like-state-container-in-swiftui/" target="_blank" rel="noopener">Redux-like state container in SwiftUI</a></li>
<li><a href="https://www.objc.io/blog/2019/10/29/swiftui-environment/" target="_blank" rel="noopener">SwiftUI: Setting Environment Values</a></li>
<li><a href="https://kean.github.io/post/swiftui-layout-system" target="_blank" rel="noopener">SwiftUI Layout System</a></li>
<li><a href="https://www.hackingwithswift.com/quick-start/swiftui/swiftui-tips-and-tricks" target="_blank" rel="noopener">SwiftUI tips and tricks</a></li>
</ul>
<p>Code</p>
<ul>
<li><a href="https://github.com/xtabbas/calculator-checklist" target="_blank" rel="noopener">https://github.com/xtabbas/calculator-checklist</a></li>
<li><a href="https://github.com/alfianlosari/SwiftUI-MovieDB" target="_blank" rel="noopener">https://github.com/alfianlosari/SwiftUI-MovieDB</a></li>
<li><a href="https://github.com/unixzii/SwiftUI-2048" target="_blank" rel="noopener">https://github.com/unixzii/SwiftUI-2048</a></li>
</ul>
<h2 id="Combine"><a href="#Combine" class="headerlink" title="Combine"></a>Combine</h2><ul>
<li><a href="https://github.com/learncombine/Combine101" target="_blank" rel="noopener">https://github.com/learncombine/Combine101</a></li>
</ul>
<h2 id="Property-wrapper"><a href="#Property-wrapper" class="headerlink" title="Property wrapper"></a>Property wrapper</h2><ul>
<li><a href="https://basememara.com/swift-dependency-injection-via-property-wrapper/" target="_blank" rel="noopener">Swift Dependency Injection via Property Wrapper</a></li>
</ul>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swift/">swift</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swiftUI/">swiftUI</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-Getting-started-with-WWDC-2019"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/Getting-started-with-WWDC-2019/">Getting started with WWDC 2019</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/Getting-started-with-WWDC-2019/" class="article-date">
	  <time datetime="2019-06-11T07:34:21.000Z" itemprop="datePublished">June 11, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/300" target="_blank" rel="noopener">#300</a></strong></p>
<h2 id="WWDC"><a href="#WWDC" class="headerlink" title="WWDC"></a>WWDC</h2><ul>
<li><a href="https://ios-goodies.com/post/185370134786/week-2845-wwdc-special" target="_blank" rel="noopener">WWDC special</a></li>
<li><a href="https://wwdcbysundell.com/" target="_blank" rel="noopener">WWDC by Sundell</a></li>
<li><a href="https://nshipster.com/wwdc-2019/" target="_blank" rel="noopener">NSHipster WWDC 2019</a></li>
<li><a href="https://patrickbalestra.com/blog/2019/06/07/wwdc-2019-the-things-you-may-have-missed.html" target="_blank" rel="noopener">WWDC 2019 - The Things You May Have Missed</a></li>
<li><a href="https://wwdcbysundell.com/2019/essential-session-videos/" target="_blank" rel="noopener">7 essential WWDC session videos for iOS developers</a></li>
<li><a href="https://www.hackingwithswift.com/articles/190/the-best-wwdc-videos-of-all-time" target="_blank" rel="noopener">The 15 Best WWDC Videos of All Time</a></li>
<li><a href="https://github.com/Blackjacx/WWDC" target="_blank" rel="noopener">WWDC</a> Extracted gists</li>
<li><a href="https://github.com/onmyway133/blog/issues/305" target="_blank" rel="noopener">Favorite WWDC 2019 sessions</a></li>
</ul>
<h2 id="Swift-5-1"><a href="#Swift-5-1" class="headerlink" title="Swift 5.1"></a>Swift 5.1</h2><ul>
<li><a href="https://www.avanderlee.com/swift/property-wrappers/" target="_blank" rel="noopener">Property wrappers to remove boilerplate code in Swift</a></li>
<li><a href="https://swiftrocks.com/understanding-opaque-return-types-in-swift.html" target="_blank" rel="noopener">Understanding Opaque Return Types in Swift</a></li>
<li><a href="https://www.swiftbysundell.com/posts/the-swift-51-features-that-power-swiftuis-api" target="_blank" rel="noopener">The Swift 5.1 features that power SwiftUI’s API</a></li>
<li><a href="https://www.hackingwithswift.com/articles/182/whats-new-in-swift-5-1" target="_blank" rel="noopener">What’s new in Swift 5.1</a></li>
<li><a href="https://jeroenscode.com/swift-opaque-result-types/" target="_blank" rel="noopener">Swift Opaque Result Types</a></li>
<li><a href="https://github.com/guillermomuntaner/Burritos" target="_blank" rel="noopener">Burritos</a> A collection of Swift Property Wrappers</li>
<li><a href="https://medium.com/flawless-app-stories/how-can-property-wrappers-and-function-builders-be-leveraged-d43160de338f" target="_blank" rel="noopener">How can Property Wrappers and Function Builders be leveraged?</a></li>
</ul>
<h2 id="SwiftUI"><a href="#SwiftUI" class="headerlink" title="SwiftUI"></a>SwiftUI</h2><ul>
<li><a href="https://developer.apple.com/xcode/swiftui/" target="_blank" rel="noopener">SwiftUI</a></li>
<li><a href="https://github.com/Juanpe/About-SwiftUI" target="_blank" rel="noopener">About-SwiftUI</a></li>
<li><a href="https://www.hackingwithswift.com/quick-start/swiftui/" target="_blank" rel="noopener">Swift UI by example</a></li>
<li><a href="https://swiftrocks.com/inside-swiftui-compiler-magic.html" target="_blank" rel="noopener">Inside SwiftUI’s Declarative Syntax’s Compiler Magic</a></li>
<li><a href="https://wwdcbysundell.com/2019/swiftui-common-questions/" target="_blank" rel="noopener">Answers to the most common questions about SwiftUI</a></li>
<li><a href="https://www.raywenderlich.com/3715234-swiftui-getting-started" target="_blank" rel="noopener">SwiftUI: Getting Started</a></li>
<li><a href="https://github.com/SimpleBoilerplates/SwiftUI-Cheat-Sheet" target="_blank" rel="noopener">SwiftUI-Cheat-Sheet</a></li>
<li><a href="https://mecid.github.io/2019/06/12/understanding-property-wrappers-in-swiftui/" target="_blank" rel="noopener">Understanding Property Wrappers in SwiftUI</a></li>
<li><a href="https://github.com/Jinxiansen/SwiftUI" target="_blank" rel="noopener">SwiftUI</a> Framework Learning and Usage Guide</li>
<li><a href="https://github.com/unixzii/SwiftUI-2048" target="_blank" rel="noopener">SwiftUI-2048</a></li>
<li><a href="https://fuckingswiftui.com/" target="_blank" rel="noopener">Fucking SwiftUI</a></li>
<li><a href="https://github.com/anandabits/SwiftUI-Processing" target="_blank" rel="noopener">SwiftUI-Processing</a></li>
<li><a href="http://www.alwaysrightinstitute.com/swiftwebui/" target="_blank" rel="noopener">SwiftWebUI</a></li>
<li><a href="https://mecid.github.io/2019/06/19/building-forms-with-swiftui/" target="_blank" rel="noopener">Building forms with SwiftUI</a></li>
<li><a href="https://mecid.github.io/2019/06/26/animations-in-swiftui/" target="_blank" rel="noopener">Animations in SwiftUI</a></li>
<li><a href="https://www.youtube.com/playlist?list=PLDaHCLWmCcQLL-3YDxnPgG8VENNUiJ0Nv" target="_blank" rel="noopener">SwiftUI DesignCode</a></li>
</ul>
<p>Good to know</p>
<ul>
<li><a href="https://www.objc.io/blog/2019/10/29/swiftui-environment/" target="_blank" rel="noopener">SwiftUI: Setting Environment Values</a></li>
<li><a href="https://kean.github.io/post/swiftui-layout-system" target="_blank" rel="noopener">SwiftUI Layout System</a></li>
</ul>
<p>Code</p>
<ul>
<li><a href="https://github.com/xtabbas/calculator-checklist" target="_blank" rel="noopener">https://github.com/xtabbas/calculator-checklist</a></li>
<li><a href="https://github.com/alfianlosari/SwiftUI-MovieDB" target="_blank" rel="noopener">https://github.com/alfianlosari/SwiftUI-MovieDB</a></li>
<li><a href="https://github.com/unixzii/SwiftUI-2048" target="_blank" rel="noopener">https://github.com/unixzii/SwiftUI-2048</a></li>
</ul>
<h2 id="Combine"><a href="#Combine" class="headerlink" title="Combine"></a>Combine</h2><ul>
<li><a href="https://medium.com/gett-engineering/rxswift-to-apples-combine-cheat-sheet-e9ce32b14c5b" target="_blank" rel="noopener">RxSwift to Apple’s Combine Cheat Sheet</a></li>
<li><a href="https://medium.com/flawless-app-stories/will-combine-kill-rxswift-64780a150d89" target="_blank" rel="noopener">Will Combine kill RxSwift?</a></li>
<li><a href="https://github.com/broadwaylamb/OpenCombine" target="_blank" rel="noopener">OpenCombine</a> Open-source implementation of Apple’s Combine framework for processing values over time.</li>
<li><a href="https://github.com/AvdLee/CombineSwiftPlayground" target="_blank" rel="noopener">CombineSwiftPlayground</a></li>
<li><a href="https://medium.com/snowdog-labs/combine-framework-in-action-part-2-63c7d652b32f" target="_blank" rel="noopener">Combine framework in action — Part 2</a></li>
<li><a href="https://heckj.github.io/swiftui-notes/" target="_blank" rel="noopener">Using Combine</a> 🚀 </li>
</ul>
<h2 id="Dark-Mode"><a href="#Dark-Mode" class="headerlink" title="Dark Mode"></a>Dark Mode</h2><ul>
<li><a href="https://www.fivestars.blog/code/ios-dark-mode-how-to.html" target="_blank" rel="noopener">How To Adopt Dark Mode In Your iOS App </a></li>
</ul>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swift/">swift</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-style-NSButton-in-AppKit"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-style-NSButton-in-AppKit/">How to style NSButton in AppKit</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-style-NSButton-in-AppKit/" class="article-date">
	  <time datetime="2019-05-31T05:29:23.000Z" itemprop="datePublished">May 31, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/297" target="_blank" rel="noopener">#297</a></strong></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> button = <span class="type">NSButton</span>()</span><br><span class="line">button.wantsLayer = <span class="literal">true</span></span><br><span class="line">button.isBordered = <span class="literal">false</span></span><br><span class="line">button.setButtonType(.momentaryChange)</span><br><span class="line">button.attributedTitle = <span class="type">NSAttributedString</span>(</span><br><span class="line">    string: <span class="string">"Click me"</span>,</span><br><span class="line">    attributes: [</span><br><span class="line">        <span class="type">NSAttributedString</span>.<span class="type">Key</span>.foregroundColor: <span class="type">NSColor</span>.white,</span><br><span class="line">        <span class="type">NSAttributedString</span>.<span class="type">Key</span>.font: <span class="type">NSFont</span>.labelFont(ofSize: <span class="number">13</span>)</span><br><span class="line">    ]</span><br><span class="line">button.layer?.backgroundColor = <span class="type">NSColor</span>.orange.cgColor</span><br><span class="line">button.layer?.cornerRadius = <span class="number">12</span></span><br><span class="line"></span><br><span class="line">activate(</span><br><span class="line">    button.anchor.height.<span class="built_in">equal</span>.to(<span class="number">32</span>),</span><br><span class="line">    button.anchor.width.<span class="built_in">equal</span>.to(<span class="number">100</span>)</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>To make it have native rounded rect</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">button.imageScaling = .scaleProportionallyDown</span><br><span class="line">button.setButtonType(.momentaryPushIn)</span><br><span class="line">button.bezelStyle = .rounded</span><br><span class="line">button.isBordered = <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> AppKit</span><br><span class="line"><span class="keyword">import</span> Omnia</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">NSButton</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">style</span><span class="params">(imageName: String)</span></span> &#123;</span><br><span class="line">        image = <span class="type">NSImage</span>(named: <span class="type">NSImage</span>.<span class="type">Name</span>(imageName))</span><br><span class="line">        isBordered = <span class="literal">false</span></span><br><span class="line">        imageScaling = .scaleProportionallyDown</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">styleAction</span><span class="params">(title: String)</span></span> &#123;</span><br><span class="line">        attributedTitle = <span class="type">NSAttributedString</span>(string: title, attributes: [</span><br><span class="line">            <span class="type">NSAttributedString</span>.<span class="type">Key</span>.foregroundColor: <span class="type">NSColor</span>(hex: <span class="string">"008B80"</span>),</span><br><span class="line">            <span class="type">NSAttributedString</span>.<span class="type">Key</span>.font: <span class="type">NSFont</span>.boldSystemFont(ofSize: <span class="number">13</span>)</span><br><span class="line">        ])</span><br><span class="line"></span><br><span class="line">        isBordered = <span class="literal">false</span></span><br><span class="line">        setButtonType(.momentaryChange)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Read-more"><a href="#Read-more" class="headerlink" title="Read more"></a>Read more</h2><ul>
<li><a href="https://mackuba.eu/2014/10/06/a-guide-to-nsbutton-styles" target="_blank" rel="noopener">https://mackuba.eu/2014/10/06/a-guide-to-nsbutton-styles</a></li>
</ul>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/macOS/">macOS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swift/">swift</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-debounce-action-in-Flutter"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-debounce-action-in-Flutter/">How to debounce action in Flutter</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-debounce-action-in-Flutter/" class="article-date">
	  <time datetime="2019-05-30T15:26:24.000Z" itemprop="datePublished">May 30, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/293" target="_blank" rel="noopener">#293</a></strong></p>
<p>Answer <a href="https://stackoverflow.com/a/55119208/1418457" target="_blank" rel="noopener">https://stackoverflow.com/a/55119208/1418457</a></p>
<hr>
<p>This is useful to throttle TextField change event. You can make Debouncer class using Timer</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/foundation.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'dart:async'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Debouncer</span> </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">int</span> milliseconds;</span><br><span class="line">  VoidCallback action;</span><br><span class="line">  Timer _timer;</span><br><span class="line"></span><br><span class="line">  Debouncer(&#123; <span class="keyword">this</span>.milliseconds &#125;);</span><br><span class="line"></span><br><span class="line">  run(VoidCallback action) &#123;</span><br><span class="line">    <span class="keyword">if</span> (_timer != <span class="keyword">null</span>) &#123;</span><br><span class="line">      _timer.cancel();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    _timer = Timer(<span class="built_in">Duration</span>(milliseconds: milliseconds), action);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Declare and trigger</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> _debouncer = Debouncer(milliseconds: <span class="number">500</span>);</span><br><span class="line"></span><br><span class="line">onTextChange(<span class="built_in">String</span> text) &#123;</span><br><span class="line">  _debouncer.run(() =&gt; <span class="built_in">print</span>(text));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/dart/">dart</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/flutter/">flutter</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-add-indicator-under-tab-bar-buttons-in-iOS"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-add-indicator-under-tab-bar-buttons-in-iOS/">How to add indicator under tab bar buttons in iOS</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-add-indicator-under-tab-bar-buttons-in-iOS/" class="article-date">
	  <time datetime="2019-05-27T06:44:05.000Z" itemprop="datePublished">May 27, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/288" target="_blank" rel="noopener">#288</a></strong></p>
<h2 id="selectionIndicatorImage"><a href="#selectionIndicatorImage" class="headerlink" title="selectionIndicatorImage"></a>selectionIndicatorImage</h2><ul>
<li><a href="https://developer.apple.com/documentation/uikit/uitabbar/1623456-selectionindicatorimage" target="_blank" rel="noopener">https://developer.apple.com/documentation/uikit/uitabbar/1623456-selectionindicatorimage</a></li>
<li>Should design image with enough height, transparent background and indicator at the bottom</li>
</ul>
<blockquote>
<p>Use this property to specify a custom selection image. Your image is rendered on top of the tab bar but behind the contents of the tab bar item itself. The default value of this property is nil, which causes the tab bar to apply a default highlight to the selected item</p>
</blockquote>
<h2 id="Custom-UITabBar-or-UITabBarController"><a href="#Custom-UITabBar-or-UITabBarController" class="headerlink" title="Custom UITabBar or UITabBarController"></a>Custom UITabBar or UITabBarController</h2><ul>
<li>Hide existing <code>tabBar</code> <code>tabBar.isHidden = true</code></li>
<li>Position custom buttons</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> UIKit</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CustomTabBarController</span>: <span class="title">UITabBarController</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">let</span> bar = <span class="type">UIView</span>()</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> buttons = [<span class="type">UIButton</span>]()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="keyword">var</span> viewControllers: [<span class="type">UIViewController</span>]? &#123;</span><br><span class="line">        <span class="keyword">didSet</span> &#123;</span><br><span class="line">        	populate(viewControllers: viewControllers)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">super</span>.viewDidLoad()</span><br><span class="line"></span><br><span class="line">        setup()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">setup</span><span class="params">()</span></span> &#123;</span><br><span class="line">        tabBar.isHidden = <span class="literal">true</span></span><br><span class="line">        bar.backgroundColor = <span class="type">R</span>.color.background</span><br><span class="line">        view.addSubview(bar)</span><br><span class="line">        <span class="type">NSLayoutConstraint</span>.on([</span><br><span class="line">            bar.leftAnchor.constraint(equalTo: view.leftAnchor),</span><br><span class="line">            bar.rightAnchor.constraint(equalTo: view.rightAnchor),</span><br><span class="line">            bar.bottomAnchor.constraint(equalTo: view.bottomAnchor),</span><br><span class="line">			bar.topAnchor.constraint(equalTo: tabBar.topAnchor)</span><br><span class="line">        ])</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">populate</span><span class="params">(viewControllers: [UIViewController])</span></span> &#123;</span><br><span class="line">        buttons.forEach &#123;</span><br><span class="line">            $<span class="number">0</span>.removeFromSuperview()</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        buttons = viewControllers.<span class="built_in">map</span>(&#123;</span><br><span class="line">            <span class="keyword">let</span> button = <span class="type">UIButton</span>()</span><br><span class="line">            button.setImage($<span class="number">0</span>.tabBarItem.image, <span class="keyword">for</span>: .normal)</span><br><span class="line">            bar.addSubview(button)</span><br><span class="line">            <span class="keyword">return</span> button</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">        view.setNeedsLayout()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidLayoutSubviews</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">super</span>.viewDidLayoutSubviews()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> padding: <span class="type">CGFloat</span> = <span class="number">20</span></span><br><span class="line">        <span class="keyword">let</span> buttonSize = <span class="type">CGSize</span>(width: <span class="number">30</span>, height: <span class="number">44</span>)</span><br><span class="line">        <span class="keyword">let</span> width = view.bounds.width - padding * <span class="number">20</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (index, button) <span class="keyword">in</span> buttons.enumerated() &#123;</span><br><span class="line">            button.center = <span class="type">CGPoint</span>(x: bar.center.x, y: bar.frame.height/<span class="number">2</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Handle-UITabBarControllerDelegate"><a href="#Handle-UITabBarControllerDelegate" class="headerlink" title="Handle UITabBarControllerDelegate"></a>Handle UITabBarControllerDelegate</h2><ul>
<li>Override <code>func tabBar(_ tabBar: UITabBar, didSelect item: UITabBarItem)</code></li>
<li><code>tabBar.subviews</code> contains 1 private <code>UITabBarBackground</code> and many private <code>UITabBarButton</code></li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> UIKit</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CustomTabBarController</span>: <span class="title">UITabBarController</span> </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> indicator: <span class="type">UIView</span> = &#123;</span><br><span class="line">        <span class="keyword">let</span> view = <span class="type">UIView</span>()</span><br><span class="line">        view.backgroundColor = <span class="type">R</span>.color.primary</span><br><span class="line">        view.frame.size = <span class="type">CGSize</span>(width: <span class="number">32</span>, height: <span class="number">2</span>)</span><br><span class="line">        view.layer.cornerRadius = <span class="number">1</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> view</span><br><span class="line">    &#125;()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">super</span>.viewDidLoad()</span><br><span class="line"></span><br><span class="line">        tabBar.addSubview(indicator)</span><br><span class="line">        <span class="keyword">self</span>.delegate = <span class="keyword">self</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">animate</span><span class="params">(index: Int)</span></span> &#123;</span><br><span class="line">        <span class="keyword">let</span> buttons = tabBar.subviews</span><br><span class="line">            .<span class="built_in">filter</span>(&#123; <span class="type">String</span>(describing: $<span class="number">0</span>).<span class="built_in">contains</span>(<span class="string">"Button"</span>) &#125;)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">guard</span> index &lt; buttons.<span class="built_in">count</span> <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> selectedButton = buttons[index]</span><br><span class="line">        <span class="type">UIView</span>.animate(</span><br><span class="line">            withDuration: <span class="number">0.25</span>,</span><br><span class="line">            delay: <span class="number">0</span>,</span><br><span class="line">            options: .curveEaseInOut,</span><br><span class="line">            animations: &#123;</span><br><span class="line">                <span class="keyword">let</span> point = <span class="type">CGPoint</span>(</span><br><span class="line">                    x: selectedButton.center.x,</span><br><span class="line">                    y: selectedButton.frame.maxY - <span class="number">1</span></span><br><span class="line">                )</span><br><span class="line"></span><br><span class="line">                <span class="keyword">self</span>.indicator.center = point</span><br><span class="line">            &#125;,</span><br><span class="line">            completion: <span class="literal">nil</span></span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidLayoutSubviews</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">super</span>.viewDidLayoutSubviews()</span><br><span class="line"></span><br><span class="line">        animate(index: selectedIndex)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">CustomTabBarController</span>: <span class="title">UITabBarControllerDelegate</span> </span>&#123;</span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">tabBar</span><span class="params">(<span class="number">_</span> tabBar: UITabBar, didSelect item: UITabBarItem)</span></span> &#123;</span><br><span class="line">        <span class="keyword">guard</span></span><br><span class="line">            <span class="keyword">let</span> items = tabBar.items,</span><br><span class="line">            <span class="keyword">let</span> index = items.firstIndex(of: item)</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        animate(index: index)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>In iOS 13, we need to use <code>viewDidAppear</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidAppear</span><span class="params">(<span class="number">_</span> animated: Bool)</span></span> &#123;</span><br><span class="line">    <span class="keyword">super</span>.viewDidAppear(animated)</span><br><span class="line"></span><br><span class="line">    moveIndicator(index: selectedIndex, animated: <span class="literal">false</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/">iOS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swift/">swift</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-Understanding-socket-and-port-in-TCP"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/Understanding-socket-and-port-in-TCP/">Understanding socket and port in TCP</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/Understanding-socket-and-port-in-TCP/" class="article-date">
	  <time datetime="2019-05-25T14:12:06.000Z" itemprop="datePublished">May 25, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/287" target="_blank" rel="noopener">#287</a></strong></p>
<p>When digging into the world of TCP, I get many terminologies I don’t know any misconceptions. But with the help of those geeks on SO, the problems were demystified. Now it’s time to sum up and share with others :D</p>
<h2 id="What-defines-a-unique-connection"><a href="#What-defines-a-unique-connection" class="headerlink" title="What defines a unique connection ?"></a>What defines a unique connection ?</h2><p>There are 5 elements that identify a connection. They call them 5-tuple</p>
<ol>
<li><p>Protocol. This is often omitted as it is understood that we are talking about TCP, which leaves 4.</p>
</li>
<li><p>Source IP address.</p>
</li>
<li><p>Source port.</p>
</li>
<li><p>Target P address.</p>
</li>
<li><p>Target port.</p>
</li>
</ol>
<h2 id="Does-TCP-listen-on-one-port-and-talk-on-another-port"><a href="#Does-TCP-listen-on-one-port-and-talk-on-another-port" class="headerlink" title="Does TCP listen on one port and talk on another port ?"></a>Does TCP listen on one port and talk on another port ?</h2><p>No. This is a common misconception. TCP listens on 1 port and talk on that same port. If clients make multiple TCP connection to server. It’s the client OS that must generate different random source ports, so that server can see them as unique connections</p>
<h2 id="What-is-the-maximum-number-of-concurrent-TCP-connections-that-a-server-can-handle-in-theory"><a href="#What-is-the-maximum-number-of-concurrent-TCP-connections-that-a-server-can-handle-in-theory" class="headerlink" title="What is the maximum number of concurrent TCP connections that a server can handle, in theory ?"></a>What is the maximum number of concurrent TCP connections that a server can handle, in theory ?</h2><p>A single listening port can accept more than one connection simultaneously.There is a ‘64K’ limit that is often cited, but that is per client per server port, and needs clarifying.</p>
<p>If a client has many connections to the same port on the same destination, then three of those fields will be the same — only source_port varies to differentiate the different connections. Ports are 16-bit numbers, therefore the maximum number of connections any given client can have to any given host port is 64K.</p>
<p>However, multiple clients can each have up to 64K connections to some server’s port, and if the server has multiple ports or either is multi-homed then you can multiply that further</p>
<p>So the real limit is file descriptors. Each individual socket connection is given a file descriptor, so the limit is really the number of file descriptors that the system has been configured to allow and resources to handle. The maximum limit is typically up over 300K, but is configurable e.g. with sysctl</p>
<h2 id="Concurrent-connection-request-vs-Concurrent-open-connection"><a href="#Concurrent-connection-request-vs-Concurrent-open-connection" class="headerlink" title="Concurrent connection request vs Concurrent open connection"></a>Concurrent connection request vs Concurrent open connection</h2><p>When clients want to make TCP connection with server, this request will be queued in server ‘s backlog queue. This backlog queue size is small (about 5–10), and this size limits the number of concurrent connection requests. However, server quickly pick connection request from that queue and accept it. Connection request which is accepted are called open connection. The number of concurrent open connections is limited by server ‘s resources allocated for file descriptor.</p>
<h2 id="Why-connection-is-rejected-after-successful-TCP-handshake"><a href="#Why-connection-is-rejected-after-successful-TCP-handshake" class="headerlink" title="Why connection is rejected after successful TCP handshake ?"></a>Why connection is rejected after successful TCP handshake ?</h2><p>It’s normal. When server receive connection request from client (by receiving SYN), it will then response with SYN, ACK, hence cause successful TCP handshake. But this request are stills in backlog queue.</p>
<p>But, if the application process exceeds the limit of max file descriptors it can use, then when server calls accept, then it realizes that there are no file descriptors available to be the allocated for the socket and fails the accept call and the TCP connection sending a FIN to other side</p>
<h2 id="What-are-active-and-passive-socket"><a href="#What-are-active-and-passive-socket" class="headerlink" title="What are active and passive socket ?"></a>What are active and passive socket ?</h2><p>Sockets come in two primary flavors. An active socket is con­nect­ed to a remote active socket via an open data con­nec­tion… A passive socket is not con­nect­ed, but rather awaits an in­com­ing con­nec­tion, which will spawn a new active socket once a con­nec­tion is es­tab­lished</p>
<p>Each port can have a single passive socket binded to it, await­ing in­com­ing con­nec­tions, and mul­ti­ple active sockets, each cor­re­spond­ing to an open con­nec­tion on the port. It’s as if the factory worker is waiting for new mes­sages to arrive (he rep­re­sents the passive socket), and when one message arrives from a new sender, he ini­ti­ates a cor­re­spon­dence (a con­nec­tion) with them by del­e­gat­ing someone else (an active socket) to ac­tu­al­ly read the packet and respond back to the sender if nec­es­sary. This permits the factory worker to be free to receive new packets</p>
<h2 id="Where-to-go-from-here"><a href="#Where-to-go-from-here" class="headerlink" title="Where to go from here"></a>Where to go from here</h2><p>Here are some more links to help you explore further</p>
<ul>
<li><a href="http://stackoverflow.com/questions/152457/what-is-the-difference-between-a-port-and-a-socket" target="_blank" rel="noopener">What is the difference between a port and a socket?</a></li>
<li><a href="http://stackoverflow.com/questions/4696812/passive-and-active-sockets" target="_blank" rel="noopener">Passive and active sockets</a></li>
<li><a href="http://stackoverflow.com/questions/3870260/why-will-a-tcp-server-send-a-fin-immediately-after-accepting-a-connection" target="_blank" rel="noopener">Why will a TCP Server send a FIN immediately after accepting a connection?</a></li>
<li><a href="http://stackoverflow.com/questions/2332741/what-is-the-theoretical-maximum-number-of-open-tcp-connections-that-a-modern-lin" target="_blank" rel="noopener">What is the theoretical maximum number of open TCP connections that a modern Linux box can have</a></li>
<li><a href="http://stackoverflow.com/questions/114874/socket-listen-backlog-parameter-how-to-determine-this-value" target="_blank" rel="noopener">socket listen backlog parameter, how to determine this value?</a></li>
<li><a href="http://stackoverflow.com/questions/4253454/question-about-listening-and-backlog-for-sockets" target="_blank" rel="noopener">Question about listening and backlog for sockets</a></li>
<li><a href="http://stackoverflow.com/questions/1752219/rejecting-a-tcp-connection-before-its-being-accepted" target="_blank" rel="noopener">Rejecting a TCP connection before it’s being accepted?</a></li>
<li><a href="http://stackoverflow.com/questions/6590181/best-way-to-generate-million-tcp-connection" target="_blank" rel="noopener">Best way to generate million tcp connection</a></li>
<li><a href="http://stackoverflow.com/questions/985431/max-parallel-http-connections-in-a-browser" target="_blank" rel="noopener">Max parallel http connections in a browser?</a></li>
<li><a href="http://stackoverflow.com/questions/2831434/how-to-retain-one-million-simultaneous-tcp-connections" target="_blank" rel="noopener">How to retain one million simultaneous TCP connections?</a></li>
<li><a href="http://stackoverflow.com/questions/7735618/tcp-rst-packet-details" target="_blank" rel="noopener">TCP RST packet details</a></li>
<li><a href="http://stackoverflow.com/questions/15761436/how-many-tuples-are-there-in-a-connection" target="_blank" rel="noopener">How many tuples are there in a connection?</a></li>
<li><a href="http://stackoverflow.com/questions/15761776/does-tcp-use-another-port-for-sending-data" target="_blank" rel="noopener">Does TCP use another port for sending data?</a></li>
</ul>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/tech/">tech</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-use-Gradle-Kotlin-DSL-in-Android"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-use-Gradle-Kotlin-DSL-in-Android/">How to use Gradle Kotlin DSL in Android</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-use-Gradle-Kotlin-DSL-in-Android/" class="article-date">
	  <time datetime="2019-05-24T09:38:15.000Z" itemprop="datePublished">May 24, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/285" target="_blank" rel="noopener">#285</a></strong></p>
<h2 id="kts"><a href="#kts" class="headerlink" title="kts"></a>kts</h2><p>settings.gradle.kts</p>
<figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">include(<span class="string">":app"</span>)</span><br></pre></td></tr></table></figure>

<p>build.gradle.kts</p>
<figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.gradle.kotlin.dsl.apply</span><br><span class="line"><span class="keyword">import</span> org.gradle.kotlin.dsl.dependencies</span><br><span class="line"><span class="keyword">import</span> org.gradle.kotlin.dsl.kotlin</span><br><span class="line"><span class="keyword">import</span> org.gradle.kotlin.dsl.*</span><br><span class="line"><span class="keyword">import</span> org.jetbrains.kotlin.config.KotlinCompilerVersion</span><br><span class="line"></span><br><span class="line">plugins &#123;</span><br><span class="line">    id(<span class="string">"com.android.application"</span>)</span><br><span class="line">    kotlin(<span class="string">"android"</span>)</span><br><span class="line">    kotlin(<span class="string">"android.extensions"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//apply &#123;</span></span><br><span class="line"><span class="comment">//    from("$rootDir/tools/grgit.gradle")</span></span><br><span class="line"><span class="comment">//    from("$rootDir/buildSrc/quality.gradle.kts")</span></span><br><span class="line"><span class="comment">//    from("$rootDir/tools/ktlint.gradle")</span></span><br><span class="line"><span class="comment">//    from("$rootDir/tools/detekt.gradle")</span></span><br><span class="line"><span class="comment">//&#125;</span></span><br><span class="line"></span><br><span class="line">android &#123;</span><br><span class="line">    compileSdkVersion(<span class="number">28</span>)</span><br><span class="line">    flavorDimensions(<span class="string">"default"</span>)</span><br><span class="line"></span><br><span class="line">    defaultConfig &#123;</span><br><span class="line">        applicationId = <span class="string">"com.onmyway133.myapp"</span></span><br><span class="line">        minSdkVersion(<span class="number">26</span>)</span><br><span class="line">        targetSdkVersion(<span class="number">28</span>)</span><br><span class="line"><span class="comment">//        versionCode = ext.get("gitCommitCount") as? Int</span></span><br><span class="line">        versionCode = <span class="number">1</span></span><br><span class="line">        versionName = <span class="string">"1.0"</span></span><br><span class="line">        testInstrumentationRunner = <span class="string">"androidx.test.runner.AndroidJUnitRunner"</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    signingConfigs &#123;</span><br><span class="line">        create(<span class="string">"release"</span>) &#123;</span><br><span class="line">            keyAlias = <span class="string">"keyalias"</span></span><br><span class="line">            keyPassword = <span class="string">"keypassword"</span></span><br><span class="line">            storePassword = <span class="string">"storepassword"</span></span><br><span class="line">            storeFile = file(<span class="string">"/Users/khoa/Android/Key/keystore"</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    buildTypes &#123;</span><br><span class="line">        getByName(<span class="string">"debug"</span>) &#123;</span><br><span class="line">            signingConfig = signingConfigs.getByName(<span class="string">"debug"</span>)</span><br><span class="line">            isMinifyEnabled = <span class="literal">true</span></span><br><span class="line">            proguardFiles(getDefaultProguardFile(<span class="string">"proguard-android-optimize.txt"</span>), <span class="string">"<span class="variable">$project</span>.rootDir/tools/proguard-rules-debug.pro"</span>)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        getByName(<span class="string">"release"</span>) &#123;</span><br><span class="line">            signingConfig = signingConfigs.getByName(<span class="string">"release"</span>)</span><br><span class="line">            isMinifyEnabled = <span class="literal">true</span></span><br><span class="line">            isShrinkResources = <span class="literal">true</span></span><br><span class="line">            proguardFiles(getDefaultProguardFile(<span class="string">"proguard-android-optimize.txt"</span>), <span class="string">"<span class="variable">$project</span>.rootDir/tools/proguard-rules.pro"</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    productFlavors &#123;</span><br><span class="line">        create(<span class="string">"staging"</span>) &#123;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        create(<span class="string">"production"</span>) &#123;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    lintOptions &#123;</span><br><span class="line">        lintConfig = file(<span class="string">"<span class="variable">$project</span>.rootDir/tools/lint-rules.xml"</span>)</span><br><span class="line">        htmlOutput = file(<span class="string">"<span class="variable">$project</span>.buildDir/outputs/lint/lint.html"</span>)</span><br><span class="line">        xmlReport = <span class="literal">false</span></span><br><span class="line">        htmlReport = <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">dependencies &#123;</span><br><span class="line">    implementation(fileTree(mapOf(<span class="string">"dir"</span> to <span class="string">"libs"</span>, <span class="string">"include"</span> to listOf(<span class="string">"*.jar"</span>))))</span><br><span class="line">    implementation(kotlin(<span class="string">"stdlib-jdk7"</span>, KotlinCompilerVersion.VERSION))</span><br><span class="line">    implementation(<span class="string">"androidx.appcompat:appcompat:1.0.2"</span>)</span><br><span class="line">    implementation(<span class="string">"androidx.core:core-ktx:1.0.2"</span>)</span><br><span class="line">    implementation(<span class="string">"androidx.constraintlayout:constraintlayout:1.1.3"</span>)</span><br><span class="line">    implementation(<span class="string">"com.google.android.material:material:1.0.0"</span>)</span><br><span class="line">    testImplementation(<span class="string">"junit:junit:4.12"</span>)</span><br><span class="line">    androidTestImplementation(<span class="string">"androidx.test:runner:1.1.1"</span>)</span><br><span class="line">    androidTestImplementation(<span class="string">"androidx.test.espresso:espresso-core:3.1.1"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">tasks.getByName(<span class="string">"check"</span>).dependsOn(<span class="string">"lint"</span>)</span><br></pre></td></tr></table></figure>

<p>tools/quality.gradle.kts</p>
<figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">plugins &#123;</span><br><span class="line">    id(<span class="string">"findbugs"</span>)</span><br><span class="line">    id(<span class="string">"pmd"</span>)</span><br><span class="line">    id(<span class="string">"checkstyle"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">tasks &#123;</span><br><span class="line">    <span class="keyword">val</span> findbugs <span class="keyword">by</span> registering(FindBugs::<span class="class"><span class="keyword">class</span>) </span>&#123;</span><br><span class="line">        ignoreFailures = <span class="literal">false</span></span><br><span class="line">        effort = <span class="string">"max"</span></span><br><span class="line">        reportLevel = <span class="string">"low"</span></span><br><span class="line">        classes = files(<span class="string">"<span class="variable">$project</span>.buildDir/intermediates/javac"</span>)</span><br><span class="line"></span><br><span class="line">        setExcludeFilter(file(<span class="string">"<span class="variable">$rootProject</span>.rootDir/tools/findbugs-exclude.xml"</span>))</span><br><span class="line"></span><br><span class="line">        source = fileTree(<span class="string">"src/main/java/"</span>)</span><br><span class="line">        classpath = files()</span><br><span class="line"></span><br><span class="line">        reports &#123;</span><br><span class="line">            xml.isEnabled = <span class="literal">false</span></span><br><span class="line">            html.isEnabled = <span class="literal">true</span></span><br><span class="line">            html.destination = file(<span class="string">"<span class="variable">$project</span>.buildDir/outputs/findbugs/findbugs-output.html"</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> pmd <span class="keyword">by</span> registering(Pmd::<span class="class"><span class="keyword">class</span>) </span>&#123;</span><br><span class="line">        ruleSetFiles = files(<span class="string">"<span class="subst">$&#123;project.rootDir&#125;</span>/tools/pmd-rules.xml"</span>)</span><br><span class="line">        ignoreFailures = <span class="literal">false</span></span><br><span class="line">        ruleSets = listOf&lt;String&gt;()</span><br><span class="line"></span><br><span class="line">        fileTree()</span><br><span class="line">        source(fileTree(baseDir = <span class="string">"src/main/java"</span>))</span><br><span class="line">        include(<span class="string">"**/*.kt"</span>)</span><br><span class="line">        exclude(<span class="string">"**/gen/**"</span>)</span><br><span class="line"></span><br><span class="line">        reports &#123;</span><br><span class="line">            xml.isEnabled = <span class="literal">false</span></span><br><span class="line">            html.isEnabled = <span class="literal">true</span></span><br><span class="line">            html.destination = file(<span class="string">"<span class="variable">$project</span>.buildDir/outputs/pmd/pmd.html"</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> checkstyle <span class="keyword">by</span> registering(Checkstyle::<span class="class"><span class="keyword">class</span>) </span>&#123;</span><br><span class="line">        description = <span class="string">"Check code standard"</span></span><br><span class="line">        group = <span class="string">"verification"</span></span><br><span class="line"></span><br><span class="line">        configFile = file(<span class="string">"<span class="variable">$project</span>.rootDir/tools/checkstyle.xml"</span>)</span><br><span class="line">        source(fileTree(baseDir = <span class="string">"src"</span>))</span><br><span class="line">        include(<span class="string">"**/*.kt"</span>)</span><br><span class="line">        exclude(<span class="string">"**/gen/**"</span>)</span><br><span class="line"></span><br><span class="line">        classpath = files()</span><br><span class="line">        ignoreFailures = <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://guides.gradle.org/migrating-build-logic-from-groovy-to-kotlin" target="_blank" rel="noopener">https://guides.gradle.org/migrating-build-logic-from-groovy-to-kotlin</a></li>
<li><a href="https://github.com/gradle/kotlin-dsl/blob/master/samples/hello-android/app/build.gradle.kts" target="_blank" rel="noopener">https://github.com/gradle/kotlin-dsl/blob/master/samples/hello-android/app/build.gradle.kts</a></li>
</ul>
<h2 id="About-Gradle"><a href="#About-Gradle" class="headerlink" title="About Gradle"></a>About Gradle</h2><ul>
<li><a href="https://medium.com/@wasyl/understanding-android-gradle-build-files-e4b45b73cc4c" target="_blank" rel="noopener">Understanding Android Gradle build files</a></li>
<li><a href="https://developer.android.com/studio/build/index.html" target="_blank" rel="noopener">Configure your build</a></li>
</ul>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/android/">android</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/kotlin/">kotlin</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-deal-with-CSS-responsiveness-in-Wordpress"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-deal-with-CSS-responsiveness-in-Wordpress/">How to deal with CSS responsiveness in Wordpress</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-deal-with-CSS-responsiveness-in-Wordpress/" class="article-date">
	  <time datetime="2019-05-23T16:28:14.000Z" itemprop="datePublished">May 23, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/283" target="_blank" rel="noopener">#283</a></strong></p>
<p>Original post <a href="https://medium.com/fantageek/dealing-with-css-responsiveness-in-wordpress-5ad24b088b8b" target="_blank" rel="noopener">https://medium.com/fantageek/dealing-with-css-responsiveness-in-wordpress-5ad24b088b8b</a></p>
<hr>
<p>During the alpha test of <a href="https://medium.com/swlh/introducing-learn-talks-awesome-conference-and-meetup-talks-e97c8cf7e0f" target="_blank" rel="noopener">LearnTalks</a>, some of my friends reported that the screen is completely blank in search page, and this happened in mobile only. This article is how I identify the problem and found a workaround for the issue, it may not be the solution, but at least the screen does not appear blank anymore.</p>
<p>As someone who likes to keep up with tech via watching conference videos, I thought it might be a good idea to collect all of these to better search and explore later. So I built a web app with React and Firebase, it is a work in progress for now. Due to time constraints, I decided to go first with Wordpress to quickly play with the idea. So there is <a href="http://learntalks.com/" target="_blank" rel="noopener">LearnTalks</a>.</p>
<p>The theme Marinate that I used didn’t want to render the search page correctly. So I head over to <a href="https://developers.google.com/web/tools/chrome-devtools/device-mode/" target="_blank" rel="noopener">Chrome Dev Tool</a> for Responsive Viewport Mode and Safari for <a href="https://webdesign.tutsplus.com/articles/quick-tip-using-web-inspector-to-debug-mobile-safari--webdesign-8787" target="_blank" rel="noopener">Web Inspector</a></p>
<p><img src="https://cdn-images-1.medium.com/max/3880/0*PfnFpNU4mXD6MoH3.png" alt></p>
<p><img src="https://cdn-images-1.medium.com/max/2000/0*DMJqF2scPbxwABx3.png" alt></p>
<p>The tests showed that the problem only happened on certain screen resolutions. This must be due to <a href="https://en.support.wordpress.com/custom-design/custom-css-media-queries/" target="_blank" rel="noopener">CSS @media query</a> which display different layouts for different screen sizes. And somehow it didn’t work for some sizes.</p>
<pre><code>[@media](http://twitter.com/media) screen and (max-width: 800px) {
 #site-header {
 display: none;
 }
}</code></pre><h2 id="A-bit-about-the-rules"><a href="#A-bit-about-the-rules" class="headerlink" title="A bit about the rules"></a>A bit about the <a href="https://www.w3schools.com/cssref/css3_pr_mediaquery.asp" target="_blank" rel="noopener">rules</a></h2><p>The @media rule is used in media queries to apply different styles for different media types/devices.</p>
<p>Media queries can be used to check many things, such as:</p>
<ul>
<li><p>width and height of the viewport</p>
</li>
<li><p>width and height of the device</p>
</li>
<li><p>orientation (is the tablet/phone in landscape or portrait mode?)</p>
</li>
<li><p>resolution</p>
</li>
</ul>
<p>Using media queries are a popular technique for delivering a tailored style sheet (responsive web design) to desktops, laptops, tablets, and mobile phones.</p>
<p>So I go to Wordpress Dashboard -&gt; Appearance -&gt; Editor to examine CSS files. Unsurprisingly, there are a bunch of media queries</p>
<pre><code>[@media](http://twitter.com/media) (min-width: 600px) and (max-width: 767px) {
 .main-navigation {
 padding: 0;
 }
 .site-header .pushmenu {
 margin-top:0px; 
 } 
 .social-networks li a {
 line-height:2.1em !Important; 
 } 
 .search {
 display: none !important;
 }
 .customer blockquote {
 padding: 10px;
 text-align: justify;
 }
}</code></pre><p>The .search selector is suspicious display: none !important;</p>
<p>The important directive is, well, quite <a href="https://stackoverflow.com/questions/9245353/what-does-important-mean-in-css" target="_blank" rel="noopener">important</a></p>
<blockquote>
<p>It means, essentially, what it says; that ‘this is important, ignore subsequent rules, and any usual specificity issues, apply <em>this</em> rule!’<br>In normal use a rule defined in an external stylesheet is overruled by a style defined in the head of the document, which, in turn, is overruled by an in-line style within the element itself (assuming equal specificity of the selectors). Defining a rule with the !important ‘attribute’ (?) discards the normal concerns as regards the ‘later’ rule overriding the ‘earlier’ ones.</p>
</blockquote>
<p>Luckily, this theme allows the ability to Edit CSS , so I can override that to a block attribute to always show search page</p>
<p><img src="https://cdn-images-1.medium.com/max/5400/1*lBuQOg5RE0vhzTOaFkgDcg.png" alt></p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/tech/">tech</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-Best-places-to-learn-iOS-development"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/Best-places-to-learn-iOS-development/">Best places to learn iOS development</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/Best-places-to-learn-iOS-development/" class="article-date">
	  <time datetime="2019-05-23T16:25:01.000Z" itemprop="datePublished">May 23, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/278" target="_blank" rel="noopener">#278</a></strong></p>
<p>Original post <a href="https://medium.com/fantageek/best-places-to-learn-ios-development-85ebebe890cf" target="_blank" rel="noopener">https://medium.com/fantageek/best-places-to-learn-ios-development-85ebebe890cf</a></p>
<hr>
<p>It’s good to be software engineers, when you get paid to do what you like best. The good thing about software development is it ‘s changing fast, and challenging. This is also the not good thing, when you need to continuously learn and adapt to keep up with the trends.</p>
<p>This is for those who have been iOS developers for some time. If you have a lot of free time to spend, then congratulations. If you do not, you know the luxury of free time, then it’s time to learn wisely, by selecting only the good resources. But where should I learn from?</p>
<p>Welcome to the technology age, where there are tons to things to keep track of, iOS releases, SDK, 3rd frameworks, build tools, patterns, … Here are my list that I tend to open very often. It is opinionated and date aware. If it was several years ago, then <a href="http://nshipster.com/" target="_blank" rel="noopener">http://nshipster.com/</a>, <a href="https://www.objc.io/" target="_blank" rel="noopener">https://www.objc.io/</a> should be in the top of the list.</p>
<p>I like to keep track of stuff, via my lists <a href="https://github.com/onmyway133/fantastic-ios" target="_blank" rel="noopener">https://github.com/onmyway133/fantastic-ios</a>, <a href="https://github.com/onmyway133/fantastic-ios-architecture" target="_blank" rel="noopener">https://github.com/onmyway133/fantastic-ios-architecture</a>, <a href="https://github.com/onmyway133/fantastic-ios-animation" target="_blank" rel="noopener">https://github.com/onmyway133/fantastic-ios-animation</a>. Also you should use services like <a href="https://feedly.com/" target="_blank" rel="noopener">https://feedly.com/</a> to organise your subscription feed.</p>
<p>The point of this is for continuous learning, so it should be succinct. There is no particular order.</p>
<h2 id="1-Raywenderlich"><a href="#1-Raywenderlich" class="headerlink" title="1. Raywenderlich"></a>1. Raywenderlich</h2><p><a href="https://www.raywenderlich.com/" target="_blank" rel="noopener"><strong>Ray Wenderlich | High quality programming tutorials: iOS, Android, Swift, Kotlin, Unity, and more</strong><br><em>Password Autofill allows our apps to automatically populate the username and password and believe it or not, it only…</em>www.raywenderlich.com</a></p>
<p>This is probably one of the most visited site for learning iOS development. All the tutorials are well designed and easy to follow. If you can, you can subscribe to videos <a href="https://videos.raywenderlich.com/courses" target="_blank" rel="noopener">https://videos.raywenderlich.com/courses</a>. I myself find watching video much more relaxing. And the team is reviving its Podcast <a href="https://www.raywenderlich.com/rwpodcast" target="_blank" rel="noopener">https://www.raywenderlich.com/rwpodcast</a> which I really recommend</p>
<h2 id="2-Swift-Talk"><a href="#2-Swift-Talk" class="headerlink" title="2. Swift Talk"></a>2. Swift Talk</h2><p><a href="https://talk.objc.io/" target="_blank" rel="noopener"><strong>Swift Talk · objc.io</strong><br><em>We use the child view controller we created last time to factor out more code from the large view controller.</em>talk.objc.io</a></p>
<p>The people behind objc.io started their swift talks last year. I’m a fan of clean code, so these talks are really helpful when they show how to organise and write code. Also, they have awesome guests from some companies too.</p>
<h2 id="3-NSScreencast"><a href="#3-NSScreencast" class="headerlink" title="3. NSScreencast"></a>3. NSScreencast</h2><p>If you have less time, then this is great option. These covers many aspects of the iOS SDKs, and the videos are weekly.<br><a href="http://nsscreencast.com/episodes" target="_blank" rel="noopener"><strong>NSScreencast: Bite-sized Screencasts for iOS Development</strong><br><em>Quality videos on iOS development, released each week.</em>nsscreencast.com</a></p>
<h2 id="4-Swift-By-Sundell"><a href="#4-Swift-By-Sundell" class="headerlink" title="4. Swift By Sundell"></a>4. Swift By Sundell</h2><p>I actually learn a lot from reading John ‘s blog. He shows various tips on iOS programming and the Swift language. Also his podcast is a must subscribe <a href="https://www.swiftbysundell.com/podcast/" target="_blank" rel="noopener">https://www.swiftbysundell.com/podcast/</a>. I’ve listened to many podcasts, but I like this best.<br><a href="https://www.swiftbysundell.com" target="_blank" rel="noopener"><strong>All posts</strong><br><em>Like many abstractions and patterns in programming, the goal of the builder pattern is to reduce the need to keep…</em>www.swiftbysundell.com</a></p>
<h2 id="5-AppCoda"><a href="#5-AppCoda" class="headerlink" title="5. AppCoda"></a>5. AppCoda</h2><p>I like this because the content is short, and focused. I can easily follow and grasp the gist immediately. And it has large collection of various contents.<br><a href="https://www.appcoda.com/" target="_blank" rel="noopener"><strong>AppCoda - Learn Swift &amp; iOS Programming by Doing</strong><br><em>AppCoda is an educational startup that focuses on teaching people how to learn Swift &amp; iOS programming blog. Our…</em>www.appcoda.com</a></p>
<h2 id="6-Use-Your-Loaf"><a href="#6-Use-Your-Loaf" class="headerlink" title="6. Use Your Loaf"></a>6. Use Your Loaf</h2><p>This has updated posts for every new SDK features. Also, the content is short and to the points. It’s like wikipedia for iOS development.<br><a href="https://useyourloaf.com/" target="_blank" rel="noopener"><strong>Use Your Loaf</strong><br><em>If you are upgrading to Xcode 10 and migrating to Swift 4.2 you are likely to see a number of errors because Swift 4.2…</em>useyourloaf.com</a></p>
<h2 id="7-iOS-Goodies"><a href="#7-iOS-Goodies" class="headerlink" title="7. iOS Goodies"></a>7. iOS Goodies</h2><p>The number of newsletters now is like stars on the sky. Among them I like iOS Goodies the best. It is driven by community <a href="https://github.com/iOS-Goodies/iOS-Goodies" target="_blank" rel="noopener">https://github.com/iOS-Goodies/iOS-Goodies</a> and contains lots of new awesome stuff each week.<br><a href="http://ios-goodies.com/" target="_blank" rel="noopener"><strong>iOS Goodies</strong><br><em>weekly iOS newsletter curated by Marius Constantinescu logo by José Torre founded by Rui Peres and Tiago Almeida</em>ios-goodies.com</a></p>
<h2 id="8-Erica-Sadun"><a href="#8-Erica-Sadun" class="headerlink" title="8. Erica Sadun"></a>8. Erica Sadun</h2><p>This is a bit advanced where it discusses Swift languages. But it’s good to read if you want to get yourself to know more about hidden language features.<br><a href="http://ericasadun.com/" target="_blank" rel="noopener"><strong>Erica Sadun</strong><br><em>Recently, some of my simulators launched and loaded just fine. Others simply went black. It didn’t seem to matter which…</em>ericasadun.com</a></p>
<h2 id="9-Swifting"><a href="#9-Swifting" class="headerlink" title="9. Swifting"></a>9. Swifting</h2><p>I just discovered this recently, but I kinda like the blog. The number of posts are growing, and those are good reads about iOS SDKs.<br><a href="https://swifting.io/" target="_blank" rel="noopener"><strong>swifting.io</strong><br><em>Our dear friend and a founder of swifting.io - Michał, had an accident two months ago. He had a bad luck and got hit by…</em>swifting.io</a></p>
<h2 id="10-Khanlou"><a href="#10-Khanlou" class="headerlink" title="10. Khanlou"></a>10. Khanlou</h2><p>I learn many good patterns and clean code from reading this blog. He suggests many ideas on refactoring code. Really recommend.<br><a href="http://khanlou.com/" target="_blank" rel="noopener"><strong>Khanlou</strong><br><em>To convert this into an infinite collection, we need to think about a few things. First, how will we represent an index…</em>khanlou.com</a></p>
<h2 id="11-Ole-Begemann"><a href="#11-Ole-Begemann" class="headerlink" title="11. Ole Begemann"></a>11. Ole Begemann</h2><p>This has been in my favorite list for a long time. Although this is a bit advanced, it is good to dive deep into Swift.<br><a href="https://oleb.net/blog/" target="_blank" rel="noopener"><strong>Articles - Ole Begemann</strong><br><em>Edit description</em>oleb.net</a></p>
<h2 id="12-Krzysztof-Zablocki"><a href="#12-Krzysztof-Zablocki" class="headerlink" title="12. Krzysztof Zabłocki"></a>12. Krzysztof Zabłocki</h2><p>This is my favorite, too. This shows many practical advices for iOS development. He also talks about build tool that I really like.<br><a href="http://merowing.info/post/" target="_blank" rel="noopener"><strong>Posts</strong><br><em>Have you ever written tests? Usually, they use equality asserts, e.g. XCTAssertEqual, what happens if the object isn’t…</em>merowing.info</a></p>
<h2 id="13-Realm-News"><a href="#13-Realm-News" class="headerlink" title="13. Realm News"></a>13. Realm News</h2><p>Realm collects a huge collection of iOS videos from conferences and meet ups, and it has transcripts too. It’s more than enough to fill your free time.<br><a href="https://academy.realm.io/" target="_blank" rel="noopener"><strong>Realm Academy - Expert content from the mobile experts</strong><br><em>Developer videos, articles and tutorials from top conferences, top authors, and community leaders.</em>academy.realm.io</a></p>
<h2 id="14-Big-Nerd-Ranch"><a href="#14-Big-Nerd-Ranch" class="headerlink" title="14. Big Nerd Ranch"></a>14. Big Nerd Ranch</h2><p>This has posts in both iOS and Android. But I really like the contents, very good.<br><a href="https://www.bignerdranch.com/blog/" target="_blank" rel="noopener"><strong>App Development and Design Blog | Big Nerd Ranch</strong><br><em>Our blog offers app development and design tutorials, tips and tricks for software engineering and insights for team…</em>www.bignerdranch.com</a></p>
<h2 id="15-Cocoa-with-Love"><a href="#15-Cocoa-with-Love" class="headerlink" title="15. Cocoa with Love"></a>15. Cocoa with Love</h2><p>This is very advanced, and suitable for hardcore fans. I feel small when reading the posts.<br><a href="http://www.cocoawithlove.com/" target="_blank" rel="noopener"><strong>Cocoa with Love</strong><br><em>The upcoming CwlViews library offers a syntax for constructing views that has a profound effect on the Cocoa…</em>www.cocoawithlove.com</a></p>
<h2 id="16-Atomic-Spin"><a href="#16-Atomic-Spin" class="headerlink" title="16. Atomic Spin"></a>16. Atomic Spin</h2><p>I really enjoy reading blog posts from Atomic Object. There are posts for many platforms, and about life, so you need to filter for iOS development.<br><a href="https://spin.atomicobject.com/" target="_blank" rel="noopener"><strong>Atomic Spin</strong><br><em>More and more studies have shown that the most effective teams are the ones whose members trust each other and feel…</em>spin.atomicobject.com</a></p>
<h2 id="17-Raizlabs"><a href="#17-Raizlabs" class="headerlink" title="17. Raizlabs"></a>17. Raizlabs</h2><p>This has very good articles about iOS. Highly recommend.<br><a href="https://www.raizlabs.com/dev/" target="_blank" rel="noopener"><strong>React Native Animations: Part 2 - RaizException - Raizlabs Developer Blog</strong><br><em>When we build apps for our clients, beautiful designs and interactions are important. But equally important is…</em>www.raizlabs.com</a></p>
<h2 id="18-Invasive-Code"><a href="#18-Invasive-Code" class="headerlink" title="18. Invasive Code"></a>18. Invasive Code</h2><p>This has topics for many iOS features. All the contents are good and succinct.<br><a href="https://www.invasivecode.com/weblog/" target="_blank" rel="noopener"><strong>iOS Development - <em>Computer Vision iOS Apps</em></strong><br>Computer Vision iOS Appswww.invasivecode.com</a></p>
<h2 id="19-Think-and-Build"><a href="#19-Think-and-Build" class="headerlink" title="19. Think and Build"></a>19. Think and Build</h2><p>I like posts about animation and replicating app features. This has all of them.</p>
<p><a href="http://www.thinkandbuild.it/" target="_blank" rel="noopener">http://www.thinkandbuild.it/</a></p>
<h2 id="20-Little-Bites-of-Cocoa"><a href="#20-Little-Bites-of-Cocoa" class="headerlink" title="20. Little Bites of Cocoa"></a>20. Little Bites of Cocoa</h2><p>This has a series of small tips, on how to use iOS SDKs and other 3rd frameworks. Good to know.<br><a href="https://littlebitesofcocoa.com/" target="_blank" rel="noopener"><strong>Little Bites of Cocoa - Tips and techniques for iOS and Mac development - Weekday mornings at 9:42…</strong><br><em>Tips and techniques for iOS and Mac development - Weekday mornings at 9:42 AM. The goal of each of these ‘bites’ is to…</em>littlebitesofcocoa.com</a></p>
<h2 id="21-Samwize"><a href="#21-Samwize" class="headerlink" title="21. Samwize ()"></a>21. Samwize ()</h2><p>All the posts are good, short and to the points. Really like this.<br><a href="http://samwize.com/" target="_blank" rel="noopener"><strong>@samwize</strong><br><em>¯_(ツ)_/¯</em>samwize.com</a></p>
<p>I think that’s enough. Feel free to share and suggest other awesome blogs that I might miss. Also, it’s good to contribute back to community by writing your blog posts. You will learn a lot by sharing.</p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/">iOS</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-20-recommended-utility-apps-for-macOS"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/20-recommended-utility-apps-for-macOS/">20 recommended utility apps for macOS</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/20-recommended-utility-apps-for-macOS/" class="article-date">
	  <time datetime="2019-05-23T16:21:05.000Z" itemprop="datePublished">May 23, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/274" target="_blank" rel="noopener">#274</a></strong></p>
<p>Original post <a href="https://hackernoon.com/20-recommended-utility-apps-for-macos-in-2018-ea494b4db72b" target="_blank" rel="noopener">https://hackernoon.com/20-recommended-utility-apps-for-macos-in-2018-ea494b4db72b</a></p>
<hr>
<p>Depending on the need, we have different apps on the mac. As someone who worked mostly with development, below are my indispensable apps. They are like suits to Tony Stark. Since I love open source apps, they have higher priority in the list.</p>
<h2 id="Open-source-apps"><a href="#Open-source-apps" class="headerlink" title="Open source apps"></a>Open source apps</h2><h3 id="iTerm-2-https-www-iterm2-com"><a href="#iTerm-2-https-www-iterm2-com" class="headerlink" title="iTerm 2 https://www.iterm2.com/"></a>iTerm 2 <a href="https://www.iterm2.com/" target="_blank" rel="noopener">https://www.iterm2.com/</a></h3><blockquote>
<p>iTerm2 is a replacement for Terminal and the successor to iTerm. It works on Macs with macOS 10.10 or newer. iTerm2 brings the terminal into the modern age with features you never knew you always wanted.</p>
</blockquote>
<p><img src="https://cdn-images-1.medium.com/max/2728/1*-U-N-4151szNzxebapR45w.png" alt></p>
<p>iTerm2 has good integration with tmux and supports <a href="https://www.iterm2.com/documentation/2.1/documentation-one-page.html" target="_blank" rel="noopener">Split Panes</a></p>
<blockquote>
<p>Term2 allows you to divide a tab into many rectangular “panes”, each of which is a different terminal session. The shortcuts cmd-d and cmd-shift-d divide an existing session vertically or horizontally, respectively. You can navigate among split panes with cmd-opt-arrow or cmd-[ and cmd-]. You can “maximize” the current pane — hiding all others in that tab — with cmd-shift-enter. Pressing the shortcut again restores the hidden panes.</p>
</blockquote>
<p>There’s <a href="https://github.com/ggreer/the_silver_searcher" target="_blank" rel="noopener">the_silver_searcher</a> with ag command to quickly search for files</p>
<h3 id="oh-my-zsh-https-github-com-robbyrussell-oh-my-zsh"><a href="#oh-my-zsh-https-github-com-robbyrussell-oh-my-zsh" class="headerlink" title="oh-my-zsh https://github.com/robbyrussell/oh-my-zsh"></a>oh-my-zsh <a href="https://github.com/robbyrussell/oh-my-zsh" target="_blank" rel="noopener">https://github.com/robbyrussell/oh-my-zsh</a></h3><blockquote>
<p>A delightful community-driven (with 1,200+ contributors) framework for managing your zsh configuration. Includes 200+ optional plugins (rails, git, OSX, hub, capistrano, brew, ant, php, python, etc), over 140 themes to spice up your morning, and an auto-update tool so that makes it easy to keep up with the latest updates from the community.</p>
</blockquote>
<p>I use z shell with oh-my-zsh plugins. I also use <a href="https://github.com/zsh-users/zsh-autosuggestions" target="_blank" rel="noopener">zsh-autocompletions</a> to have autocompletion like fish shell and <a href="https://github.com/robbyrussell/oh-my-zsh/tree/master/plugins/z" target="_blank" rel="noopener">z</a> to track and quickly navigate to the most used directories.</p>
<h3 id="spectacle-https-github-com-eczarny-spectacle"><a href="#spectacle-https-github-com-eczarny-spectacle" class="headerlink" title="spectacle https://github.com/eczarny/spectacle"></a>spectacle <a href="https://github.com/eczarny/spectacle" target="_blank" rel="noopener">https://github.com/eczarny/spectacle</a></h3><blockquote>
<p>Spectacle allows you to organize your windows without using a mouse.</p>
</blockquote>
<p><img src="https://cdn-images-1.medium.com/max/2426/1*0TFgBiAif9VBl6Xv4D6EtQ.png" alt></p>
<p>With spectable, I can organise windows easily with just Cmd+Option+F or Cmd+Option+Left</p>
<h3 id="insomnia-https-github-com-getinsomnia-insomnia"><a href="#insomnia-https-github-com-getinsomnia-insomnia" class="headerlink" title="insomnia https://github.com/getinsomnia/insomnia"></a>insomnia <a href="https://github.com/getinsomnia/insomnia" target="_blank" rel="noopener">https://github.com/getinsomnia/insomnia</a></h3><blockquote>
<p>Insomnia is a cross-platform <em>REST client</em>, built on top of <a href="http://electron.atom.io/" target="_blank" rel="noopener">Electron</a>.</p>
</blockquote>
<p>Regardless if you like electron.js apps or not. This is a great tool for testing REST requets</p>
<p><img src="https://cdn-images-1.medium.com/max/7168/1*To2QSXpMbFryyO50hwR_9w.png" alt></p>
<h3 id="Visual-Studio-Code-https-github-com-Microsoft-vscode"><a href="#Visual-Studio-Code-https-github-com-Microsoft-vscode" class="headerlink" title="Visual Studio Code https://github.com/Microsoft/vscode"></a>Visual Studio Code <a href="https://github.com/Microsoft/vscode" target="_blank" rel="noopener">https://github.com/Microsoft/vscode</a></h3><blockquote>
<p><a href="https://code.visualstudio.com/" target="_blank" rel="noopener">VS Code</a> is a new type of tool that combines the simplicity of a code editor with what developers need for their core edit-build-debug cycle. Code provides comprehensive editing and debugging support, an extensibility model, and lightweight integration with existing tools.</p>
</blockquote>
<p>This seems to be the most popular for front end development, and many other things. There’s bunch of extensions that make the experience to a new level.</p>
<h3 id="IconGenerator-https-github-com-onmyway133-IconGenerator"><a href="#IconGenerator-https-github-com-onmyway133-IconGenerator" class="headerlink" title="IconGenerator https://github.com/onmyway133/IconGenerator"></a>IconGenerator <a href="https://github.com/onmyway133/IconGenerator" target="_blank" rel="noopener">https://github.com/onmyway133/IconGenerator</a></h3><p>Built by me. When developing iOS, Android and macOS applications, I need a quick way to generate icons in different sizes. You can simply drag the generated asset into Xcode and that’s it.</p>
<p><img src="https://cdn-images-1.medium.com/max/2000/0*JmfHsO-lmN1aWX6J.png" alt></p>
<h3 id="vmd-https-github-com-yoshuawuyts-vmd"><a href="#vmd-https-github-com-yoshuawuyts-vmd" class="headerlink" title="vmd https://github.com/yoshuawuyts/vmd"></a>vmd <a href="https://github.com/yoshuawuyts/vmd" target="_blank" rel="noopener">https://github.com/yoshuawuyts/vmd</a></h3><blockquote>
<p>Preview markdown files in a separate window. Markdown is formatted exactly the same as on GitHub.</p>
</blockquote>
<p><img src="https://cdn-images-1.medium.com/max/2880/0*LnE9wGaCRvd90FkQ.png" alt></p>
<h3 id="colorpicker-https-github-com-Toinane-colorpicker"><a href="#colorpicker-https-github-com-Toinane-colorpicker" class="headerlink" title="colorpicker https://github.com/Toinane/colorpicker"></a>colorpicker <a href="https://github.com/Toinane/colorpicker" target="_blank" rel="noopener">https://github.com/Toinane/colorpicker</a></h3><blockquote>
<p>A mininal but complete colorpicker desktop app</p>
</blockquote>
<p>I used to use <a href="https://sipapp.io/" target="_blank" rel="noopener">Sip</a> but I often get the problem of losing focus.</p>
<p><img src="https://cdn-images-1.medium.com/max/2000/0*nBZsnnHC5AJ_Ha0X" alt></p>
<h3 id="GifCapture-https-github-com-onmyway133-GifCapture"><a href="#GifCapture-https-github-com-onmyway133-GifCapture" class="headerlink" title="GifCapture https://github.com/onmyway133/GifCapture"></a>GifCapture <a href="https://github.com/onmyway133/GifCapture" target="_blank" rel="noopener">https://github.com/onmyway133/GifCapture</a></h3><p>I built this as a native macOS app to capture screen and save to gif file. It works like <a href="https://www.cockos.com/licecap/" target="_blank" rel="noopener">Licecap</a> but open source. There’s also an open source tool called <a href="https://github.com/wulkano/kap" target="_blank" rel="noopener">kap</a> that is slick.</p>
<p><img src="https://cdn-images-1.medium.com/max/2000/0*UVNhL9otC1Of3h_I.png" alt></p>
<h3 id="Itsycal-https-github-com-sfsam-Itsycal"><a href="#Itsycal-https-github-com-sfsam-Itsycal" class="headerlink" title="Itsycal https://github.com/sfsam/Itsycal"></a>Itsycal <a href="https://github.com/sfsam/Itsycal" target="_blank" rel="noopener">https://github.com/sfsam/Itsycal</a></h3><blockquote>
<p>Itsycal is a tiny calendar for your Mac’s menu bar.</p>
</blockquote>
<p><img src="https://cdn-images-1.medium.com/max/2152/1*3uo-HmuBIrOd5hrHlnHHyA.png" alt></p>
<p>The app is minimal and works very well. It can shows calendar for integrated accounts in the mac.</p>
<h3 id="PushNotifications-https-github-com-onmyway133-PushNotifications"><a href="#PushNotifications-https-github-com-onmyway133-PushNotifications" class="headerlink" title="PushNotifications https://github.com/onmyway133/PushNotifications"></a>PushNotifications <a href="https://github.com/onmyway133/PushNotifications" target="_blank" rel="noopener">https://github.com/onmyway133/PushNotifications</a></h3><p>I often need to test push notification to iOS and Android apps. And I want to support both certificate and key p8 authentication for Apple Push Notification service, so I built this tool.</p>
<p><img src="https://cdn-images-1.medium.com/max/2000/0*zM9AWj2-C0-S4T29.png" alt></p>
<h3 id="Lyrics-https-github-com-onmyway133-Lyrics"><a href="#Lyrics-https-github-com-onmyway133-Lyrics" class="headerlink" title="Lyrics https://github.com/onmyway133/Lyrics"></a>Lyrics <a href="https://github.com/onmyway133/Lyrics" target="_blank" rel="noopener">https://github.com/onmyway133/Lyrics</a></h3><blockquote>
<p>A menu bar app to show the lyric of the playing Spotify song</p>
</blockquote>
<p>When I listen to some songs in Spotify, I want to see the lyrics too. The lyrics is fetched from <a href="https://genius.com/" target="_blank" rel="noopener">https://genius.com/</a> and displayed in a wonderful UI.</p>
<p><img src="https://cdn-images-1.medium.com/max/2000/0*IBFKvyfkdi5FPWsF.png" alt></p>
<h3 id="gitify-https-github-com-manosim-gitify"><a href="#gitify-https-github-com-manosim-gitify" class="headerlink" title="gitify https://github.com/manosim/gitify"></a>gitify <a href="https://github.com/manosim/gitify" target="_blank" rel="noopener">https://github.com/manosim/gitify</a></h3><blockquote>
<p>GitHub Notifications on your desktop.</p>
</blockquote>
<p>I use this to get real time notification for issues and pull requests for projects on GitHub. I hope there is support for Bitbucket soon.</p>
<p><img src="https://cdn-images-1.medium.com/max/4000/0*IsCx4-yROD3DnT4B.jpg" alt></p>
<h3 id="FinderGo-https-github-com-onmyway133-FinderGo"><a href="#FinderGo-https-github-com-onmyway133-FinderGo" class="headerlink" title="FinderGo https://github.com/onmyway133/FinderGo"></a>FinderGo <a href="https://github.com/onmyway133/FinderGo" target="_blank" rel="noopener">https://github.com/onmyway133/FinderGo</a></h3><p>FinderGo is both a native macOS app and a Finder extension. It has toolbar button that opens terminal right within Finder in the current directory. You can configure it to open either Terminal, iTerm2 or Hyper</p>
<p><img src="https://cdn-images-1.medium.com/max/4000/0*735x63KgINRN7ig8.gif" alt></p>
<h3 id="Atom-one-dark-theme"><a href="#Atom-one-dark-theme" class="headerlink" title="Atom one dark theme"></a>Atom one dark theme</h3><p>This is about theme. There is the very popular <a href="https://github.com/dracula/" target="_blank" rel="noopener">dracular</a> themes, but I find it too strong for the eyes. I don’t use Atom, but I love its <a href="https://atom.io/themes/one-dark-ui" target="_blank" rel="noopener">one dark UI</a>. I used to maintain my own theme for Xcode called <a href="https://github.com/onmyway133/DarkSide" target="_blank" rel="noopener">DarkSide</a> but now I use <a href="https://github.com/bojan/xcode-one-dark" target="_blank" rel="noopener">xcode-one-dark</a> for Xcode and <a href="https://marketplace.visualstudio.com/items?itemName=akamud.vscode-theme-onedark#qna" target="_blank" rel="noopener">Atom One Dark Theme</a> for Visual Studio Code.</p>
<p><img src="https://cdn-images-1.medium.com/max/7168/1*nQxAFbU1qPUaGqn_GJ8OiQ.png" alt></p>
<p>I also use <a href="https://github.com/tonsky/FiraCode" target="_blank" rel="noopener">Fira Code</a> font in Xcode, Visual Studio Code and Android Studio, which has beautiful ligatures.</p>
<h3 id="Chrome-extensions"><a href="#Chrome-extensions" class="headerlink" title="Chrome extensions"></a>Chrome extensions</h3><p>I use Chrome for its speed and wonderful support for extensions. The extensions I made are <a href="https://github.com/onmyway133/github-chat" target="_blank" rel="noopener">github-chat</a> to enable chat within GitHub and <a href="https://github.com/onmyway133/github-extended" target="_blank" rel="noopener">github-extended</a> to see more pinned repositories.</p>
<p>There are also <a href="https://github.com/sindresorhus/refined-github" target="_blank" rel="noopener">refined github</a>, <a href="https://github.com/harshjv/github-repo-size" target="_blank" rel="noopener">github-repo-size</a> and <a href="https://github.com/ovity/octotree" target="_blank" rel="noopener">octotree</a> that are indispensable for me.</p>
<h3 id="caprine-https-github-com-sindresorhus-caprine"><a href="#caprine-https-github-com-sindresorhus-caprine" class="headerlink" title="caprine https://github.com/sindresorhus/caprine"></a>caprine <a href="https://github.com/sindresorhus/caprine" target="_blank" rel="noopener">https://github.com/sindresorhus/caprine</a></h3><blockquote>
<p>Caprine is an unofficial and privacy focused Facebook Messenger app with many useful features.</p>
</blockquote>
<p><img src="https://cdn-images-1.medium.com/max/3384/0*09sP4yi4CFJIxSUb.png" alt></p>
<h2 id="Close-source-and-commercial-apps"><a href="#Close-source-and-commercial-apps" class="headerlink" title="Close source and commercial apps"></a>Close source and commercial apps</h2><h3 id="Sublime-Text-https-www-sublimetext-com"><a href="#Sublime-Text-https-www-sublimetext-com" class="headerlink" title="Sublime Text https://www.sublimetext.com/"></a>Sublime Text <a href="https://www.sublimetext.com/" target="_blank" rel="noopener">https://www.sublimetext.com/</a></h3><blockquote>
<p><strong>Sublime Text</strong> is a sophisticated text editor for code, markup and prose. You’ll love the slick user interface, extraordinary features and amazing performance.</p>
</blockquote>
<p>Sublime Text is simply fast and the editing experience is very good. I’ve used Atom but it is too slow.</p>
<h3 id="Sublime-Merge-https-www-sublimemerge-com"><a href="#Sublime-Merge-https-www-sublimemerge-com" class="headerlink" title="Sublime Merge https://www.sublimemerge.com/"></a>Sublime Merge <a href="https://www.sublimemerge.com/" target="_blank" rel="noopener">https://www.sublimemerge.com/</a></h3><blockquote>
<p><em>Meet a new Git client, from the makers of Sublime Text</em></p>
</blockquote>
<p>Sublime Merge never lets me down. The source control app is simply very quick. I used SourceTree in the past, but it is very slow and had problem with authentication to Bitbucket and GitHub, and it halts very often for React Native apps, which has lots of node modules committed.</p>
<p><img src="https://cdn-images-1.medium.com/max/4288/1*mpebCS0MyzWfaIolcMWstQ.png" alt></p>
<h3 id="1-Password-https-1password-com"><a href="#1-Password-https-1password-com" class="headerlink" title="1 Password https://1password.com/"></a>1 Password <a href="https://1password.com/" target="_blank" rel="noopener">https://1password.com/</a></h3><blockquote>
<p>1Password remembers them all for you. Save your passwords and log in to sites with a single click. It’s that simple.</p>
</blockquote>
<p>Everyone need strong and unique passwords these day. This tool is indispensable</p>
<h3 id="Monosnap-https-monosnap-com-welcome"><a href="#Monosnap-https-monosnap-com-welcome" class="headerlink" title="Monosnap https://monosnap.com/welcome"></a>Monosnap <a href="https://monosnap.com/welcome" target="_blank" rel="noopener">https://monosnap.com/welcome</a></h3><blockquote>
<p>Make screenshots. Draw on it. Shoot video and share your files. It’s fast, easy and free.</p>
</blockquote>
<p>I haven’t found a good open source alternative, this is good in capturing screen or portion of the screen.</p>
<p><img src="https://cdn-images-1.medium.com/max/2000/0*yQIOnlMbSNVhxcDX.png" alt></p>
<h3 id="VLC-https-www-videolan-org-index-nb-html"><a href="#VLC-https-www-videolan-org-index-nb-html" class="headerlink" title="VLC https://www.videolan.org/index.nb.html"></a>VLC <a href="https://www.videolan.org/index.nb.html" target="_blank" rel="noopener">https://www.videolan.org/index.nb.html</a></h3><p>iTunes or Quick Time has problem with some video codecs. This app VLC can play all kinds of video types.</p>
<h3 id="Xcode-https-developer-apple-com-xcode"><a href="#Xcode-https-developer-apple-com-xcode" class="headerlink" title="Xcode https://developer.apple.com/xcode/"></a>Xcode <a href="https://developer.apple.com/xcode/" target="_blank" rel="noopener">https://developer.apple.com/xcode/</a></h3><p>Xcode is the go to editor for iOS developer. The current version is Xcode 10. From Xcode 8, plugins are not supported. The way to go is Xcode extensions.</p>
<p>I have developed <a href="https://github.com/onmyway133/XcodeColorSense2" target="_blank" rel="noopener">XcodeColorSense2</a> to easily recognise hex colors, and <a href="https://github.com/onmyway133/XcodeWay" target="_blank" rel="noopener">XcodeWay</a> to easily navigate to many places right from Xcode</p>
<p><img src="https://cdn-images-1.medium.com/max/2000/0*iAvpNCUGjZR8YlbW.gif" alt></p>
<p><img src="https://cdn-images-1.medium.com/max/3016/1*TXOcxnsxfuxvY2MjPvzdZA.png" alt></p>
<h3 id="Sketch-https-www-sketchapp-com"><a href="#Sketch-https-www-sketchapp-com" class="headerlink" title="Sketch https://www.sketchapp.com/"></a>Sketch <a href="https://www.sketchapp.com/" target="_blank" rel="noopener">https://www.sketchapp.com/</a></h3><blockquote>
<p>Sketch is a design toolkit built to help you create your best work — from your earliest ideas, through to final artwork.</p>
</blockquote>
<p>Sketch is the most favorite design tool these days. There are many cool plugins for it. I use <a href="https://github.com/onmyway133/Sketch-Action" target="_blank" rel="noopener">Sketch-Action</a> and <a href="https://abynim.github.io/UserFlows/" target="_blank" rel="noopener">User Flows</a></p>
<p><img src="https://cdn-images-1.medium.com/max/2992/1*XUNCJlgYzEsnMDEEF5k_iQ.png" alt></p>
<p><img src="https://cdn-images-1.medium.com/max/3916/1*1l7tpX0r6xZdLyqcCdK7cQ.png" alt></p>
<h2 id="Where-to-go-from-here"><a href="#Where-to-go-from-here" class="headerlink" title="Where to go from here"></a>Where to go from here</h2><p>I hope you find some new tools to try. If you know other awesome tools, feel free to make a comment. Here are some more links to discover further</p>
<ul>
<li><a href="https://electronjs.org/apps" target="_blank" rel="noopener">Electron apps</a></li>
<li><a href="https://www.digitaltrends.com/computing/best-mac-apps/" target="_blank" rel="noopener">The best Mac apps of 2018</a></li>
<li><a href="https://dev.to/sarthology/best-open-source-tools-for-developers--300f" target="_blank" rel="noopener">Best Open Source Tools For Developers</a></li>
<li><a href="https://github.com/serhii-londar/open-source-mac-os-apps" target="_blank" rel="noopener">open-source-mac-os-apps</a></li>
</ul>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/macOS/">macOS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/tech/">tech</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-run-Android-apps-in-Bitrise"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-run-Android-apps-in-Bitrise/">How to run Android apps in Bitrise</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-run-Android-apps-in-Bitrise/" class="article-date">
	  <time datetime="2019-05-23T16:18:19.000Z" itemprop="datePublished">May 23, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/273" target="_blank" rel="noopener">#273</a></strong></p>
<p>Original post <a href="https://hackernoon.com/using-bitrise-ci-for-android-apps-fa9c48e301d8" target="_blank" rel="noopener">https://hackernoon.com/using-bitrise-ci-for-android-apps-fa9c48e301d8</a></p>
<hr>
<p>CI, short for Continuous Integration, is a good practice to move fast and confidently where code is integrated into shared repository many times a day. The ability to have pull requests get built, tested and release builds get distributed to testers allows team to verify automated build and identify problems quickly.</p>
<p>I ‘ve been using <a href="https://www.buddybuild.com/" target="_blank" rel="noopener">BuddyBuild</a> for both iOS and Android apps and were very happy with it. The experience from creating new apps and deploying build is awesome. It works so well that <a href="https://www.buddybuild.com/blog/buddybuild-is-now-part-of-apple" target="_blank" rel="noopener">Apple acquired it</a>, which then lead to the fact that Android apps are no longer supported and new customers can’t register.</p>
<p>We are one of <a href="https://github.com/GitHawkApp/GitHawk/issues/1330" target="_blank" rel="noopener">those</a> <a href="https://stackoverflow.com/questions/48085134/alternative-to-buddy-build" target="_blank" rel="noopener">who</a> are looking for new alternatives. We’ve been using TravisCI, CircleCI and Jenkins to deploy to Fabric. There is also <a href="https://www.jetbrains.com/teamcity/" target="_blank" rel="noopener">TeamCity</a> that is promising. But after a quick survey with friends and people, <a href="https://www.bitrise.io/" target="_blank" rel="noopener">Bitrise</a> is the most recommended. So maybe I should try that.</p>
<p>The thing I like about Bitrise is its wide range support of workflow. They are just scripts that execute certain actions, and most of them are <a href="https://github.com/bitrise-io/" target="_blank" rel="noopener">open source</a>. There’s also yml config file, but all things can be done using web interface, so I don’t need to look into pages of documentation just to get the configuration right.</p>
<p>This post is not a promote for Bitrise, it is just about trying and adapting to new things. There is no eternal thing in tech, things come ad go fast. Below are some of the lessons I learn after using Bitrise, hope you find them useful.</p>
<h2 id="Variant-to-build"><a href="#Variant-to-build" class="headerlink" title="Variant to build"></a>Variant to build</h2><p>There is no Android Build step in the default ‘primary’ workflow, as primary is generally used for testing the code for every push. There is an Android Build step in the deploy workflow and the app gets built by running this workflow. However, I like to have the Android Build step in my primary workflow, so I added it there.</p>
<p>Usually I want app module and stagingRelease build variant as we need to deploy staging builds to internal testers.</p>
<p><img src="https://cdn-images-1.medium.com/max/2882/1*uJGkaQ0EvmDIM_T3ZTmuZw.png" alt></p>
<p>If you go to Bitrise.yml tab you can see that the configuration file has been updated. This is very handy. I’ve used some other CI services and I needed to lookup their documentation on how to make this yml work.</p>
<p><img src="https://cdn-images-1.medium.com/max/2836/1*z9eotS_Dyetx4ubtjWsnjg.png" alt></p>
<h2 id="Bump-version-code-automatically"><a href="#Bump-version-code-automatically" class="headerlink" title="Bump version code automatically"></a>Bump version code automatically</h2><p>I’ve used some other CI services before and the app version code surely does not start from 0. So it makes sense that Bitrise can auto bump version code from the current number. There are some predefined steps in Workflow but they don’t serve my need</p>
<p><img src="https://cdn-images-1.medium.com/max/2000/1*MsojdXPWw9WMzVa8SuOtDA.png" alt></p>
<p>For the Set Android Manifest Version code and name step, the source code is <a href="https://github.com/jamesmontemagno/steps-set-android-manifest-versions/blob/master/step.sh" target="_blank" rel="noopener">here</a> so I understand what it does. It works by modify AndroidManifest.xml file using sed . This article <a href="https://blog.bitrise.io/adjust-your-build-numbers" target="_blank" rel="noopener">Adjust your build number</a> is not clear enough.</p>
<p><img src="https://cdn-images-1.medium.com/max/2076/1*WDmvpUHp23a-jBjWVfN00Q.png" alt></p>
<pre><code>sed -i.bak “s/android:versionCode=”\”${VERSIONCODE}\””/android:versionCode=”\”${CONFIG_new_version_code}\””/” ${manifest_file}</code></pre><p>In our projects, the versionCode is from an environment variable BUILD_NUMBER in Jenkins, so we need look up the same thing in <a href="https://devcenter.bitrise.io/faq/available-environment-variables/" target="_blank" rel="noopener">Available Environment Variables</a>, and it is BITRISE_BUILD_NUMBER , which is a build number of the build on bitrise.io.</p>
<p>This is how versionCode looks like in build.gradle</p>
<pre><code>versionCode (System.*getenv*(&quot;BITRISE_BUILD_NUMBER&quot;) as Integer ?: System.*getenv*(&quot;BUILD_NUMBER&quot;) as Integer ?: 243)</code></pre><p>243 is the current version code of this project, so let’s go to app’s Settings and change Your next build number will be</p>
<p><img src="https://cdn-images-1.medium.com/max/2254/1*xUOPh2zy6V6hMPPty_PMXg.png" alt></p>
<h2 id="Deploy-to-Fabric"><a href="#Deploy-to-Fabric" class="headerlink" title="Deploy to Fabric"></a>Deploy to Fabric</h2><p>I hope Bitrise has its own Crash reporting tool. For now I use Crashlytics in <a href="https://fabric.io/home" target="_blank" rel="noopener">Fabric</a>. And despite that Bitrise can distribute builds to testers, I still need to cross deploy to Fabric for historial reasons.</p>
<p>There is only script <a href="https://github.com/bitrise-io/steps-fabric-crashlytics-beta-deploy" target="_blank" rel="noopener">steps-fabric-crashlytics-beta-deploy</a> to deploy IPA file for iOS apps, so we need something for Android. Fortunately I can use the Fabric plugin for gradle.</p>
<h3 id="Add-Fabric-plugin"><a href="#Add-Fabric-plugin" class="headerlink" title="Add Fabric plugin"></a>Add Fabric plugin</h3><p>Follow <a href="https://fabric.io/kits/android/crashlytics/install" target="_blank" rel="noopener">Install Crashlytics via Gradle</a> to add Fabric plugin. Basically you need to add these dependencies to your app ‘s build.gradle</p>
<pre><code>buildscript {
    repositories {
        google()
        maven { url &apos;https://maven.fabric.io/public&apos; }
    }

    dependencies {
        classpath &apos;io.fabric.tools:gradle:1.+&apos;
    }
}

apply plugin: &apos;io.fabric&apos;

dependencies {
    compile(&apos;com.crashlytics.sdk.android:crashlytics:2.9.4@aar&apos;) {
        transitive = true;
    }
}</code></pre><p>and API credentials in Manifest file</p>
<pre><code>&lt;meta-data
 android:name=”io.fabric.ApiKey”
 android:value=”67ffdb78ce9cd50af8404c244fa25df01ea2b5bc”
 /&gt;</code></pre><h3 id="Deploy-command"><a href="#Deploy-command" class="headerlink" title="Deploy command"></a>Deploy command</h3><p>Modern Android Studio usually includes a gradlew execution file in the root of your project. Run ./gradlew tasks for the list of tasks that you app can perform, look for Build tasks that start with assemble . Read more <a href="https://developer.android.com/studio/build/building-cmdline" target="_blank" rel="noopener">Build your app from the command line</a></p>
<blockquote>
<p>You can execute all the build tasks available to your Android project using the <a href="https://docs.gradle.org/current/userguide/gradle_wrapper.html" target="_blank" rel="noopener">Gradle wrapper</a> command line tool. It’s available as a batch file for Windows (gradlew.bat) and a shell script for Linux and Mac (gradlew.sh), and it’s accessible from the root of each project you create with Android Studio.</p>
</blockquote>
<p>For me, I want to deploy staging release build variant, so I run. Check that the build is on Fabric.</p>
<pre><code>./gradlew assembleStagingRelease crashlyticsUploadDistributionStagingRelease</code></pre><h3 id="Manage-tester-group"><a href="#Manage-tester-group" class="headerlink" title="Manage tester group"></a>Manage tester group</h3><p>Go to your app on Fabric.io and create group of testers. Note that alias that is generated for the group</p>
<p><img src="https://cdn-images-1.medium.com/max/2000/1*HMeW8VGqC6OWRizl0cC5BQ.png" alt></p>
<p>Go to your app’s build.gradle and add ext.betaDistributionGroupAliases=’my-internal-testers’ to your desired productFlavors or buildTypes . For me I add to staging under productFlavors</p>
<pre><code>productFlavors {
   staging {
     // …
     ext.betaDistributionGroupAliases=’hyper-internal-testers-1&apos;
   }
   production {
     // …
   }
}</code></pre><p>Now that the command is run correctly, let’s add that to Bitrise</p>
<h3 id="Gradle-Run-step"><a href="#Gradle-Run-step" class="headerlink" title="Gradle Run step"></a>Gradle Run step</h3><p>Go to Workflow tab and add a Gradle Run step and place it below Deploy to Bitrise.io step.</p>
<p><img src="https://cdn-images-1.medium.com/max/2782/1*oHUZoX-rdiqXjTV9SFFcKA.png" alt></p>
<p>Expand Config, and add assembleStagingRelease crashlyticsUploadDistributionStagingRelease to Gradle task to run .</p>
<p>Now start a new build in Bitrise manually or trigger new build by making pull request, you can see that the version code is increased for every build, crossed build gets deployed to Fabric to your defined tester groups.</p>
<p>As an alternative, you can also use <a href="https://github.com/bitrise-io/steps-fabric-crashlytics-beta-deploy" target="_blank" rel="noopener">Fabric/Crashlytics deployer</a>, just update config with your apps key and secret found in <a href="https://fabric.io/settings" target="_blank" rel="noopener">settings</a>.</p>
<h2 id="Where-to-go-from-here"><a href="#Where-to-go-from-here" class="headerlink" title="Where to go from here"></a>Where to go from here</h2><p>I hope those tips are useful to you. Here are some more links to help you explore further</p>
<ul>
<li><p><a href="https://medium.com/@bitrise/convert-old-android-workflows-and-configure-new-steps-based-on-the-old-gradle-tasks-on-bitrise-51a1adbfe78d" target="_blank" rel="noopener">Convert old Android workflows and configure new steps based on the old Gradle tasks on Bitrise</a></p>
</li>
<li><p><a href="https://stackoverflow.com/questions/11245144/replace-whole-line-containing-a-string-using-sed" target="_blank" rel="noopener">Replace whole line containing a string using Sed</a></p>
</li>
<li><p><a href="https://github.com/GitHawkApp/GitHawk/issues/1330" target="_blank" rel="noopener">Alternatives to Buddybuild?</a></p>
</li>
<li><p><a href="https://engineering.udacity.com/simplifying-app-distribution-with-beta-by-crashlytics-6c8c24f4ab02" target="_blank" rel="noopener">Simplifying Android app distribution with Beta by Crashlytics</a></p>
</li>
<li><p><a href="https://fabric.io/downloads/android-studio" target="_blank" rel="noopener">Fabric app for Android Studio</a></p>
</li>
<li><p><a href="https://stackoverflow.com/questions/27383732/crashlytics-distribution-for-app-with-multiple-flavors" target="_blank" rel="noopener">Crashlytics distribution for app with multiple flavors</a></p>
</li>
<li><p><a href="https://www.tutorialspoint.com/gradle/gradle_plugins.htm" target="_blank" rel="noopener">Gradle plugins</a></p>
</li>
<li><p><a href="https://blog.danlew.net/2015/02/20/setting-up-a-new-app-in-crashlytics-without-the-plugin/" target="_blank" rel="noopener">Setting up a new app in Crashlytics without the IDE plugin</a></p>
</li>
</ul>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/android/">android</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-make-tag-selection-view-in-React-Native"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-make-tag-selection-view-in-React-Native/">How to make tag selection view in React Native</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-make-tag-selection-view-in-React-Native/" class="article-date">
	  <time datetime="2019-05-23T16:16:04.000Z" itemprop="datePublished">May 23, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/271" target="_blank" rel="noopener">#271</a></strong></p>
<p>Original post <a href="https://hackernoon.com/how-to-make-tag-selection-view-in-react-native-b6f8b0adc891" target="_blank" rel="noopener">https://hackernoon.com/how-to-make-tag-selection-view-in-react-native-b6f8b0adc891</a></p>
<hr>
<p>Besides React style programming, <a href="https://github.com/facebook/yoga" target="_blank" rel="noopener">Yoga</a> is another cool feature of React Native. It is a cross-platform layout engine which implements Flexbox so we use the same layout code for both platforms.</p>
<p>As someone who uses Auto Layout in iOS and Constraint Layout in Android, I find Flexbox bit hard to use at first, but there are many tasks that Flexbox does very well, they are distribute elements in space and flow layout. In this post we will use Flexbox to build a tag selection view using just Javascript code. This is very easy to do so we don’t need to install extra dependencies.</p>
<p><img src="https://cdn-images-1.medium.com/max/2000/1*xLD0YbzaepgAuz7ED-lLGA.png" alt></p>
<p>Our tag view will support both multiple selection and exclusive selection. First, we need a custom Button .</p>
<h2 id="Button-with-Background"><a href="#Button-with-Background" class="headerlink" title="Button with Background"></a>Button with Background</h2><p><a href="https://facebook.github.io/react-native/docs/button" target="_blank" rel="noopener">Button</a> is of the basic elements in React Native, but it is somewhat limited if we want to have custom content inside the button, for example texts, images and background</p>
<pre><code>import { Button } from &apos;react-native&apos;
...

&lt;Button
  onPress={onPressLearnMore}
  title=&quot;Learn More&quot;
  color=&quot;#841584&quot;
  accessibilityLabel=&quot;Learn more about this purple button&quot;
/&gt;</code></pre><h3 id="TouchableOpacity"><a href="#TouchableOpacity" class="headerlink" title="TouchableOpacity"></a><a href="https://facebook.github.io/react-native/docs/touchableopacity" target="_blank" rel="noopener">TouchableOpacity</a></h3><p>Luckily we have <a href="https://facebook.github.io/react-native/docs/touchableopacity" target="_blank" rel="noopener">TouchableOpacity</a>, which is a wrapper for making views respond properly to touches. On press down, the opacity of the wrapped view is decreased, dimming it.</p>
<p>To implement button in our tag view, we need to a button with background a check image. Create a file called BackgroundButton.js</p>
<pre><code>import React from &apos;react&apos;
import { TouchableOpacity, View, Text, StyleSheet, Image } from &apos;react-native&apos;
import R from &apos;res/R&apos;

export default class BackgroundButton extends React.Component {
  render() {
    const styles = this.makeStyles()
    return (
      &lt;TouchableOpacity style={styles.touchable} onPress={this.props.onPress}&gt;
        &lt;View style={styles.view}&gt;
          {this.makeImageIfAny(styles)}
          &lt;Text style={styles.text}&gt;{this.props.title}&lt;/Text&gt;
        &lt;/View&gt;
      &lt;/TouchableOpacity&gt;
    )
  }

makeImageIfAny(styles) {
    if (this.props.showImage) {
      return &lt;Image style={styles.image} source={R.images.check} /&gt;
    }
  }

makeStyles() {
    return StyleSheet.create({
      view: {
        flexDirection: &apos;row&apos;,
        borderRadius: 23,
        borderColor: this.props.borderColor,
        borderWidth: 2,
        backgroundColor: this.props.backgroundColor,
        height: 46,
        alignItems: &apos;center&apos;,
        justifyContent: &apos;center&apos;,
        paddingLeft: 16,
        paddingRight: 16
      },
      touchable: {
        marginLeft: 4,
        marginRight: 4,
        marginBottom: 8
      },
      image: {
        marginRight: 8
      },
      text: {
        fontSize: 18,
        textAlign: &apos;center&apos;,
        color: this.props.textColor,
        fontSize: 16
      }
    })
  }
}</code></pre><h3 id="Dynamic-styles"><a href="#Dynamic-styles" class="headerlink" title="Dynamic styles"></a>Dynamic styles</h3><p>Normally we use const styles = StyleSheet.create({}) but since we want our button to be configurable, we make styles into a function, so on every render we get a new styles with proper configurations. The properties we support are borderColor, textColor, backgroundColor and showImage</p>
<p>In the makeImageIfAny we only need to return Image if the view is selected. We don’t have the else case, so in if showImage is false, this returns undefined and React won’t render any element</p>
<pre><code>makeImageIfAny(styles) {
  if (this.props.showImage) {
    return &lt;Image style={styles.image} source={R.images.check} /&gt;
  }
}</code></pre><h3 id="padding-and-margin"><a href="#padding-and-margin" class="headerlink" title="padding and margin"></a>padding and margin</h3><p>To understand padding and margin, visit <a href="https://www.w3schools.com/css/css_boxmodel.asp" target="_blank" rel="noopener">CSS Box Model</a>. Basically padding means clearing an area around the content and padding is transparent, while margin means clearing an area outside the border and the margin also is transparent.</p>
<p><img src="https://cdn-images-1.medium.com/max/4572/1*A98Em4msrGqOAWSRq3Njjw.png" alt></p>
<p>Pay attention to styles . We have margin for touchable so that each tag button have a little margin outside each other.</p>
<pre><code>touchable: {
  marginLeft: 4,
  marginRight: 4,
  marginBottom: 8
}</code></pre><p>In the view we need flexDirection as row because React Native has flexDirection as column by default. And a row means we have Image and Text side by side horizontally inside the button. We also use alignItems and justifyContent to align elements centeredly on both main and cross axises. The padding is used to have some spaces between the inner text and the view.</p>
<pre><code>view: {
  flexDirection: &apos;row&apos;,
  height: 46,
  alignItems: &apos;center&apos;,
  justifyContent: &apos;center&apos;,
  paddingLeft: 16,
  paddingRight: 16
}</code></pre><h2 id="Tag-View"><a href="#Tag-View" class="headerlink" title="Tag View"></a>Tag View</h2><p>Create a file called TagsView.js This is where we parse tags and show a bunch of BackgroundButton</p>
<pre><code>import React from &apos;react&apos;
import { View, StyleSheet, Button } from &apos;react-native&apos;
import R from &apos;res/R&apos;
import BackgroundButton from &apos;library/components/BackgroundButton&apos;
import addOrRemove from &apos;library/utils/addOrRemove&apos;

export default class TagsView extends React.Component {
  constructor(props) {
    super(props)
    this.state = {
      selected: props.selected
    }
  }

render() {
    return (
      &lt;View style={styles.container}&gt;
        {this.makeButtons()}
      &lt;/View&gt;
    )
  }

onPress = (tag) =&gt; {
    let selected
    if (this.props.isExclusive) {
      selected = [tag]
    } else {
      selected = addOrRemove(this.state.selected, tag)
    }

this.setState({
      selected
    })
  }

makeButtons() {
    return this.props.all.map((tag, i) =&gt; {
      const on = this.state.selected.includes(tag)
      const backgroundColor = on ? R.colors.on.backgroundColor : R.colors.off.backgroundColor
      const textColor = on ? R.colors.on.text : R.colors.off.text
      const borderColor = on ? R.colors.on.border : R.colors.off.border

return (
        &lt;BackgroundButton
          backgroundColor={backgroundColor}
          textColor={textColor}
          borderColor={borderColor}
          onPress={() =&gt; {
            this.onPress(tag)
          }}
          key={i}
          showImage={on}
          title={tag} /&gt;
      )
    })
  }
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    flexDirection: &apos;row&apos;,
    flexWrap: &apos;wrap&apos;,
    padding: 20
  }
})</code></pre><p>We parse an array of tags to build BackgroundButton . We keep the selected array in state because this is mutated inside the TagsView component. If it is isExclusive then the new selected contains just the new selected tag. If it is multiple selection, then we add the new selected tag into the selected array.</p>
<p>The addOrRemove is a our homegrown utility function to add an item into an array if it does not exists, or remove if it exists, using the high orderfilter function.</p>
<pre><code>const addOrRemove = (array, item) =&gt; {
  const exists = array.includes(item)

if (exists) {
    return array.filter((c) =&gt; { return c !== item })
  } else {
    const result = array
    result.push(item)
    return result
  }
}</code></pre><h3 id="Flex-wrap"><a href="#Flex-wrap" class="headerlink" title="Flex wrap"></a>Flex wrap</h3><p>Pay attention to styles</p>
<pre><code>const styles = StyleSheet.create({
  container: {
    flex: 1,
    flexDirection: &apos;row&apos;,
    flexWrap: &apos;wrap&apos;,
    padding: 20
  }
})</code></pre><p>The hero here is flexWrap which specifies whether the flexible items should wrap or not. Take a look at <a href="https://www.w3schools.com/cssref/css3_pr_flex-wrap.asp" target="_blank" rel="noopener">CSS flex-wrap</a> property for other options. Since we have main axis as row , element will be wrapped to the next row if there are not enough space. That’s how we can achieve a beautiful tag view.</p>
<h3 id="Using-TagsView"><a href="#Using-TagsView" class="headerlink" title="Using TagsView"></a>Using TagsView</h3><p>Then consuming TagsView is as easy as declare it inside render</p>
<pre><code>const selected = [&apos;Swift&apos;, Kotlin]
const tags = [&apos;Swift&apos;, &apos;Kotlin&apos;, &apos;C#&apos;, &apos;Haskell&apos;, &apos;Java&apos;]

return (
  &lt;TagsView
    all={tags}
    selected={selected}
    isExclusive={false}
  /&gt;
)</code></pre><h3 id="Learning-Flexbox"><a href="#Learning-Flexbox" class="headerlink" title="Learning Flexbox"></a>Learning Flexbox</h3><p>Learning Flebox is crucial in using React and React Native effectively. The best places to learn it are <a href="https://www.w3schools.com/css/css3_flexbox.asp" target="_blank" rel="noopener">w3school CSS Flexbox</a> and <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Flexible_Box_Layout/Basic_Concepts_of_Flexbox" target="_blank" rel="noopener">Basic concepts of flexbox</a> by Mozzila.<br><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Flexible_Box_Layout/Basic_Concepts_of_Flexbox" target="_blank" rel="noopener"><strong>Basic concepts of flexbox</strong><br><em>The Flexible Box Module, usually referred to as flexbox, was designed as a one-dimensional layout model, and as a…</em>developer.mozilla.org</a></p>
<p>There is a showcase of all possible Flexbox properties<br><a href="https://medium.com/@drorbiran/the-full-react-native-layout-cheat-sheet-a4147802405c" target="_blank" rel="noopener"><strong>The Full React Native Layout Cheat Sheet</strong><br><em>A simple visual guide with live examples for all major React Native layout properties</em>medium.com</a></p>
<p>Yoga has its own YogaKit published on CocoaPods, you can learn it with native code in iOS<br><a href="https://www.raywenderlich.com/530-yoga-tutorial-using-a-cross-platform-layout-engine" target="_blank" rel="noopener"><strong>Yoga Tutorial: Using a Cross-Platform Layout Engine</strong><br><em>Learn about Yoga, Facebook’s cross-platform layout engine that helps developers write more layout code in style akin to…</em>www.raywenderlich.com</a></p>
<p>And when we use flexbox, we should compose element instead of hardcoding values, for example we can use another View with justifyContent: flex-end to move a button down the screen. This follows flexbox style and prevent rigid code.<br><a href="https://medium.com/react-native-training/position-element-at-the-bottom-of-the-screen-using-flexbox-in-react-native-a00b3790ca42" target="_blank" rel="noopener"><strong>Position element at the bottom of the screen using Flexbox in React Native</strong><br><em>React Native uses Yoga to achieve Flexbox style layout, which helps us set up layout in a declarative and easy way.</em>medium.com</a></p>
<h2 id="Where-to-go-from-here"><a href="#Where-to-go-from-here" class="headerlink" title="Where to go from here"></a>Where to go from here</h2><p>I hope you learn something useful in this post. For more information please consult the official guide <a href="https://facebook.github.io/react-native/docs/flexbox" target="_blank" rel="noopener">Layout with Flexbox</a> and <a href="https://facebook.github.io/react-native/docs/layout-props" target="_blank" rel="noopener">layout-props</a> for all the possible Flexbox properties.</p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/">javascript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/react-native/">react native</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-Introducing-Learn-Talks-Awesome-conference-and-meetup-talks"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/Introducing-Learn-Talks-Awesome-conference-and-meetup-talks/">Introducing Learn Talks — Awesome conference and meetup talks</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/Introducing-Learn-Talks-Awesome-conference-and-meetup-talks/" class="article-date">
	  <time datetime="2019-05-23T16:14:41.000Z" itemprop="datePublished">May 23, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/269" target="_blank" rel="noopener">#269</a></strong></p>
<p>Original post <a href="https://medium.com/swlh/introducing-learn-talks-awesome-conference-and-meetup-talks-e97c8cf7e0f" target="_blank" rel="noopener">https://medium.com/swlh/introducing-learn-talks-awesome-conference-and-meetup-talks-e97c8cf7e0f</a></p>
<p>Product Hunt <a href="https://www.producthunt.com/posts/learn-talks" target="_blank" rel="noopener">https://www.producthunt.com/posts/learn-talks</a></p>
<hr>
<p>Hi, it’s Khoa here. I’m so glad to finally launch <a href="https://learntalks.com/" target="_blank" rel="noopener">LearnTalks</a>, in order to help others and myself to catch up with new conference and meetup talks.</p>
<p>Being one who is extremely passionate about <a href="https://github.com/onmyway133/blog" target="_blank" rel="noopener">making things</a> and <a href="https://medium.com/@onmyway133" target="_blank" rel="noopener">writing</a> , I also love to learn about every new thing in tech. Tech moves so fast, what we learn today may be deprecated very soon, and only continuous learning can keep us move forward. Tech conference and meetup are best places to learn about new things and tips, although there are some <a href="https://marco.org/2018/01/17/end-of-conference-era" target="_blank" rel="noopener">rises and falls</a> …, they are still growing and provides valuable resources for lots of people. There are lots of conferences and meetups that one can’t go to all, this can give fear of missing out feeling.</p>
<p>Fortunately people are kind enough to always publish videos publicly so others can learn from. I have been for a long time curating a <a href="https://github.com/onmyway133/fantastic-conference-videos" target="_blank" rel="noopener">list</a>… to keep track of all cool videos, but it get out of hand very quickly.</p>
<p><img src="https://cdn-images-1.medium.com/max/5128/1*1onBRUxSDQQzAcYpFbKkWg.png" alt></p>
<p>That’s why I make LearnTalks.com as a convenient place to search and explore new tech talks. The features include</p>
<ul>
<li>Easy search for talk, author and event</li>
<li>See upcoming events</li>
<li>Explore tags of topics and technologies</li>
<li>Mobile friendly</li>
</ul>
<p><img src="https://cdn-images-1.medium.com/max/4960/1*YxIG2a2xOyDgSer2RrRbsw.png" alt></p>
<p>Firstly, thanks to all the people who helped me alpha test the website and provided valuable feedback. I addressed and fixed many issues.<br>And thanks a lot to many conference organisers who gave me a yes, support and encouragement promptly after I sent emails. Thanks a lot for spending your free time organising cool events and sharing the videos to the community. I really appreciate.</p>
<p><img src="https://cdn-images-1.medium.com/max/5068/1*gNAAnxsa3zMtmJqaUjLK9A.png" alt></p>
<p>This website is just a curation to videos, it does not repost or claim copyright of any of the videos. And there are links back to conference and meetup pages. It is free to use and has no commercial purpose.</p>
<p>Hope you find the website useful as I do. There are of course many things needed to improve, I’m looking forward to receiving feedbacks and support from you ❤️ If there are any issues or copyright violations, please feel free to drop me a message.</p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/tech/">tech</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-add-app-icons-and-splash-screens-to-a-React-Native-app-in-staging-and-production"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-add-app-icons-and-splash-screens-to-a-React-Native-app-in-staging-and-production/">How to add app icons and splash screens to a React Native app in staging and production</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-add-app-icons-and-splash-screens-to-a-React-Native-app-in-staging-and-production/" class="article-date">
	  <time datetime="2019-05-23T16:09:18.000Z" itemprop="datePublished">May 23, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/268" target="_blank" rel="noopener">#268</a></strong></p>
<p>Original post <a href="https://medium.freecodecamp.org/how-to-add-app-icons-and-splash-screens-to-a-react-native-app-in-staging-and-production-d1dab615e7c6" target="_blank" rel="noopener">https://medium.freecodecamp.org/how-to-add-app-icons-and-splash-screens-to-a-react-native-app-in-staging-and-production-d1dab615e7c6</a></p>
<hr>
<p>React Native was designed to be “learn once, write anywhere,” and it is usually used to build cross platform apps for iOS and Android. And for each app that we build, there are times we need to reuse the same code, build and tweak it a bit to make it work for different environments. For example, we might need multiple skins, themes, a free and paid version, or more often different staging and production environments.</p>
<p>And the task that we can’t avoid is adding app icons and splash screens to our apps.</p>
<p>In fact, to add a staging and production environment, and to add app icons, requires us to use Xcode and Android Studio, and we do it the same way we do with native iOS or Android projects.</p>
<p>Let’s call our app MyApp and bootstrap it with react-native init MyApp . There will of course, be tons of <a href="https://github.com/thekevinbrown/react-native-schemes-manager" target="_blank" rel="noopener">libraries</a> to help us with managing different environments.</p>
<p>In this post, we will do just like we did with native apps, so that we know the basic steps.</p>
<h2 id="Build-configuration-target-build-types-production-flavor-and-build-variant"><a href="#Build-configuration-target-build-types-production-flavor-and-build-variant" class="headerlink" title="Build configuration, target, build types, production flavor, and build variant"></a>Build configuration, target, build types, production flavor, and build variant</h2><p>There are some terminologies we needed to remember. In iOS, debug and releases are called <a href="https://developer.apple.com/library/archive/featuredarticles/XcodeConcepts/Concept-Build_Settings.html" target="_blank" rel="noopener">build configurations</a>, and staging and production are called <a href="https://developer.apple.com/library/archive/featuredarticles/XcodeConcepts/Concept-Targets.html" target="_blank" rel="noopener">targets</a>.</p>
<blockquote>
<h1 id="A-build-configuration-specifies-a-set-of-build-settings-used-to-build-a-target’s-product-in-a-particular-way-For-example-it-is-common-to-have-separate-build-configurations-for-debug-and-release-builds-of-a-product"><a href="#A-build-configuration-specifies-a-set-of-build-settings-used-to-build-a-target’s-product-in-a-particular-way-For-example-it-is-common-to-have-separate-build-configurations-for-debug-and-release-builds-of-a-product" class="headerlink" title="A build configuration specifies a set of build settings used to build a target’s product in a particular way. For example, it is common to have separate build configurations for debug and release builds of a product."></a>A build configuration specifies a set of build settings used to build a target’s product in a particular way. For example, it is common to have separate build configurations for debug and release builds of a product.</h1><h1 id="A-target-specifies-a-product-to-build-and-contains-the-instructions-for-building-the-product-from-a-set-of-files-in-a-project-or-work-space-A-target-defines-a-single-product-it-organizes-the-inputs-into-the-build-system-—-the-source-files-and-instructions-for-processing-those-source-files-—-required-to-build-that-product-Projects-can-contain-one-or-more-targets-each-of-which-produces-one-product"><a href="#A-target-specifies-a-product-to-build-and-contains-the-instructions-for-building-the-product-from-a-set-of-files-in-a-project-or-work-space-A-target-defines-a-single-product-it-organizes-the-inputs-into-the-build-system-—-the-source-files-and-instructions-for-processing-those-source-files-—-required-to-build-that-product-Projects-can-contain-one-or-more-targets-each-of-which-produces-one-product" class="headerlink" title="A target specifies a product to build and contains the instructions for building the product from a set of files in a project or work-space. A target defines a single product; it organizes the inputs into the build system — the source files and instructions for processing those source files — required to build that product. Projects can contain one or more targets, each of which produces one product"></a>A target specifies a product to build and contains the instructions for building the product from a set of files in a project or work-space. A target defines a single product; it organizes the inputs into the build system — the source files and instructions for processing those source files — required to build that product. Projects can contain one or more targets, each of which produces one product</h1></blockquote>
<p>In Android, debug and releases are called build types, and staging and production are called product flavors. Together they form <a href="https://developer.android.com/studio/build/build-variants" target="_blank" rel="noopener">build variants</a>.</p>
<blockquote>
<h1 id="For-example-a-“demo”-product-flavor-can-specify-different-features-and-device-requirements-such-as-custom-source-code-resources-and-minimum-API-levels-while-the-“debug”-build-type-applies-different-build-and-packaging-settings-such-as-debug-options-and-signing-keys-The-resulting-build-variant-is-the-“demoDebug”-version-of-your-app-and-it-includes-a-combination-of-the-configurations-and-resources-included-in-the-“demo”-product-flavor-“debug”-build-type-and-main-source-set"><a href="#For-example-a-“demo”-product-flavor-can-specify-different-features-and-device-requirements-such-as-custom-source-code-resources-and-minimum-API-levels-while-the-“debug”-build-type-applies-different-build-and-packaging-settings-such-as-debug-options-and-signing-keys-The-resulting-build-variant-is-the-“demoDebug”-version-of-your-app-and-it-includes-a-combination-of-the-configurations-and-resources-included-in-the-“demo”-product-flavor-“debug”-build-type-and-main-source-set" class="headerlink" title="For example, a “demo” product flavor can specify different features and device requirements, such as custom source code, resources, and minimum API levels, while the “debug” build type applies different build and packaging settings, such as debug options and signing keys. The resulting build variant is the “demoDebug” version of your app, and it includes a combination of the configurations and resources included in the “demo” product flavor, “debug” build type, and main/ source set."></a>For example, a “demo” <em>product flavor</em> can specify different features and device requirements, such as custom source code, resources, and minimum API levels, while the “debug” <em>build type</em> applies different build and packaging settings, such as debug options and signing keys. The resulting build variant is the “demoDebug” version of your app, and it includes a combination of the configurations and resources included in the “demo” product flavor, “debug” build type, and main/ source set.</h1></blockquote>
<h2 id="Staging-and-production-targets-in-iOS"><a href="#Staging-and-production-targets-in-iOS" class="headerlink" title="Staging and production targets in iOS"></a>Staging and production targets in iOS</h2><p>Open MyApp.xcodeproj inside ios using Xcode. Here is what we get after bootstrapping:</p>
<p><img src="https://cdn-images-1.medium.com/max/2004/1*HMMS0zLAfLU_bvli-IESBg.png" alt></p>
<p>React Native creates iOS and tvOS apps, and two test targets. In Xcode, a project can contain many targets, and each target means a unique product with its own build settings — Info.plist and app icons.</p>
<h3 id="Duplicate-target"><a href="#Duplicate-target" class="headerlink" title="Duplicate target"></a>Duplicate target</h3><p>If we don’t need the tvOS app, we can delete the MyApp-tvOS and MyApp-tvOSTests . Let’s use MyApp target as our production environment, and right click -&gt; Duplicate to make another target. Let’s call it MyApp Staging.</p>
<p><img src="https://cdn-images-1.medium.com/max/2694/1*T2RDoSaQRJv8GRGkphUkGw.png" alt></p>
<p>Each target must have unique bundle id. Change the bundle id of MyApp to com.onmyway133.MyApp and MyApp Staging to com.onmyway133.MyApp.Staging.</p>
<p><img src="https://cdn-images-1.medium.com/max/3720/1*I3qdG0cgDrwc1bep76ckcA.png" alt></p>
<h3 id="Info-plist"><a href="#Info-plist" class="headerlink" title="Info.plist"></a>Info.plist</h3><p>When we duplicate MyApp target , Xcode also duplicates Info.plist into MyApp copy-Info.plist for the staging target. Change it to a more meaningful name Info-Staging.plist and drag it to the MyApp group in Xcode to stay organised. After dragging, MyApp Staging target can’t find the plist, so click Choose Info.plist File and point to the Info-Staging.plist.</p>
<p><img src="https://cdn-images-1.medium.com/max/4732/1*_FYFXy6NDHhSm5XwOPFDmQ.png" alt></p>
<h3 id="Scheme"><a href="#Scheme" class="headerlink" title="Scheme"></a>Scheme</h3><p>Xcode also duplicates the scheme when we duplicate the target, so we get MyApp copy:</p>
<p><img src="https://cdn-images-1.medium.com/max/5158/1*DW9wbUJWU1P4gXymv1LT8g.png" alt></p>
<p>Click Manage Schemes in the scheme drop-down to open Scheme manager:</p>
<p><img src="https://cdn-images-1.medium.com/max/3208/1*-bjXILHt-Y88etVJDlmyFQ.png" alt></p>
<p>I usually delete the generated MyApp copy scheme, then I create a new scheme again for the MyApp Staging target. You need to make sure that the scheme is marked as Shared so that it is tracked into git.</p>
<p><img src="https://cdn-images-1.medium.com/max/3208/1*VTXk1T-j9W-Yd24uU7Wmqg.png" alt></p>
<p>For some reason, the staging scheme does not have all the things set up like the production scheme. You can run into issues like ‘React/RCTBundleURLProvider.h’ file not found or <a href="https://github.com/onmyway133/notes/issues/380" target="_blank" rel="noopener">RN: ‘React/RCTBridgeModule.h’ file not found</a> . It is because React target is not linked yet.</p>
<p>To solve it, we must disable Parallelise Build and add React target and move it above MyApp Staging.</p>
<p><img src="https://cdn-images-1.medium.com/max/3720/1*F7NF8BBg44H6AZHk_A7Jpg.png" alt></p>
<h3 id="Staging-and-production-product-flavors-in-Android"><a href="#Staging-and-production-product-flavors-in-Android" class="headerlink" title="Staging and production product flavors in Android"></a>Staging and production product flavors in Android</h3><p>Open the android folder in Android Studio. By default there are only debug and release build types:</p>
<p><img src="https://cdn-images-1.medium.com/max/3528/1*e362XxJHJpR0tn-ry86brA.png" alt></p>
<p>They are configured in the app module build.gradle:</p>
<pre><code>buildTypes {
    release {
        minifyEnabled enableProguardInReleaseBuilds
        proguardFiles getDefaultProguardFile(&quot;proguard-android.txt&quot;), &quot;proguard-rules.pro&quot;
    }
}</code></pre><p>First, let’s change application id to com.onmyway133.MyApp to match iOS. It is not required but I think it’s good to stay organised. Then create two product flavors for staging and production. For staging, let’s add .Staging to the application id.</p>
<p>From Android Studio 3, “all flavors must now belong to a named flavor dimension” — normally we just need default dimensions. Here is how it looks in build.gradle for our app module:</p>
<pre><code>android {
    compileSdkVersion rootProject.ext.compileSdkVersion
    buildToolsVersion rootProject.ext.buildToolsVersion
    flavorDimensions &quot;default&quot;

defaultConfig {
        applicationId &quot;com.onmyway133.MyApp&quot;
        minSdkVersion rootProject.ext.minSdkVersion
        targetSdkVersion rootProject.ext.targetSdkVersion
        versionCode 1
        versionName &quot;1.0&quot;
        ndk {
            abiFilters &quot;armeabi-v7a&quot;, &quot;x86&quot;
        }
    }
    splits {
        abi {
            reset()
            enable enableSeparateBuildPerCPUArchitecture
            universalApk false  // If true, also generate a universal APK
            include &quot;armeabi-v7a&quot;, &quot;x86&quot;
        }
    }
    buildTypes {
        release {
            minifyEnabled enableProguardInReleaseBuilds
            proguardFiles getDefaultProguardFile(&quot;proguard-android.txt&quot;), &quot;proguard-rules.pro&quot;
        }
    }

productFlavors {
        staging {
            applicationIdSuffix &quot;.Staging&quot;
        }

        production {

        }
    }
}</code></pre><p>Click Sync Now to let gradle do the syncing job. After that, we can see that we have four build variants:</p>
<p><img src="https://cdn-images-1.medium.com/max/5478/1*KxKqB-NdxtieuhFF-AUvwA.png" alt></p>
<h3 id="How-to-run-staging-and-production"><a href="#How-to-run-staging-and-production" class="headerlink" title="How to run staging and production"></a>How to run staging and production</h3><p>To run the Android app, we can specify a variant like react-native run-android — variant=productionDebug, but I prefer to go to Android Studio, select the variant, and run.</p>
<p>To run iOS app, we can specify the scheme like react-native run-ios — simulator=’iPhone X’ — scheme=”MyApp Staging” . As of react-native 0.57.0 this does not work. But it does not matter as I usually go to Xcode, select the scheme, and run.</p>
<h3 id="Add-app-icon-for-iOS"><a href="#Add-app-icon-for-iOS" class="headerlink" title="Add app icon for iOS"></a>Add app icon for iOS</h3><p>According to the <a href="https://developer.apple.com/design/human-interface-guidelines/ios/icons-and-images/app-icon/" target="_blank" rel="noopener">Human Interface Guideline</a>, we need app icons of different sizes for different iOS versions, device resolutions, and situations (notification, settings, Spring Board). I’ve crafted a tool called <a href="https://github.com/onmyway133/IconGenerator" target="_blank" rel="noopener">IconGenerator</a>, which was previously mentioned in <a href="https://dev.to/sarthology/best-open-source-tools-for-developers--300f" target="_blank" rel="noopener">Best Open Source Tools For Developers</a>. Drag the icon that you want — I prefer those with 1024x1024 pixels for high resolution app icons — to the Icon Generator MacOS app.</p>
<p><img src="https://cdn-images-1.medium.com/max/2848/1*4uBuihDMn3nq3Y1NwVhJsA.png" alt></p>
<p>Click Generate and we get AppIcon.appiconset . This contains app icons of the required sizes that are ready to be used in Asset Catalog. Drag this to Asset Catalog in Xcode. That is for production.</p>
<p>For staging, it’s good practice to add a “Staging” banner so that testers know which is staging, and which is production. We can easily do this in Sketch.</p>
<p><img src="https://cdn-images-1.medium.com/max/4536/1*6uxkwnsGkDp0K12LXh_yiw.png" alt></p>
<p>Remember to set a background, so we don’t get a transparent background. For an app icon with transparent background, iOS shows the background as black which looks horrible.</p>
<p>After exporting the image, drag the staging icon to the IconGenerator the same way we did earlier. But this time, rename the generated appiconset to AppIcon-Staging.appiconset. Then drag this to Asset Catalog in Xcode.</p>
<p>For the staging target to use staging app icons, open MyApp Staging target and choose AppIcon-Staging as App Icon Source.</p>
<p><img src="https://cdn-images-1.medium.com/max/4908/1*oIGuaxyftwCD0_72Rnv9-g.png" alt></p>
<h3 id="Add-app-icon-for-Android"><a href="#Add-app-icon-for-Android" class="headerlink" title="Add app icon for Android"></a>Add app icon for Android</h3><p><img src="https://cdn-images-1.medium.com/max/6720/1*CS_tKOts1zz05PVJ5XEc9A.png" alt></p>
<p>I like to switch to Project view, as it is easier to change app icons. Click res -&gt; New -&gt; Image Asset to open Asset Studio. We can use the same app icons that we used in iOS:</p>
<p><img src="https://cdn-images-1.medium.com/max/4528/1*bzJZh1exxXGnrXw_j4AMgQ.png" alt></p>
<p>Android 8.0 (API level 26) introduced <a href="https://developer.android.com/guide/practices/ui_guidelines/icon_design_adaptive" target="_blank" rel="noopener">Adaptive Icons</a> so we need to tweak the Resize slider to make sure our app icons look as nice as possible.</p>
<blockquote>
<h1 id="Android-8-0-API-level-26-introduces-adaptive-launcher-icons-which-can-display-a-variety-of-shapes-across-different-device-models-For-example-an-adaptive-launcher-icon-can-display-a-circular-shape-on-one-OEM-device-and-display-a-squircle-on-another-device-Each-device-OEM-provides-a-mask-which-the-system-then-uses-to-render-all-adaptive-icons-with-the-same-shape-Adaptive-launcher-icons-are-also-used-in-shortcuts-the-Settings-app-sharing-dialogs-and-the-overview-screen-—-Android-developers"><a href="#Android-8-0-API-level-26-introduces-adaptive-launcher-icons-which-can-display-a-variety-of-shapes-across-different-device-models-For-example-an-adaptive-launcher-icon-can-display-a-circular-shape-on-one-OEM-device-and-display-a-squircle-on-another-device-Each-device-OEM-provides-a-mask-which-the-system-then-uses-to-render-all-adaptive-icons-with-the-same-shape-Adaptive-launcher-icons-are-also-used-in-shortcuts-the-Settings-app-sharing-dialogs-and-the-overview-screen-—-Android-developers" class="headerlink" title="Android 8.0 (API level 26) introduces adaptive launcher icons, which can display a variety of shapes across different device models. For example, an adaptive launcher icon can display a circular shape on one OEM device, and display a squircle on another device. Each device OEM provides a mask, which the system then uses to render all adaptive icons with the same shape. Adaptive launcher icons are also used in shortcuts, the Settings app, sharing dialogs, and the overview screen. — Android developers"></a>Android 8.0 (API level 26) introduces adaptive launcher icons, which can display a variety of shapes across different device models. For example, an adaptive launcher icon can display a circular shape on one OEM device, and display a squircle on another device. Each device OEM provides a mask, which the system then uses to render all adaptive icons with the same shape. Adaptive launcher icons are also used in shortcuts, the Settings app, sharing dialogs, and the overview screen. — <a href="https://developer.android.com/guide/practices/ui_guidelines/icon_design_adaptive" target="_blank" rel="noopener">Android developers</a></h1></blockquote>
<p>We are doing for production first, which means the main Res Directory. This step will replace the existing placeholder app icons generated by Android Studio when we bootstrapped React Native projects.</p>
<p><img src="https://cdn-images-1.medium.com/max/4528/1*kIYEWBrWMG_qOkY-LsWnxw.png" alt></p>
<p>Now that we have production app icons, let’s make staging app icons. Android manages code and assets via convention. Click on src -&gt; New -&gt; Directory and create a staging folder. Inside staging, create a folder called res . Anything we place in staging will replace the ones in main — this is called source sets.</p>
<p><img src="https://cdn-images-1.medium.com/max/3652/1*dAkYONFc86mHNXKnbPf2fA.png" alt></p>
<p>You can read more here: <a href="https://developer.android.com/studio/build/build-variants" target="_blank" rel="noopener">Build with source sets</a>.</p>
<blockquote>
<p>You can use source set directories to contain the code and resources you want packaged only with certain configurations. For example, if you are building the “demoDebug” build variant, which is the crossproduct of a “demo” product flavor and “debug” build type, Gradle looks at these directories, and gives them the following priority:<br>src/demoDebug/ <em>(build variant source set)</em><br>src/debug/ <em>(build type source set)</em><br>src/demo/ <em>(product flavor source set)</em><br>src/main/ <em>(main source set)</em></p>
</blockquote>
<p>Right click on staging/res -&gt; New -&gt; Image Asset to make app icons for staging. We also use the same staging app icons like in iOS, but this time we choose staging as Res Directory. This way Android Studio knows how to generate different ic_launcher and put them into staging.</p>
<p><img src="https://cdn-images-1.medium.com/max/4528/1*jKI8Erm57SGwZI2ylLaJ0w.png" alt></p>
<h3 id="Add-launch-screen-for-iOS"><a href="#Add-launch-screen-for-iOS" class="headerlink" title="Add launch screen for iOS"></a>Add launch screen for iOS</h3><p>The splash screen is called a [Launch Screen](<a href="http://Launch" target="_blank" rel="noopener">http://Launch</a> Screen) in iOS, and it is important.</p>
<blockquote>
<h1 id="A-launch-screen-appears-instantly-when-your-app-starts-up-The-launch-screen-is-quickly-replaced-with-the-first-screen-of-your-app-giving-the-impression-that-your-app-is-fast-and-responsive"><a href="#A-launch-screen-appears-instantly-when-your-app-starts-up-The-launch-screen-is-quickly-replaced-with-the-first-screen-of-your-app-giving-the-impression-that-your-app-is-fast-and-responsive" class="headerlink" title="A launch screen appears instantly when your app starts up. The launch screen is quickly replaced with the first screen of your app, giving the impression that your app is fast and responsive"></a>A launch screen appears instantly when your app starts up. The launch screen is quickly replaced with the first screen of your app, giving the impression that your app is fast and responsive</h1></blockquote>
<p>In the old days, we needed to use static launch images with different sizes for each device and orientation.</p>
<p><img src="https://cdn-images-1.medium.com/max/2912/1*gncLBHGa4ntt1a9NCLL_1g.png" alt></p>
<h3 id="Launch-Screen-storyboard"><a href="#Launch-Screen-storyboard" class="headerlink" title="Launch Screen storyboard"></a>Launch Screen storyboard</h3><p>For now the recommended way is to use Launch Screen storyboard . The iOS project from React Native comes with LaunchScreen.xib but xib is a thing of the past. Let’s delete it and create a file called Launch Screen.storyboard .</p>
<p>Right click on MyApp folder -&gt; New and chose Launch Screen, add it to both targets as usually we show the same splash screen for both staging and production.</p>
<p><img src="https://cdn-images-1.medium.com/max/5140/1*kfGNEVm_gJevBIziQ3iXbw.png" alt></p>
<p><img src="https://cdn-images-1.medium.com/max/2984/1*v0ZGfvbSFgljeW34PQsw7g.png" alt></p>
<h3 id="Image-Set"><a href="#Image-Set" class="headerlink" title="Image Set"></a>Image Set</h3><p>Open asset catalog, right click and select New Image Set . We can name it anything. This will be used in the Launch Screen.storyboard.</p>
<p><img src="https://cdn-images-1.medium.com/max/4496/1*WOAJ9Vr7fSqRSxwBwRb3qg.png" alt></p>
<p>Open Launch Screen.storyboard and add an UIImageView . If you are using Xcode 10, click the Library button in the upper right corner and choose Show Objects Library.</p>
<p><img src="https://cdn-images-1.medium.com/max/6720/1*I6hTPAW_L4fUbo8cTakXlg.png" alt></p>
<p>Set image for Image View, and make sure Content Mode is set to Aspect Filled, as this ensures that the image always covers the full screen (although it may be cropped). Then connect ImageView using constraints to the View, not the Safe Area. You do this by Control+drag from the Image View (splash) to the View.</p>
<p><img src="https://cdn-images-1.medium.com/max/5700/1*qdEg7IejnxG3Y0Uo1bpiCA.png" alt></p>
<h3 id="Constrains-without-margin"><a href="#Constrains-without-margin" class="headerlink" title="Constrains without margin"></a>Constrains without margin</h3><p>Click into each constraint and uncheck Relative to Margin. This makes our ImageView pin to the very edges of the view and with no margin at all.</p>
<p><img src="https://cdn-images-1.medium.com/max/6720/1*5AIBO-ZLXfiLGsk9P32nFw.png" alt></p>
<p>Now go to both targets and select Launch Screen.storyboard as Launch Screen File:</p>
<p><img src="https://cdn-images-1.medium.com/max/7168/1*SrrFr1lk7oIwc4QvdoJVxg.png" alt></p>
<p>On iOS, the launch screen is often cached, so you probably won’t see the changes. One way to avoid that is to delete the app and run it again.</p>
<h3 id="Add-a-launcher-theme-for-Android"><a href="#Add-a-launcher-theme-for-Android" class="headerlink" title="Add a launcher theme for Android"></a>Add a launcher theme for Android</h3><p>There are <a href="https://android.jlelse.eu/the-complete-android-splash-screen-guide-c7db82bce565" target="_blank" rel="noopener">several</a> <a href="https://android.jlelse.eu/right-way-to-create-splash-screen-on-android-e7f1709ba154" target="_blank" rel="noopener">ways</a> to add splash screen for Android, from using launcher themes, Splash Activity, and a timer. For me, a reasonable splash screen for Android should be a very minimal image.</p>
<p>As there are many Android devices with different ratios and resolutions, if you want to show a full screen splash image, it will probably not scale correctly for each device. This is just about UX.</p>
<p>For the splash screen, let’s use the launcher theme with splash_background.xml .</p>
<h3 id="Learn-about-Device-Metric"><a href="#Learn-about-Device-Metric" class="headerlink" title="Learn about Device Metric"></a>Learn about Device Metric</h3><p>There is no single splash image that suits all Android devices. A more logical approach is to create multiple splash images for all common resolutions in portrait and landscape. Or we can design a minimal splash image that works. You can find more info here: <a href="https://material.io/tools/devices/" target="_blank" rel="noopener">Device Metric</a>.</p>
<p><img src="https://cdn-images-1.medium.com/max/2000/1*VY5n-nyMet5xlgQyr_fWWw.png" alt></p>
<p><img src="https://cdn-images-1.medium.com/max/5940/1*491dzlEkHT3FvIuuLosGKg.png" alt></p>
<p>Here is how to add splash screen in 4 easy steps:</p>
<h3 id="Add-splash-image"><a href="#Add-splash-image" class="headerlink" title="Add splash image"></a>Add splash image</h3><p>We usually need a common splash screen for both staging and production. Drag an image into main/res/drawble . Android Studio seems to have a problem with recognising some jpg images for the splash screen, so it’s best to choose png images.</p>
<h3 id="Add-splash-background-xml"><a href="#Add-splash-background-xml" class="headerlink" title="Add splash_background.xml"></a>Add splash_background.xml</h3><p>Right click on drawable -&gt; New -&gt; Drawable resource file . Name it whatever you want — I choose splash_background.xml . Choose the root element as layer-list:</p>
<p><img src="https://cdn-images-1.medium.com/max/4170/1*rEa10WkfXx9VCBX_0sQK3A.png" alt></p>
<p><img src="https://cdn-images-1.medium.com/max/2000/1*FwCOuThRAGCZSWvdhVrfCw.png" alt></p>
<p>A [Layer List](<a href="http://Layer" target="_blank" rel="noopener">http://Layer</a> List) means “a Drawable that manages an array of other Drawables. These are drawn in array order, so the element with the largest index is drawn on top”. Here is how splash_background.xml looks like:</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;

&lt;!-- The android:opacity=”opaque” line — this is critical in preventing a flash of black as your theme transitions. --&gt;
&lt;layer-list xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    android:opacity=&quot;opaque&quot;&gt;

    &lt;!-- The background color, preferably the same as your normal theme --&gt;
    &lt;item android:drawable=&quot;@android:color/white&quot;/&gt;

    &lt;!-- Your splash image --&gt;
    &lt;item&gt;
        &lt;bitmap
            android:src=&quot;@drawable/iron_man&quot;
            android:gravity=&quot;center&quot;/&gt;

    &lt;/item&gt;

&lt;/layer-list&gt;</code></pre><p>Note that we point to our splash image we added earlier with android:src=”@drawable/iron_man”.</p>
<h3 id="Declare-style"><a href="#Declare-style" class="headerlink" title="Declare style"></a>Declare style</h3><p>Open styles.xml and add SplashTheme:</p>
<pre><code>&lt;style name=&quot;SplashTheme&quot; parent=&quot;Theme.AppCompat.NoActionBar&quot;&gt;
    &lt;item name=&quot;android:windowBackground&quot;&gt;@drawable/splash_background&lt;/item&gt;
&lt;/style&gt;</code></pre><h3 id="Use-SplashTheme"><a href="#Use-SplashTheme" class="headerlink" title="Use SplashTheme"></a>Use SplashTheme</h3><p>Go to Manifest.xml and change the theme of the the launcher activity, which has category android:name=”android.intent.category.LAUNCHER” . Change it to android:theme=”@style/SplashTheme” . For React Native, the launcher activity is usually MainActivity . Here is how Manifest.xml looks:</p>
<pre><code>&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    package=&quot;com.myapp&quot;&gt;

    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;
    &lt;uses-permission android:name=&quot;android.permission.SYSTEM_ALERT_WINDOW&quot;/&gt;

    &lt;application
      android:name=&quot;.MainApplication&quot;
      android:label=&quot;@string/app_name&quot;
      android:icon=&quot;@mipmap/ic_launcher&quot;
      android:allowBackup=&quot;false&quot;
      android:theme=&quot;@style/AppTheme&quot;&gt;
      &lt;activity
        android:name=&quot;.MainActivity&quot;
        android:label=&quot;@string/app_name&quot;
        android:configChanges=&quot;keyboard|keyboardHidden|orientation|screenSize&quot;
        android:theme=&quot;@style/SplashTheme&quot;
        android:windowSoftInputMode=&quot;adjustResize&quot;&gt;
        &lt;intent-filter&gt;
            &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;
            &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;
        &lt;/intent-filter&gt;
      &lt;/activity&gt;
      &lt;activity android:name=&quot;com.facebook.react.devsupport.DevSettingsActivity&quot; /&gt;
    &lt;/application&gt;

&lt;/manifest&gt;</code></pre><p>Run the app now and you should see the splash screen showing when the app starts.</p>
<h2 id="Managing-environment-configurations"><a href="#Managing-environment-configurations" class="headerlink" title="Managing environment configurations"></a>Managing environment configurations</h2><p>The differences between staging and production are just about app names, application ids, and app icons. We probably use different API keys, and backend URL for staging and production.</p>
<p>Right now the most popular library to handle these scenarios is <a href="https://github.com/luggit/react-native-config" target="_blank" rel="noopener">react-native-config</a>, which is said to “bring some 12 factor love to your mobile apps”. It requires lots of steps to get started, and I hope there is a less verbose solution.</p>
<h3 id="Where-to-go-from-here"><a href="#Where-to-go-from-here" class="headerlink" title="Where to go from here"></a>Where to go from here</h3><p>In this post, we touched Xcode and Android Studio more than Visual Studio Code, but this was inevitable. I hope this post was useful to you. Here are some more links to read more about this topic:</p>
<ul>
<li><a href="https://medium.com/@scottianstewart/react-native-add-app-icons-and-launch-screens-onto-ios-and-android-apps-3bfbc20b7d4c" target="_blank" rel="noopener">Add App Icons and Launch Screens to React Native Apps (iOS &amp; Android)</a></li>
<li><a href="https://medium.com/handlebar-labs/how-to-add-a-splash-screen-to-a-react-native-app-ios-and-android-30a3cec835ae" target="_blank" rel="noopener">How to Add a Splash Screen to a React Native App (iOS and Android)</a></li>
<li><a href="https://medium.com/differential/managing-configuration-in-react-native-cd2dfb5e6f7b" target="_blank" rel="noopener">Managing Configuration in React Native</a></li>
<li><a href="https://medium.com/@jacks205/adding-multiple-target-pipelines-for-react-native-apps-and-fastlane-circleci-deployment-pt-1-ae9590ae52f2" target="_blank" rel="noopener">Adding multiple target pipelines for React Native Apps (and Fastlane CircleCI deployment) pt. 1</a></li>
<li><a href="https://android.jlelse.eu/the-complete-android-splash-screen-guide-c7db82bce565" target="_blank" rel="noopener">The (Complete) Android Splash Screen Guide</a></li>
</ul>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/">javascript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/react-native/">react native</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-Make-Linear-Gradient-View-with-Bridging-in-React-Native"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-Make-Linear-Gradient-View-with-Bridging-in-React-Native/">How to Make Linear Gradient View with Bridging in React Native</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-Make-Linear-Gradient-View-with-Bridging-in-React-Native/" class="article-date">
	  <time datetime="2019-05-23T15:57:46.000Z" itemprop="datePublished">May 23, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/264" target="_blank" rel="noopener">#264</a></strong></p>
<p>Original post <a href="https://medium.com/react-native-training/react-native-bridging-how-to-make-linear-gradient-view-83c3805373b7" target="_blank" rel="noopener">https://medium.com/react-native-training/react-native-bridging-how-to-make-linear-gradient-view-83c3805373b7</a></p>
<hr>
<p>React Native lets us build mobile apps using only Javascript. It works by providing a common interface that talks to native iOS and Android components. There are enough essentials components to get started, but the cooler thing is that it is easy to build our own, hence we are not limited by React Native. In this post we will implement a linear gradient view, which is not supported by default in React Native, using native UI component, particularly CAGradientLayer in iOS and GradientDrawable in Android.</p>
<p>In Javascript there are hundreds of libraries for a single problem and you should check if you really need it or not. A search on Google for linear gradient shows a bunch of libraries, like <a href="https://github.com/react-native-community/react-native-linear-gradient" target="_blank" rel="noopener">react-native-linear-gradient</a>. The less <a href="https://medium.com/fantageek/what-is-create-react-native-app-9f3bc5a6c2a3" target="_blank" rel="noopener">dependencies</a> the better. Linear gradient is in fact very easy to build and we probably don’t need to add extra dependencies. Also <a href="https://dev.to/acro5piano/struggle-to-install-react-native-linear-gradient--2omm" target="_blank" rel="noopener">integrating</a> <a href="https://medium.com/react-native-training/fixing-react-native-issues-and-happy-deploy-to-bitrise-fabric-circleci-44da4ab1487b" target="_blank" rel="noopener">and</a> <a href="https://medium.com/react-native-training/firebase-sdk-with-firestore-for-react-native-apps-in-2018-aa89a67d6934" target="_blank" rel="noopener">following</a> <a href="https://medium.com/react-native-training/facebook-sdk-with-login-for-react-native-apps-in-2018-196601804f66" target="_blank" rel="noopener">updates</a> with 3rd libraries are painful, I would avoid that as much as possible.</p>
<p><img src="https://cdn-images-1.medium.com/max/2000/1*SZnOwVTr15PY7uHYqaeaXw.png" alt></p>
<h2 id="Native-UI-component-vs-Native-module"><a href="#Native-UI-component-vs-Native-module" class="headerlink" title="Native UI component vs Native module"></a>Native UI component vs Native module</h2><p>In React Native, there are native UI component and native module. React Native moves pretty fast so most of the articles will be outdated, it’s best to consult official documentation for the latest React Native version. This post will try to give you overview of the whole picture because for now the official guide seems not completed.</p>
<ul>
<li><p><a href="https://facebook.github.io/react-native/docs/native-modules-ios" target="_blank" rel="noopener">Native Modules in iOS</a></p>
</li>
<li><p><a href="https://facebook.github.io/react-native/docs/native-modules-android" target="_blank" rel="noopener">Native Modules in Android</a></p>
</li>
<li><p><a href="https://facebook.github.io/react-native/docs/native-components-ios" target="_blank" rel="noopener">Native UI Components in iOS</a></p>
</li>
<li><p><a href="https://facebook.github.io/react-native/docs/native-components-android" target="_blank" rel="noopener">Native UI Components in Android</a></p>
</li>
</ul>
<p>In simple explanation, native UI component is about making UIView in iOS or View in Android available as React.Component and used in render function in Javascript.</p>
<blockquote>
<p>There are tons of native UI widgets out there ready to be used in the latest apps — some of them are part of the platform, others are available as third-party libraries, and still more might be in use in your very own portfolio. React Native has several of the most critical platform components already wrapped, like ScrollView and TextInput, but not all of them, and certainly not ones you might have written yourself for a previous app.</p>
</blockquote>
<p>Native module is more general in that we make any native class available in Javascript.</p>
<blockquote>
<p>Sometimes an app needs access to platform API, and React Native doesn’t have a corresponding module yet. Maybe you want to reuse some existing Objective-C, Swift or C++ code without having to reimplement it in JavaScript, or write some high performance, multi-threaded code such as for image processing, a database, or any number of advanced extensions.</p>
</blockquote>
<h2 id="View-Manager"><a href="#View-Manager" class="headerlink" title="View Manager"></a>View Manager</h2><p>To expose native UI views, we use the ViewManager as the bridge, it is RCTViewManager in iOS and SimpleViewManager in Android. Then inside this ViewManager we can just return our custom view. I see it’s good to use Objective C/Java for the ViewManager to match React Native classes, and the custom view we can use either Swift/Objective C in iOS and Kotlin/Java in Android.</p>
<p>I prefer to use Swift, but in this post to remove the overhead of introducing bridging header from Swift to Objective C, we use Objective C for simplicity. We also add the native source code directly into iOS and Android project, but in the future we can extract them easily to a React Native library.</p>
<p>For now let ‘s use the name RNGradientViewManager and RNGradientView to stay consistent between iOS and Android. The RN prefix is arbitrary, you can use any prefix you want, but here I use it to indicate that these classes are meant to be used in Javascript side in React Native.</p>
<h2 id="Implement-in-iOS"><a href="#Implement-in-iOS" class="headerlink" title="Implement in iOS"></a>Implement in iOS</h2><h3 id="Project-structure"><a href="#Project-structure" class="headerlink" title="Project structure"></a>Project structure</h3><p>Add these Objective-C classes to the projects, I usually place them inside NativeComponents folder</p>
<p><img src="https://cdn-images-1.medium.com/max/2000/1*v9ecOYKhfHenOfFD_YyXjA.png" alt></p>
<blockquote>
<p>Native views are created and manipulated by subclasses of RCTViewManager. These subclasses are similar in function to view controllers, but are essentially singletons - only one instance of each is created by the bridge. They expose native views to the RCTUIManager, which delegates back to them to set and update the properties of the views as necessary. The RCTViewManagers are also typically the delegates for the views, sending events back to JavaScript via the bridge.</p>
</blockquote>
<h3 id="RNGradientViewManager"><a href="#RNGradientViewManager" class="headerlink" title="RNGradientViewManager"></a>RNGradientViewManager</h3><p>Create a RNGradientViewManager that inherits from RCTViewManager</p>
<p><strong>RNGradientViewManager.h</strong></p>
<pre><code>#import &lt;React/RCTViewManager.h&gt;
@interface RNGradientViewManager : RCTViewManager
@end</code></pre><p><strong>RNGradientViewManager.m</strong></p>
<pre><code>#import &quot;RNGradientViewManager.h&quot;
#import &quot;RNGradientView.h&quot;

[@implementation](http://twitter.com/implementation) RNGradientViewManager

RCT_EXPORT_MODULE()

- (UIView *)view {
  return [[RNGradientView alloc] init];
}

RCT_EXPORT_VIEW_PROPERTY(progress, NSNumber);
RCT_EXPORT_VIEW_PROPERTY(cornerRadius, NSNumber);
RCT_EXPORT_VIEW_PROPERTY(fromColor, UIColor);
RCT_EXPORT_VIEW_PROPERTY(toColor, UIColor);

[@end](http://twitter.com/end)</code></pre><p>In iOS we use macro RCT_EXPORT_MODULE() to automatically register the module with the bridge when it loads. The optional js_name argument will be used as the JS module name. If omitted, the JS module name will match the Objective-C class name.</p>
<pre><code>#define RCT_EXPORT_MODULE(js_name)</code></pre><p>The ViewManager, not the View, is the facade to the Javascript side, so we expose properties using RCT_EXPORT_VIEW_PROPERTY . Note that we do that inside @implementation RNGradientViewManager</p>
<p>Here we specify the types as NSNumber and UIColor , and later in Javascript we can just pass number and color hex string, and React Native can do the conversions for us. In older versions of React Native, we need processColor in Javascript or RCTConvert color in iOS side, but we don’t need to perform manual conversion now.</p>
<h3 id="RNGradientView"><a href="#RNGradientView" class="headerlink" title="RNGradientView"></a>RNGradientView</h3><p>In the Native UI component <a href="https://facebook.github.io/react-native/docs/native-components-ios" target="_blank" rel="noopener">example</a> for iOS, they use WKWebView but here we make a RNGradientView which subclasses from <a href="https://github.com/facebook/react-native/blob/master/React/Views/RCTView.h" target="_blank" rel="noopener">RCTView</a> to take advantage of many features of React Native views, and to avoid some problems we can get if using a normal UIView</p>
<p><strong>RNGradientView.h</strong></p>
<pre><code>#import &lt;UIKit/UIKit.h&gt;
#import &lt;React/RCTView.h&gt;

[@interface](http://twitter.com/interface) RNGradientView : RCTView

[@end](http://twitter.com/end)</code></pre><p><strong>RNGradientView.m</strong></p>
<pre><code>#import &quot;RNGradientView.h&quot;
#import &lt;UIKit/UIKit.h&gt;

[@interface](http://twitter.com/interface) RNGradientView()
[@property](http://twitter.com/property) CAGradientLayer *gradientLayer;

[@property](http://twitter.com/property) UIColor *_fromColor;
[@property](http://twitter.com/property) UIColor *_toColor;
[@property](http://twitter.com/property) NSNumber *_progress;
[@property](http://twitter.com/property) NSNumber *_cornerRadius;
[@end](http://twitter.com/end)

[@implementation](http://twitter.com/implementation) RNGradientView

// MARK: - Init

- (instancetype)initWithFrame:(CGRect)frame
{
  self = [super initWithFrame:frame];
  if (self) {
    self.gradientLayer = [self makeGradientLayer];
    [self.layer addSublayer:self.gradientLayer];

self._fromColor = [UIColor blackColor];
    self._toColor = [UIColor whiteColor];
    self._progress = [@0](http://twitter.com/0).5;

[self update];
  }
  return self;
}

// MARK: - Life cycle

- (void)layoutSubviews {
  [super layoutSubviews];

self.gradientLayer.frame = CGRectMake(
    0, 0,
    self.bounds.size.width*self._progress.floatValue,
    self.bounds.size.height
  );
}

// MARK: - Properties

- (void)setFromColor:(UIColor *)color {
  self._fromColor = color;
  [self update];
}

- (void)setToColor:(UIColor *)color {
  self._toColor = color;
  [self update];
}

- (void)setProgress:(NSNumber *)progress {
  self._progress = progress;
  [self update];
}

- (void)setCornerRadius:(NSNumber *)cornerRadius {
  self._cornerRadius = cornerRadius;
  [self update];
}

// MARK: - Helper

- (void)update {
  self.gradientLayer.colors = @[
    (id)self._fromColor.CGColor,
    (id)self._toColor.CGColor
  ];

self.gradientLayer.cornerRadius = self._cornerRadius.floatValue;

[self setNeedsLayout];
}

- (CAGradientLayer *)makeGradientLayer {
  CAGradientLayer *gradientLayer = [CAGradientLayer layer];

gradientLayer.masksToBounds = true;

gradientLayer.startPoint = CGPointMake(0.0, 0.5);
  gradientLayer.endPoint = CGPointMake(1.0, 0.5);
  gradientLayer.anchorPoint = CGPointZero;

return gradientLayer;
}

[@end](http://twitter.com/end)</code></pre><p>We can implement anything we want in this native view, in this case we use CAGradientLayer to get nicely displayed linear gradient. Since RNGradientViewManager exposes some properties like progress, cornerRadius, fromColor, toColor we need to implement some setters as they will be called by React Native when we update values in Javascript side. In the setter we call setNeedsLayout to tell the view to invalidate the layout, hence layoutSubviews will be called again.</p>
<h3 id="requireNativeComponent"><a href="#requireNativeComponent" class="headerlink" title="requireNativeComponent"></a>requireNativeComponent</h3><p>Open project in Visual Studio Code, add GradientView.js to src/nativeComponents . The folder name is arbitrary, but it’s good to stay organised.</p>
<pre><code>import { requireNativeComponent } from &apos;react-native&apos;

module.exports = requireNativeComponent(&apos;RNGradientView&apos;, null)</code></pre><p>Here we use <a href="https://github.com/facebook/react-native/blob/master/Libraries/ReactNative/requireNativeComponent.js" target="_blank" rel="noopener">requireNativeComponent</a> to load our RNGradientView . We only need this one Javascript file for interacting with both iOS and Android. You can name the module as RNGradientView but I think the practice in Javascript is that we don’t use prefix, so we name just GradientView .</p>
<pre><code>const requireNativeComponent = (uiViewClassName: string): string =&gt;
  createReactNativeComponentClass(uiViewClassName, () =&gt;
    getNativeComponentAttributes(uiViewClassName),
  );

module.exports = requireNativeComponent;</code></pre><p>Before I tried to use export default for the native component, but this way the view is not rendered at all, even if I wrap it inside React.Component . It seems we must use module.exports for the native component to be properly loaded.</p>
<p>Now using it is as easy as declare the GradientView with JSX syntax</p>
<pre><code>import GradientView from &apos;nativeComponents/GradientView&apos;

export default class Profile extends React.Component {
  render() {
    return (
      &lt;SafeAreaView style={styles.container}&gt;
        &lt;GradientView
          style={styles.progress}
          fromColor={R.colors.progress.from}
          toColor={R.colors.progress.to}
          cornerRadius={5.0}
          progress={0.8} /&gt;
    )
  }
}</code></pre><h2 id="Implement-in-Android"><a href="#Implement-in-Android" class="headerlink" title="Implement in Android"></a>Implement in Android</h2><h3 id="Project-structure-1"><a href="#Project-structure-1" class="headerlink" title="Project structure"></a>Project structure</h3><p>Add these Java classes to the projects, I usually place them inside nativeComponents folder</p>
<p><img src="https://cdn-images-1.medium.com/max/2000/1*7v9qtfOAGPF2lqvWrrOysg.png" alt></p>
<h3 id="RNGradientManager"><a href="#RNGradientManager" class="headerlink" title="RNGradientManager"></a>RNGradientManager</h3><p>Create a RNGradientManager that extends SimpleViewManager<br><strong>RNGradientManager.java</strong></p>
<pre><code>package com.onmyway133.myApp.nativeComponents;

import android.support.annotation.Nullable;
import com.facebook.react.uimanager.SimpleViewManager;
import com.facebook.react.uimanager.ThemedReactContext;
import com.facebook.react.uimanager.annotations.ReactProp;

public class RNGradientViewManager extends SimpleViewManager&lt;RNGradientView&gt; {
    [@Override](http://twitter.com/Override)
    public String getName() {
        return &quot;RNGradientView&quot;;
    }

[@Override](http://twitter.com/Override)
    protected RNGradientView createViewInstance(ThemedReactContext reactContext) {
        return new RNGradientView(reactContext);
    }

// Properties

[@ReactProp](http://twitter.com/ReactProp)(name = &quot;progress&quot;)
    public void setProgress(RNGradientView view, [@Nullable](http://twitter.com/Nullable) float progress) {
        view.setProgress(progress);
    }

[@ReactProp](http://twitter.com/ReactProp)(name = &quot;cornerRadius&quot;)
    public void setCornerRadius(RNGradientView view, [@Nullable](http://twitter.com/Nullable) float cornerRadius) {
        view.setCornerRadius(cornerRadius);
    }

[@ReactProp](http://twitter.com/ReactProp)(name = &quot;fromColor&quot;, customType = &quot;Color&quot;)
    public void setFromColor(RNGradientView view, [@Nullable](http://twitter.com/Nullable) int color) {
        view.setFromColor(color);
    }

[@ReactProp](http://twitter.com/ReactProp)(name = &quot;toColor&quot;, customType = &quot;Color&quot;)
    public void setToColor(RNGradientView view, [@Nullable](http://twitter.com/Nullable) int color) {
        view.setToColor(color);
    }
}</code></pre><p>We usually use <a href="https://developer.android.com/reference/android/graphics/Color" target="_blank" rel="noopener">Color</a> as android.graphics.Color , but for the GradientDrawable that we are going to use, it use color as ARGB integer. So it’s nifty that React Native deals with Color as int type. We also need to specify customType = “Color” as Color is something kinda custom.</p>
<h3 id="RNGradientView-1"><a href="#RNGradientView-1" class="headerlink" title="RNGradientView"></a>RNGradientView</h3><p>This is where we implement our view, we can do that in Kotlin if we like.</p>
<p><strong>RNGradientView.java</strong></p>
<pre><code>package com.onmyway133.myApp.nativeComponents;

import android.content.Context;
import android.graphics.drawable.GradientDrawable;
import android.graphics.drawable.ScaleDrawable;
import android.support.annotation.Nullable;
import android.util.AttributeSet;
import android.view.Gravity;
import android.view.View;

public class RNGradientView extends View {

    float progress;
    float cornerRadius;
    int fromColor;
    int toColor;

    public RNGradientView(Context context) {
        super(context);
    }

    public RNGradientView(Context context, @Nullable AttributeSet attrs) {
        super(context, attrs);
    }

    public RNGradientView(Context context, @Nullable AttributeSet attrs, int defStyleAttr) {
        super(context, attrs, defStyleAttr);
    }

    public RNGradientView(Context context, @Nullable AttributeSet attrs, int defStyleAttr, int defStyleRes) {
        super(context, attrs, defStyleAttr, defStyleRes);
    }

    // update

    void update() {
        GradientDrawable gradient = new GradientDrawable();
        gradient.setColors(new int[] {
            this.fromColor,
            this.toColor
        });
         gradient.setOrientation(GradientDrawable.Orientation.*LEFT_RIGHT*);
        gradient.setGradientType(GradientDrawable.*LINEAR_GRADIENT*);
        gradient.setShape(GradientDrawable.*RECTANGLE*);
        gradient.setCornerRadius(this.cornerRadius * 4);

        ScaleDrawable scale = new ScaleDrawable(gradient, Gravity.*LEFT*, 1, -1);
        scale.setLevel((int)(this.progress * 10000));

        this.setBackground(scale);
    }

    // Getter &amp; setter

    public void setProgress(float progress) {
        this.progress = progress;
        this.update();
    }

    public void setCornerRadius(float cornerRadius) {
        this.cornerRadius = cornerRadius;
        this.update();
    }

    public void setFromColor(int fromColor) {
        this.fromColor = fromColor;
        this.update();
    }

    public void setToColor(int toColor) {
        this.toColor = toColor;
        this.update();
    }
}</code></pre><p>Pay attention to the <a href="https://developer.android.com/reference/android/graphics/drawable/GradientDrawable.html#setColors(int[])" target="_blank" rel="noopener">setColors</a> as it use an array of int</p>
<blockquote>
<p>Sets the colors used to draw the gradient.<br>Each color is specified as an ARGB integer and the array must contain at least 2 colors.</p>
</blockquote>
<p>If we call setBackground with the GradientDrawable it will be stretched to fill the view. In our case we want to support progress which determines how long the gradient should show. To fix that we use <a href="https://developer.android.com/reference/android/graphics/drawable/ScaleDrawable" target="_blank" rel="noopener">ScaleDrawable</a> which is a Drawable that changes the size of another Drawable based on its current level value.</p>
<p>The same value for cornerRadius works in iOS, but for Android we need to use higher values, that’s why the multiplication in gradient.setCornerRadius(this.cornerRadius * 4)</p>
<h3 id="Shape-drawable"><a href="#Shape-drawable" class="headerlink" title="Shape drawable"></a>Shape drawable</h3><p>Another way to implement gradient is to use Shape Drawable with xml , it’s the equivalent of using xib in iOS. We can create something like gradient.xml and put that inside /res/drawable</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;shape xmlns:android=&quot;[http://schemas.android.com/apk/res/android](http://schemas.android.com/apk/res/android)&quot;
    android:shape=&quot;rectangle&quot;&gt;
    &lt;gradient
        android:startColor=&quot;#3B5998&quot;
        android:endColor=&quot;#00000000&quot;
        android:angle=&quot;45&quot;/&gt;    
&lt;/shape&gt;</code></pre><p>For more information, you can read<br><a href="https://android.jlelse.eu/android-shape-drawables-tutorial-17fbece6fef5" target="_blank" rel="noopener"><strong>Android Shape Drawables Tutorial</strong><br><em>Have you ever wanted to reduce your Android application’s size or make it look more interesting? If yes, then you…</em>android.jlelse.eu</a></p>
<p>We can also use the class directly <a href="https://developer.android.com/reference/android/graphics/drawable/ShapeDrawable" target="_blank" rel="noopener">ShapeDrawable</a> in code</p>
<blockquote>
<p>A Drawable object that draws primitive shapes. A ShapeDrawable takes a <a href="https://developer.android.com/reference/android/graphics/drawable/shapes/Shape.html" target="_blank" rel="noopener">Shape</a> object and manages its presence on the screen. If no Shape is given, then the ShapeDrawable will default to a <a href="https://developer.android.com/reference/android/graphics/drawable/shapes/RectShape.html" target="_blank" rel="noopener">RectShape</a>.<br>This object can be defined in an XML file with the <shape> element.</shape></p>
</blockquote>
<h3 id="GradientManagerPackage"><a href="#GradientManagerPackage" class="headerlink" title="GradientManagerPackage"></a>GradientManagerPackage</h3><p>In iOS we use RCT_EXPORT_MODULE to register the component, but in Android, things are done explicitly using Package . A package can register both native module and native UI component. In this case we deal with just UI component, so let’s return RNGradientManager in createViewManagers</p>
<p><strong>GradientManagerPackage.java</strong></p>
<pre><code>package com.onmyway133.myApp.nativeComponents;

import com.facebook.react.ReactPackage;
import com.facebook.react.bridge.NativeModule;
import com.facebook.react.bridge.ReactApplicationContext;
import com.facebook.react.uimanager.ViewManager;
import java.util.Arrays;
import java.util.Collections;
import java.util.List;

public class RNGradientViewPackage implements ReactPackage {
    [@Override](http://twitter.com/Override)
    public List&lt;NativeModule&gt; createNativeModules(ReactApplicationContext reactContext) {
        return Collections.emptyList();
    }

[@Override](http://twitter.com/Override)
    public List&lt;ViewManager&gt; createViewManagers(ReactApplicationContext reactContext) {
        return Arrays.&lt;ViewManager&gt;asList(
            new RNGradientViewManager()
        );
    }
}</code></pre><p>Then head over to MainApplication.java to declare our package</p>
<pre><code>[@Override](http://twitter.com/Override)
protected List&lt;ReactPackage&gt; getPackages() {
  return Arrays.&lt;ReactPackage&gt;asList(
      new MainReactPackage(),
      new RNGradientViewPackage()
  );
}</code></pre><p>That’s it for Android. We already have the GradientView.js written earlier, when running the app in Android, it will look up and load our RNGradientView</p>
<h2 id="Where-to-go-from-here"><a href="#Where-to-go-from-here" class="headerlink" title="Where to go from here"></a>Where to go from here</h2><p>Hope you learn something about native UI component. In the post we only touch the surfaces on what native UI component can do, which is just passing configurations from Javascript to native. There are a lot more to discover, like event handling, thread, styles, custom types, please consult the official documentation for correct guidance.</p>
<ul>
<li><a href="https://facebook.github.io/react-native/docs/native-components-ios" target="_blank" rel="noopener">Native UI Components for iOS</a></li>
<li><a href="https://facebook.github.io/react-native/docs/native-components-android" target="_blank" rel="noopener">Native UI Components for Android</a></li>
</ul>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/">javascript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/react-native/">react native</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-How-to-dismiss-keyboard-with-react-navigation-in-React-Native-apps"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/blog/How-to-dismiss-keyboard-with-react-navigation-in-React-Native-apps/">How to dismiss keyboard with react-navigation in React Native apps</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/blog/How-to-dismiss-keyboard-with-react-navigation-in-React-Native-apps/" class="article-date">
	  <time datetime="2019-05-23T15:57:01.000Z" itemprop="datePublished">May 23, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Issue <a href="https://github.com/onmyway133/blog/issues/263" target="_blank" rel="noopener">#263</a></strong></p>
<p>Original post <a href="https://medium.com/react-native-training/how-to-dismiss-keyboard-with-react-navigation-in-react-native-apps-4b987bbfdc48" target="_blank" rel="noopener">https://medium.com/react-native-training/how-to-dismiss-keyboard-with-react-navigation-in-react-native-apps-4b987bbfdc48</a></p>
<hr>
<p>Showing and dismiss keyboard seems like a trivial thing to do in mobile apps, but it can be tricky in automatically dismissing it when it comes together with react-navigation and modal presentation. At least that’s according to my initial assumption. This article aims to detail what I have learned about keyboard handling and how to avoid extra tap when dealing with TextInput There will also be lots of code spelunking, thanks to the all the libraries being open source. The version of React Native I’m using at the time of writing is 0.57.5</p>
<h2 id="The-built-in-TextInput-component"><a href="#The-built-in-TextInput-component" class="headerlink" title="The built in TextInput component"></a>The built in TextInput component</h2><p>React Native comes with a bunch of basic components, one of them is the <a href="https://facebook.github.io/react-native/docs/textinput" target="_blank" rel="noopener">TextInput</a> for inputting text into the app via a keyboard.</p>
<pre><code>import React, { Component } from &apos;react&apos;;
import { AppRegistry, TextInput } from &apos;react-native&apos;;

export default class UselessTextInput extends Component {
  constructor(props) {
    super(props);
    this.state = { text: &apos;Useless Placeholder&apos; };
  }

render() {
    return (
      &lt;TextInput
        style={{height: 40, borderColor: 'gray', borderWidth: 1}}
        onChangeText={(text) =&gt; this.setState({text})}
        value={this.state.text}
      /&gt;
    );
  }
}</code></pre><p>That’s it, whenever we click on the text input, keyboard appears allowing us to enter values. To dismiss the keyboard by pressing anywhere on the screen, the easy solution is to TouchableWithoutFeedback together with Keyboard . This is similar to having UITapGestureRecognizer in iOS UIView and calling view.endEditing</p>
<pre><code>import { Keyboard } from &apos;react-native&apos;

Keyboard.dismiss()</code></pre><h2 id="TextInput-inside-ScrollView"><a href="#TextInput-inside-ScrollView" class="headerlink" title="TextInput inside ScrollView"></a>TextInput inside ScrollView</h2><p>Normally we should have some text inputs inside a scrolling component, in React Native that is mostly ScrollView to be able to handle long list of content and avoid keyboard. If TextInput is inside ScrollView then the way keyboard gets dismissed behaves a bit differently, and depends on <a href="https://facebook.github.io/react-native/docs/scrollview#keyboardshouldpersisttaps" target="_blank" rel="noopener">keyboardShouldPersistTaps</a></p>
<p>Determines when the keyboard should stay visible after a tap.</p>
<ul>
<li><p>‘never’ (the default), tapping outside of the focused text input when the keyboard is up dismisses the keyboard. When this happens, children won’t receive the tap.</p>
</li>
<li><p>‘always’, the keyboard will not dismiss automatically, and the scroll view will not catch taps, but children of the scroll view can catch taps.</p>
</li>
<li><p>‘handled’, the keyboard will not dismiss automatically when the tap was handled by a children, (or captured by an ancestor).</p>
</li>
</ul>
<p>The never mode should be the desired behaviour in most cases, clicking anywhere outside the focused text input should dismiss the keyboard.</p>
<p>In my app, there are some text inputs and an action button. The scenario is that users enter some infos and then press that button to register data. With the never mode, we have to press button twice, one for dismissing the keyboard, and two for the onPress of the Button . So the solution is to use always mode. This way the Button always gets the press event first.</p>
<pre><code>&lt;ScrollView keyboardShouldPersistTaps=&apos;always&apos; /&gt;</code></pre><h2 id="ScrollView-cares-about-keyboard"><a href="#ScrollView-cares-about-keyboard" class="headerlink" title="ScrollView cares about keyboard"></a>ScrollView cares about keyboard</h2><p>The native RCTScrollView class that power react native ScrollView has code to handle dismiss mode</p>
<pre><code>RCT_SET_AND_PRESERVE_OFFSET(setKeyboardDismissMode, keyboardDismissMode, UIScrollViewKeyboardDismissMode)</code></pre><p>The option that it chooses is UIScrollViewKeyboardDismissMode for <a href="https://developer.apple.com/documentation/uikit/uiscrollview/1619437-keyboarddismissmode" target="_blank" rel="noopener">keyboardDismissMode</a> property</p>
<blockquote>
<p>The manner in which the keyboard is dismissed when a drag begins in the scroll view.</p>
</blockquote>
<p>As you can see, the possible modes are onDrag and interactive . And react native exposes customization point for this via keyboardShouldPersistTaps</p>
<p><a href="https://developer.apple.com/documentation/uikit/uiscrollview/keyboarddismissmode/none" target="_blank" rel="noopener">case none</a> The keyboard does not get dismissed with a drag.</p>
<p><a href="https://developer.apple.com/documentation/uikit/uiscrollview/keyboarddismissmode/ondrag" target="_blank" rel="noopener">case onDrag</a> The keyboard is dismissed when a drag begins.</p>
<p><a href="https://developer.apple.com/documentation/uikit/uiscrollview/keyboarddismissmode/interactive" target="_blank" rel="noopener">case interactive</a> The keyboard follows the dragging touch offscreen, and can be pulled upward again to cancel the dismiss.</p>
<h2 id="ScrollView-inside-a-Modal"><a href="#ScrollView-inside-a-Modal" class="headerlink" title="ScrollView inside a Modal"></a>ScrollView inside a Modal</h2><p>But that does not work when ScrollView is inside <a href="https://facebook.github.io/react-native/docs/modal.html" target="_blank" rel="noopener">Modal</a> . By Modal I meant the <a href="https://facebook.github.io/react-native/docs/modal.html" target="_blank" rel="noopener">Modal</a> component in React Native. The only library that I use is react-navigation , and it supports <a href="https://reactnavigation.org/docs/en/modal.html" target="_blank" rel="noopener">Opening a full-screen modal</a> too, but they way we declare modal in react-navigation looks like stack and it is confusing, so I would rather not use it. I use Modal in react-native and that works pretty well.</p>
<p>So if we have TextInput inside ScrollView inside Modal then keyboardShouldPersistTaps does not work. Modal seems to be aware of parent ScrollView so we have to declare keyboardShouldPersistTaps=’always’ on every parent ScrollView . In React Native FlatList and SectionList uses ScrollView under the hood, so we need to be aware of all those ScrollView components.</p>
<h2 id="Spelunking-react-navigation"><a href="#Spelunking-react-navigation" class="headerlink" title="Spelunking react-navigation"></a>Spelunking react-navigation</h2><p>Since my app relies heavily on react-navigation , it’s good to have a deep understanding about its components so we make sure where the problem lies. I’ve written a bit about react-navigation structure below.<br><a href="https://codeburst.io/using-react-navigation-3-0-in-react-native-apps-38cd5020fbbe" target="_blank" rel="noopener"><strong>Using react-navigation 3.0 in React Native apps</strong><br><em>react-navigation is probably the only dependency I use in React Native apps. I’m happy with it so far, then version 3.0…</em>codeburst.io</a></p>
<p>Like every traditional mobile apps, my app consists of many stack navigators inside tab navigator. In iOS that means many UINavigationViewController inside UITabbarController . In react-navigation I use createMaterialTopTabNavigator inside createBottomTabNavigator</p>
<pre><code>import { createMaterialTopTabNavigator } from &apos;react-navigation&apos;
import { createBottomTabNavigator, BottomTabBar } from &apos;react-navigation-tabs&apos;</code></pre><p>The screen I have keyboard issue is a Modal presented from the 2nd screen in one of the stack navigators, so let’s examine every possible ScrollView up the hierarchy. This process involves lots of code reading and this’s how I love open source.</p>
<p>First let’s start with <a href="https://github.com/react-navigation/react-navigation-tabs/blob/master/src/navigators/createBottomTabNavigator.js" target="_blank" rel="noopener">createBottomTabNavigator</a> which uses <a href="https://github.com/react-navigation/react-navigation-tabs/blob/master/src/utils/createTabNavigator.js" target="_blank" rel="noopener">createTabNavigator</a> together with its own TabNavigationView</p>
<pre><code>class TabNavigationView extends React.PureComponent&lt;Props, State&gt;

export default createTabNavigator(TabNavigationView);</code></pre><p>Tab navigator has tab bar view below ScreenContainer , which is used to contain view. ScreenContainer is from <a href="https://github.com/kmagiera/react-native-screens" target="_blank" rel="noopener">react-native-screens</a> “This project aims to expose native navigation container components to React Native”. Below is how tab navigator works.</p>
<pre><code>render() {
  const { navigation, renderScene, lazy } = this.props;
  const { routes } = navigation.state;
  const { loaded } = this.state
  return (
    &lt;View style={styles.container}&gt;
      &lt;ScreenContainer style={styles.pages}&gt;
        {routes.map((route, index) =&gt; {
          if (lazy &amp;&amp; !loaded.includes(index)) {
            // Don&apos;t render a screen if we&apos;ve never navigated to it
            return null;

          const isFocused = navigation.state.index === index
          return (
            &lt;ResourceSavingScene
              key={route.key}
              style={StyleSheet.absoluteFill}
              isVisible={isFocused}
            &gt;
              {renderScene({ route })}
            &lt;/ResourceSavingScene&gt;
          );
        })}
      &lt;/ScreenContainer&gt;
      {this._renderTabBar()}
    &lt;/View&gt;
  );
}</code></pre><p>Tab bar is rendered using <a href="https://github.com/react-navigation/react-navigation-tabs/blob/master/src/views/BottomTabBar.js" target="_blank" rel="noopener">BottomTabBar</a> in _renderTabBar function. Looking at the code, the whole tab navigator has nothing to do with ScrollView .</p>
<p>So there is only <a href="https://github.com/react-navigation/react-navigation-tabs/blob/master/src/navigators/createMaterialTopTabNavigator.js" target="_blank" rel="noopener">createMaterialTopTabNavigator</a> left on the suspecting list. I use it in the app with swipeEnabled: true . And by looking at the imports, top tab navigator has</p>
<pre><code>import MaterialTopTabBar, {  type TabBarOptions,} from &apos;../views/MaterialTopTabBar&apos;;</code></pre><p><a href="https://github.com/react-navigation/react-navigation-tabs/blob/master/src/views/MaterialTopTabBar.js" target="_blank" rel="noopener">MaterialTopTabBar</a> has import from <a href="https://github.com/react-native-community/react-native-tab-view/blob/master/src/TabBar.js" target="_blank" rel="noopener">react-native-tab-view</a></p>
<pre><code>import { TabBar } from &apos;react-native-tab-view&apos;;</code></pre><p>which has ScrollView</p>
<pre><code>&lt;View style={styles.scroll}&gt;
  &lt;Animated.ScrollView
    horizontal
    keyboardShouldPersistTaps=&quot;handled&quot;</code></pre><p>The property keyboardShouldPersistTaps was initial set to always , then set back to <a href="https://github.com/react-native-community/react-native-tab-view/commit/e00bd021158a9ca6ad6f1ad0578303f0fdedb9e6#diff-9c1d42ef76323a8c67bd25bccfea6132" target="_blank" rel="noopener">handled</a> to avoid the bug that we can’t press any button in tab bar while keyboard is open <a href="https://github.com/react-native-community/react-native-tab-view/issues/375" target="_blank" rel="noopener">https://github.com/react-native-community/react-native-tab-view/issues/375</a></p>
<p>But this TabBar has nothing with our problem, because it’s just for containing tab bar buttons.</p>
<h2 id="Swiping-in-createMaterialTopTabNavigator"><a href="#Swiping-in-createMaterialTopTabNavigator" class="headerlink" title="Swiping in createMaterialTopTabNavigator"></a>Swiping in createMaterialTopTabNavigator</h2><p>Taking another look at <a href="https://github.com/react-navigation/react-navigation-tabs/blob/master/src/navigators/createMaterialTopTabNavigator.js" target="_blank" rel="noopener">createMaterialTopTabNavigator</a> we see more imports from react-native-tab-view</p>
<pre><code>import { TabView, PagerPan } from &apos;react-native-tab-view&apos;;</code></pre><p>TabView has swipeEnabled passed in</p>
<pre><code>return (
  &lt;TabView
    {...rest}
    navigationState={navigation.state}
    animationEnabled={animationEnabled}
    swipeEnabled={swipeEnabled}
    onAnimationEnd={this._handleAnimationEnd}
    onIndexChange={this._handleIndexChange}
    onSwipeStart={this._handleSwipeStart}
    renderPager={renderPager}
    renderTabBar={this._renderTabBar}
    renderScene={
      /* $FlowFixMe */
      this._renderScene
    }
  /&gt;
);</code></pre><p>and it renders <a href="https://github.com/react-native-community/react-native-tab-view/blob/8b463fc31d/src/PagerDefault.js" target="_blank" rel="noopener">PagerDefault</a>, which in turn uses PagerScroll for iOS</p>
<pre><code>import { Platform } from &apos;react-native&apos;;

let Pager;

switch (Platform.OS) {
  case &apos;android&apos;:
    Pager = require(&apos;./PagerAndroid&apos;).default;
    break;
  case &apos;ios&apos;:
    Pager = require(&apos;./PagerScroll&apos;).default;
    break;
  default:
    Pager = require(&apos;./PagerPan&apos;).default;
    break;
}

export default Pager;</code></pre><p>So <a href="https://github.com/react-native-community/react-native-tab-view/blob/8b463fc31d/src/PagerScroll.js" target="_blank" rel="noopener">PagerScroll</a> uses ScrollView to handle scrolling to match material style that user can scroll between pages, and it has keyboardShouldPersistTaps=”always” which should be correct.</p>
<pre><code>return (
  &lt;ScrollView
    horizontal
    pagingEnabled
    directionalLockEnabled
    keyboardDismissMode=&quot;on-drag&quot;
    keyboardShouldPersistTaps=&quot;always&quot;</code></pre><p>So nothing looks suspicious in react-navigation , which urges me to look at code from my project.</p>
<h2 id="Debugging-FlatList-SectionList-and-ScrollView"><a href="#Debugging-FlatList-SectionList-and-ScrollView" class="headerlink" title="Debugging FlatList, SectionList and ScrollView"></a>Debugging FlatList, SectionList and ScrollView</h2><p>Like I stated in the beginning of this article, the root problem is that we need to declare keyboardShouldPersistTaps for all parent ScrollView in the hierarchy. That means to look out for any FlatList, SectionList and ScrollView</p>
<p>Luckily, there is react-devtools that shows tree of all rendered components in react app, and that is also guided in <a href="https://facebook.github.io/react-native/docs/debugging.html" target="_blank" rel="noopener">Debugging</a> section of react native.</p>
<p>You can use <a href="https://github.com/facebook/react-devtools/tree/master/packages/react-devtools" target="_blank" rel="noopener">the standalone version of React Developer Tools</a> to debug the React component hierarchy. To use it, install the react-devtools package globally:</p>
<pre><code>npm install -g react-devtools</code></pre><p>So after searching I found out that there is a SectionList up the hierarchy that should have keyboardShouldPersistTaps=’always’ while it didn’t.</p>
<p><img src="https://cdn-images-1.medium.com/max/7168/1*RDNnY3yKYpgxdaXi4bGUTg.png" alt></p>
<p>Taking a thorough look at the code, I found out that the Modal is trigged from a SectionList item. We already know that triggering Modal in react native means that to embed that Modal inside the view hierarchy and control its visibility via a state. So in terms of view and component, that Modal is inside a SectionList . And for your interest, if you dive deep into react native code, SectionList in my case is just VirtualizedSectionList , which is VirtualizedList, which uses ScrollView</p>
<p>So after I declare keyboardShouldPersistTaps=’always’ in that SectionList , the problem is solved. User can now just enters some values in the text inputs, then press once on the submit button to submit data. The button now captures touch events first instead of scrollview.</p>
<h2 id="Where-to-go-from-here"><a href="#Where-to-go-from-here" class="headerlink" title="Where to go from here"></a>Where to go from here</h2><p>The solution for this is fortunately simple as it involves fixing our code without having to alter react-navigation code. But it’s good to look at the library code to know what it does, and to trace where the problem originates. Thanks for following such long exploring and hope you learn something.</p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/">javascript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/react-native/">react native</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/6/">Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><a class="page-number" href="/page/6/">6</a><span class="page-number current">7</span><a class="page-number" href="/page/8/">8</a><a class="page-number" href="/page/9/">9</a><span class="space">&hellip;</span><a class="page-number" href="/page/14/">14</a><a class="extend next" rel="next" href="/page/8/">Next</a>
  </nav>

</section>
          <aside id="sidebar">
  
    <div class="widget-wrap" style="margin: 20px 0;">
	<div id="search-form-wrap">

    <form class="search-form">
        <label style="width: 75%;">
            <span class="screen-reader-text">Search for:</span>
            <input type="search" class="search-field" style="height: 42px;" placeholder=" Search…" value="" name="s" title="Search for:">
        </label>
        <input type="submit" class="search-form-submit" value="Search">
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="Type something..."/>
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'Posts',
            PAGES: 'Pages',
            CATEGORIES: 'Categories',
            TAGS: 'Tags',
            UNTITLED: '(Untitled)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="/js/insight.js"></script>

</div>
</div>
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Ohayou</h3>
    <div class="widget widget_athemes_social_icons">

    	<ul class="clearfix widget-social-icons">   
    	
          
     			  <li><a href="https://github.com/onmyway133" title="Github"><i class="fa fa-github" aria-hidden="true"></i></a></li> 
          
   		
          
     			  <li><a href="https://twitter.com/onmyway133" title="Twitter"><i class="fa fa-twitter" aria-hidden="true"></i></a></li> 
          
   		
          
            <li><a href="mailto:onmyway133@gmail.com?subject=Hello&body=World" title="email"><i class="fa fa-envelope" aria-hidden="true"></i></a></li> 
          
   		
   		</ul>


   		<!--
   		<ul class="clearfix widget-social-icons">   		
   		<li class="widget-si-twitter"><a href="http://twitter.com" title="Twitter"><i class="ico-twitter"></i></a></li> 
		<li class="widget-si-facebook"><a href="http://facebook.com" title="Facebook"><i class="ico-facebook"></i></a></li>
			<li class="widget-si-gplus"><a href="http://plus.google.com" title="Google+"><i class="ico-gplus"></i></a></li>
			<li class="widget-si-pinterest"><a href="http://pinterest.com" title="Pinterest"><i class="ico-pinterest"></i></a></li>
			<li class="widget-si-flickr"><a href="http://flickr.com" title="Flickr"><i class="ico-flickr"></i></a></li>
			<li class="widget-si-instagram"><a href="http://instagram.com" title="Instagram"><i class="ico-instagram"></i></a></li>
		</ul> -->

    </div>
  </div>


  
    
  <div class="widget_athemes_tabs">
    <ul id="widget-tab" class="clearfix widget-tab-nav">
      <li class="active"><a>Recent Posts</a></li>
    </ul>
    <div class="widget">
      <ul>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="/blog/How-to-edit-hexo-theme-hiero/">How to edit hexo theme hiero</a></h6>
              <span>November 6, 2019</span>
            </div>

          </li>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="/blog/How-to-use-Firebase-RemoteConfig/">How to use Firebase RemoteConfig</a></h6>
              <span>November 5, 2019</span>
            </div>

          </li>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="/blog/How-to-apply-translations-to-Localizable.strings/">How to apply translations to Localizable.strings</a></h6>
              <span>November 5, 2019</span>
            </div>

          </li>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="/blog/How-to-use-CreateML-to-classify-images/">How to use CreateML to classify images</a></h6>
              <span>November 4, 2019</span>
            </div>

          </li>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="/blog/How-to-use-Firebase-AutoML-Vision-Edge-to-classify-images/">How to use Firebase AutoML Vision Edge to classify images</a></h6>
              <span>November 4, 2019</span>
            </div>

          </li>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="/blog/How-to-use-Google-AutoML-to-classify-images/">How to use Google AutoML to classify images</a></h6>
              <span>November 4, 2019</span>
            </div>

          </li>
        
      </ul>
    </div>
  </div>

  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/android/">android</a><span class="tag-list-count">32</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ci/">ci</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cloud/">cloud</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cocoapods/">cocoapods</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/combine/">combine</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/css/">css</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/dart/">dart</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/design/">design</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/electron/">electron</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/firebase/">firebase</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/flutter/">flutter</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/github/">github</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/iOS/">iOS</a><span class="tag-list-count">102</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/javascript/">javascript</a><span class="tag-list-count">32</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/kotlin/">kotlin</a><span class="tag-list-count">23</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/life/">life</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/macOS/">macOS</a><span class="tag-list-count">47</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/machine-learning/">machine learning</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/node/">node</a><span class="tag-list-count">9</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/objc/">objc</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/react/">react</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/react-native/">react native</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/script/">script</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/swift/">swift</a><span class="tag-list-count">148</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/swiftUI/">swiftUI</a><span class="tag-list-count">14</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tech/">tech</a><span class="tag-list-count">13</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/testing/">testing</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/watchOS/">watchOS</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/web/">web</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/xcode/">xcode</a><span class="tag-list-count">4</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/android/" style="font-size: 17.69px;">android</a> <a href="/tags/ci/" style="font-size: 10px;">ci</a> <a href="/tags/cloud/" style="font-size: 10.77px;">cloud</a> <a href="/tags/cocoapods/" style="font-size: 10px;">cocoapods</a> <a href="/tags/combine/" style="font-size: 10px;">combine</a> <a href="/tags/css/" style="font-size: 10px;">css</a> <a href="/tags/dart/" style="font-size: 11.54px;">dart</a> <a href="/tags/design/" style="font-size: 10px;">design</a> <a href="/tags/electron/" style="font-size: 11.54px;">electron</a> <a href="/tags/firebase/" style="font-size: 10.77px;">firebase</a> <a href="/tags/flutter/" style="font-size: 11.54px;">flutter</a> <a href="/tags/github/" style="font-size: 10px;">github</a> <a href="/tags/iOS/" style="font-size: 19.23px;">iOS</a> <a href="/tags/javascript/" style="font-size: 17.69px;">javascript</a> <a href="/tags/kotlin/" style="font-size: 16.92px;">kotlin</a> <a href="/tags/life/" style="font-size: 11.54px;">life</a> <a href="/tags/macOS/" style="font-size: 18.46px;">macOS</a> <a href="/tags/machine-learning/" style="font-size: 10.77px;">machine learning</a> <a href="/tags/node/" style="font-size: 14.62px;">node</a> <a href="/tags/objc/" style="font-size: 10px;">objc</a> <a href="/tags/react/" style="font-size: 10px;">react</a> <a href="/tags/react-native/" style="font-size: 13.08px;">react native</a> <a href="/tags/script/" style="font-size: 10.77px;">script</a> <a href="/tags/swift/" style="font-size: 20px;">swift</a> <a href="/tags/swiftUI/" style="font-size: 16.15px;">swiftUI</a> <a href="/tags/tech/" style="font-size: 15.38px;">tech</a> <a href="/tags/testing/" style="font-size: 12.31px;">testing</a> <a href="/tags/watchOS/" style="font-size: 13.85px;">watchOS</a> <a href="/tags/web/" style="font-size: 10px;">web</a> <a href="/tags/xcode/" style="font-size: 11.54px;">xcode</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>

    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a><span class="archive-list-count">49</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a><span class="archive-list-count">50</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a><span class="archive-list-count">42</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a><span class="archive-list-count">39</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a><span class="archive-list-count">22</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a><span class="archive-list-count">23</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a><span class="archive-list-count">14</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a><span class="archive-list-count">14</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a><span class="archive-list-count">12</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a><span class="archive-list-count">18</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a><span class="archive-list-count">15</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a><span class="archive-list-count">36</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a><span class="archive-list-count">6</span></li></ul>
    </div>
  </div>


  
</aside>
        
      </div>
      <footer id="footer" class="site-footer">
  

  <div class="clearfix container">
      <div class="site-info">
	      &copy; 2019 onmyway133 All Rights Reserved.
          
      </div>
      <div class="site-credit">
        Theme by <a href="https://github.com/iTimeTraveler/hexo-theme-hiero" target="_blank">hiero</a>
      </div>
  </div>
</footer>


<!-- min height -->

<script>
    var contentdiv = document.getElementById("content");

    contentdiv.style.minHeight = document.body.offsetHeight - document.getElementById("allheader").offsetHeight - document.getElementById("footer").offsetHeight + "px";
</script>

<!-- Custome JS -->
<script src="/js/my.js"></script>
    </div>
    <!-- <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/about/" class="mobile-nav-link">About</a>
  
    <a href="/writing/" class="mobile-nav-link">Writing</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/speaking/" class="mobile-nav-link">Speaking</a>
  
    <a href="/opensource/" class="mobile-nav-link">Open Source</a>
  
    <a href="/projects/" class="mobile-nav-link">Projects</a>
  
    <a href="/news/" class="mobile-nav-link">News</a>
  
    <a href="/gumroad/" class="mobile-nav-link">Gumroad</a>
  
    <a href="/atom.xml" class="mobile-nav-link">RSS</a>
  
</nav> -->
    

<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>



  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.js"></script>


<script src="/js/scripts.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script src="/js/main.js"></script>













  </div>

  <a id="rocket" href="#top" class=""></a>
  <script type="text/javascript" src="/js/totop.js" async=""></script>
</body>
</html>
